<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ç–ª–∞–¥–∫–∞ —Å–µ–∫—Ç–æ—Ä–æ–≤ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .code {
            background: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .copy-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px 0;
        }
        .copy-btn:hover {
            background: #0056b3;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        .test-results {
            background: #e9ecef;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>üîç –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ–∫—Ç–æ—Ä–∞–º–∏</h1>

    <div class="warning">
        <strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> –°–µ–∫—Ç–æ—Ä 1–° —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ —Å–µ–∫—Ç–æ—Ä–∞ PDM, Bitrix24, Infrastructure –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω.
    </div>

    <h2>üìã –®–∞–≥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:</h2>

    <div class="step">
        <h3>–®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞</h3>
        <p>–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –Ω–∞–∂–º–∏—Ç–µ F12 ‚Üí –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console</p>
    </div>

    <div class="step">
        <h3>–®–∞–≥ 2: –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —Å–µ–∫—Ç–æ—Ä—É PDM</h3>
        <p>–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —Å–µ–∫—Ç–æ—Ä—É PDM —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–µ–∫—Ç–æ—Ä–æ–≤</p>
        <p><em>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ—è–≤—è—Ç—Å—è –ª–æ–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ–∫—Ç–æ—Ä–∞</em></p>
    </div>

    <div class="step">
        <h3>–®–∞–≥ 3: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏</h3>
        <button class="copy-btn" onclick="copyQuickTest()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç</button>
        <div class="code" id="quickTestCode">
// –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π
console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª–µ–π...');

// –ü—Ä–æ–≤–µ—Ä—è–µ–º Vue.js
if (typeof window !== 'undefined' && window.Vue) {
    console.log('‚úÖ Vue.js –∑–∞–≥—Ä—É–∂–µ–Ω');
} else {
    console.log('‚ùå Vue.js –Ω–µ –Ω–∞–π–¥–µ–Ω');
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
if (window.location.pathname.includes('rest_api_aps')) {
    console.log('‚úÖ –ù–∞—Ö–æ–¥–∏–º—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Bitrix24');
} else {
    console.log('‚ùì –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞');
}

console.log('üéØ –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —Å–µ–∫—Ç–æ—Ä—É PDM –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏');</div>
    </div>

    <div class="step">
        <h3>–®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ–∫—Ç–æ—Ä–∞ PDM</h3>
        <p>–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–µ–∫—Ç–æ—Ä—É PDM –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:</p>
        <div class="test-results">
[SectorDashboard] üöÄ Mounted for sector: pdm (PDM)
[SectorDashboard] üì° Starting data load for sector: pdm
[SectorPDMService] getSectorData called with options: {}
[SectorPDMService] Returning test data: { stages: 3, employees: 3, totalTickets: 3 }
[UniversalSectorDashboardService] Returning dashboard data for pdm: { stages: 3, employees: 3, totalTickets: 3 }
[SectorDashboard] ‚úÖ Data loaded successfully for sector: pdm
        </div>
    </div>

    <div class="step">
        <h3>–®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DEBUG –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ</h3>
        <p>–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–µ–∫—Ç–æ—Ä–∞ PDM –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è DEBUG –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</p>
        <div class="test-results">
DEBUG: stages.length = 3, isLoading = false, error =
        </div>
        <p><strong>–ï—Å–ª–∏ stages.length = 0</strong> - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö</p>
        <p><strong>–ï—Å–ª–∏ isLoading = true</strong> - –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è</p>
        <p><strong>–ï—Å–ª–∏ –µ—Å—Ç—å error</strong> - –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>
    </div>

    <div class="step">
        <h3>–®–∞–≥ 6: –°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
        <p>–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —Å–æ–æ–±—â–∏—Ç–µ:</p>
        <ul>
            <li>–ö–∞–∫–∏–µ –ª–æ–≥–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –∫–æ–Ω—Å–æ–ª–∏?</li>
            <li>–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç DEBUG –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è?</li>
            <li>–í–∏–¥–µ–Ω –ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç —Å–µ–∫—Ç–æ—Ä–∞ –∏–ª–∏ –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω?</li>
        </ul>
    </div>

    <h2>üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:</h2>

    <div class="step">
        <h3>–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π</h3>
        <button class="copy-btn" onclick="copyModuleTest()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç –º–æ–¥—É–ª–µ–π</button>
        <div class="code" id="moduleTestCode">
// –¢–µ—Å—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π
async function testModules() {
    try {
        console.log('üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª–µ–π...');

        // –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–º–ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–æ–≤
        const { UniversalSectorDashboardFactory } = await import('./src/services/universal-sector-dashboard-service.js');
        console.log('‚úÖ UniversalSectorDashboardFactory –∑–∞–≥—Ä—É–∂–µ–Ω');

        // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
        const service = UniversalSectorDashboardFactory.getService('pdm');
        console.log('‚úÖ –°–µ—Ä–≤–∏—Å PDM —Å–æ–∑–¥–∞–Ω');

        // –¢–µ—Å—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö
        const data = await service.getSectorDashboardData();
        console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', {
            stages: data.stages?.length || 0,
            employees: data.employees?.length || 0,
            totalTickets: data.metadata?.totalTickets || 0
        });

    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:', error);
    }
}

testModules();</div>
    </div>

    <script>
        function copyQuickTest() {
            const code = document.getElementById('quickTestCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            });
        }

        function copyModuleTest() {
            const code = document.getElementById('moduleTestCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            });
        }
    </script>
</body>
</html>