# üîå API Endpoints

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-17 14:50 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** üü¢ –ê–∫—Ç–∏–≤–µ–Ω

---

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ API endpoints –ø—Ä–æ–µ–∫—Ç–∞. –ö–∞–∂–¥—ã–π endpoint —è–≤–ª—è–µ—Ç—Å—è —Ç–æ–Ω–∫–∏–º —Å–ª–æ–µ–º (—Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞), –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞–º –º–æ–¥—É–ª—è `WebhookLogs` –∏–ª–∏ –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–∞–º.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API endpoints

### üîî –í–µ–±—Ö—É–∫–∏ Bitrix24

#### `webhook-handler.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å—Ö–æ–¥—è—â–∏—Ö –≤–µ–±—Ö—É–∫–æ–≤ –æ—Ç Bitrix24  
**–ú–µ—Ç–æ–¥:** POST  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- https://context7.com/bitrix24/rest/webhook/
- https://apidocs.bitrix24.ru/rest_help/general/webhooks/index.php

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
1. –í Bitrix24 –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Å—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫
2. –£–∫–∞–∂–∏—Ç–µ URL: `https://your-domain.com/api/webhook-handler.php`
3. Bitrix24 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç —Ç–æ–∫–µ–Ω ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ `webhook-secret.php`

**–ú–æ–¥—É–ª—å:** `WebhookLogs\Service\WebhookHandlerService`

---

#### `webhook-logs.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–≥–æ–≤ –≤–µ–±—Ö—É–∫–æ–≤  
**–ú–µ—Ç–æ–¥:** GET  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (tasks, smart-processes, errors)
- `event` ‚Äî —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è
- `date` ‚Äî –¥–∞—Ç–∞ (YYYY-MM-DD)
- `hour` ‚Äî —á–∞—Å (0-23)
- `ip` ‚Äî IP-–∞–¥—Ä–µ—Å
- `status` ‚Äî —Å—Ç–∞—Ç—É—Å (success, error)
- `dateFrom` ‚Äî –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞
- `dateTo` ‚Äî –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞
- `page` ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `limit` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π

**–ú–æ–¥—É–ª—å:** `WebhookLogs\Service\WebhookLogsApiService`

---

#### `webhook-realtime.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Server-Sent Events (SSE) –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
**–ú–µ—Ç–æ–¥:** GET  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `last_timestamp` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π timestamp

**–ú–æ–¥—É–ª—å:** `WebhookLogs\Service\WebhookRealtimeService`

---

### üìä –î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–°

#### `get-sector-data.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞ 1–° –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞  
**–ú–µ—Ç–æ–¥:** GET  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `useCache` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à (true/false, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è cron-—Å–∫—Ä–∏–ø—Ç–∞–º–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞ 1–°
- ID —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∞: 140
- –°—Ç–∞–¥–∏–∏: –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ, –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó, –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
- –¢–µ–≥ —Å–µ–∫—Ç–æ—Ä–∞: 1C

---

### üìà –ì—Ä–∞—Ñ–∏–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞ 1–°

#### `graph-1c-admission-closure.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°  
**–ú–µ—Ç–æ–¥:** POST  
**–ö–æ–Ω—Ç—Ä–∞–∫—Ç (TASK-041-02):**
- –ù–µ–¥–µ–ª—è ISO-8601 (–ø–Ω‚Äì–≤—Å), —Ä–∞—Å—á—ë—Ç –≤ UTC
- `product=1C` —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º —à–∞–≥–æ–º
- –ó–∞–∫—Ä—ã–≤–∞—é—â–∏–µ —Å—Ç–∞–¥–∏–∏: `DT140_12:SUCCESS`, `DT140_12:FAIL`, `DT140_12:UC_0GBU8Z`
- –û—Ç–≤–µ—Ç: `meta + data` (newTickets, closedTickets, series, stages, responsible)

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "start": "2025-12-01T00:00:00Z",
  "end": "2025-12-07T23:59:59Z"
}
```

---

### üì∏ –°–ª–µ–ø–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### `snapshots.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª–µ–ø–∫–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞  
**–ú–µ—Ç–æ–¥—ã:** GET, POST  
**–û–ø–µ—Ä–∞—Ü–∏–∏:**
- `POST` —Å `action=create` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–µ–ø–∫–∞
- `GET` —Å `action=get&date=...&type=...` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ª–µ–ø–∫–∞
- `GET` —Å `action=list&startDate=...&endDate=...` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–ø–∫–æ–≤

**–¢–∏–ø—ã —Å–ª–µ–ø–∫–æ–≤:**
- `week-start` ‚Äî –Ω–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏
- `week-end` ‚Äî –∫–æ–Ω–µ—Ü –Ω–µ–¥–µ–ª–∏

---

#### `create-snapshot-week-start.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–µ–ø–∫–∞ –Ω–∞—á–∞–ª–∞ –Ω–µ–¥–µ–ª–∏  
**–ú–µ—Ç–æ–¥:** POST  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í—ã–∑—ã–≤–∞–µ—Ç—Å—è cron-—Å–∫—Ä–∏–ø—Ç–æ–º –≤ –Ω–∞—á–∞–ª–µ –Ω–µ–¥–µ–ª–∏

---

#### `create-snapshot-week-end.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–µ–ø–∫–∞ –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏  
**–ú–µ—Ç–æ–¥:** POST  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í—ã–∑—ã–≤–∞–µ—Ç—Å—è cron-—Å–∫—Ä–∏–ø—Ç–æ–º –≤ –∫–æ–Ω—Ü–µ –Ω–µ–¥–µ–ª–∏

---

#### `snapshot-helpers.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª–µ–ø–∫–∞–º–∏  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª–µ–ø–∫–∞–º–∏

---

### ‚è±Ô∏è –£—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏

#### `tickets-time-tracking-sector-1c.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** API –¥–ª—è —É—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ —Ç–∏–∫–µ—Ç–∞–º —Å–µ–∫—Ç–æ—Ä–∞ 1–°  
**–ú–µ—Ç–æ–¥:** GET/POST  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —É—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏

---

### üß™ –¢–µ—Å—Ç–æ–≤—ã–µ endpoints

#### `test-task-detail.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–µ—Å—Ç–æ–≤—ã–π endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ—Ç–∞–ª–µ–π —Ç–∏–∫–µ—Ç–∞  
**–ú–µ—Ç–æ–¥:** GET  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

#### `test-time-tracking-debug.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–µ—Å—Ç–æ–≤—ã–π endpoint –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —É—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏  
**–ú–µ—Ç–æ–¥:** GET  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

### üîß –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

#### `bitrix24.php`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Bitrix24 API  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ endpoints

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü—Ä–∏–Ω—Ü–∏–ø —Ç–æ–Ω–∫–æ–≥–æ —Å–ª–æ—è

–í—Å–µ API endpoints —è–≤–ª—è—é—Ç—Å—è **—Ç–æ–Ω–∫–∏–º–∏ —Å–ª–æ—è–º–∏** (—Ç–æ—á–∫–∞–º–∏ –≤—Ö–æ–¥–∞), –∫–æ—Ç–æ—Ä—ã–µ:
1. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã
2. –í–∞–ª–∏–¥–∏—Ä—É—é—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –î–µ–ª–µ–≥–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞–º –º–æ–¥—É–ª—è `WebhookLogs` –∏–ª–∏ –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–∞–º
4. –§–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç –æ—Ç–≤–µ—Ç—ã

### –ú–æ–¥—É–ª—å WebhookLogs

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ endpoints –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–¥—É–ª—å `WebhookLogs`:
- `WebhookHandlerService` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤
- `WebhookLogsApiService` ‚Äî —á—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤
- `WebhookRealtimeService` ‚Äî —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è:** `/src/WebhookLogs/README.md`

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ endpoints –¥–æ–ª–∂–Ω—ã:
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –í–µ–±—Ö—É–∫–∏

–î–ª—è –≤–µ–±—Ö—É–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏:
- –¢–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `webhook-secret.php`
- –ü–æ–¥–ø–∏—Å—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ `WebhookHandlerService`

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:
- [–ú–æ–¥—É–ª—å WebhookLogs](../src/WebhookLogs/README.md)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](../DOCS/ARCHITECTURE/)
- [API-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏](../DOCS/API-REFERENCES/)
- [Bitrix24 REST API](../DOCS/API-REFERENCES/bitrix24-rest-api.md)

### –ó–∞–¥–∞—á–∏:
- TASK-003: –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö –≤–µ–±—Ö—É–∫–æ–≤ Bitrix24
- TASK-018: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥—É–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤
- TASK-041-02: –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
- `test-webhook-endpoint.sh` ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞
- `test-realtime-endpoint.sh` ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ SSE
- `check-webhook-logs.php` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤–µ–±—Ö—É–∫–æ–≤

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- **2025-12-17 14:50 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω README –¥–ª—è API endpoints

---

**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0


