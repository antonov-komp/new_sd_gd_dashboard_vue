# ะะตัะฐะฝะธะทะผ ะฟัะพะฒะตัะบะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ REST ะฟัะธะปะพะถะตะฝะธะธ

**ะะฐัะฐ ัะพะทะดะฐะฝะธั:** 2025-12-23 08:11 (UTC+3, ะัะตัั)  
**ะะตััะธั:** 1.0  
**ะกัะฐััั:** ๐ข ะะบัะธะฒะตะฝ  
**ะขะธะฟ ะดะพะบัะผะตะฝัะฐ:** ะััะธัะตะบัััะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

---

## ๐ฏ ะะฐะทะฝะฐัะตะฝะธะต ะดะพะบัะผะตะฝัะฐ

ะญัะพั ะดะพะบัะผะตะฝั ะพะฟะธััะฒะฐะตั, ะบะฐะบ ะธะผะตะฝะฝะพ ะฟัะธะปะพะถะตะฝะธะต ะพะฟัะตะดะตะปัะตั, ะบัะพ ะตะณะพ ะพัะบััะป, ะธ ะฟัะพะฒะตััะตั ะฟัะฐะฒะฐ ะดะพัััะฟะฐ ะฟะพะปัะทะพะฒะฐัะตะปั. ะะพะบัะผะตะฝั ะพะฑัััะฝัะตั ะผะตัะฐะฝะธะทะผ ะฐััะตะฝัะธัะธะบะฐัะธะธ ะธ ะฐะฒัะพัะธะทะฐัะธะธ ะฒ ะบะพะฝัะตะบััะต Bitrix24 REST ะฟัะธะปะพะถะตะฝะธั.

---

## ๐ ะะณะปะฐะฒะปะตะฝะธะต

1. [ะะฑัะฐั ััะตะผะฐ ะฟัะพะฒะตัะบะธ ะฟะพะปัะทะพะฒะฐัะตะปั](#ะพะฑัะฐั-ััะตะผะฐ-ะฟัะพะฒะตัะบะธ-ะฟะพะปัะทะพะฒะฐัะตะปั)
2. [ะะฟัะตะดะตะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ](#ะพะฟัะตะดะตะปะตะฝะธะต-ะฟะพะปัะทะพะฒะฐัะตะปั-ะธะฝัะตััะตะนัะฐ)
3. [ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะดะพัััะฟะฐ](#ะฟัะพะฒะตัะบะฐ-ะฟัะฐะฒ-ะดะพัััะฟะฐ)
4. [ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะฐะดะผะธะฝะธัััะฐัะพัะฐ](#ะฟัะพะฒะตัะบะฐ-ะฟัะฐะฒ-ะฐะดะผะธะฝะธัััะฐัะพัะฐ)
5. [Fallback ะผะตัะฐะฝะธะทะผั](#fallback-ะผะตัะฐะฝะธะทะผั)
6. [ะะพะฝัะธะณััะฐัะธั ะดะพัััะฟะฐ](#ะบะพะฝัะธะณััะฐัะธั-ะดะพัััะฟะฐ)
7. [ะะพัะพะบ ะฟัะพะฒะตัะบะธ ะฟัะธ ะทะฐะณััะทะบะต ัััะฐะฝะธัั](#ะฟะพัะพะบ-ะฟัะพะฒะตัะบะธ-ะฟัะธ-ะทะฐะณััะทะบะต-ัััะฐะฝะธัั)

---

## ๐๏ธ ะะฑัะฐั ััะตะผะฐ ะฟัะพะฒะตัะบะธ ะฟะพะปัะทะพะฒะฐัะตะปั

### ะััะธัะตะบัััะฝะฐั ััะตะผะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั ะฟัะธะปะพะถะตะฝะธะต                          โ
โ  https://back.kompo.by/rest_api_aps/sd_it_gen_plan/index.php โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
                        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Vue.js ะฟัะธะปะพะถะตะฝะธะต ะทะฐะณััะถะฐะตััั                              โ
โ  - main.js ะธะฝะธัะธะฐะปะธะทะธััะตั ะฟัะธะปะพะถะตะฝะธะต                        โ
โ  - ะะพััะตั ะพะฟัะตะดะตะปัะตั ะผะฐััััั                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
                        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  IndexPage.vue ะผะพะฝัะธััะตััั                                  โ
โ  - onMounted() ะฒัะทัะฒะฐะตััั                                    โ
โ  - ะัะทัะฒะฐะตั AccessControlService.checkAccess()               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
                        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  AccessControlService.checkAccess()                          โ
โ  1. ะัะพะฒะตััะตั ะบะพะฝัะตะบัั (ะฒะฝัััะธ Bitrix24?)                   โ
โ  2. ะะฝะธัะธะฐะปะธะทะธััะตั Bitrix24 API (BX24.init)                  โ
โ  3. ะะพะปััะฐะตั ะธะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
        โโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโ
        โผ                               โผ
โโโโโโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโโโโโ
โ  BX24 API        โ          โ  ะัะพะบัะธ API      โ
โ  (ะฟัะธะพัะธัะตั)     โ          โ  (fallback)      โ
โ                  โ          โ                  โ
โ  BX24.callMethod โ          โ  api/bitrix24.phpโ
โ  ('user.current')โ          โ  โ CRest::call()  โ
โโโโโโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโโโโโ
        โ                               โ
        โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโ
                        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะพะปััะตะฝะฐ ะธะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต                         โ
โ  - ID ะฟะพะปัะทะพะฒะฐัะตะปั                                           โ
โ  - UF_DEPARTMENT (ID ะพัะดะตะปะพะฒ)                               โ
โ  - ะะผั, ะคะฐะผะธะปะธั, Email ะธ ั.ะด.                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
                        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะฟะพ ID ะพัะดะตะปะพะฒ                             โ
โ  - isDepartmentAllowed(deptId)                              โ
โ  - ะัะพะฒะตัะบะฐ ะฟัะพัะธะฒ access-config.js                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
        โโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโ
        โผ                               โผ
โโโโโโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโโโโโ
โ  ะะพัััะฟ ัะฐะทัะตััะฝ โ          โ  ะะพัััะฟ ะทะฐะฟัะตััะฝ โ
โ  - ะะพะบะฐะทัะฒะฐะตะผ UI โ          โ  - ะะพะบะฐะทัะฒะฐะตะผ    โ
โ  - ะะฐะณััะถะฐะตะผ     โ          โ    ัะพะพะฑัะตะฝะธะต ะพะฑ  โ
โ    ะดะฐะฝะฝัะต        โ          โ    ะพัะธะฑะบะต        โ
โโโโโโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะะฟัะตะดะตะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ

### ะะฒะฐ ััะตะฝะฐัะธั ะพัะบัััะธั ะฟัะธะปะพะถะตะฝะธั

ะัะธะปะพะถะตะฝะธะต ะผะพะถะตั ะพัะบััะฒะฐัััั **ะดะฒัะผั ัะฟะพัะพะฑะฐะผะธ**, ะธ ะพั ััะพะณะพ ะทะฐะฒะธัะธั, ะบะฐะบ ะพะฟัะตะดะตะปัะตััั ะฟะพะปัะทะพะฒะฐัะตะปั:

#### ะกัะตะฝะฐัะธะน 1: ะัะบัััะธะต ะฒ iframe ะฒะฝัััะธ Bitrix24

**URL:** ะัะธะปะพะถะตะฝะธะต ะพัะบััะฒะฐะตััั ัะตัะตะท ะธะฝัะตััะตะนั Bitrix24 (placement, ะฒะธะดะถะตั, ะฒะบะปะฐะดะบะฐ)

**ะะฐะบ ะพะฟัะตะดะตะปัะตััั:**
- ะัะธะปะพะถะตะฝะธะต ะทะฐะณััะถะฐะตััั ะฒะฝัััะธ iframe Bitrix24
- ะกะบัะธะฟั `//api.bitrix24.com/api/v1/` ะทะฐะณััะถะฐะตััั ะธ ะฟัะตะดะพััะฐะฒะปัะตั ะพะฑัะตะบั `BX24`
- `BX24.callMethod('user.current')` ะฒะพะทะฒัะฐัะฐะตั **ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ** (ัะพะณะพ, ะบัะพ ะพัะบััะป ะฟัะธะปะพะถะตะฝะธะต)

**ะัะธะผะตั:**
```
ะะพะปัะทะพะฒะฐัะตะปั "ะะฒะฐะฝ ะะฒะฐะฝะพะฒ" ะพัะบััะฒะฐะตั ะฟัะธะปะพะถะตะฝะธะต ะฒ Bitrix24
โ BX24 API ะพะฟัะตะดะตะปัะตั: ะะฒะฐะฝ ะะฒะฐะฝะพะฒ (ID: 123, ะพัะดะตะปั: [369, 366])
โ ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะฒัะฟะพะปะฝัะตััั ะดะปั ะะฒะฐะฝะฐ ะะฒะฐะฝะพะฒะฐ
```

#### ะกัะตะฝะฐัะธะน 2: ะััะผะพะต ะพัะบัััะธะต ะฒ ะฑัะฐัะทะตัะต

**URL:** `https://back.kompo.by/rest_api_aps/sd_it_gen_plan/index.php` (ะฟััะผะฐั ัััะปะบะฐ)

**ะะฐะบ ะพะฟัะตะดะตะปัะตััั:**
- ะัะธะปะพะถะตะฝะธะต ะพัะบััะฒะฐะตััั ะฝะฐะฟััะผัั ะฒ ะฑัะฐัะทะตัะต (ะฝะต ะฒ iframe)
- `BX24` API ะผะพะถะตั ะฑััั ะฝะตะดะพัััะฟะตะฝ (ัะบัะธะฟั ะฝะต ะทะฐะณััะถะฐะตััั ะธะปะธ CORS ะฑะปะพะบะธััะตั)
- ะัะฟะพะปัะทัะตััั ะฟัะพะบัะธ API ัะตัะตะท `api/bitrix24.php`
- ะัะพะบัะธ API ะฒะพะทะฒัะฐัะฐะตั **ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ** (ัะพะณะพ, ะบัะพ ัััะฐะฝะพะฒะธะป ะฟัะธะปะพะถะตะฝะธะต)

**ะัะธะผะตั:**
```
ะะพะปัะทะพะฒะฐัะตะปั "ะะตัั ะะตััะพะฒ" ะพัะบััะฒะฐะตั ะฟัะธะปะพะถะตะฝะธะต ะฝะฐะฟััะผัั ะฒ ะฑัะฐัะทะตัะต
โ BX24 API ะฝะตะดะพัััะฟะตะฝ (standalone ัะตะถะธะผ)
โ ะัะพะบัะธ API ะพะฟัะตะดะตะปัะตั: ะะปะฐะดะตะปะตั ัะพะบะตะฝะฐ (ID: 456, ะพัะดะตะปั: [369])
โ ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะฒัะฟะพะปะฝัะตััั ะดะปั ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ, ะฐ ะฝะต ะดะปั ะะตััะฐ ะะตััะพะฒะฐ
```

**โ๏ธ ะะฐะถะฝะพ:** ะัะธ ะฟััะผะพะผ ะพัะบัััะธะธ ะฒ ะฑัะฐัะทะตัะต ะฟัะธะปะพะถะตะฝะธะต ะฝะต ะผะพะถะตั ะพะฟัะตะดะตะปะธัั, ะบัะพ ะธะผะตะฝะฝะพ ะพัะบััะป ะตะณะพ. ะะฝะพ ะฒัะตะณะดะฐ ะฑัะดะตั ะฟะพะบะฐะทัะฒะฐัั ะดะฐะฝะฝัะต ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ ัััะฐะฝะพะฒะบะธ.

### ะัะธะพัะธัะตั ะผะตัะพะดะพะฒ ะพะฟัะตะดะตะปะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั

ะัะธะปะพะถะตะฝะธะต ะธัะฟะพะปัะทัะตั **ะดะฒะฐ ะผะตัะพะดะฐ** ะดะปั ะพะฟัะตะดะตะปะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั, ั ะฟัะธะพัะธัะตัะพะผ:

#### 1. BX24 API (ะฟัะธะพัะธัะตั) โ ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ

**ะะพะณะดะฐ ะธัะฟะพะปัะทัะตััั:**
- ะัะธะปะพะถะตะฝะธะต ะพัะบัััะพ ะฒะฝัััะธ Bitrix24 iframe
- ะะพัััะฟะตะฝ ะพะฑัะตะบั `BX24` (ะทะฐะณััะถะตะฝ ัะบัะธะฟั `//api.bitrix24.com/api/v1/`)

**ะะฐะบ ัะฐะฑะพัะฐะตั:**

```javascript
// 1. ะะฝะธัะธะฐะปะธะทะฐัะธั Bitrix24 API
await BX24.init();

// 2. ะัะทะพะฒ ะผะตัะพะดะฐ user.current
const user = await BX24.callMethod('user.current', {});
```

**ะงัะพ ะฒะพะทะฒัะฐัะฐะตั:**
- ะะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต, ะบะพัะพััะน **ะพัะบััะป ะฟัะธะปะพะถะตะฝะธะต ะฒ ะธะฝัะตััะตะนัะต Bitrix24**
- ะญัะพ ะผะพะถะตั ะฑััั ะปัะฑะพะน ะฟะพะปัะทะพะฒะฐัะตะปั Bitrix24, ะบะพัะพััะน ะฐะฒัะพัะธะทะพะฒะฐะฝ ะฒ ะฑัะฐัะทะตัะต
- **ะะฐะฑะพัะฐะตั ัะพะปัะบะพ ะฟัะธ ะพัะบัััะธะธ ะฒ iframe ะฒะฝัััะธ Bitrix24**

**ะะตัะพะด Bitrix24 REST API:**
- `user.current` โ ะฟะพะปััะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพ ัะตะบััะตะผ ะฟะพะปัะทะพะฒะฐัะตะปะต
- ะะพะบัะผะตะฝัะฐัะธั: https://context7.com/bitrix24/rest/user.current

**ะัะธะผะตั ะพัะฒะตัะฐ:**
```json
{
  "ID": "123",
  "NAME": "ะะฒะฐะฝ",
  "LAST_NAME": "ะะฒะฐะฝะพะฒ",
  "FIRST_NAME": "ะะฒะฐะฝ",
  "EMAIL": "ivan@example.com",
  "UF_DEPARTMENT": [369, 366],
  "ACTIVE": true
}
```

#### 2. ะัะพะบัะธ API (fallback) โ ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ

**ะะพะณะดะฐ ะธัะฟะพะปัะทัะตััั:**
- BX24 API ะฝะตะดะพัััะฟะตะฝ (CORS, ัะฐะนะผะฐัั, ะพัะธะฑะบะฐ)
- ะัะธะปะพะถะตะฝะธะต ัะฐะฑะพัะฐะตั ะฒ standalone ัะตะถะธะผะต (ะฝะต ะฒ iframe)

**ะะฐะบ ัะฐะฑะพัะฐะตั:**

```javascript
// 1. Vue.js ะพัะฟัะฐะฒะปัะตั ะทะฐะฟัะพั ะบ ะฟัะพะบัะธ
fetch('/api/bitrix24.php', {
  method: 'POST',
  body: JSON.stringify({
    method: 'user.current',
    params: {}
  })
});

// 2. api/bitrix24.php ะฒัะทัะฒะฐะตั CRest::call()
$result = CRest::call('user.current', []);

// 3. CRest ะธัะฟะพะปัะทัะตั ัะพะบะตะฝ ะธะท settings.json
// 4. ะะพะทะฒัะฐัะฐะตั ะธะฝัะพัะผะฐัะธั ะพ ะฒะปะฐะดะตะปััะต ัะพะบะตะฝะฐ ัััะฐะฝะพะฒะบะธ ะฟัะธะปะพะถะตะฝะธั
```

**ะงัะพ ะฒะพะทะฒัะฐัะฐะตั:**
- ะะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต, ะบะพัะพััะน **ัััะฐะฝะพะฒะธะป ะฟัะธะปะพะถะตะฝะธะต** (ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ OAuth)
- ะญัะพ ะฒัะตะณะดะฐ ะพะดะธะฝ ะธ ัะพั ะถะต ะฟะพะปัะทะพะฒะฐัะตะปั, ะฝะตะทะฐะฒะธัะธะผะพ ะพั ัะพะณะพ, ะบัะพ ะพัะบััะป ะฟัะธะปะพะถะตะฝะธะต

**โ๏ธ ะัะธัะธัะฝะพ:** ะัะพะบัะธ API ะฒะพะทะฒัะฐัะฐะตั ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ, ะฐ ะฝะต ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ. 

**ะะพัะปะตะดััะฒะธั:**
- ะัะธ ะพัะบัััะธะธ ะฒ iframe Bitrix24: โ ะะพััะตะบัะฝะพ ะพะฟัะตะดะตะปัะตััั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ
- ะัะธ ะฟััะผะพะผ ะพัะบัััะธะธ ะฒ ะฑัะฐัะทะตัะต: โ ะะฟัะตะดะตะปัะตััั ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ, ะฐ ะฝะต ัะพั, ะบัะพ ะพัะบััะป ะฟัะธะปะพะถะตะฝะธะต

**ะัะธะผะตั ะฟัะพะฑะปะตะผั:**
```
1. ะัะธะปะพะถะตะฝะธะต ัััะฐะฝะพะฒะธะป "ะะฒะฐะฝ ะะฒะฐะฝะพะฒ" (ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ, ID: 123, ะพัะดะตะปั: [369])
2. "ะะตัั ะะตััะพะฒ" (ID: 456, ะพัะดะตะปั: [366]) ะพัะบััะฒะฐะตั ะฟัะธะปะพะถะตะฝะธะต ะฝะฐะฟััะผัั ะฒ ะฑัะฐัะทะตัะต
3. ะัะพะบัะธ API ะฒะพะทะฒัะฐัะฐะตั: ะะฒะฐะฝ ะะฒะฐะฝะพะฒ (ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ)
4. ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะฒัะฟะพะปะฝัะตััั ะดะปั ะะฒะฐะฝะฐ ะะฒะฐะฝะพะฒะฐ, ะฐ ะฝะต ะดะปั ะะตััะฐ ะะตััะพะฒะฐ
5. ะัะปะธ ั ะะตััะฐ ะะตััะพะฒะฐ ะฝะตั ะดะพัััะฟะฐ, ะฝะพ ะพะฝ ะพัะบััะป ะฟัะธะปะพะถะตะฝะธะต ะฝะฐะฟััะผัั - ะพะฝ ัะฒะธะดะธั ะดะฐะฝะฝัะต ะะฒะฐะฝะฐ ะะฒะฐะฝะพะฒะฐ
```

**ะะตะบะพะผะตะฝะดะฐัะธั:** ะะปั ะบะพััะตะบัะฝะพะน ัะฐะฑะพัั ะฟัะพะฒะตัะบะธ ะดะพัััะฟะฐ ะฟัะธะปะพะถะตะฝะธะต ะดะพะปะถะฝะพ ะพัะบััะฒะฐัััั **ัะพะปัะบะพ ัะตัะตะท ะธะฝัะตััะตะนั Bitrix24** (iframe), ะฐ ะฝะต ะฝะฐะฟััะผัั ะฒ ะฑัะฐัะทะตัะต.

---

## ๐ ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะดะพัััะฟะฐ

### ะัะพัะตัั ะฟัะพะฒะตัะบะธ ะดะพัััะฟะฐ

ะะพัะปะต ะฟะพะปััะตะฝะธั ะธะฝัะพัะผะฐัะธะธ ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต, ะฟัะธะปะพะถะตะฝะธะต ะฟัะพะฒะตััะตั ะตะณะพ ะฟัะฐะฒะฐ ะดะพัััะฟะฐ:

#### 1. ะัะพะฒะตัะบะฐ ะฝะฐะปะธัะธั ะฟะพะปัะทะพะฒะฐัะตะปั

```javascript
if (!user || !user.ID) {
  return new AccessCheckResult(
    false,
    AccessErrorCodes.USER_NOT_DETERMINED,
    'ะะต ัะดะฐะปะพัั ะพะฟัะตะดะตะปะธัั ะฟะพะปัะทะพะฒะฐัะตะปั'
  );
}
```

#### 2. ะัะพะฒะตัะบะฐ ะฟัะธะฒัะทะบะธ ะบ ะพัะดะตะปั

```javascript
const departmentIds = user.UF_DEPARTMENT || [];

if (!Array.isArray(departmentIds) || departmentIds.length === 0) {
  return new AccessCheckResult(
    false,
    AccessErrorCodes.ACCESS_DENIED,
    'ะะพัััะฟ ะทะฐะฟัะตััะฝ. ะะพะปัะทะพะฒะฐัะตะปั ะฝะต ะฟัะธะฒัะทะฐะฝ ะบ ะพัะดะตะปั.'
  );
}
```

#### 3. ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะฟะพ ID ะพัะดะตะปะพะฒ

```javascript
// ะัะพะฒะตััะตะผ, ะตััั ะปะธ ัะพัั ะฑั ะพะดะธะฝ ะพัะดะตะป ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ัะฟะธัะบะต ัะฐะทัะตััะฝะฝัั
const hasAccess = departmentIds.some(deptId => 
  isDepartmentAllowed(deptId)
);
```

**ะคัะฝะบัะธั `isDepartmentAllowed()`:**
```javascript
export function isDepartmentAllowed(departmentId) {
  if (!departmentId || typeof departmentId !== 'number') {
    return false;
  }
  
  return accessConfig.allowedDepartmentIds.includes(departmentId);
}
```

---

## ๐ ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะฐะดะผะธะฝะธัััะฐัะพัะฐ

### ะัะพัะตัั ะฟัะพะฒะตัะบะธ ะฐะดะผะธะฝะธัััะฐัะพัะฐ

ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะฐะดะผะธะฝะธัััะฐัะพัะฐ ะฒัะฟะพะปะฝัะตััั ะพัะดะตะปัะฝะพ ะพั ะพัะฝะพะฒะฝะพะน ะฟัะพะฒะตัะบะธ ะดะพัััะฟะฐ:

```javascript
export function isAdmin(user) {
  if (!user || !user.UF_DEPARTMENT) {
    return false;
  }
  
  const departmentIds = Array.isArray(user.UF_DEPARTMENT) 
    ? user.UF_DEPARTMENT 
    : [];
  
  if (departmentIds.length === 0) {
    return false;
  }
  
  // ะัะพะฒะตััะตะผ, ะตััั ะปะธ ัะพัั ะฑั ะพะดะธะฝ ะพัะดะตะป ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ัะฟะธัะบะต ะฐะดะผะธะฝัะบะธั ะพัะดะตะปะพะฒ
  return departmentIds.some(deptId => 
    accessConfig.adminDepartmentIds.includes(deptId)
  );
}
```

**ะะฐะทะฝะธัะฐ ะผะตะถะดั ะพัะฝะพะฒะฝัะผ ะดะพัััะฟะพะผ ะธ ะฐะดะผะธะฝัะบะธะผ:**
- **ะัะฝะพะฒะฝะพะน ะดะพัััะฟ:** ะะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั ะฒะธะดะตัั ะดะฐัะฑะพัะดั ะธ ะพััััั
- **ะะดะผะธะฝัะบะธะน ะดะพัััะฟ:** ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ะบะฝะพะฟะบั "โ๏ธ ะะดะผะธะฝะธัััะธัะพะฒะฐะฝะธะต" ะธ ะผะพะถะตั ะพัะบััะฒะฐัั ะฐะดะผะธะฝะธัััะฐัะพััะบะธะต ะธะฝัะตััะตะนัั (ะฝะฐะฟัะธะผะตั, ะปะพะณะธ ะฒะตะฑััะบะพะฒ)

---

## ๐ Fallback ะผะตัะฐะฝะธะทะผั

### ะฆะตะฟะพัะบะฐ fallback

ะัะธะปะพะถะตะฝะธะต ะธัะฟะพะปัะทัะตั ะผะฝะพะณะพััะพะฒะฝะตะฒัั ัะธััะตะผั fallback ะดะปั ะพะฑะตัะฟะตัะตะฝะธั ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ:

```
1. ะะพะฟััะบะฐ 1: BX24 API (5 ัะตะบัะฝะด ัะฐะนะผะฐัั)
   โ
   โโ ะฃัะฟะตั โ ะะพะทะฒัะฐัะฐะตะผ ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ
   โ
   โโ ะัะธะฑะบะฐ (CORS, ัะฐะนะผะฐัั) โ ะะตัะตัะพะด ะบ ะฟะพะฟััะบะต 2
   
2. ะะพะฟััะบะฐ 2: ะัะพะบัะธ API ัะตัะตะท api/bitrix24.php (5 ัะตะบัะฝะด ัะฐะนะผะฐัั)
   โ
   โโ ะฃัะฟะตั โ ะะพะทะฒัะฐัะฐะตะผ ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ (fallback)
   โ
   โโ ะัะธะฑะบะฐ โ ะะพะบะฐะทัะฒะฐะตะผ ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต ะฟะพะปัะทะพะฒะฐัะตะปั
```

### ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

**CORS ะพัะธะฑะบะธ:**
```javascript
if (error.message && (
  error.message.includes('CORS') || 
  error.message.includes('blocked') ||
  error.message.includes('ERR_FAILED')
)) {
  // CORS ะฑะปะพะบะธััะตั ะดะพัััะฟ ะบ BX24 API
  // ะะ ะธัะฟะพะปัะทัะตะผ ะฟัะพะบัะธ, ัะฐะบ ะบะฐะบ ะพะฝ ะฒะตัะฝัั ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ, ะฐ ะฝะต ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ
  return new AccessCheckResult(
    false,
    AccessErrorCodes.API_ERROR,
    'ะัะธะฑะบะฐ CORS: ะฝะต ัะดะฐะปะพัั ะพะฟัะตะดะตะปะธัั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ'
  );
}
```

**ะขะฐะนะผะฐััั:**
- ะะฝะธัะธะฐะปะธะทะฐัะธั BX24 API: 5 ัะตะบัะฝะด
- ะะพะปััะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ัะตัะตะท BX24 API: 5 ัะตะบัะฝะด
- ะะพะปััะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ัะตัะตะท ะฟัะพะบัะธ API: 5 ัะตะบัะฝะด
- ะะฑัะธะน ัะฐะนะผะฐัั ะดะปั ะฟะพะปััะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั: 10 ัะตะบัะฝะด

---

## โ๏ธ ะะพะฝัะธะณััะฐัะธั ะดะพัััะฟะฐ

### ะคะฐะนะป ะบะพะฝัะธะณััะฐัะธะธ

**ะะฐัะฟะพะปะพะถะตะฝะธะต:** `/var/www/app/public/rest_api_aps/sd_it_gen_plan/vue-app/src/config/access-config.js`

### ะกัััะบัััะฐ ะบะพะฝัะธะณััะฐัะธะธ

```javascript
export const accessConfig = {
  /**
   * ะะฐััะธะฒ ID ะพัะดะตะปะพะฒ, ะบะพัะพััะผ ัะฐะทัะตััะฝ ะดะพัััะฟ ะบ ะฟัะธะปะพะถะตะฝะธั
   */
  allowedDepartmentIds: [
    369,    // ะะธััะธะบั24 ะพัะดะตะป
    366,    // ะกะตะบัะพั 1ะก
    7,      // ะะพะปะพะฒะฐ ะะข ะพัะดะตะปะฐ
  ],
  
  /**
   * ะะฐััะธะฒ ID ะพัะดะตะปะพะฒ, ะบะพัะพััะผ ัะฐะทัะตััะฝ ะฐะดะผะธะฝะธัััะฐัะพััะบะธะน ะดะพัััะฟ
   */
  adminDepartmentIds: [
    369     // ะะดะผะธะฝะธัััะฐัะพัั ะะข ะพัะดะตะปะฐ
  ]
};
```

### ะะฐะบ ะดะพะฑะฐะฒะธัั ะฝะพะฒัะน ะพัะดะตะป

1. ะัะบัะพะนัะต ัะฐะนะป `vue-app/src/config/access-config.js`
2. ะะพะฑะฐะฒััะต ID ะพัะดะตะปะฐ ะฒ ะผะฐััะธะฒ `allowedDepartmentIds`:
   ```javascript
   allowedDepartmentIds: [
     369,
     366,
     7,
     370  // ะะพะฒัะน ะพัะดะตะป
   ]
   ```
3. ะกะพััะฐะฝะธัะต ัะฐะนะป
4. ะะตัะตัะพะฑะตัะธัะต Vue.js ะฟัะธะปะพะถะตะฝะธะต:
   ```bash
   cd vue-app
   npm run build
   ```

### ะะฐะบ ะพะฟัะตะดะตะปะธัั ID ะพัะดะตะปะฐ ะฟะพะปัะทะพะฒะฐัะตะปั

ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ัะพะพะฑัะตะฝะธะต "ะะพัััะฟ ะทะฐะฟัะตััะฝ", ะฒ ัะตะถะธะผะต ะพัะปะฐะดะบะธ ะพัะพะฑัะฐะถะฐะตััั ะธะฝัะพัะผะฐัะธั:

```
ะัะปะฐะดะพัะฝะฐั ะธะฝัะพัะผะฐัะธั:
ID ะฟะพะปัะทะพะฒะฐัะตะปั: 123
ID ะพัะดะตะปะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั: [366, 370]
ะะฐะทัะตััะฝะฝัะต ID ะพัะดะตะปะพะฒ: [369, 366, 7]
```

**ะะพะฑะฐะฒััะต ID ะพัะดะตะปะฐ ะฒ `access-config.js`** ะฝะฐ ะพัะฝะพะฒะต ะธะฝัะพัะผะฐัะธะธ ะธะท ะพัะปะฐะดะบะธ.

---

## ๐ ะะพัะพะบ ะฟัะพะฒะตัะบะธ ะฟัะธ ะทะฐะณััะทะบะต ัััะฐะฝะธัั

### ะะฒะฐ ััะตะฝะฐัะธั ะทะฐะณััะทะบะธ

#### ะกัะตะฝะฐัะธะน A: ะัะบัััะธะต ะฒ iframe Bitrix24

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั ะฟัะธะปะพะถะตะฝะธะต ัะตัะตะท ะธะฝัะตััะตะนั Bitrix24 (placement, ะฒะธะดะถะตั)
   โ
   โผ
2. Bitrix24 ะทะฐะณััะถะฐะตั ะฟัะธะปะพะถะตะฝะธะต ะฒ iframe
   โ
   โผ
3. index.php ะทะฐะณััะถะฐะตััั ะฒะฝัััะธ iframe
   โ
   โผ
4. ะกะบัะธะฟั //api.bitrix24.com/api/v1/ ะทะฐะณััะถะฐะตััั โ ะพะฑัะตะบั BX24 ะดะพัััะฟะตะฝ
   โ
   โผ
5. Vue.js ะฟัะธะปะพะถะตะฝะธะต ะธะฝะธัะธะฐะปะธะทะธััะตััั
   โ
   โผ
6. isInsideBitrix24() ะฒะพะทะฒัะฐัะฐะตั true (BX24 ะดะพัััะฟะตะฝ)
   โ
   โผ
7. BX24.callMethod('user.current') โ ะฒะพะทะฒัะฐัะฐะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ โ
   โ
   โผ
8. ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะฒัะฟะพะปะฝัะตััั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ
```

#### ะกัะตะฝะฐัะธะน B: ะััะผะพะต ะพัะบัััะธะต ะฒ ะฑัะฐัะทะตัะต

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั: https://back.kompo.by/rest_api_aps/sd_it_gen_plan/index.php
   (ะฟััะผะฐั ัััะปะบะฐ ะฒ ะฑัะฐัะทะตัะต)
   โ
   โผ
2. index.php ะทะฐะณััะถะฐะตััั ะฝะฐะฟััะผัั (ะฝะต ะฒ iframe)
   โ
   โผ
3. ะกะบัะธะฟั //api.bitrix24.com/api/v1/ ะผะพะถะตั ะฝะต ะทะฐะณััะทะธัััั ะธะปะธ CORS ะฑะปะพะบะธััะตั
   โ
   โผ
4. Vue.js ะฟัะธะปะพะถะตะฝะธะต ะธะฝะธัะธะฐะปะธะทะธััะตััั
   โ
   โผ
5. isInsideBitrix24() ะฒะพะทะฒัะฐัะฐะตั false (BX24 ะฝะตะดะพัััะฟะตะฝ)
   โ
   โผ
6. ะัะพะบัะธ API ัะตัะตะท api/bitrix24.php โ ะฒะพะทะฒัะฐัะฐะตั ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ โ๏ธ
   โ
   โผ
7. ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะฒัะฟะพะปะฝัะตััั ะดะปั ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ, ะฐ ะฝะต ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ
```

### ะะตัะฐะปัะฝัะน ะฟะพัะพะบ ะฒัะฟะพะปะฝะตะฝะธั (ะพะฑัะธะน)

```
1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั ะฟัะธะปะพะถะตะฝะธะต
   โ
   โผ
2. index.php ะทะฐะณััะถะฐะตั Vue.js ะฟัะธะปะพะถะตะฝะธะต
   โ
   โผ
3. main.js ะธะฝะธัะธะฐะปะธะทะธััะตั ะฟัะธะปะพะถะตะฝะธะต ะธ ะผะพะฝัะธััะตั ะฒ #app
   โ
   โผ
4. ะะพััะตั ะพะฟัะตะดะตะปัะตั ะผะฐััััั (/) โ IndexPage.vue
   โ
   โผ
5. IndexPage.vue ะผะพะฝัะธััะตััั, ะฒัะทัะฒะฐะตััั onMounted()
   โ
   โผ
6. AccessControlService.checkAccess() ะฒัะทัะฒะฐะตััั
   โ
   โโ 6.1. ะัะพะฒะตัะบะฐ ะบะพะฝัะตะบััะฐ: isInsideBitrix24()?
   โ   โ
   โ   โโ ะะฐ โ ะะฝะธัะธะฐะปะธะทะฐัะธั BX24.init() (5 ัะตะบ ัะฐะนะผะฐัั)
   โ   โ
   โ   โโ ะะตั โ ะัะพะฟััะบ ะธะฝะธัะธะฐะปะธะทะฐัะธะธ
   โ
   โโ 6.2. ะะพะปััะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั: Bitrix24BxApi.getCurrentUser()
   โ   โ
   โ   โโ ะะพะฟััะบะฐ 1: BX24.callMethod('user.current') (5 ัะตะบ ัะฐะนะผะฐัั)
   โ   โ   โ
   โ   โ   โโ ะฃัะฟะตั โ user = ัะตะทัะปััะฐั (ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ)
   โ   โ   โ
   โ   โ   โโ ะัะธะฑะบะฐ โ ะะพะฟััะบะฐ 2
   โ   โ
   โ   โโ ะะพะฟััะบะฐ 2: Bitrix24ApiService.getCurrentUser() (5 ัะตะบ ัะฐะนะผะฐัั)
   โ       โ
   โ       โโ ะฃัะฟะตั โ user = ัะตะทัะปััะฐั (ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ, fallback)
   โ       โ
   โ       โโ ะัะธะฑะบะฐ โ ะัะฑัะพั ะพัะธะฑะบะธ
   โ
   โโ 6.3. ะัะพะฒะตัะบะฐ ะฝะฐะปะธัะธั ะฟะพะปัะทะพะฒะฐัะตะปั
   โ   โ
   โ   โโ user.ID ัััะตััะฒัะตั? โ ะัะพะดะพะปะถะฐะตะผ
   โ   โ
   โ   โโ ะะตั โ ะะพะทะฒัะฐัะฐะตะผ USER_NOT_DETERMINED
   โ
   โโ 6.4. ะัะพะฒะตัะบะฐ ะฟัะธะฒัะทะบะธ ะบ ะพัะดะตะปั
   โ   โ
   โ   โโ user.UF_DEPARTMENT ัััะตััะฒัะตั ะธ ะฝะต ะฟัััะพะน? โ ะัะพะดะพะปะถะฐะตะผ
   โ   โ
   โ   โโ ะะตั โ ะะพะทะฒัะฐัะฐะตะผ ACCESS_DENIED
   โ
   โโ 6.5. ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะฟะพ ID ะพัะดะตะปะพะฒ
   โ   โ
   โ   โโ ะััั ัะพัั ะฑั ะพะดะธะฝ ะพัะดะตะป ะฒ allowedDepartmentIds? โ ะะพัััะฟ ัะฐะทัะตััะฝ
   โ   โ
   โ   โโ ะะตั โ ะะพะทะฒัะฐัะฐะตะผ ACCESS_DENIED
   โ
   โโ 6.6. ะะพะทะฒัะฐั ัะตะทัะปััะฐัะฐ: AccessCheckResult
       โ
       โโ allowed = true โ ะะพะบะฐะทัะฒะฐะตะผ ะณะปะฐะฒะฝัั ัััะฐะฝะธัั
       โ
       โโ allowed = false โ ะะพะบะฐะทัะฒะฐะตะผ ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต
```

---

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะะปะฐัั AccessCheckResult

```javascript
export class AccessCheckResult {
  constructor(allowed, errorCode = null, errorMessage = null, user = null) {
    this.allowed = allowed;           // boolean
    this.errorCode = errorCode;       // string | null
    this.errorMessage = errorMessage; // string | null
    this.user = user;                 // object | null
  }
}
```

### ะะพะดั ะพัะธะฑะพะบ ะดะพัััะฟะฐ

```javascript
export const AccessErrorCodes = {
  USER_NOT_DETERMINED: 'USER_NOT_DETERMINED',  // ะะต ัะดะฐะปะพัั ะพะฟัะตะดะตะปะธัั ะฟะพะปัะทะพะฒะฐัะตะปั
  ACCESS_DENIED: 'ACCESS_DENIED',              // ะะพัััะฟ ะทะฐะฟัะตััะฝ
  API_ERROR: 'API_ERROR'                        // ะัะธะฑะบะฐ API
};
```

### ะัะพะฒะตัะบะฐ ะฒ ัะพััะตัะต

ะะพััะตั ัะฐะบะถะต ะฟัะพะฒะตััะตั ะดะพัััะฟ ะดะปั ะทะฐัะธััะฝะฝัั ะผะฐัััััะพะฒ:

```javascript
router.beforeEach(async (to, from, next) => {
  // ะัะพะฒะตัะบะฐ ะฐะฒัะพัะธะทะฐัะธะธ (ะตัะปะธ ััะตะฑัะตััั)
  if (to.meta.requiresAuth) {
    const accessResult = await AccessControlService.checkAccess();
    
    if (!accessResult.allowed) {
      next({ name: 'index' }); // ะะตะดะธัะตะบั ะฝะฐ ะณะปะฐะฒะฝัั
      return;
    }
  }
  
  // ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะฐะดะผะธะฝะธัััะฐัะพัะฐ (ะตัะปะธ ััะตะฑัะตััั)
  if (to.meta.adminOnly) {
    const currentUser = await AccessControlService.getCurrentUser();
    
    if (!currentUser || !isAdmin(currentUser)) {
      next({ name: 'index' }); // ะะตะดะธัะตะบั ะฝะฐ ะณะปะฐะฒะฝัั
      return;
    }
  }
  
  next(); // ะะฐะทัะตัะฐะตะผ ะฟะตัะตัะพะด
});
```

---

## ๐ ะกัะฐะฒะฝะตะฝะธะต ะดะฒัั ััะตะฝะฐัะธะตะฒ ะพัะบัััะธั

### ะขะฐะฑะปะธัะฐ ััะฐะฒะฝะตะฝะธั

| ะัะฟะตะบั | Iframe ะฒ Bitrix24 | ะััะผะพะต ะพัะบัััะธะต ะฒ ะฑัะฐัะทะตัะต |
|--------|-------------------|---------------------------|
| **URL** | ะัะบััะฒะฐะตััั ัะตัะตะท ะธะฝัะตััะตะนั Bitrix24 | `https://back.kompo.by/.../index.php` |
| **ะะพะฝัะตะบัั** | ะะฝัััะธ iframe Bitrix24 | Standalone (ะฝะต ะฒ iframe) |
| **BX24 API** | โ ะะพัััะฟะตะฝ | โ ะะตะดะพัััะฟะตะฝ ะธะปะธ CORS ะฑะปะพะบะธััะตั |
| **ะะตัะพะด ะพะฟัะตะดะตะปะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั** | `BX24.callMethod('user.current')` | ะัะพะบัะธ API ัะตัะตะท `api/bitrix24.php` |
| **ะัะพ ะพะฟัะตะดะตะปัะตััั** | โ ะะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ (ัะพั, ะบัะพ ะพัะบััะป) | โ๏ธ ะะปะฐะดะตะปะตั ัะพะบะตะฝะฐ (ัะพั, ะบัะพ ัััะฐะฝะพะฒะธะป) |
| **ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ** | โ ะะพััะตะบัะฝะฐั (ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ) | โ๏ธ ะะตะบะพััะตะบัะฝะฐั (ะดะปั ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ) |
| **ะะตะทะพะฟะฐัะฝะพััั** | โ ะััะพะบะฐั | โ๏ธ ะกัะตะดะฝัั (ะฟะพัะตะฝัะธะฐะปัะฝะฐั ะฟัะพะฑะปะตะผะฐ) |
| **ะะตะบะพะผะตะฝะดัะตััั** | โ ะะฐ (ะพัะฝะพะฒะฝะพะน ัะฟะพัะพะฑ) | โ ะะตั (ัะพะปัะบะพ ะดะปั ะพัะปะฐะดะบะธ) |

### ะะธะทัะฐะปัะฝะฐั ััะตะผะฐ ัะฐะทะปะธัะธะน

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะกะฆะะะะะะ 1: Iframe ะฒ Bitrix24                              โ
โ                                                               โ
โ  Bitrix24 โ iframe โ index.php โ BX24 API โ ะะพะปัะทะพะฒะฐัะตะปั   โ
โ              โ                    โ          ะธะฝัะตััะตะนัะฐ    โ
โ                                                               โ
โ  ะะตะทัะปััะฐั: ะะพััะตะบัะฝะพะต ะพะฟัะตะดะตะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะกะฆะะะะะะ 2: ะััะผะพะต ะพัะบัััะธะต ะฒ ะฑัะฐัะทะตัะต                     โ
โ                                                               โ
โ  ะัะฐัะทะตั โ index.php โ ะัะพะบัะธ API โ ะะปะฐะดะตะปะตั ัะพะบะตะฝะฐ        โ
โ              โ              โ๏ธ          (ะฝะต ะฟะพะปัะทะพะฒะฐัะตะปั)  โ
โ                                                               โ
โ  ะะตะทัะปััะฐั: ะะฟัะตะดะตะปัะตััั ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ, ะฐ ะฝะต ะฟะพะปัะทะพะฒะฐัะตะปัโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะัะธะผะตั ะฟัะพะฑะปะตะผั ะฟัะธ ะฟััะผะพะผ ะพัะบัััะธะธ

```
ะกะธััะฐัะธั:
- ะัะธะปะพะถะตะฝะธะต ัััะฐะฝะพะฒะธะป: "ะะฒะฐะฝ ะะฒะฐะฝะพะฒ" (ID: 123, ะพัะดะตะปั: [369]) - ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ
- ะัะธะปะพะถะตะฝะธะต ะพัะบััะฒะฐะตั: "ะะตัั ะะตััะพะฒ" (ID: 456, ะพัะดะตะปั: [366]) - ะดััะณะพะน ะฟะพะปัะทะพะฒะฐัะตะปั

ะกัะตะฝะฐัะธะน 1 (iframe):
โ BX24 API ะพะฟัะตะดะตะปัะตั: ะะตัั ะะตััะพะฒ (ID: 456)
โ ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ: ะดะปั ะะตััะฐ ะะตััะพะฒะฐ
โ ะัะปะธ ั ะะตััะฐ ะฝะตั ะดะพัััะฟะฐ โ ะฟะพะบะฐะทัะฒะฐะตััั ัะพะพะฑัะตะฝะธะต "ะะพัััะฟ ะทะฐะฟัะตััะฝ"

ะกัะตะฝะฐัะธะน 2 (ะฟััะผะพะต ะพัะบัััะธะต):
โ๏ธ ะัะพะบัะธ API ะพะฟัะตะดะตะปัะตั: ะะฒะฐะฝ ะะฒะฐะฝะพะฒ (ID: 123) - ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ
โ๏ธ ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ: ะดะปั ะะฒะฐะฝะฐ ะะฒะฐะฝะพะฒะฐ
โ๏ธ ะัะปะธ ั ะะฒะฐะฝะฐ ะตััั ะดะพัััะฟ โ ะะตัั ะฒะธะดะธั ะดะฐะฝะฝัะต ะะฒะฐะฝะฐ (ะฟัะพะฑะปะตะผะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ!)
```

---

## ๐ ะะตะทัะผะต

### ะะปััะตะฒัะต ะผะพะผะตะฝัั

1. **ะะฟัะตะดะตะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั:**
   - ะัะธะพัะธัะตั: BX24 API (ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ) โ ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ะฒ iframe
   - Fallback: ะัะพะบัะธ API (ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ) โ ะธัะฟะพะปัะทัะตััั ะฟัะธ ะฟััะผะพะผ ะพัะบัััะธะธ

2. **ะะฒะฐ ััะตะฝะฐัะธั ะพัะบัััะธั:**
   - โ **Iframe ะฒ Bitrix24:** ะะพััะตะบัะฝะพะต ะพะฟัะตะดะตะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ
   - โ๏ธ **ะััะผะพะต ะพัะบัััะธะต ะฒ ะฑัะฐัะทะตัะต:** ะะฟัะตะดะตะปัะตััั ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ (ะฟัะพะฑะปะตะผะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ)

3. **ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ:**
   - ะะพ ID ะพัะดะตะปะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั (`UF_DEPARTMENT`)
   - ะกัะฐะฒะฝะตะฝะธะต ั `allowedDepartmentIds` ะฒ `access-config.js`
   - โ๏ธ ะัะธ ะฟััะผะพะผ ะพัะบัััะธะธ ะฟัะพะฒะตัะบะฐ ะฒัะฟะพะปะฝัะตััั ะดะปั ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ, ะฐ ะฝะต ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ

4. **ะัะพะฒะตัะบะฐ ะฐะดะผะธะฝะธัััะฐัะพัะฐ:**
   - ะะพ ID ะพัะดะตะปะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั
   - ะกัะฐะฒะฝะตะฝะธะต ั `adminDepartmentIds` ะฒ `access-config.js`

5. **Fallback ะผะตัะฐะฝะธะทะผั:**
   - ะะฝะพะณะพััะพะฒะฝะตะฒะฐั ัะธััะตะผะฐ ั ัะฐะนะผะฐััะฐะผะธ
   - ะะฑัะฐะฑะพัะบะฐ CORS ะพัะธะฑะพะบ
   - Graceful degradation

6. **ะะตะทะพะฟะฐัะฝะพััั:**
   - โ ะัะธ ะพัะบัััะธะธ ะฒ iframe: ะััะพะบะฐั (ะบะพััะตะบัะฝะฐั ะฟัะพะฒะตัะบะฐ ะดะพัััะฟะฐ)
   - โ๏ธ ะัะธ ะฟััะผะพะผ ะพัะบัััะธะธ: ะกัะตะดะฝัั (ะฟะพัะตะฝัะธะฐะปัะฝะฐั ะฟัะพะฑะปะตะผะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ)

### ะะฐะถะฝัะต ะทะฐะผะตัะฐะฝะธั

- **BX24 API** ะพะฟัะตะดะตะปัะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ (ัะพะณะพ, ะบัะพ ะพัะบััะป ะฟัะธะปะพะถะตะฝะธะต)
  - โ ะะฐะฑะพัะฐะตั ะฟัะธ ะพัะบัััะธะธ ะฒ iframe Bitrix24
  - โ ะะต ัะฐะฑะพัะฐะตั ะฟัะธ ะฟััะผะพะผ ะพัะบัััะธะธ ะฒ ะฑัะฐัะทะตัะต

- **ะัะพะบัะธ API** ะพะฟัะตะดะตะปัะตั ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ (ัะพะณะพ, ะบัะพ ัััะฐะฝะพะฒะธะป ะฟัะธะปะพะถะตะฝะธะต)
  - โ๏ธ ะัะฟะพะปัะทัะตััั ะบะฐะบ fallback ะฟัะธ ะฝะตะดะพัััะฟะฝะพััะธ BX24 API
  - โ๏ธ ะัะธ ะฟััะผะพะผ ะพัะบัััะธะธ ะฒ ะฑัะฐัะทะตัะต ะฒัะตะณะดะฐ ะฒะพะทะฒัะฐัะฐะตั ะฒะปะฐะดะตะปััะฐ ัะพะบะตะฝะฐ

- **ะะปั ะบะพััะตะบัะฝะพะน ะฟัะพะฒะตัะบะธ ะดะพัััะฟะฐ:**
  - โ ะัะธะปะพะถะตะฝะธะต ะดะพะปะถะฝะพ ะพัะบััะฒะฐัััั ัะตัะตะท ะธะฝัะตััะตะนั Bitrix24 (iframe)
  - โ ะัะธ ะฟััะผะพะผ ะพัะบัััะธะธ ะฒ ะฑัะฐัะทะตัะต ะฟัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ัะฐะฑะพัะฐะตั ะฝะตะบะพััะตะบัะฝะพ

- **ะัะธ CORS ะพัะธะฑะบะฐั:**
  - ะัะธะปะพะถะตะฝะธะต ะฝะต ะธัะฟะพะปัะทัะตั ะฟัะพะบัะธ ะบะฐะบ fallback, ััะพะฑั ะฝะต ะฝะฐัััะธัั ะปะพะณะธะบั ะฟัะพะฒะตัะบะธ ะดะพัััะฟะฐ
  - ะะพะบะฐะทัะฒะฐะตััั ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต ะฟะพะปัะทะพะฒะฐัะตะปั

### ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

1. **ะัะฝะพะฒะฝะพะน ัะฟะพัะพะฑ ะดะพัััะฟะฐ:** ะัะบัััะธะต ัะตัะตะท ะธะฝัะตััะตะนั Bitrix24 (placement, ะฒะธะดะถะตั, ะฒะบะปะฐะดะบะฐ)
   - โ ะะพััะตะบัะฝะพะต ะพะฟัะตะดะตะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ
   - โ ะัะฐะฒะธะปัะฝะฐั ะฟัะพะฒะตัะบะฐ ะดะพัััะฟะฐ
   - โ ะะตะทะพะฟะฐัะฝะพััั

2. **ะััะผะพะต ะพัะบัััะธะต ะฒ ะฑัะฐัะทะตัะต (ะฝะต ัะตะบะพะผะตะฝะดัะตััั):**
   - โ๏ธ ะะฟัะตะดะตะปัะตััั ะฒะปะฐะดะตะปะตั ัะพะบะตะฝะฐ, ะฐ ะฝะต ะฟะพะปัะทะพะฒะฐัะตะปั ะธะฝัะตััะตะนัะฐ
   - โ๏ธ ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะผะพะถะตั ัะฐะฑะพัะฐัั ะฝะตะบะพััะตะบัะฝะพ
   - โ๏ธ ะะพัะตะฝัะธะฐะปัะฝะฐั ะฟัะพะฑะปะตะผะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ

3. **ะัะปะธ ะฝัะถะฝะพ ะพะณัะฐะฝะธัะธัั ะฟััะผะพะต ะพัะบัััะธะต:**
   - ะะพะถะฝะพ ะดะพะฑะฐะฒะธัั ะฟัะพะฒะตัะบั ะฒ `index.php` ะฝะฐ ะฝะฐะปะธัะธะต iframe
   - ะะพะถะฝะพ ะฟะพะบะฐะทัะฒะฐัั ะฟัะตะดัะฟัะตะถะดะตะฝะธะต ะฟัะธ ะฟััะผะพะผ ะพัะบัััะธะธ
   - ะะพะถะฝะพ ััะตะฑะพะฒะฐัั ะดะพะฟะพะปะฝะธัะตะปัะฝัั ะฐะฒัะพัะธะทะฐัะธั

---

## ๐ ะกะฒัะทะฐะฝะฝัะต ะดะพะบัะผะตะฝัั

- [ะััะธัะตะบัััะฐ ัะพัะบะธ ะฒัะพะดะฐ](./application-entry-point.md) โ ะบะฐะบ ัะฐะฑะพัะฐะตั index.php
- [API Endpoints](../API-REFERENCES/README.md) โ ะดะพะบัะผะตะฝัะฐัะธั ะฟะพ API endpoints
- [ะะพะฝัะธะณััะฐัะธั ะดะพัััะฟะฐ](../../vue-app/src/config/access-config.js) โ ัะฐะนะป ะบะพะฝัะธะณััะฐัะธะธ

---

**ะััะพัะธั ะฟัะฐะฒะพะบ:**
- 2025-12-23 08:11 (UTC+3, ะัะตัั): ะกะพะทะดะฐะฝ ะดะพะบัะผะตะฝั

