# –ú–µ—Ö–∞–Ω–∏–∑–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤: –î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–°

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-06 12:22 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–æ  
**–°–≤—è–∑–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞:** TASK-005

---

## üìã –û–±–∑–æ—Ä

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ TASK-005 –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –±—ã–ª –≤–Ω–µ–¥—Ä—ë–Ω –º–µ—Ö–∞–Ω–∏–∑–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–∞—à–±–æ—Ä–¥–∞ —Å–µ–∫—Ç–æ—Ä–∞ 1–°. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Bitrix24 REST API.

---

## üéØ –¶–µ–ª–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API** ‚Äî —É–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Bitrix24
2. **–£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–µ—à–∞
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚Äî —Å–Ω–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
4. **–≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞** ‚Äî –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø–æ —Å–µ—Ç–∏

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CacheManager                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  –•—Ä–∞–Ω–∏–ª–∏—â–µ: Map<string, CacheEntry>              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - –ö–ª—é—á: —Å—Ç—Ä–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "tickets:stage:123")   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - –ó–Ω–∞—á–µ–Ω–∏–µ: { data, timestamp, ttl }            ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚ñ≤
                        ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ               ‚îÇ               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ TicketRepo   ‚îÇ ‚îÇ EmployeeRepo‚îÇ ‚îÇ SectorData  ‚îÇ
‚îÇ              ‚îÇ ‚îÇ             ‚îÇ ‚îÇ             ‚îÇ
‚îÇ getTickets() ‚îÇ ‚îÇ getEmployees‚îÇ ‚îÇ getSector()‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å: `CacheManager`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ (Map)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TTL (Time To Live) –¥–ª—è –∑–∞–ø–∏—Å–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

---

## üîë –¢–∏–ø—ã –∫–µ—à–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 1. –¢–∏–∫–µ—Ç—ã –ø–æ —Å—Ç–∞–¥–∏—è–º

**–ö–ª—é—á:** `tickets:stage:{stageId}`  
**TTL:** 5 –º–∏–Ω—É—Ç (300 000 –º—Å)  
**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `TicketRepository.getTicketsByStage()`

**–ü—Ä–∏–º–µ—Ä –∫–ª—é—á–∞:**
```javascript
// –î–ª—è —Å—Ç–∞–¥–∏–∏ "DT140_12:UC_0VHWE2"
const key = "tickets:stage:DT140_12:UC_0VHWE2";
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–µ—à –ø–æ –∫–ª—é—á—É —Å—Ç–∞–¥–∏–∏
2. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –∏ –Ω–µ –∏—Å—Ç—ë–∫ TTL ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∏–∑ –∫–µ—à–∞
3. –ï—Å–ª–∏ –∫–µ—à–∞ –Ω–µ—Ç –∏–ª–∏ –∏—Å—Ç—ë–∫ ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ API
4. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫–µ—à —Å TTL 5 –º–∏–Ω—É—Ç

**–ö–æ–¥:**
```64:125:vue-app/src/services/dashboard-sector-1c/data/ticket-repository.js
  static async getTicketsByStage(stageId, useCache = true) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
    if (useCache) {
      const cacheKey = CacheManager.getTicketsCacheKey(stageId);
      const cached = CacheManager.get(cacheKey);
      if (cached !== null) {
        console.log(`Cache hit for stage ${stageId}`);
        return cached;
      }
    }

    const allTickets = [];
    let start = 0;
    const limit = 50; // –ú–∞–∫—Å–∏–º—É–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∑–∞ –∑–∞–ø—Ä–æ—Å
    let hasMore = true;

    while (hasMore) {
      try {
        const result = await ApiClient.call('crm.item.list', {
          entityTypeId: ENTITY_TYPE_ID,
          filter: {
            stageId: stageId
          },
          select: ['*'],
          order: { id: 'DESC' },
          start: start,
          useOriginalUfNames: 'Y' // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π
        });

        // –ò–∑–≤–ª–µ–∫–∞–µ–º –º–∞—Å—Å–∏–≤ —Ç–∏–∫–µ—Ç–æ–≤ –∏–∑ –æ—Ç–≤–µ—Ç–∞
        let batchTickets = [];
        if (result && result.result) {
          if (Array.isArray(result.result)) {
            batchTickets = result.result;
          } else if (result.result.items && Array.isArray(result.result.items)) {
            batchTickets = result.result.items;
          } else if (result.result.data && Array.isArray(result.result.data)) {
            batchTickets = result.result.data;
          }
        }

        if (batchTickets.length > 0) {
          allTickets.push(...batchTickets);
          start += batchTickets.length;
          hasMore = batchTickets.length === limit;
        } else {
          hasMore = false;
        }
      } catch (error) {
        console.error(`Error loading tickets batch for stage ${stageId} (start: ${start}):`, error);
        hasMore = false; // –ü—Ä–µ—Ä—ã–≤–∞–µ–º —Ü–∏–∫–ª –ø—Ä–∏ –æ—à–∏–±–∫–µ
      }
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à
    if (useCache) {
      const cacheKey = CacheManager.getTicketsCacheKey(stageId);
      CacheManager.set(cacheKey, allTickets, CacheManager.TICKETS_TTL);
    }

    return allTickets;
  }
```

### 2. –î–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**–ö–ª—é—á:** `employees:ids:{sortedIds}`  
**TTL:** 30 –º–∏–Ω—É—Ç (1 800 000 –º—Å)  
**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `EmployeeRepository.getEmployeesByIds()`

**–ü—Ä–∏–º–µ—Ä –∫–ª—é—á–∞:**
```javascript
// –î–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å ID [5, 10, 15]
const key = "employees:ids:5,10,15";
// ID —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è –∫–ª—é—á–∞
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–µ—à –ø–æ –∫–ª—é—á—É (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ID)
2. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –∏ –Ω–µ –∏—Å—Ç—ë–∫ TTL ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∏–∑ –∫–µ—à–∞
3. –ï—Å–ª–∏ –∫–µ—à–∞ –Ω–µ—Ç –∏–ª–∏ –∏—Å—Ç—ë–∫ ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ API `user.get`
4. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫–µ—à —Å TTL 30 –º–∏–Ω—É—Ç

**–ö–æ–¥:**
```32:76:vue-app/src/services/dashboard-sector-1c/data/employee-repository.js
  static async getEmployeesByIds(employeeIds, useCache = true) {
    if (!Array.isArray(employeeIds) || employeeIds.length === 0) {
      return [];
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
    if (useCache) {
      const cacheKey = CacheManager.getEmployeesCacheKey(employeeIds);
      const cached = CacheManager.get(cacheKey);
      if (cached !== null) {
        console.log(`Cache hit for employees: ${employeeIds.length} employees`);
        return cached;
      }
    }

    try {
      const result = await ApiClient.call('user.get', {
        filter: {
          ID: employeeIds
        }
      });

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞
      let users = [];
      if (result && result.result) {
        if (Array.isArray(result.result)) {
          users = result.result;
        } else {
          console.warn('Unexpected user.get result format:', result);
        }
      }

      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à
      if (useCache) {
        const cacheKey = CacheManager.getEmployeesCacheKey(employeeIds);
        CacheManager.set(cacheKey, users, CacheManager.EMPLOYEES_TTL);
      }

      return users;
    } catch (error) {
      console.error('Error getting employees by IDs:', error);
      // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å —Ä–∞–±–æ—Ç—É –¥–∞—à–±–æ—Ä–¥–∞
      return [];
    }
  }
```

### 3. –î–∞–Ω–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞ (–∏—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)

**–ö–ª—é—á:** `sector:data`  
**TTL:** 5 –º–∏–Ω—É—Ç (300 000 –º—Å)  
**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `DashboardSector1CService.getSectorData()`

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –¥–∞–Ω–Ω—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–µ—à
2. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –∏ –Ω–µ –∏—Å—Ç—ë–∫ TTL ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∏–∑ –∫–µ—à–∞
3. –ï—Å–ª–∏ –∫–µ—à–∞ –Ω–µ—Ç –∏–ª–∏ –∏—Å—Ç—ë–∫:
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–∏–∫–µ—Ç—ã (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–µ—à–∞ —Ç–∏–∫–µ—Ç–æ–≤)
   - –§–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ —Å–µ–∫—Ç–æ—Ä—É
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–µ—à–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤)
   - –ì—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ
   - –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫–µ—à —Å TTL 5 –º–∏–Ω—É—Ç

**–ö–æ–¥:**
```54:104:vue-app/src/services/dashboard-sector-1c/index.js
  static async getSectorData(useCache = true) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
    if (useCache) {
      const cacheKey = CacheManager.getSectorDataCacheKey();
      const cached = CacheManager.get(cacheKey);
      if (cached !== null) {
        console.log('Cache hit for sector data');
        return cached;
      }
    }

    try {
      // –®–∞–≥ 1: –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç–∏–∫–µ—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
      const targetStages = getTargetStages();
      const allTickets = await TicketRepository.getAllTickets(targetStages);
      console.log('Total tickets loaded:', allTickets.length);

      // –®–∞–≥ 2: –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–∏–∫–µ—Ç—ã –ø–æ —Ç–µ–≥—É —Å–µ–∫—Ç–æ—Ä–∞ 1–°
      const filteredTickets = filterBySector(allTickets);
      console.log(`Filtered ${filteredTickets.length} tickets from ${allTickets.length} (sector tag: 1C)`);

      // –®–∞–≥ 3: –ò–∑–≤–ª–µ–∫–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ —Ç–∏–∫–µ—Ç–æ–≤
      const uniqueEmployeeIds = extractUniqueEmployeeIds(filteredTickets);
      console.log('Unique employee IDs:', uniqueEmployeeIds);

      // –®–∞–≥ 4: –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —ç—Ç–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
      const bitrixUsers = await EmployeeRepository.getEmployeesByIds(uniqueEmployeeIds);
      const employees = mapEmployees(bitrixUsers);
      console.log('Loaded employees:', employees.length);

      // –®–∞–≥ 5: –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ç–∏–∫–µ—Ç—ã –ø–æ —ç—Ç–∞–ø–∞–º –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
      const stages = groupTicketsByStages(filteredTickets, employees);

      const result = {
        stages,
        employees: employees,
        zeroPointTickets: getZeroPointTickets(filteredTickets)
      };

      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à
      if (useCache) {
        const cacheKey = CacheManager.getSectorDataCacheKey();
        CacheManager.set(cacheKey, result, CacheManager.TICKETS_TTL);
      }

      return result;
    } catch (error) {
      console.error('Error getting sector data:', error);
      throw error;
    }
  }
```

---

## ‚öôÔ∏è –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã CacheManager

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏ –≤ –∫–µ—à–µ

```typescript
interface CacheEntry {
  data: any;           // –ö–µ—à–∏—Ä—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
  timestamp: number;   // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ (Date.now())
  ttl: number;         // –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
}
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### 1. `get(key)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–õ–æ–≥–∏–∫–∞:**
1. –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–ø–∏—Å—å –∏–∑ Map –ø–æ –∫–ª—é—á—É
2. –ï—Å–ª–∏ –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –∏—Å—Ç—ë–∫ –ª–∏ TTL:
   - –ï—Å–ª–∏ –∏—Å—Ç—ë–∫ ‚Äî —É–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`
   - –ï—Å–ª–∏ –Ω–µ –∏—Å—Ç—ë–∫ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

**–ö–æ–¥:**
```49:67:vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js
  static get(key) {
    const entry = this.cache.get(key);
    
    if (!entry) {
      return null;
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∏—Å—Ç—ë–∫ –ª–∏ –∫–µ—à
    const now = Date.now();
    const age = now - entry.timestamp;
    
    if (age > entry.ttl) {
      // –ö–µ—à –∏—Å—Ç—ë–∫, —É–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å
      this.cache.delete(key);
      return null;
    }

    return entry.data;
  }
```

#### 2. `set(key, data, ttl)` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–õ–æ–≥–∏–∫–∞:**
1. –°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å —Å –¥–∞–Ω–Ω—ã–º–∏, —Ç–µ–∫—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –∏ TTL
2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Map

**–ö–æ–¥:**
```76:82:vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js
  static set(key, data, ttl = this.DEFAULT_TTL) {
    this.cache.set(key, {
      data,
      timestamp: Date.now(),
      ttl
    });
  }
```

#### 3. `invalidateTicketsCache()` ‚Äî –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ —Ç–∏–∫–µ—Ç–æ–≤

**–õ–æ–≥–∏–∫–∞:**
1. –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `tickets:`
2. –£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å `sector:data` (—Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–∫–µ—Ç–æ–≤)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–∞ (`TicketRepository.updateTicket()`)
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–∫–µ—Ç–∞ (`TicketRepository.createTicket()`)
- –ü–æ—Å–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–∞ (`DashboardSector1CService.assignTicket()`)

**–ö–æ–¥:**
```208:211:vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js
  static invalidateTicketsCache() {
    this.invalidateByPrefix('tickets:');
    this.invalidateByPrefix('sector:');
  }
```

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–µ—à–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∞—à–±–æ—Ä–¥
   ‚Üì
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è getSectorData()
   ‚Üì
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ "sector:data" ‚Üí –ù–ï–¢
   ‚Üì
4. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ "tickets:stage:DT140_12:UC_0VHWE2" ‚Üí –ù–ï–¢
   - –ó–∞–ø—Ä–æ—Å –∫ API crm.item.list
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à (TTL 5 –º–∏–Ω)
   ‚Üì
5. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ "employees:ids:5,10,15" ‚Üí –ù–ï–¢
   - –ó–∞–ø—Ä–æ—Å –∫ API user.get
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à (TTL 30 –º–∏–Ω)
   ‚Üì
6. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
   ‚Üì
7. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –∫–µ—à "sector:data" (TTL 5 –º–∏–Ω)
   ‚Üì
8. –í–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–∫–µ—à –∞–∫—Ç—É–∞–ª–µ–Ω)

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞—à–±–æ—Ä–¥ (—á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã)
   ‚Üì
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è getSectorData()
   ‚Üì
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ "sector:data" ‚Üí –ï–°–¢–¨ (–Ω–µ –∏—Å—Ç—ë–∫)
   ‚Üì
4. –í–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–µ—à–∞ (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
   ‚Üì
5. –ù–ï–¢ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç —Ç–∏–∫–µ—Ç (Drag & Drop)
   ‚Üì
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è assignTicket()
   ‚Üì
3. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è API-–∑–∞–ø—Ä–æ—Å crm.item.update
   ‚Üì
4. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è CacheManager.invalidateTicketsCache()
   ‚Üì
5. –£–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –∑–∞–ø–∏—Å–∏:
   - "tickets:stage:DT140_12:UC_0VHWE2"
   - "tickets:stage:DT140_12:PREPARATION"
   - "tickets:stage:DT140_12:CLIENT"
   - "sector:data"
   ‚Üì
6. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤—è—Ç—Å—è –∏–∑ API
```

---

## üìä TTL (Time To Live) –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

| –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | TTL | –ü—Ä–∏—á–∏–Ω–∞ |
|------------|-----|---------|
| **–¢–∏–∫–µ—Ç—ã** | 5 –º–∏–Ω—É—Ç | –î–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–æ –º–µ–Ω—è—é—Ç—Å—è (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è) |
| **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏** | 30 –º–∏–Ω—É—Ç | –î–∞–Ω–Ω—ã–µ —Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è (–∏–º—è, —Ñ–æ—Ç–æ) |
| **–î–∞–Ω–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞** | 5 –º–∏–Ω—É—Ç | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–∫–µ—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É —Ç–∞–∫–æ–π –∂–µ TTL |

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
```28:41:vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js
  /**
   * TTL –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (5 –º–∏–Ω—É—Ç)
   */
  static DEFAULT_TTL = 5 * 60 * 1000; // 5 –º–∏–Ω—É—Ç

  /**
   * TTL –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (30 –º–∏–Ω—É—Ç)
   */
  static EMPLOYEES_TTL = 30 * 60 * 1000; // 30 –º–∏–Ω—É—Ç

  /**
   * TTL –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ (5 –º–∏–Ω—É—Ç)
   */
  static TICKETS_TTL = 5 * 60 * 1000; // 5 –º–∏–Ω—É—Ç
```

---

## üßπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö –∑–∞–ø–∏—Å–µ–π

### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞

–ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –∏—Å—Ç—ë–∫—à–∏–µ –∑–∞–ø–∏—Å–∏ –∏–∑ –∫–µ—à–∞.

**–ö–æ–¥:**
```223:228:vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js
// –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö –∑–∞–ø–∏—Å–µ–π (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
if (typeof window !== 'undefined') {
  setInterval(() => {
    CacheManager.cleanExpired();
  }, 5 * 60 * 1000);
}
```

**–ú–µ—Ç–æ–¥ –æ—á–∏—Å—Ç–∫–∏:**
```124:136:vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js
  static cleanExpired() {
    const now = Date.now();
    const keysToDelete = [];
    
    for (const [key, entry] of this.cache.entries()) {
      const age = now - entry.timestamp;
      if (age > entry.ttl) {
        keysToDelete.push(key);
      }
    }
    
    keysToDelete.forEach(key => this.cache.delete(key));
  }
```

---

## üîç –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞

### –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è

1. **–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–∞:**
   ```javascript
   // TicketRepository.updateTicket()
   if (success) {
     CacheManager.invalidateTicketsCache();
   }
   ```

2. **–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–∫–µ—Ç–∞:**
   ```javascript
   // TicketRepository.createTicket()
   if (ticketId > 0) {
     CacheManager.invalidateTicketsCache();
   }
   ```

3. **–ü–æ—Å–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–∞:**
   ```javascript
   // DashboardSector1CService.assignTicket()
   if (result) {
     CacheManager.invalidateTicketsCache();
   }
   ```

### –ú–µ—Ç–æ–¥—ã –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### `invalidateByPrefix(prefix)` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏, –∫–ª—é—á–∏ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞

**–ü—Ä–∏–º–µ—Ä:**
```javascript
// –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Ç–∏–∫–µ—Ç–æ–≤
CacheManager.invalidateByPrefix('tickets:');
```

**–ö–æ–¥:**
```107:117:vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js
  static invalidateByPrefix(prefix) {
    const keysToDelete = [];
    
    for (const key of this.cache.keys()) {
      if (key.startsWith(prefix)) {
        keysToDelete.push(key);
      }
    }
    
    keysToDelete.forEach(key => this.cache.delete(key));
  }
```

#### `invalidateTicketsCache()` ‚Äî –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ —Ç–∏–∫–µ—Ç–æ–≤

**–£–¥–∞–ª—è–µ—Ç:**
- –í—Å–µ –∑–∞–ø–∏—Å–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `tickets:`
- –ó–∞–ø–∏—Å—å `sector:data` (—Ç–∞–∫ –∫–∞–∫ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–∫–µ—Ç–æ–≤)

**–ö–æ–¥:**
```208:211:vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js
  static invalidateTicketsCache() {
    this.invalidateByPrefix('tickets:');
    this.invalidateByPrefix('sector:');
  }
```

---

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∫–µ—à–∞:**
- –ö–∞–∂–¥–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –¥–∞—à–±–æ—Ä–¥–∞: 3-5 —Å–µ–∫—É–Ω–¥
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 3+ (–ø–æ —Å—Ç–∞–¥–∏—è–º) + N (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Bitrix24 API: –≤—ã—Å–æ–∫–∞—è

**–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∫–µ—à–∞:**
- –ü–µ—Ä–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ: 3-5 —Å–µ–∫—É–Ω–¥ (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ API)
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ (–≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç): < 100 –º—Å (–∏–∑ –∫–µ—à–∞)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 0 (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–µ—à–∞)
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Bitrix24 API: —Å–Ω–∏–∂–µ–Ω–∞ –Ω–∞ 70-80%

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

- **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç–∏—è—Ö
- **–ú–µ–Ω—å—à–µ –∑–∞–¥–µ—Ä–∂–µ–∫** –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –¥–∞—à–±–æ—Ä–¥–æ–º
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** ‚Äî –º–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ API

---

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–µ—à–∞

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–µ—à:

```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ –∫–µ—à–∞
const data = await DashboardSector1CService.getSectorData(false);
```

### –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–≥–æ –∫–µ—à–∞

```javascript
CacheManager.clear();
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```javascript
const stats = CacheManager.getStats();
// { total: 5, valid: 3, expired: 2 }
```

**–ö–æ–¥:**
```143:162:vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js
  static getStats() {
    const now = Date.now();
    let expiredCount = 0;
    let validCount = 0;
    
    for (const entry of this.cache.values()) {
      const age = now - entry.timestamp;
      if (age > entry.ttl) {
        expiredCount++;
      } else {
        validCount++;
      }
    }
    
    return {
      total: this.cache.size,
      valid: validCount,
      expired: expiredCount
    };
  }
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏

- –ö–µ—à —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (Map)
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–µ—à –æ—á–∏—â–∞–µ—Ç—Å—è
- –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–†–∞–∑–º–µ—Ä:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω —Ç–æ–ª—å–∫–æ –ø–∞–º—è—Ç—å—é –±—Ä–∞—É–∑–µ—Ä–∞
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π TTL ‚Äî 30 –º–∏–Ω—É—Ç (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –ö–µ—à –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ù–µ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑—É–º–Ω—ã–µ TTL
- –ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞

```javascript
import { DashboardSector1CService } from '@/services/dashboard-sector-1c';

// –° –∫–µ—à–µ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
const data = await DashboardSector1CService.getSectorData();

// –ë–µ–∑ –∫–µ—à–∞ (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
const freshData = await DashboardSector1CService.getSectorData(false);
```

### –ü—Ä–∏–º–µ—Ä 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ —Å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∫–µ—à–∞

```javascript
import { DashboardSector1CService } from '@/services/dashboard-sector-1c';

// –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–µ—à)
await DashboardSector1CService.assignTicket(ticketId, employeeId, stageId);

// –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤—è—Ç—Å—è –∏–∑ API
const updatedData = await DashboardSector1CService.getSectorData();
```

### –ü—Ä–∏–º–µ—Ä 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–µ—à–∞

```javascript
import { CacheManager } from '@/services/dashboard-sector-1c/cache/cache-manager';

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
const stats = CacheManager.getStats();
console.log(`–ö–µ—à: ${stats.valid} –≤–∞–ª–∏–¥–Ω—ã—Ö, ${stats.expired} –∏—Å—Ç—ë–∫—à–∏—Ö`);

// –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
CacheManager.cleanExpired();

// –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–≥–æ –∫–µ—à–∞
CacheManager.clear();
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `DOCS/TASKS/TASK-005-dashboard-sector-1c.md` ‚Äî –∏—Å—Ö–æ–¥–Ω–∞—è –∑–∞–¥–∞—á–∞
- `DOCS/REFACTORING/TASK-005-refactoring-plan.md` ‚Äî –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- `DOCS/ARCHITECTURE/dashboard-sector-1c.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞—à–±–æ—Ä–¥–∞
- `vue-app/src/services/dashboard-sector-1c/cache/cache-manager.js` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–µ—à–∞

---

## üìÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **2025-12-06 12:22 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç –æ –º–µ—Ö–∞–Ω–∏–∑–º–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è TASK-005 –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

---

**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–æ


