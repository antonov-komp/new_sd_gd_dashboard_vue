# –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-09 09:51 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–¢–∏–ø:** –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üìã –û–±–∑–æ—Ä

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ–±—Ö—É–∫–æ–≤ ‚Äî —ç—Ç–æ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –æ—Ç Bitrix24. –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç POST-–∑–∞–ø—Ä–æ—Å—ã, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏—Ö –∏ –ª–æ–≥–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏—è.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `api/webhook-handler.php`

**URL:** `https://your-domain.com/api/webhook-handler.php`

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±—Ö—É–∫–∞

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞

Bitrix24 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST-–∑–∞–ø—Ä–æ—Å –Ω–∞ endpoint:

```
POST /api/webhook-handler.php
Content-Type: application/x-www-form-urlencoded
X-Bitrix-Signature: {HMAC-SHA256 –ø–æ–¥–ø–∏—Å—å}

{—Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è}
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–∞ –∑–∞–ø—Ä–æ—Å–∞

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–æ–¥ POST:

```php
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo json_encode(['error' => 'Method not allowed']);
    exit;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ POST –∑–∞–ø—Ä–æ—Å ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚ùå –î—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 405

### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ raw body

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —á–∏—Ç–∞–µ—Ç —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

```php
$rawBody = file_get_contents('php://input');
```

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `php://input`, –∞ –Ω–µ `$_POST`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∏.

### –®–∞–≥ 4: –ü–∞—Ä—Å–∏–Ω–≥ payload

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–∞—Ä—Å–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞:

**–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç Bitrix24:**
- `application/x-www-form-urlencoded` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)
- `application/json` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ payload:**
```php
[
    'event' => 'ONTASKADD',           // –¢–∏–ø —Å–æ–±—ã—Ç–∏—è
    'data' => [                      // –î–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
        'TASK' => [
            'ID' => '12345',
            'TITLE' => '–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞',
            // ...
        ]
    ],
    'ts' => '1234567890',            // Timestamp (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    'auth' => [...]                  // –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
]
```

### –®–∞–≥ 5: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å—å –≤–µ–±—Ö—É–∫–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

**–ü—Ä–æ—Ü–µ—Å—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞:**
   - –ò–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `X-Bitrix-Signature` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±)
   - –ò–∑ payload (–µ—Å–ª–∏ Bitrix24 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ—ë —Ç–∞–º)
   - –ò–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `token` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±)

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞:**
   - –ò–∑ —Ñ–∞–π–ª–∞ `webhook-secret.php` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - –ò–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `BITRIX24_WEBHOOK_SECRET`
   - –ò–∑ `settings.json` (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

3. **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ HMAC-SHA256:**
   ```php
   $computedSignature = hash_hmac('sha256', $rawBody, $secret);
   ```

4. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–µ–π:**
   ```php
   hash_equals($signature, $computedSignature)
   ```
   
   **–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `hash_equals()` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç timing attacks.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ–¥–ø–∏—Å—å –≤–∞–ª–∏–¥–Ω–∞ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚ùå –ü–æ–¥–ø–∏—Å—å –Ω–µ–≤–∞–ª–∏–¥–Ω–∞ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 401

### –®–∞–≥ 6: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π:

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- `event` ‚Äî —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ONTASKADD`)
- `data` ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Å–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –®–∞–≥ 7: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ª–æ–≥–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑ `WebhookLoggingService`:

**–ü—Ä–æ—Ü–µ—Å—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏—è:**
   ```php
   $event = new WebhookEvent($eventType, $eventData);
   ```

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
   - `tasks` ‚Äî –¥–ª—è —Å–æ–±—ã—Ç–∏–π `ONTASK*`
   - `smart-processes` ‚Äî –¥–ª—è —Å–æ–±—ã—Ç–∏–π `ONCRMDYNAMIC*`
   - `errors` ‚Äî –¥–ª—è –æ—à–∏–±–æ–∫

3. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π:**
   - –ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –≤–∞–∂–Ω—ã–µ –ø–æ–ª—è –∏–∑ —Å–æ–±—ã—Ç–∏—è
   - –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è `ONTASKADD`: `task_id`, `task_title`, `created_by`

4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª:**
   - –ü—É—Ç—å: `logs/webhooks/{category}/YYYY-MM-DD-HH.json`
   - –§–æ—Ä–º–∞—Ç: JSON –º–∞—Å—Å–∏–≤ –∑–∞–ø–∏—Å–µ–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–æ–±—ã—Ç–∏–µ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–æ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è ID –∑–∞–ø–∏—Å–∏
- ‚ùå –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–∞, –Ω–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è

### –®–∞–≥ 8: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –¥–ª—è Bitrix24:

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
    "success": true,
    "event": "ONTASKADD",
    "category": "tasks",
    "logging_id": "2025-12-09T10:15:30+03:00",
    "timestamp": "2025-12-09T10:15:30+03:00"
}
```

**HTTP —Å—Ç–∞—Ç—É—Å:** 200 OK

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫:

#### 1. –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∏

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç –≤ `webhook-secret.php`
- –ü–æ–¥–ø–∏—Å—å –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–π

**–û—Ç–≤–µ—Ç:**
```json
{
    "error": "Webhook validation failed",
    "error_description": "Invalid signature"
}
```

**HTTP —Å—Ç–∞—Ç—É—Å:** 401 Unauthorized

#### 2. –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏—á–∏–Ω–∞:**
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `event` –∏–ª–∏ `data`
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

**–û—Ç–≤–µ—Ç:**
```json
{
    "error": "Webhook validation failed",
    "error_description": "Missing required field: event"
}
```

**HTTP —Å—Ç–∞—Ç—É—Å:** 401 Unauthorized

#### 3. –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ª–æ–≥–æ–≤
- –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞

**–û—Ç–≤–µ—Ç:**
```json
{
    "error": "Webhook logging failed",
    "error_description": "Failed to save log entry"
}
```

**HTTP —Å—Ç–∞—Ç—É—Å:** 500 Internal Server Error

**–í–∞–∂–Ω–æ:** –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–µ–±—Ö—É–∫–∞. –°–æ–±—ã—Ç–∏–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è.

#### 4. –û–±—â–∞—è –æ—à–∏–±–∫–∞

**–ü—Ä–∏—á–∏–Ω–∞:**
- –õ—é–±–∞—è –¥—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ

**–û—Ç–≤–µ—Ç:**
```json
{
    "error": "Webhook processing failed",
    "error_description": "Error message"
}
```

**HTTP —Å—Ç–∞—Ç—É—Å:** 400 Bad Request

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏

**–ó–∞—á–µ–º –Ω—É–∂–Ω–∞:**
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ì–∞—Ä–∞–Ω—Ç–∏—è, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—à—ë–ª –æ—Ç Bitrix24

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. Bitrix24 –≤—ã—á–∏—Å–ª—è–µ—Ç HMAC-SHA256 –ø–æ–¥–ø–∏—Å—å –æ—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-Bitrix-Signature`
3. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–≤–æ—é –ø–æ–¥–ø–∏—Å—å –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç

**–í–∞–∂–Ω–æ:**
- –°–µ–∫—Ä–µ—Ç –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç –≤ URL –∏–ª–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `hash_equals()` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (–∑–∞—â–∏—Ç–∞ –æ—Ç timing attacks)

### CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏:

```php
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: POST, OPTIONS');
header('Access-Control-Allow-Headers: Content-Type, X-Requested-With, X-Bitrix-Signature');
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å `Access-Control-Allow-Origin` –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏.

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–ó–∞–ø—Ä–æ—Å –æ—Ç Bitrix24:**
```
POST /api/webhook-handler.php
Content-Type: application/x-www-form-urlencoded
X-Bitrix-Signature: a1b2c3d4e5f6...

event=ONTASKADD&data[TASK][ID]=12345&data[TASK][TITLE]=–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "success": true,
    "event": "ONTASKADD",
    "category": "tasks",
    "logging_id": "2025-12-09T10:15:30+03:00",
    "timestamp": "2025-12-09T10:15:30+03:00"
}
```

### –ü—Ä–∏–º–µ—Ä 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–ó–∞–ø—Ä–æ—Å –æ—Ç Bitrix24:**
```
POST /api/webhook-handler.php
Content-Type: application/x-www-form-urlencoded
X-Bitrix-Signature: f6e5d4c3b2a1...

event=ONTASKUPDATE&data[TASK][ID]=12345&data[TASK][TITLE]=–û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "success": true,
    "event": "ONTASKUPDATE",
    "category": "tasks",
    "logging_id": "2025-12-09T10:20:45+03:00",
    "timestamp": "2025-12-09T10:20:45+03:00"
}
```

### –ü—Ä–∏–º–µ—Ä 3: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ó–∞–ø—Ä–æ—Å (–±–µ–∑ –ø–æ–¥–ø–∏—Å–∏):**
```
POST /api/webhook-handler.php
Content-Type: application/x-www-form-urlencoded

event=ONTASKADD&data[TASK][ID]=12345
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "error": "Webhook validation failed",
    "error_description": "Invalid signature"
}
```

**HTTP —Å—Ç–∞—Ç—É—Å:** 401

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤:
- `logs/webhooks/errors/YYYY-MM-DD-HH.json` ‚Äî –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥ PHP (—á–µ—Ä–µ–∑ `error_log()`)

### –ú–µ—Ç—Ä–∏–∫–∏

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞–ø—Ä—è–º—É—é, –Ω–æ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—á–µ—Ä–µ–∑ –ª–æ–≥–∏)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ (—á–µ—Ä–µ–∑ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫)
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥)

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫:
- **05-logging.md** ‚Äî –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
- **06-api-reading.md** ‚Äî API –¥–ª—è —á—Ç–µ–Ω–∏—è –ª–æ–≥–æ–≤

---

**–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- `03-initialization.md` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–∞ –≤ Bitrix24
- `02-architecture.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
- `src/WebhookLogs/Service/WebhookHandlerService.php` ‚Äî –∫–æ–¥ —Å–µ—Ä–≤–∏—Å–∞

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-09 09:51 (UTC+3, –ë—Ä–µ—Å—Ç)



