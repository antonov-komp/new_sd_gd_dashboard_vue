# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-09 09:51 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–¢–∏–ø:** –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üìã –û–±–∑–æ—Ä

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ–±—Ö—É–∫–∞—Ö –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON-—Ñ–∞–π–ª—ã –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `WebhookLoggingService` ‚Äî —Å–µ—Ä–≤–∏—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `EventDetailsExtractor` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π —Å–æ–±—ã—Ç–∏–π
- `WebhookLogsRepository` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª—ã

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏—è

–ü–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–µ–±—Ö—É–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å—É—â–Ω–æ—Å—Ç—å `WebhookEvent`:

```php
$event = new WebhookEvent($eventType, $eventData, $timestamp);
```

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –¢–∏–ø —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ONTASKADD`)
- –î–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–º–∞—Å—Å–∏–≤ –∏–∑ payload)
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
- IP –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü–æ–ª–Ω—ã–π payload (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –®–∞–≥ 2: –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è:

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- –¢–∏–ø —Å–æ–±—ã—Ç–∏—è –Ω–µ –ø—É—Å—Ç–æ–π
- –§–æ—Ä–º–∞—Ç —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è (—Ç–æ–ª—å–∫–æ –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è)
- –î–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è ‚Äî –º–∞—Å—Å–∏–≤
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –≤–∞–ª–∏–¥–Ω–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í–∞–ª–∏–¥–Ω–æ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω–æ ‚Äî –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

### –®–∞–≥ 3: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

–°–æ–±—ã—Ç–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**

1. **`tasks`** ‚Äî —Å–æ–±—ã—Ç–∏—è –∑–∞–¥–∞—á:
   - `ONTASKADD` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
   - `ONTASKUPDATE` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
   - `ONTASKDELETE` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
   - `ONTASKCOMMENTADD` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
   - `ONTASKCOMMENTUPDATE` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
   - `ONTASKCOMMENTDELETE` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

2. **`smart-processes`** ‚Äî —Å–æ–±—ã—Ç–∏—è —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤:
   - `ONCRMDYNAMICITEMADD` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
   - `ONCRMDYNAMICITEMUPDATE` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
   - `ONCRMDYNAMICITEMDELETE` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞

3. **`errors`** ‚Äî –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏:
   - –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
   - –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏

**–ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:**
```php
if (strpos($eventType, 'ONTASK') === 0) {
    return 'tasks';
} elseif (strpos($eventType, 'ONCRMDYNAMIC') === 0) {
    return 'smart-processes';
} else {
    return 'errors';
}
```

### –®–∞–≥ 4: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π —Å–æ–±—ã—Ç–∏—è

–ò–∑ —Å–æ–±—ã—Ç–∏—è –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –≤–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

**–î–ª—è —Å–æ–±—ã—Ç–∏–π –∑–∞–¥–∞—á (`ONTASK*`):**

–ü—Ä–∏–º–µ—Ä –¥–ª—è `ONTASKADD`:
```php
[
    'task_id' => 12345,
    'task_title' => '–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞',
    'created_by' => 42,
    'responsible_id' => 43,
    'status_id' => 2,
    'priority' => 1
]
```

**–î–ª—è —Å–æ–±—ã—Ç–∏–π —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (`ONCRMDYNAMIC*`):**

–ü—Ä–∏–º–µ—Ä –¥–ª—è `ONCRMDYNAMICITEMADD`:
```php
[
    'entity_id' => 67890,
    'entity_type_id' => 128,
    'title' => '–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç',
    'created_by' => 42
]
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤–∞–∂–Ω—ã–º –ø–æ–ª—è–º
- –£–¥–æ–±–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- –ù–µ –Ω—É–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –≤–µ—Å—å payload

### –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞

–°–æ–∑–¥–∞—ë—Ç—Å—è —Å—É—â–Ω–æ—Å—Ç—å `WebhookLogEntry`:

```php
$logEntry = WebhookLogEntry::fromWebhookEvent($event, $details);
```

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ (ISO 8601)
- IP –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞
- –¢–∏–ø —Å–æ–±—ã—Ç–∏—è
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è
- –ü–æ–ª–Ω—ã–π payload
- –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –¥–µ—Ç–∞–ª–∏

### –®–∞–≥ 6: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª

–ó–∞–ø–∏—Å—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ JSON-—Ñ–∞–π–ª —á–µ—Ä–µ–∑ `WebhookLogsRepository`:

**–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É:**
```
logs/webhooks/{category}/YYYY-MM-DD-HH.json
```

**–ü—Ä–∏–º–µ—Ä:**
```
logs/webhooks/tasks/2025-12-09-10.json
```

**–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:**
```json
[
  {
    "timestamp": "2025-12-09T10:15:30+03:00",
    "ip": "195.208.184.34",
    "event": "ONTASKADD",
    "category": "tasks",
    "payload": {
      "event": "ONTASKADD",
      "data": {
        "TASK": {
          "ID": "12345",
          "TITLE": "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞"
        }
      }
    },
    "details": {
      "task_id": 12345,
      "task_title": "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞",
      "created_by": 42
    }
  }
]
```

**–ü—Ä–æ—Ü–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:**
   - –ï—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

2. **–ß—Ç–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π:**
   - –ß–∏—Ç–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
   - –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏:**
   - –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü –º–∞—Å—Å–∏–≤–∞

4. **–ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª:**
   - –ú–∞—Å—Å–∏–≤ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ JSON
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `logs/webhooks/`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
logs/webhooks/
‚îú‚îÄ‚îÄ tasks/                    # –õ–æ–≥–∏ —Å–æ–±—ã—Ç–∏–π –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ 2025-12-09-10.json   # –õ–æ–≥–∏ –∑–∞ 10:00-10:59
‚îÇ   ‚îú‚îÄ‚îÄ 2025-12-09-11.json   # –õ–æ–≥–∏ –∑–∞ 11:00-11:59
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ smart-processes/          # –õ–æ–≥–∏ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ 2025-12-09-10.json
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ errors/                   # –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
    ‚îú‚îÄ‚îÄ 2025-12-09-10.json
    ‚îî‚îÄ‚îÄ ...
```

### –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞

**–ü–∞—Ç—Ç–µ—Ä–Ω:** `YYYY-MM-DD-HH.json`

**–ü—Ä–∏–º–µ—Ä—ã:**
- `2025-12-09-10.json` ‚Äî –ª–æ–≥–∏ –∑–∞ 10:00-10:59
- `2025-12-09-14.json` ‚Äî –ª–æ–≥–∏ –∑–∞ 14:00-14:59
- `2025-12-10-00.json` ‚Äî –ª–æ–≥–∏ –∑–∞ 00:00-00:59

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –ª–æ–≥–∏ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —á–∞—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –£–¥–æ–±–Ω–æ –¥–ª—è –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è

### –§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏:**
```json
{
  "timestamp": "2025-12-09T10:15:30+03:00",  // ISO 8601
  "ip": "195.208.184.34",                    // IP –∞–¥—Ä–µ—Å
  "event": "ONTASKADD",                      // –¢–∏–ø —Å–æ–±—ã—Ç–∏—è
  "category": "tasks",                       // –ö–∞—Ç–µ–≥–æ—Ä–∏—è
  "payload": { ... },                        // –ü–æ–ª–Ω—ã–π payload
  "details": { ... }                         // –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –¥–µ—Ç–∞–ª–∏
}
```

**–ü–æ–ª—è:**
- `timestamp` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, ISO 8601 —Ñ–æ—Ä–º–∞—Ç
- `ip` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, IP –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞
- `event` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è
- `category` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- `payload` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, –ø–æ–ª–Ω—ã–π payload
- `details` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –¥–µ—Ç–∞–ª–∏

---

## üîç –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π —Å–æ–±—ã—Ç–∏–π

### –î–ª—è —Å–æ–±—ã—Ç–∏–π –∑–∞–¥–∞—á

**–°–æ–±—ã—Ç–∏–µ:** `ONTASKADD`, `ONTASKUPDATE`

**–ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –ø–æ–ª—è:**
- `task_id` ‚Äî ID –∑–∞–¥–∞—á–∏
- `task_title` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `created_by` ‚Äî ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
- `responsible_id` ‚Äî ID –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `status_id` ‚Äî —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
- `priority` ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- `deadline` ‚Äî —Å—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–ü—Ä–∏–º–µ—Ä:**
```json
{
  "task_id": 12345,
  "task_title": "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞",
  "created_by": 42,
  "responsible_id": 43,
  "status_id": 2,
  "priority": 1
}
```

**–°–æ–±—ã—Ç–∏–µ:** `ONTASKCOMMENTADD`

**–ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –ø–æ–ª—è:**
- `task_id` ‚Äî ID –∑–∞–¥–∞—á–∏
- `comment_id` ‚Äî ID –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- `comment_text` ‚Äî —Ç–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- `author_id` ‚Äî ID –∞–≤—Ç–æ—Ä–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

### –î–ª—è —Å–æ–±—ã—Ç–∏–π —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**–°–æ–±—ã—Ç–∏–µ:** `ONCRMDYNAMICITEMADD`, `ONCRMDYNAMICITEMUPDATE`

**–ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –ø–æ–ª—è:**
- `entity_id` ‚Äî ID —ç–ª–µ–º–µ–Ω—Ç–∞
- `entity_type_id` ‚Äî ID —Ç–∏–ø–∞ —Å—É—â–Ω–æ—Å—Ç–∏
- `title` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
- `created_by` ‚Äî ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
- `updated_by` ‚Äî ID –æ–±–Ω–æ–≤–∏–≤—à–µ–≥–æ

**–ü—Ä–∏–º–µ—Ä:**
```json
{
  "entity_id": 67890,
  "entity_type_id": 128,
  "title": "–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç",
  "created_by": 42
}
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–µ—à–∏—Ä—É–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã:

**–ß—Ç–æ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è:**
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**TTL –∫–µ—à–∞:** 60 —Å–µ–∫—É–Ω–¥

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –ú–µ–Ω—å—à–µ –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏

**–ë–∞—Ç—á–∏–Ω–≥:**
- –ó–∞–ø–∏—Å–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
- –§–∞–π–ª –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- JSON —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `JSON_PRETTY_PRINT`

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –ú–µ—Ç—Ä–∏–∫–∏

–ú–æ–¥—É–ª—å —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è
- –†–∞–∑–º–µ—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏—è
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ –Ω–∞–≥—Ä—É–∑–∫–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫

#### 1. –û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è
- –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é

**–î–µ–π—Å—Ç–≤–∏–µ:**
- –°–æ–±—ã—Ç–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é `errors`
- –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ª–æ–≥

#### 2. –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- –î–∏—Å–∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω
- –û—à–∏–±–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

**–î–µ–π—Å—Ç–≤–∏–µ:**
- –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤—ã—à–µ

#### 3. –û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–∂–∏–¥–∞–µ–º—ã—Ö –ø–æ–ª–µ–π

**–î–µ–π—Å—Ç–≤–∏–µ:**
- –î–µ—Ç–∞–ª–∏ –Ω–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è (–æ—Å—Ç–∞—ë—Ç—Å—è `null`)
- –°–æ–±—ã—Ç–∏–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–∞–π–ª–æ–≤

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```php
use WebhookLogs\Config\WebhookLogsConfig;

// –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
$format = WebhookLogsConfig::getLogFileDateFormat();
// –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 'Y-m-d-H'
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```php
// –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å
$basePath = WebhookLogsConfig::getBaseLogsPath();
// –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: logs/webhooks/
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫:
- **06-api-reading.md** ‚Äî API –¥–ª—è —á—Ç–µ–Ω–∏—è –ª–æ–≥–æ–≤
- **07-realtime.md** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

**–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- `04-webhook-handler.md` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤
- `02-architecture.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
- `src/WebhookLogs/Service/WebhookLoggingService.php` ‚Äî –∫–æ–¥ —Å–µ—Ä–≤–∏—Å–∞

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-09 09:51 (UTC+3, –ë—Ä–µ—Å—Ç)



