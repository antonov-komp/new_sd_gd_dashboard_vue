# API –¥–ª—è —á—Ç–µ–Ω–∏—è –ª–æ–≥–æ–≤: –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ —á–µ—Ä–µ–∑ API

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-09 09:51 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–¢–∏–ø:** –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üìã –û–±–∑–æ—Ä

API –¥–ª—è —á—Ç–µ–Ω–∏—è –ª–æ–≥–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ –≤–µ–±—Ö—É–∫–æ–≤.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `api/webhook-logs.php`

**URL:** `https://your-domain.com/api/webhook-logs.php`

**–ú–µ—Ç–æ–¥:** GET

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–≥–æ–≤

### –®–∞–≥ 1: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞

–ö–ª–∏–µ–Ω—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç GET-–∑–∞–ø—Ä–æ—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```
GET /api/webhook-logs.php?category=tasks&date=2025-12-09&page=1&limit=50
```

### –®–∞–≥ 2: –ü–∞—Ä—Å–∏–Ω–≥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

API –ø–∞—Ä—Å–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (tasks, smart-processes, errors)
- `event` ‚Äî —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, ONTASKADD)
- `date` ‚Äî –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
- `hour` ‚Äî —á–∞—Å (0-23)
- `dateFrom` ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞
- `dateTo` ‚Äî –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞
- `ip` ‚Äî IP –∞–¥—Ä–µ—Å
- `status` ‚Äî —Å—Ç–∞—Ç—É—Å

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏:**
- `page` ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞—á–∏–Ω–∞—è —Å 1)
- `limit` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

### –®–∞–≥ 3: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

API –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è –≤–∞–ª–∏–¥–Ω–∞ (tasks, smart-processes, errors)
- –î–∞—Ç–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (YYYY-MM-DD)
- –ß–∞—Å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0-23
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏ –ª–∏–º–∏—Ç ‚Äî –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞–ª–∏–¥–Ω—ã ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚ùå –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ–≤–∞–ª–∏–¥–Ω—ã ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 400

### –®–∞–≥ 4: –ß—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤

API —á–∏—Ç–∞–µ—Ç –ª–æ–≥–∏ —á–µ—Ä–µ–∑ `WebhookLogsRepository`:

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏—è
2. –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É/—á–∞—Å
3. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏–∑ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤

### –®–∞–≥ 5: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤

API –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã –∫ –ª–æ–≥–∞–º:

**–§–∏–ª—å—Ç—Ä—ã:**
- –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—É–∂–µ –ø—Ä–∏–º–µ–Ω—ë–Ω –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏)
- –ü–æ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è
- –ü–æ IP –∞–¥—Ä–µ—Å—É
- –ü–æ –¥–∞—Ç–µ (dateFrom, dateTo)
- –ü–æ —Å—Ç–∞—Ç—É—Å—É

### –®–∞–≥ 6: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

API —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∏:

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –ü–æ timestamp (–æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º)

**–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:**
- –°–Ω–∞—á–∞–ª–∞ –ø–æ timestamp (desc)
- –ó–∞—Ç–µ–º –ø–æ event (asc)
- –ó–∞—Ç–µ–º –ø–æ category (asc)

### –®–∞–≥ 7: –ü–∞–≥–∏–Ω–∞—Ü–∏—è

API –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é:

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–¥—Å—á—ë—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
2. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
3. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –®–∞–≥ 8: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

API —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç JSON-–æ—Ç–≤–µ—Ç:

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "logs": [
    {
      "timestamp": "2025-12-09T10:15:30+03:00",
      "ip": "195.208.184.34",
      "event": "ONTASKADD",
      "category": "tasks",
      "payload": { ... },
      "details": { ... }
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 100,
    "pages": 2
  }
}
```

---

## üì° –ü–∞—Ä–∞–º–µ—Ç—Ä—ã API

### –§–∏–ª—å—Ç—Ä—ã

#### category

**–¢–∏–ø:** string  
**–ó–Ω–∞—á–µ–Ω–∏—è:** `tasks`, `smart-processes`, `errors`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/webhook-logs.php?category=tasks
```

#### event

**–¢–∏–ø:** string  
**–ó–Ω–∞—á–µ–Ω–∏—è:** `ONTASKADD`, `ONTASKUPDATE`, `ONCRMDYNAMICITEMADD`, ...  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–∏–ø —Å–æ–±—ã—Ç–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/webhook-logs.php?event=ONTASKADD
```

#### date

**–¢–∏–ø:** string  
**–§–æ—Ä–º–∞—Ç:** `YYYY-MM-DD`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–∞—Ç–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/webhook-logs.php?date=2025-12-09
```

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞

#### hour

**–¢–∏–ø:** integer  
**–î–∏–∞–ø–∞–∑–æ–Ω:** 0-23  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ß–∞—Å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/webhook-logs.php?hour=10
```

#### dateFrom

**–¢–∏–ø:** string  
**–§–æ—Ä–º–∞—Ç:** `YYYY-MM-DD`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/webhook-logs.php?dateFrom=2025-12-01&dateTo=2025-12-09
```

#### dateTo

**–¢–∏–ø:** string  
**–§–æ—Ä–º–∞—Ç:** `YYYY-MM-DD`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

#### ip

**–¢–∏–ø:** string  
**–û–ø–∏—Å–∞–Ω–∏–µ:** IP –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/webhook-logs.php?ip=195.208.184.34
```

#### status

**–¢–∏–ø:** string  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°—Ç–∞—Ç—É—Å —Å–æ–±—ã—Ç–∏—è

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è

#### page

**–¢–∏–ø:** integer  
**–ú–∏–Ω–∏–º—É–º:** 1  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/webhook-logs.php?page=2
```

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 1

#### limit

**–¢–∏–ø:** integer  
**–ú–∏–Ω–∏–º—É–º:** 1  
**–ú–∞–∫—Å–∏–º—É–º:** 1000  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/webhook-logs.php?limit=100
```

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 50

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ª–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/webhook-logs.php
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "logs": [ ... ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 150,
    "pages": 3
  }
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ –∑–∞–¥–∞—á –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/webhook-logs.php?category=tasks&date=2025-12-09
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "logs": [
    {
      "timestamp": "2025-12-09T10:15:30+03:00",
      "event": "ONTASKADD",
      "category": "tasks",
      ...
    }
  ],
  "pagination": { ... }
}
```

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —á–∞—Å

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/webhook-logs.php?category=tasks&date=2025-12-09&hour=10
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "logs": [ ... ],
  "pagination": { ... }
}
```

### –ü—Ä–∏–º–µ—Ä 4: –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/webhook-logs.php?category=tasks&page=2&limit=25
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "logs": [ ... ],
  "pagination": {
    "page": 2,
    "limit": 25,
    "total": 150,
    "pages": 6
  }
}
```

### –ü—Ä–∏–º–µ—Ä 5: –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ –ø–æ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/webhook-logs.php?event=ONTASKADD&date=2025-12-09
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "logs": [
    {
      "timestamp": "2025-12-09T10:15:30+03:00",
      "event": "ONTASKADD",
      ...
    }
  ],
  "pagination": { ... }
}
```

### –ü—Ä–∏–º–µ—Ä 6: –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ –∑–∞ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/webhook-logs.php?dateFrom=2025-12-01&dateTo=2025-12-09
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "logs": [ ... ],
  "pagination": { ... }
}
```

---

## ‚ö° –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–µ—à

API –∫–µ—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

**–ö–ª—é—á –∫–µ—à–∞:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
- –í–∫–ª—é—á–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã, —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ª–∏–º–∏—Ç

**TTL –∫–µ—à–∞:** 60 —Å–µ–∫—É–Ω–¥

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –í–æ–∑–º–æ–∂–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–¥–æ 60 —Å–µ–∫—É–Ω–¥)

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–µ—à–∞

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∫–µ—à–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `useCache=false` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ GET).

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫

#### 1. –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ù–µ–≤–∞–ª–∏–¥–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —á–∞—Å

**–û—Ç–≤–µ—Ç:**
```json
{
  "error": "Validation failed",
  "error_description": "Invalid category: invalid-category"
}
```

**HTTP —Å—Ç–∞—Ç—É—Å:** 400 Bad Request

#### 2. –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è –ª–æ–≥–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –§–∞–π–ª—ã –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã
- –û—à–∏–±–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

**–û—Ç–≤–µ—Ç:**
```json
{
  "error": "Failed to get logs",
  "error_description": "Cannot read log file"
}
```

**HTTP —Å—Ç–∞—Ç—É—Å:** 500 Internal Server Error

#### 3. –û–±—â–∞—è –æ—à–∏–±–∫–∞

**–ü—Ä–∏—á–∏–Ω–∞:**
- –õ—é–±–∞—è –¥—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "error": "Internal server error",
  "error_description": "Error message"
}
```

**HTTP —Å—Ç–∞—Ç—É—Å:** 500 Internal Server Error

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ (TODO)
- –í –±—É–¥—É—â–µ–º –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–¥–µ–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```php
if (!hasAccessToWebhookLogs()) {
    http_response_code(403);
    echo json_encode(['error' => 'Access denied']);
    exit;
}
```

### CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏

API —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏:

```php
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, OPTIONS');
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å `Access-Control-Allow-Origin`.

---

## üìä –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "success": true,
  "logs": [
    {
      "timestamp": "2025-12-09T10:15:30+03:00",
      "ip": "195.208.184.34",
      "event": "ONTASKADD",
      "category": "tasks",
      "payload": {
        "event": "ONTASKADD",
        "data": {
          "TASK": {
            "ID": "12345",
            "TITLE": "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞"
          }
        }
      },
      "details": {
        "task_id": 12345,
        "task_title": "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞",
        "created_by": 42
      }
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 100,
    "pages": 2
  }
}
```

### –û—à–∏–±–∫–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "error": "Error type",
  "error_description": "Detailed error message"
}
```

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ curl

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

```bash
curl "https://your-domain.com/api/webhook-logs.php"
```

### –° —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

```bash
curl "https://your-domain.com/api/webhook-logs.php?category=tasks&date=2025-12-09"
```

### –° –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

```bash
curl "https://your-domain.com/api/webhook-logs.php?page=2&limit=25"
```

### –° —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º (jq)

```bash
curl "https://your-domain.com/api/webhook-logs.php" | jq '.'
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è API –¥–ª—è —á—Ç–µ–Ω–∏—è –ª–æ–≥–æ–≤ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫:
- **07-realtime.md** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **08-web-interface.md** ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

**–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- `05-logging.md` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
- `02-architecture.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
- `src/WebhookLogs/Service/WebhookLogsApiService.php` ‚Äî –∫–æ–¥ —Å–µ—Ä–≤–∏—Å–∞

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-09 09:51 (UTC+3, –ë—Ä–µ—Å—Ç)

