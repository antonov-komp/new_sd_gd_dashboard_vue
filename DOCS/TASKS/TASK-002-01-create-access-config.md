# TASK-002-01: Создание конфига для проверки доступа по ID отдела

**Дата создания:** 2025-12-05 21:51 (UTC+3, Брест)  
**Статус:** Завершена  
**Приоритет:** Высокий  
**Исполнитель:** Bitrix24 Программист (Vue.js)  
**Зависимости:** Нет  
**Связанные задачи:** TASK-002-02, TASK-002-03, TASK-002-04, TASK-002-05

## Описание
Создать внутренний конфигурационный файл, который будет содержать список разрешённых ID отделов для доступа к приложению. Конфиг должен быть простым, легко редактируемым и храниться в структуре Vue.js приложения.

## Контекст
Приложение должно проверять, принадлежит ли текущий пользователь к разрешённым отделам. Список разрешённых отделов должен храниться в конфигурационном файле, который можно легко обновить без изменения основного кода.

## Модули и компоненты
- `vue-app/src/config/access-config.js` — конфигурационный файл с массивом разрешённых ID отделов

## Ступенчатые подзадачи
1. Создать директорию `vue-app/src/config/` (если не существует)
2. Создать файл `access-config.js` с экспортом конфигурации
3. Определить структуру конфига (массив ID отделов)
4. Добавить комментарии с примерами использования
5. Экспортировать конфиг для использования в других модулях

## Технические требования
- Формат: JavaScript ES6 модуль (export)
- Структура: объект с массивом `allowedDepartmentIds`
- Тип данных: массив чисел (ID отделов)
- Пример значения: `[1, 5, 10]` (ID отделов, которым разрешён доступ)

## Пример кода

```javascript
/**
 * Конфигурация доступа к приложению по ID отдела
 * 
 * Определяет, какие отделы имеют доступ к приложению "Аналитика ИТ отдела для Генеральной дирекции"
 * 
 * Использование:
 * import { accessConfig } from '@/config/access-config.js';
 * const isAllowed = accessConfig.allowedDepartmentIds.includes(userDepartmentId);
 * 
 * Обновление:
 * Добавьте или удалите ID отделов в массиве allowedDepartmentIds
 */

export const accessConfig = {
  /**
   * Массив ID отделов, которым разрешён доступ к приложению
   * 
   * @type {number[]}
   * 
   * Примеры:
   * - [1] - только отдел с ID 1
   * - [1, 5, 10] - отделы с ID 1, 5 и 10
   * - [] - доступ запрещён всем (не рекомендуется)
   */
  allowedDepartmentIds: [
    // TODO: Заполните массив ID отделов, которым разрешён доступ
    // Пример: 1, 5, 10
  ]
};

/**
 * Проверка, разрешён ли доступ отделу с указанным ID
 * 
 * @param {number} departmentId - ID отдела
 * @returns {boolean} true, если доступ разрешён
 */
export function isDepartmentAllowed(departmentId) {
  if (!departmentId || typeof departmentId !== 'number') {
    return false;
  }
  
  return accessConfig.allowedDepartmentIds.includes(departmentId);
}

/**
 * Получение списка разрешённых ID отделов
 * 
 * @returns {number[]} Массив ID отделов
 */
export function getAllowedDepartmentIds() {
  return [...accessConfig.allowedDepartmentIds];
}
```

## Критерии приёмки
- [ ] Создан файл `vue-app/src/config/access-config.js`
- [ ] Конфиг экспортирует объект `accessConfig` с массивом `allowedDepartmentIds`
- [ ] Добавлена функция `isDepartmentAllowed(departmentId)` для проверки доступа
- [ ] Добавлена функция `getAllowedDepartmentIds()` для получения списка
- [ ] Добавлены комментарии с примерами использования
- [ ] Код соответствует стандартам ESLint проекта
- [ ] Файл можно импортировать в других модулях

## Тестирование
1. Проверить импорт конфига: `import { accessConfig } from '@/config/access-config.js'`
2. Проверить работу функции `isDepartmentAllowed()`:
   - `isDepartmentAllowed(1)` должно вернуть `true`, если 1 в массиве
   - `isDepartmentAllowed(999)` должно вернуть `false`, если 999 нет в массиве
   - `isDepartmentAllowed(null)` должно вернуть `false`
3. Проверить работу функции `getAllowedDepartmentIds()` — должен вернуть копию массива

## Примечания
- Конфиг должен быть легко редактируемым без изменения основной логики
- В будущем можно расширить конфиг для поддержки других типов проверок доступа
- ID отделов должны соответствовать ID отделов в Bitrix24

## История правок
- 2025-12-05 21:51 (UTC+3, Брест): Создана задача
- 2025-12-06 10:04 (UTC+3, Брест): Задача завершена. Добавлен ID отдела 369 в конфиг доступа


