# TASK-019-07-01: –°–æ–∑–¥–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–ª–µ–ø–∫–æ–≤ (compareSnapshots.js)

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-08 09:58 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å:** –í—ã–ø–æ–ª–Ω–µ–Ω–∞  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-12-08 13:54 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js)  
**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** TASK-019-00 (–≠—Ç–∞–ø 7, —á–∞—Å—Ç—å 1)

---

## üìã –¶–µ–ª—å –∑–∞–¥–∞—á–∏

–°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É `compareSnapshots.js` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–ª–µ–ø–∫–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞ 1–°. –£—Ç–∏–ª–∏—Ç–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã—á–∏—Å–ª—è—Ç—å —Ä–∞–∑–Ω–∏—Ü—É (–¥–µ–ª—å—Ç–∞) –º–µ–∂–¥—É —Å–ª–µ–ø–∫–∞–º–∏ –ø–æ —ç—Ç–∞–ø–∞–º, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –∏ –Ω—É–ª–µ–≤–æ–π —Ç–æ—á–∫–µ, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ.

---

## üéØ –ö–æ–Ω—Ç–µ–∫—Å—Ç

–î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞ –≤–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å–ª–µ–ø–∫–∏ –º–µ–∂–¥—É —Å–æ–±–æ–π:
- **–ù–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏ vs –ö–æ–Ω–µ—Ü –Ω–µ–¥–µ–ª–∏** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ –Ω–µ–¥–µ–ª—é
- **–ö–æ–Ω–µ—Ü –Ω–µ–¥–µ–ª–∏ vs –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏ –¥–æ —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞
- **–ù–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏ vs –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** ‚Äî –æ–±—â–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ –ø–µ—Ä–∏–æ–¥

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã (—Ä–∞–∑–Ω–∏—Ü—ã) –ø–æ –≤—Å–µ–º –º–µ—Ç—Ä–∏–∫–∞–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö –∏ –±–æ–ª–µ–µ —Å–ª–µ–ø–∫–æ–≤
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (null, undefined)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- –≠—Ç–∞–ø 1 (TASK-019-01-01, TASK-019-01-02) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ª–µ–ø–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
- –≠—Ç–∞–ø 2 (TASK-019-02-01, TASK-019-02-02) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω ‚Äî `SnapshotService` —Å–æ–∑–¥–∞–Ω
- –≠—Ç–∞–ø 6 (TASK-019-06-01, TASK-019-06-02) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω ‚Äî `GraphStateChart.vue` —Å–æ–∑–¥–∞–Ω

---

## üîç –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–ª–µ–ø–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–µ–ø–∫–∞ (–∏–∑ TASK-019-01-01)

```javascript
{
  metadata: {
    version: "1.0",
    createdAt: "2025-12-08T08:00:00+03:00",
    createdBy: { id: 123, name: "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" },
    type: "week_start" | "week_end" | "manual" | "current",
    sectorId: "1C",
    sectorName: "–°–µ–∫—Ç–æ—Ä 1–°"
  },
  statistics: {
    stages: {
      formed: { count: 5, stageId: "...", stageName: "..." },
      review: { count: 3, stageId: "...", stageName: "..." },
      execution: { count: 8, stageId: "...", stageName: "..." },
      total: 16
    },
    employees: [
      {
        id: 456,
        name: "–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤",
        ticketsByStage: {
          formed: 2,
          review: 1,
          execution: 3
        },
        totalTickets: 6
      }
    ],
    zeroPoint: {
      unassigned: 2,
      keeper: 1,
      total: 3
    }
  },
  ticketIds: [789, 790, 791],
  tickets: [...]
}
```

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å

1. **–≠—Ç–∞–ø—ã (stages):**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É —ç—Ç–∞–ø—É (formed, review, execution)
   - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ (total)

2. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (employees):**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ —É –∫–∞–∂–¥–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ —ç—Ç–∞–ø–∞–º
   - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

3. **–ù—É–ª–µ–≤–∞—è —Ç–æ—á–∫–∞ (zeroPoint):**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ (unassigned)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ —É —Ö—Ä–∞–Ω–∏—Ç–µ–ª—è (keeper)
   - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (total)

4. **–¢–∏–∫–µ—Ç—ã (tickets):**
   - –°–ø–∏—Å–æ–∫ –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ (–ø–æ—è–≤–∏–ª–∏—Å—å –≤ –Ω–æ–≤–æ–º —Å–ª–µ–ø–∫–µ)
   - –°–ø–∏—Å–æ–∫ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ (–∏—Å—á–µ–∑–ª–∏ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Å–ª–µ–ø–∫–∞)
   - –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ (–∏–∑–º–µ–Ω–∏–ª—Å—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–ª–∏ —ç—Ç–∞–ø)

---

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É `compareSnapshots.js`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `vue-app/src/utils/graph-state/compareSnapshots.js`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö –∏–ª–∏ –±–æ–ª–µ–µ —Å–ª–µ–ø–∫–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞.

**–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `compareTwoSnapshots(snapshot1, snapshot2, options)` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö —Å–ª–µ–ø–∫–æ–≤
- `compareMultipleSnapshots(snapshots, options)` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª–µ–ø–∫–æ–≤
- `calculateDelta(value1, value2)` ‚Äî –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã –º–µ–∂–¥—É –¥–≤—É–º—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- `validateSnapshot(snapshot)` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–ª–µ–ø–∫–∞

---

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `compareTwoSnapshots()`

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
```javascript
/**
 * –°—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ —Å–ª–µ–ø–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞
 * 
 * @param {Object} snapshot1 - –ü–µ—Ä–≤—ã–π —Å–ª–µ–ø–æ–∫ (–±–∞–∑–æ–≤—ã–π, –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
 * @param {Object} snapshot2 - –í—Ç–æ—Ä–æ–π —Å–ª–µ–ø–æ–∫ (–Ω–æ–≤—ã–π, —Å –∫–æ—Ç–æ—Ä—ã–º —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º)
 * @param {Object} options - –û–ø—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
 * @param {boolean} options.includeTickets - –í–∫–ª—é—á–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)
 * @param {boolean} options.includeEmployees - –í–∫–ª—é—á–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
 * @returns {Object} –†–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
 */
static compareTwoSnapshots(snapshot1, snapshot2, options = {})
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```javascript
{
  // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
  metadata: {
    snapshot1Date: "2025-12-01T08:00:00+03:00",
    snapshot2Date: "2025-12-08T08:00:00+03:00",
    comparisonDate: "2025-12-08T09:58:00+03:00",
    timeDiff: {
      days: 7,
      hours: 0,
      minutes: 0
    }
  },
  
  // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤
  stages: {
    formed: {
      snapshot1: 5,
      snapshot2: 3,
      delta: -2,           // –ò–∑–º–µ–Ω–µ–Ω–∏–µ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ = —É–º–µ–Ω—å—à–µ–Ω–∏–µ)
      deltaPercent: -40,   // –ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
      trend: "decrease"    // "increase" | "decrease" | "stable"
    },
    review: {
      snapshot1: 3,
      snapshot2: 4,
      delta: 1,
      deltaPercent: 33.33,
      trend: "increase"
    },
    execution: {
      snapshot1: 8,
      snapshot2: 8,
      delta: 0,
      deltaPercent: 0,
      trend: "stable"
    },
    total: {
      snapshot1: 16,
      snapshot2: 15,
      delta: -1,
      deltaPercent: -6.25,
      trend: "decrease"
    }
  },
  
  // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
  employees: [
    {
      id: 456,
      name: "–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤",
      snapshot1: {
        ticketsByStage: { formed: 2, review: 1, execution: 3 },
        totalTickets: 6
      },
      snapshot2: {
        ticketsByStage: { formed: 1, review: 2, execution: 3 },
        totalTickets: 6
      },
      delta: {
        ticketsByStage: { formed: -1, review: 1, execution: 0 },
        totalTickets: 0
      },
      trend: "stable"
    }
  ],
  
  // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω—É–ª–µ–≤–æ–π —Ç–æ—á–∫–∏
  zeroPoint: {
    unassigned: {
      snapshot1: 2,
      snapshot2: 1,
      delta: -1,
      deltaPercent: -50,
      trend: "decrease"
    },
    keeper: {
      snapshot1: 1,
      snapshot2: 2,
      delta: 1,
      deltaPercent: 100,
      trend: "increase"
    },
    total: {
      snapshot1: 3,
      snapshot2: 3,
      delta: 0,
      deltaPercent: 0,
      trend: "stable"
    }
  },
  
  // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ (–µ—Å–ª–∏ includeTickets = true)
  tickets: {
    new: [790, 791],        // –ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã (–ø–æ—è–≤–∏–ª–∏—Å—å –≤ snapshot2)
    removed: [789],        // –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã (–±—ã–ª–∏ –≤ snapshot1, –Ω–µ—Ç –≤ snapshot2)
    changed: [792],        // –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã (–∏–∑–º–µ–Ω–∏–ª—Å—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–ª–∏ —ç—Ç–∞–ø)
    unchanged: [793, 794]  // –ù–µ–∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã
  },
  
  // –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  summary: {
    totalDelta: -1,        // –û–±—â–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∏–∫–µ—Ç–æ–≤
    stagesChanged: 2,      // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç—Ç–∞–ø–æ–≤ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
    employeesChanged: 1,   // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
    hasChanges: true       // –ï—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ–æ–±—â–µ
  }
}
```

**–õ–æ–≥–∏–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è:**
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–±–∞ —Å–ª–µ–ø–∫–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏)
2. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã –ø–æ —ç—Ç–∞–ø–∞–º (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `statistics.stages`)
3. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `statistics.employees`)
4. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã –ø–æ –Ω—É–ª–µ–≤–æ–π —Ç–æ—á–∫–µ (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `statistics.zeroPoint`)
5. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ (–µ—Å–ª–∏ `includeTickets = true`)
6. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ summary (–æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

---

### 3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `calculateDelta()`

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
```javascript
/**
 * –í—ã—á–∏—Å–ª–∏—Ç—å –¥–µ–ª—å—Ç—É –º–µ–∂–¥—É –¥–≤—É–º—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
 * 
 * @param {number|null|undefined} value1 - –ü–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–±–∞–∑–æ–≤–æ–µ)
 * @param {number|null|undefined} value2 - –í—Ç–æ—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–æ–≤–æ–µ)
 * @returns {Object} –û–±—ä–µ–∫—Ç —Å –¥–µ–ª—å—Ç–æ–π, –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º –∏ —Ç—Ä–µ–Ω–¥–æ–º
 */
static calculateDelta(value1, value2)
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```javascript
{
  value1: 5,           // –ü–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ, 0 –µ—Å–ª–∏ null/undefined)
  value2: 3,           // –í—Ç–æ—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ, 0 –µ—Å–ª–∏ null/undefined)
  delta: -2,           // –†–∞–∑–Ω–∏—Ü–∞ (value2 - value1)
  deltaPercent: -40,    // –ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è ((delta / value1) * 100)
  trend: "decrease"    // "increase" | "decrease" | "stable"
}
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ `value1` –∏–ª–∏ `value2` —Ä–∞–≤–Ω—ã `null` –∏–ª–∏ `undefined`, —Å—á–∏—Ç–∞—Ç—å –∏—Ö –∫–∞–∫ `0`
- –ï—Å–ª–∏ `value1 === 0`, `deltaPercent` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `Infinity` –∏–ª–∏ `-Infinity` (–∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- `trend` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –∑–Ω–∞–∫—É `delta`: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π = "increase", –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π = "decrease", –Ω–æ–ª—å = "stable"

---

### 4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `validateSnapshot()`

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
```javascript
/**
 * –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–ª–µ–ø–∫–∞
 * 
 * @param {Object} snapshot - –°–ª–µ–ø–æ–∫ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
 * @returns {Object} –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
 */
static validateSnapshot(snapshot)
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```javascript
{
  valid: true,           // –í–∞–ª–∏–¥–µ–Ω –ª–∏ —Å–ª–µ–ø–æ–∫
  errors: [],            // –ú–∞—Å—Å–∏–≤ –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –µ—Å—Ç—å)
  warnings: []           // –ú–∞—Å—Å–∏–≤ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- –ù–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π: `metadata`, `statistics`
- –ù–∞–ª–∏—á–∏–µ `metadata.createdAt`, `metadata.type`
- –ù–∞–ª–∏—á–∏–µ `statistics.stages`, `statistics.employees`, `statistics.zeroPoint`
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –ù–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤: `formed`, `review`, `execution`

---

### 5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `compareMultipleSnapshots()`

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
```javascript
/**
 * –°—Ä–∞–≤–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–µ–ø–∫–æ–≤ (–¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–∏)
 * 
 * @param {Array<Object>} snapshots - –ú–∞—Å—Å–∏–≤ —Å–ª–µ–ø–∫–æ–≤ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–∞—Ç–µ)
 * @param {Object} options - –û–ø—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
 * @returns {Object} –†–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Å–ª–µ–ø–∫–æ–≤
 */
static compareMultipleSnapshots(snapshots, options = {})
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```javascript
{
  snapshots: [
    { date: "2025-12-01", type: "week_start", data: {...} },
    { date: "2025-12-08", type: "week_end", data: {...} },
    { date: "2025-12-08", type: "current", data: {...} }
  ],
  comparisons: [
    // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–æ—Å–µ–¥–Ω–∏–º–∏ —Å–ª–µ–ø–∫–∞–º–∏
    {
      from: 0,  // –ò–Ω–¥–µ–∫—Å –ø–µ—Ä–≤–æ–≥–æ —Å–ª–µ–ø–∫–∞
      to: 1,    // –ò–Ω–¥–µ–∫—Å –≤—Ç–æ—Ä–æ–≥–æ —Å–ª–µ–ø–∫–∞
      result: {...}  // –†–µ–∑—É–ª—å—Ç–∞—Ç compareTwoSnapshots()
    }
  ],
  trends: {
    // –¢—Ä–µ–Ω–¥—ã –ø–æ —ç—Ç–∞–ø–∞–º –∑–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥
    stages: {
      formed: [5, 3, 4],      // –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É —Å–ª–µ–ø–∫—É
      review: [3, 4, 5],
      execution: [8, 8, 7],
      total: [16, 15, 16]
    },
    employees: [...],
    zeroPoint: {...}
  }
}
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
vue-app/src/utils/graph-state/
‚îú‚îÄ‚îÄ compareSnapshots.js          # –£—Ç–∏–ª–∏—Ç–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–ª–µ–ø–∫–æ–≤
‚îî‚îÄ‚îÄ snapshotHelpers.js           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –ö–ª–∞—Å—Å CompareSnapshots

**–ü–∞—Ç—Ç–µ—Ä–Ω:** –ö–ª–∞—Å—Å —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `SnapshotService`)

**–ú–µ—Ç–æ–¥—ã:**
- `compareTwoSnapshots(snapshot1, snapshot2, options)` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- `compareMultipleSnapshots(snapshots, options)` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª–µ–ø–∫–æ–≤
- `calculateDelta(value1, value2)` ‚Äî –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã
- `validateSnapshot(snapshot)` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–ª–µ–ø–∫–∞
- `getTrend(delta)` ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ (increase/decrease/stable)
- `normalizeValue(value)` ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏—è (null/undefined ‚Üí 0)

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∞ CompareSnapshots

```javascript
// vue-app/src/utils/graph-state/compareSnapshots.js

/**
 * –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–ª–µ–ø–∫–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞
 * 
 * –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞–∑–Ω–∏—Ü—ã (–¥–µ–ª—å—Ç–∞) –º–µ–∂–¥—É —Å–ª–µ–ø–∫–∞–º–∏
 * –ø–æ —ç—Ç–∞–ø–∞–º, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –∏ –Ω—É–ª–µ–≤–æ–π —Ç–æ—á–∫–µ, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
 * 
 * @class CompareSnapshots
 */
class CompareSnapshots {
  /**
   * –°—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ —Å–ª–µ–ø–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞
   * 
   * @param {Object} snapshot1 - –ü–µ—Ä–≤—ã–π —Å–ª–µ–ø–æ–∫ (–±–∞–∑–æ–≤—ã–π, –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
   * @param {Object} snapshot2 - –í—Ç–æ—Ä–æ–π —Å–ª–µ–ø–æ–∫ (–Ω–æ–≤—ã–π, —Å –∫–æ—Ç–æ—Ä—ã–º —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º)
   * @param {Object} options - –û–ø—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
   * @param {boolean} options.includeTickets - –í–∫–ª—é—á–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)
   * @param {boolean} options.includeEmployees - –í–∫–ª—é—á–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
   * @returns {Object} –†–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
   * 
   * @example
   * const comparison = CompareSnapshots.compareTwoSnapshots(
   *   weekStartSnapshot,
   *   weekEndSnapshot,
   *   { includeTickets: true }
   * );
   * 
   * @example
   * // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —ç—Ç–∞–ø–æ–≤ (–±–µ–∑ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ —Ç–∏–∫–µ—Ç–æ–≤)
   * const comparison = CompareSnapshots.compareTwoSnapshots(
   *   snapshot1,
   *   snapshot2,
   *   { includeEmployees: false, includeTickets: false }
   * );
   */
  static compareTwoSnapshots(snapshot1, snapshot2, options = {}) {
    const {
      includeTickets = false,
      includeEmployees = true
    } = options;

    // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    const validation1 = this.validateSnapshot(snapshot1);
    const validation2 = this.validateSnapshot(snapshot2);

    if (!validation1.valid || !validation2.valid) {
      throw new Error('Invalid snapshot structure: ' + 
        [...validation1.errors, ...validation2.errors].join(', '));
    }

    // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    const metadata = this.buildComparisonMetadata(snapshot1, snapshot2);

    // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤
    const stages = this.compareStages(
      snapshot1.statistics.stages,
      snapshot2.statistics.stages
    );

    // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
    const employees = includeEmployees
      ? this.compareEmployees(
          snapshot1.statistics.employees,
          snapshot2.statistics.employees
        )
      : [];

    // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω—É–ª–µ–≤–æ–π —Ç–æ—á–∫–∏
    const zeroPoint = this.compareZeroPoint(
      snapshot1.statistics.zeroPoint,
      snapshot2.statistics.zeroPoint
    );

    // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
    const tickets = includeTickets
      ? this.compareTickets(
          snapshot1.ticketIds || [],
          snapshot2.ticketIds || [],
          snapshot1.tickets || [],
          snapshot2.tickets || []
        )
      : null;

    // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ summary
    const summary = this.buildSummary(stages, employees, zeroPoint, tickets);

    return {
      metadata,
      stages,
      employees,
      zeroPoint,
      tickets,
      summary
    };
  }

  /**
   * –í—ã—á–∏—Å–ª–∏—Ç—å –¥–µ–ª—å—Ç—É –º–µ–∂–¥—É –¥–≤—É–º—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
   * 
   * @param {number|null|undefined} value1 - –ü–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–±–∞–∑–æ–≤–æ–µ)
   * @param {number|null|undefined} value2 - –í—Ç–æ—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–æ–≤–æ–µ)
   * @returns {Object} –û–±—ä–µ–∫—Ç —Å –¥–µ–ª—å—Ç–æ–π, –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º –∏ —Ç—Ä–µ–Ω–¥–æ–º
   * 
   * @example
   * const delta = CompareSnapshots.calculateDelta(5, 3);
   * // { value1: 5, value2: 3, delta: -2, deltaPercent: -40, trend: "decrease" }
   */
  static calculateDelta(value1, value2) {
    const normalized1 = this.normalizeValue(value1);
    const normalized2 = this.normalizeValue(value2);
    const delta = normalized2 - normalized1;

    // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    let deltaPercent = 0;
    if (normalized1 !== 0) {
      deltaPercent = (delta / normalized1) * 100;
    } else if (normalized2 !== 0) {
      // –ï—Å–ª–∏ –±–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 0, –∞ –Ω–æ–≤–æ–µ –Ω–µ 0, —Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ = 100%
      deltaPercent = normalized2 > 0 ? Infinity : -Infinity;
    }

    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞
    const trend = this.getTrend(delta);

    return {
      value1: normalized1,
      value2: normalized2,
      delta,
      deltaPercent: Math.round(deltaPercent * 100) / 100, // –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 2 –∑–Ω–∞–∫–æ–≤
      trend
    };
  }

  /**
   * –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ (null/undefined ‚Üí 0)
   * 
   * @param {number|null|undefined} value - –ó–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
   * @returns {number} –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   */
  static normalizeValue(value) {
    if (value === null || value === undefined || isNaN(value)) {
      return 0;
    }
    return Number(value);
  }

  /**
   * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç—Ä–µ–Ω–¥ –ø–æ –¥–µ–ª—å—Ç–µ
   * 
   * @param {number} delta - –î–µ–ª—å—Ç–∞ (—Ä–∞–∑–Ω–∏—Ü–∞)
   * @returns {string} "increase" | "decrease" | "stable"
   */
  static getTrend(delta) {
    if (delta > 0) return 'increase';
    if (delta < 0) return 'decrease';
    return 'stable';
  }

  /**
   * –°—Ä–∞–≤–Ω–∏—Ç—å —ç—Ç–∞–ø—ã –º–µ–∂–¥—É –¥–≤—É–º—è —Å–ª–µ–ø–∫–∞–º–∏
   * 
   * @private
   * @param {Object} stages1 - –≠—Ç–∞–ø—ã –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Å–ª–µ–ø–∫–∞
   * @param {Object} stages2 - –≠—Ç–∞–ø—ã –∏–∑ –≤—Ç–æ—Ä–æ–≥–æ —Å–ª–µ–ø–∫–∞
   * @returns {Object} –†–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —ç—Ç–∞–ø–æ–≤
   */
  static compareStages(stages1, stages2) {
    const stageKeys = ['formed', 'review', 'execution'];
    const result = {};

    // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
    for (const key of stageKeys) {
      const count1 = stages1[key]?.count || 0;
      const count2 = stages2[key]?.count || 0;
      result[key] = this.calculateDelta(count1, count2);
    }

    // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
    const total1 = stages1.total || 0;
    const total2 = stages2.total || 0;
    result.total = this.calculateDelta(total1, total2);

    return result;
  }

  /**
   * –°—Ä–∞–≤–Ω–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –º–µ–∂–¥—É –¥–≤—É–º—è —Å–ª–µ–ø–∫–∞–º–∏
   * 
   * @private
   * @param {Array} employees1 - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Å–ª–µ–ø–∫–∞
   * @param {Array} employees2 - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏–∑ –≤—Ç–æ—Ä–æ–≥–æ —Å–ª–µ–ø–∫–∞
   * @returns {Array} –†–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
   */
  static compareEmployees(employees1, employees2) {
    const employeesMap1 = new Map(employees1.map(emp => [emp.id, emp]));
    const employeesMap2 = new Map(employees2.map(emp => [emp.id, emp]));
    
    const allEmployeeIds = new Set([
      ...employeesMap1.keys(),
      ...employeesMap2.keys()
    ]);

    const result = [];

    for (const employeeId of allEmployeeIds) {
      const emp1 = employeesMap1.get(employeeId) || null;
      const emp2 = employeesMap2.get(employeeId) || null;

      // –ï—Å–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –∏–∑ —Å–ª–µ–ø–∫–æ–≤
      if (!emp1 || !emp2) {
        result.push({
          id: employeeId,
          name: emp1?.name || emp2?.name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π',
          snapshot1: emp1 ? {
            ticketsByStage: emp1.ticketsByStage || {},
            totalTickets: emp1.totalTickets || 0
          } : null,
          snapshot2: emp2 ? {
            ticketsByStage: emp2.ticketsByStage || {},
            totalTickets: emp2.totalTickets || 0
          } : null,
          delta: this.calculateEmployeeDelta(emp1, emp2),
          trend: 'new' // –∏–ª–∏ 'removed'
        });
        continue;
      }

      // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ —ç—Ç–∞–ø–∞–º
      const ticketsByStageDelta = {};
      const stageKeys = ['formed', 'review', 'execution'];
      for (const stageKey of stageKeys) {
        const count1 = emp1.ticketsByStage?.[stageKey] || 0;
        const count2 = emp2.ticketsByStage?.[stageKey] || 0;
        ticketsByStageDelta[stageKey] = this.calculateDelta(count1, count2);
      }

      // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∏–∫–µ—Ç–æ–≤
      const totalDelta = this.calculateDelta(
        emp1.totalTickets || 0,
        emp2.totalTickets || 0
      );

      result.push({
        id: employeeId,
        name: emp1.name,
        snapshot1: {
          ticketsByStage: emp1.ticketsByStage || {},
          totalTickets: emp1.totalTickets || 0
        },
        snapshot2: {
          ticketsByStage: emp2.ticketsByStage || {},
          totalTickets: emp2.totalTickets || 0
        },
        delta: {
          ticketsByStage: ticketsByStageDelta,
          totalTickets: totalDelta
        },
        trend: totalDelta.trend
      });
    }

    return result;
  }

  /**
   * –í—ã—á–∏—Å–ª–∏—Ç—å –¥–µ–ª—å—Ç—É –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
   * 
   * @private
   */
  static calculateEmployeeDelta(emp1, emp2) {
    if (!emp1 && !emp2) {
      return { ticketsByStage: {}, totalTickets: { delta: 0, trend: 'stable' } };
    }

    const ticketsByStageDelta = {};
    const stageKeys = ['formed', 'review', 'execution'];
    for (const stageKey of stageKeys) {
      const count1 = emp1?.ticketsByStage?.[stageKey] || 0;
      const count2 = emp2?.ticketsByStage?.[stageKey] || 0;
      ticketsByStageDelta[stageKey] = this.calculateDelta(count1, count2);
    }

    const totalDelta = this.calculateDelta(
      emp1?.totalTickets || 0,
      emp2?.totalTickets || 0
    );

    return {
      ticketsByStage: ticketsByStageDelta,
      totalTickets: totalDelta
    };
  }

  /**
   * –°—Ä–∞–≤–Ω–∏—Ç—å –Ω—É–ª–µ–≤—É—é —Ç–æ—á–∫—É –º–µ–∂–¥—É –¥–≤—É–º—è —Å–ª–µ–ø–∫–∞–º–∏
   * 
   * @private
   */
  static compareZeroPoint(zeroPoint1, zeroPoint2) {
    return {
      unassigned: this.calculateDelta(
        zeroPoint1?.unassigned || 0,
        zeroPoint2?.unassigned || 0
      ),
      keeper: this.calculateDelta(
        zeroPoint1?.keeper || 0,
        zeroPoint2?.keeper || 0
      ),
      total: this.calculateDelta(
        zeroPoint1?.total || 0,
        zeroPoint2?.total || 0
      )
    };
  }

  /**
   * –°—Ä–∞–≤–Ω–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –º–µ–∂–¥—É –¥–≤—É–º—è —Å–ª–µ–ø–∫–∞–º–∏
   * 
   * @private
   */
  static compareTickets(ticketIds1, ticketIds2, tickets1, tickets2) {
    const set1 = new Set(ticketIds1);
    const set2 = new Set(ticketIds2);

    // –ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã (–µ—Å—Ç—å –≤ snapshot2, –Ω–µ—Ç –≤ snapshot1)
    const newTickets = ticketIds2.filter(id => !set1.has(id));

    // –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã (–µ—Å—Ç—å –≤ snapshot1, –Ω–µ—Ç –≤ snapshot2)
    const removedTickets = ticketIds1.filter(id => !set2.has(id));

    // –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã (–µ—Å—Ç—å –≤ –æ–±–æ–∏—Ö, –Ω–æ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ø–æ–ª—è)
    const changedTickets = [];
    const unchangedTickets = [];

    for (const ticketId of ticketIds1) {
      if (!set2.has(ticketId)) continue; // –£–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∫–∞–∫ removed

      const ticket1 = tickets1.find(t => t.id === ticketId);
      const ticket2 = tickets2.find(t => t.id === ticketId);

      if (!ticket1 || !ticket2) continue;

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–ª–∏ —ç—Ç–∞–ø)
      const assignedToChanged = 
        ticket1.assignedTo?.id !== ticket2.assignedTo?.id;
      const stageChanged = 
        ticket1.stageId !== ticket2.stageId;

      if (assignedToChanged || stageChanged) {
        changedTickets.push(ticketId);
      } else {
        unchangedTickets.push(ticketId);
      }
    }

    return {
      new: newTickets,
      removed: removedTickets,
      changed: changedTickets,
      unchanged: unchangedTickets
    };
  }

  /**
   * –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
   * 
   * @private
   */
  static buildComparisonMetadata(snapshot1, snapshot2) {
    const date1 = new Date(snapshot1.metadata.createdAt);
    const date2 = new Date(snapshot2.metadata.createdAt);
    const now = new Date();

    const timeDiff = date2.getTime() - date1.getTime();
    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));

    return {
      snapshot1Date: snapshot1.metadata.createdAt,
      snapshot2Date: snapshot2.metadata.createdAt,
      comparisonDate: now.toISOString(),
      timeDiff: {
        days,
        hours,
        minutes,
        totalMinutes: Math.floor(timeDiff / (1000 * 60))
      }
    };
  }

  /**
   * –ü–æ—Å—Ç—Ä–æ–∏—Ç—å summary (–æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π)
   * 
   * @private
   */
  static buildSummary(stages, employees, zeroPoint, tickets) {
    const totalDelta = stages.total.delta;
    
    const stagesChanged = Object.keys(stages).filter(key => {
      if (key === 'total') return false;
      return stages[key].delta !== 0;
    }).length;

    const employeesChanged = employees.filter(emp => {
      if (emp.trend === 'new' || emp.trend === 'removed') return true;
      return emp.delta.totalTickets.delta !== 0;
    }).length;

    const hasChanges = totalDelta !== 0 || stagesChanged > 0 || employeesChanged > 0;

    return {
      totalDelta,
      stagesChanged,
      employeesChanged,
      hasChanges,
      newTicketsCount: tickets?.new?.length || 0,
      removedTicketsCount: tickets?.removed?.length || 0,
      changedTicketsCount: tickets?.changed?.length || 0
    };
  }

  /**
   * –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–ª–µ–ø–∫–∞
   * 
   * @param {Object} snapshot - –°–ª–µ–ø–æ–∫ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   * @returns {Object} –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   */
  static validateSnapshot(snapshot) {
    const errors = [];
    const warnings = [];

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
    if (!snapshot) {
      errors.push('Snapshot is null or undefined');
      return { valid: false, errors, warnings };
    }

    if (!snapshot.metadata) {
      errors.push('Missing metadata field');
    } else {
      if (!snapshot.metadata.createdAt) {
        errors.push('Missing metadata.createdAt');
      }
      if (!snapshot.metadata.type) {
        errors.push('Missing metadata.type');
      }
    }

    if (!snapshot.statistics) {
      errors.push('Missing statistics field');
    } else {
      if (!snapshot.statistics.stages) {
        errors.push('Missing statistics.stages');
      } else {
        const requiredStages = ['formed', 'review', 'execution'];
        for (const stage of requiredStages) {
          if (!snapshot.statistics.stages[stage]) {
            warnings.push(`Missing stage: ${stage}`);
          }
        }
      }

      if (!snapshot.statistics.employees) {
        warnings.push('Missing statistics.employees (may be empty array)');
      }

      if (!snapshot.statistics.zeroPoint) {
        warnings.push('Missing statistics.zeroPoint');
      }
    }

    return {
      valid: errors.length === 0,
      errors,
      warnings
    };
  }

  /**
   * –°—Ä–∞–≤–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–µ–ø–∫–æ–≤ (–¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–∏)
   * 
   * @param {Array<Object>} snapshots - –ú–∞—Å—Å–∏–≤ —Å–ª–µ–ø–∫–æ–≤ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–∞—Ç–µ)
   * @param {Object} options - –û–ø—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
   * @returns {Object} –†–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Å–ª–µ–ø–∫–æ–≤
   */
  static compareMultipleSnapshots(snapshots, options = {}) {
    if (!Array.isArray(snapshots) || snapshots.length < 2) {
      throw new Error('At least 2 snapshots required for comparison');
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Å–ª–µ–ø–∫–æ–≤
    for (const snapshot of snapshots) {
      const validation = this.validateSnapshot(snapshot);
      if (!validation.valid) {
        throw new Error('Invalid snapshot: ' + validation.errors.join(', '));
      }
    }

    // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ (–µ—Å–ª–∏ –Ω–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã)
    const sortedSnapshots = [...snapshots].sort((a, b) => {
      const dateA = new Date(a.metadata.createdAt);
      const dateB = new Date(b.metadata.createdAt);
      return dateA - dateB;
    });

    // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–æ—Å–µ–¥–Ω–∏–º–∏ —Å–ª–µ–ø–∫–∞–º–∏
    const comparisons = [];
    for (let i = 0; i < sortedSnapshots.length - 1; i++) {
      comparisons.push({
        from: i,
        to: i + 1,
        result: this.compareTwoSnapshots(
          sortedSnapshots[i],
          sortedSnapshots[i + 1],
          options
        )
      });
    }

    // –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤ (–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É —Å–ª–µ–ø–∫—É)
    const trends = this.buildTrends(sortedSnapshots);

    return {
      snapshots: sortedSnapshots.map((snapshot, index) => ({
        index,
        date: snapshot.metadata.createdAt,
        type: snapshot.metadata.type,
        data: snapshot
      })),
      comparisons,
      trends
    };
  }

  /**
   * –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç—Ä–µ–Ω–¥—ã –ø–æ –≤—Å–µ–º —Å–ª–µ–ø–∫–∞–º
   * 
   * @private
   */
  static buildTrends(snapshots) {
    const trends = {
      stages: {
        formed: [],
        review: [],
        execution: [],
        total: []
      },
      zeroPoint: {
        unassigned: [],
        keeper: [],
        total: []
      }
    };

    for (const snapshot of snapshots) {
      const stats = snapshot.statistics;

      // –≠—Ç–∞–ø—ã
      trends.stages.formed.push(stats.stages?.formed?.count || 0);
      trends.stages.review.push(stats.stages?.review?.count || 0);
      trends.stages.execution.push(stats.stages?.execution?.count || 0);
      trends.stages.total.push(stats.stages?.total || 0);

      // –ù—É–ª–µ–≤–∞—è —Ç–æ—á–∫–∞
      trends.zeroPoint.unassigned.push(stats.zeroPoint?.unassigned || 0);
      trends.zeroPoint.keeper.push(stats.zeroPoint?.keeper || 0);
      trends.zeroPoint.total.push(stats.zeroPoint?.total || 0);
    }

    return trends;
  }
}

export default CompareSnapshots;
```

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ GraphStateChart.vue

```javascript
// vue-app/src/components/graph-state/GraphStateChart.vue

import CompareSnapshots from '@/utils/graph-state/compareSnapshots.js';

// –í setup()
const comparison = CompareSnapshots.compareTwoSnapshots(
  weekStartSnapshot,
  weekEndSnapshot,
  { includeTickets: true }
);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
const chartData = prepareChartDataWithComparison(comparison);
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] –§–∞–π–ª `vue-app/src/utils/graph-state/compareSnapshots.js` —Å–æ–∑–¥–∞–Ω
- [ ] –ö–ª–∞—Å—Å `CompareSnapshots` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
- [ ] –ú–µ—Ç–æ–¥ `compareTwoSnapshots()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ú–µ—Ç–æ–¥ `calculateDelta()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–µ–ª—å—Ç—É, –ø—Ä–æ—Ü–µ–Ω—Ç –∏ —Ç—Ä–µ–Ω–¥
- [ ] –ú–µ—Ç–æ–¥ `validateSnapshot()` –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–ª–µ–ø–∫–∞
- [ ] –ú–µ—Ç–æ–¥ `compareMultipleSnapshots()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª–µ–ø–∫–æ–≤
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ null/undefined –∑–Ω–∞—á–µ–Ω–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ 0)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (try/catch, –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- [ ] JSDoc-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ –≤—Å–µ–º –º–µ—Ç–æ–¥–∞–º
- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞ (ESLint, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ ] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–æ–¥
- [ ] –£—Ç–∏–ª–∏—Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤—Ä—É—á–Ω—É—é (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–ª–µ–ø–∫–æ–≤ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ)
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üìù –î–µ–π—Å—Ç–≤–∏—è

1. **–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–∞–ø–∫–∞ `vue-app/src/utils/graph-state/` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

2. **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `compareSnapshots.js`:**
   - –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `CompareSnapshots` —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `compareTwoSnapshots()`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `calculateDelta()`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `validateSnapshot()`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `compareMultipleSnapshots()`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (compareStages, compareEmployees, etc.)
   - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
   - –î–æ–±–∞–≤–∏—Ç—å JSDoc-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É:**
   - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª–µ–ø–∫–∏ (–Ω–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏, –∫–æ–Ω–µ—Ü –Ω–µ–¥–µ–ª–∏)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö —Å–ª–µ–ø–∫–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å–ª–µ–ø–∫–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª–µ–ø–∫–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É edge cases (null, undefined, –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã)

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** `DOCS/TASKS/TASK-019-00-plan.md`
- **–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–¥–∞—á–∏:**
  - `DOCS/TASKS/TASK-019-01-01.md` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ª–µ–ø–∫–∞)
  - `DOCS/TASKS/TASK-019-02-01.md` (SnapshotService)
  - `DOCS/TASKS/TASK-019-06-01.md` (GraphStateChart)
- **–°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞:** `DOCS/TASKS/TASK-019-07-02.md` (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:** `DOCS/ARCHITECTURE/graph-state-snapshots.md`

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

**4-6 —á–∞—Å–æ–≤**

**–†–∞–∑–±–∏–≤–∫–∞:**
- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–ª–∞—Å—Å–∞: 30-45 –º–∏–Ω—É—Ç
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `compareTwoSnapshots()`: 1-1.5 —á–∞—Å–∞
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤: 1-1.5 —á–∞—Å–∞
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `compareMultipleSnapshots()`: 30-45 –º–∏–Ω—É—Ç
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞: 1-1.5 —á–∞—Å–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: 30-45 –º–∏–Ω—É—Ç

---

## üîó –°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ **TASK-019-07-02: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ GraphStateChart.vue)**.

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ü—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –±–æ–ª—å—à–∏—Ö —Å–ª–µ–ø–∫–æ–≤ (–º–Ω–æ–≥–æ —Ç–∏–∫–µ—Ç–æ–≤, –º–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤) –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –õ–µ–Ω–∏–≤–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –¢–æ—á–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

–ü—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å (Infinity)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —á–∏—Å–µ–ª

### –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

–£—Ç–∏–ª–∏—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π –¥–ª—è –±—É–¥—É—â–∏—Ö –º–µ—Ç—Ä–∏–∫:
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π —Ñ–æ—Ä–º–∞—Ç–∞ —Å–ª–µ–ø–∫–∞

---

## –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- **2025-12-08 09:58 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω–∞ –∑–∞–¥–∞—á–∞
- **2025-12-08 11:58 (UTC+3, –ë—Ä–µ—Å—Ç):** –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- **2025-12-08 13:54 (UTC+3, –ë—Ä–µ—Å—Ç):** –ó–∞–¥–∞—á–∞ –∑–∞–∫—Ä—ã—Ç–∞ –∫–∞–∫ —É—Å–ø–µ—à–Ω–∞—è (–≤—Å–µ –∑–∞–¥–∞—á–∏ TASK-019 –∑–∞–≤–µ—Ä—à–µ–Ω—ã)

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

**–î–∞—Ç–∞:** 2025-12-08 11:58 (UTC+3, –ë—Ä–µ—Å—Ç)

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ `vue-app/src/utils/graph-state/`
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `compareSnapshots.js` —Å –∫–ª–∞—Å—Å–æ–º `CompareSnapshots`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `compareTwoSnapshots()`:
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤ (formed, review, execution, total)
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (—Å –æ–ø—Ü–∏–µ–π includeEmployees)
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω—É–ª–µ–≤–æ–π —Ç–æ—á–∫–∏ (unassigned, keeper, total)
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ (—Å –æ–ø—Ü–∏–µ–π includeTickets)
  - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ summary (–æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `calculateDelta()`:
  - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π (null/undefined ‚Üí 0)
  - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã (value2 - value1)
  - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å (Infinity –¥–ª—è –Ω–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π)
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ (increase/decrease/stable)
  - –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `validateSnapshot()`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (metadata, statistics)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è metadata.createdAt –∏ metadata.type
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è statistics.stages, statistics.employees, statistics.zeroPoint
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ (formed, review, execution)
  - –í–æ–∑–≤—Ä–∞—Ç errors –∏ warnings
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `compareMultipleSnapshots()`:
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Å–ª–µ–ø–∫–æ–≤
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–æ—Å–µ–¥–Ω–∏–º–∏ —Å–ª–µ–ø–∫–∞–º–∏
  - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ –≤—Å–µ–º —Å–ª–µ–ø–∫–∞–º
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
  - `normalizeValue()` ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
  - `getTrend()` ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞
  - `compareStages()` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤
  - `compareEmployees()` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
  - `calculateEmployeeDelta()` ‚Äî –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
  - `compareZeroPoint()` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω—É–ª–µ–≤–æ–π —Ç–æ—á–∫–∏
  - `compareTickets()` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ (–Ω–æ–≤—ã–µ, —É–¥–∞–ª—ë–Ω–Ω—ã–µ, –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ, –Ω–µ–∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ)
  - `buildComparisonMetadata()` ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
  - `buildSummary()` ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - `buildTrends()` ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ –≤—Å–µ–º —Å–ª–µ–ø–∫–∞–º
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases:
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ null/undefined –∑–Ω–∞—á–µ–Ω–∏–π
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º —Å–ª–µ–ø–∫–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã JSDoc-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫–æ –≤—Å–µ–º –º–µ—Ç–æ–¥–∞–º:
  - –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - –û–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω –ª–∏–Ω—Ç–µ—Ä–æ–º ‚Äî –æ—à–∏–±–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∑–∞–¥–∞—á–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Ç–∏–ª–∏—Ç–∞ `CompareSnapshots` —Å–æ–∑–¥–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.

---

**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.1

