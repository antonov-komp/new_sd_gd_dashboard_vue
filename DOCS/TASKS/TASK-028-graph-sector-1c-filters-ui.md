# TASK-028: UI/UX улучшение фильтров и стадий «График состояния сектора 1С»

**Дата создания:** 2025-12-11 13:07 (UTC+3, Брест)  
**Статус:** Новая  
**Приоритет:** Средний  
**Исполнитель:** Bitrix24 Программист (Vue.js)  

## Цель

Сделать секцию фильтров и блок стадий графика состояния сектора 1С более понятными: прижать кнопки стадий к контейнеру с фоном/рамкой, структурировать фильтры, добавить выпадающий список «Сотрудник» с фактическим списком сотрудников сектора 1С.

## Контекст

- Текущие кнопки стадий визуально «висят в воздухе» — нет явного контейнера/фона/отступов.  
- Фильтры размещены без группировки, мешают восприятию.  
- Поле «Сотрудник» пустое — нужно подставлять фактических сотрудников сектора 1С (из Bitrix24/1С-источника).  
- Интерфейс построен на Vue (должен сохранять стилистику Bitrix24 UI: сетка 8px, четкие бордеры/фон, hover/active состояния).

## Модули и компоненты (ожидаемые изменения)

- `vue-app/src/components/filters/FiltersPanel.vue` — структура фильтров, подписи, отступы.
- `vue-app/src/components/filters/StageChips.vue` (или аналогичный) — контейнер/фон/бордер, состояния active/hover/disabled.
- `vue-app/src/components/filters/EmployeeSelect.vue` (новый или обновленный) — поиск/выбор сотрудника сектора 1С.
- `vue-app/src/api/sector1cEmployees.js` (новый) — вызовы API для списка сотрудников; дебаунс/кэширование.
- `vue-app/src/styles/filters.scss|css` — стили отступов/фоновых блоков для фильтров и стадий.

## Зависимости и данные

- Источник списка сотрудников сектора 1С: уточнить эндпоинт (Bitrix24 `crm.contact.list`/`user.get` c фильтром по подразделению или внутренний API `/api/sector1c/employees`).  
- Требуется доступ к REST-вебхуку/токену или внутреннему сервису.  
- Список стадий должен быть взят из существующей конфигурации (если есть) либо из API, без хардкода в шаблоне.

## План работ (5 этапов)

1) Анализ текущего UI  
   - Зафиксировать текущее состояние фильтров и блока стадий (скриншоты/DOM-структура, используемые классы).  
   - Описать текущее поведение «Сотрудник» (какие данные приходят/не приходят).  

2) UX/UI проектирование  
   - Спроектировать новую группировку фильтров: заголовок секции, равные отступы, подписанные поля, понятный placeholder.  
   - Решить визуал для стадий: общий контейнер с фоном/бордером, грид/флекс выравнивание, минимальная высота, состояния hover/active.  
   - Спроектировать дропдаун «Сотрудник»: поиск, состояния loading/empty/error, плейсхолдер «Выберите сотрудника сектора 1С».  

3) Техническое решение (Vue)  
   - Специфицировать пропсы/события компонентов `FiltersPanel`, `StageChips`, `EmployeeSelect` (single-select, emit `update:modelValue`, `onSearch`).  
   - Определить API-метод для сотрудников (URL, параметры: фильтр по сектору 1С, пагинация/лимит 20, поиск по ФИО).  
   - Добавить дебаунс поиска и кэширование ответа на сессию; обработка ошибок (toast/notification).  

4) Реализация  
   - Обновить верстку фильтров: сетка 8px, единые label/placeholder, выравнивание по вертикали.  
   - Внедрить контейнер для стадий: фон (`#f8f9fa`), бордер (`#e5e7eb`), паддинги, фиксированная высота чипов; состояния active/hover.  
   - Реализовать `EmployeeSelect`: загрузка списка, поиск, отображение empty state («Нет сотрудников сектора 1С»), retry при ошибке.  
   - Добавить ARIA/доступность: `aria-label`, фокус-обводка, контраст текста/иконок.  

5) Тестирование и приёмка  
   - UX: кликабельность стадий, отсутствие «висящих» кнопок, корректные отступы/контрасты.  
   - Данные: сотрудники подгружаются, поиск работает, empty/error состояния отображаются.  
   - Кросс-размеры: основная ширина + узкие контейнеры/мобильный вид.  
   - Перф: дебаунс поиска, не более 1 запроса на ввод; отсутствие ошибок в консоли.  
   - Обновить README/TASK с итоговым поведением и используемым API.

## API (уточнить/подтвердить)

- Если Bitrix24: `user.get` с фильтром по подразделению сектора 1С. Документация: https://context7.com/bitrix24/rest/user.get  
- Если внутренний сервис: `/api/sector1c/employees?search=...&limit=20` (нужно описание формата ответа `{ id, name, position }`).  

## Критерии приёмки

- [ ] Кнопки стадий помещены в визуальный контейнер (фон/бордер), выровнены, имеют состояния hover/active.  
- [ ] Фильтры сгруппированы, поля подписаны, плейсхолдеры понятны, отступы выровнены по сетке 8px.  
- [ ] В поле «Сотрудник» отображается реальный список сотрудников сектора 1С; поиск работает, есть empty/error состояния.  
- [ ] Нет ошибок/ворнингов в консоли при загрузке и взаимодействии с фильтрами.  
- [ ] Добавлены комментарии в коде/README о выбранном источнике данных и параметрах API.  

## Вопросы для уточнения

1. Источник и точный фильтр для списка сотрудников сектора 1С (подразделение/отдел/кастомное поле?).  
2. Допустимый лимит и SLA по времени ответа для поиска сотрудников.  
3. Нужно ли многократное выделение стадий (multi-select) или одиночный выбор?  
4. Требуется ли сохранить выбор фильтров между сессиями (localStorage)?  

