# TASK-019-02-01: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ SnapshotService (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã)

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-08 08:54 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å:** –í—ã–ø–æ–ª–Ω–µ–Ω–∞  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-12-08 13:54 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js)  
**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** TASK-019-00 (–≠—Ç–∞–ø 2, —á–∞—Å—Ç—å 1)

---

## üìã –¶–µ–ª—å –∑–∞–¥–∞—á–∏

–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å `SnapshotService.js` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª–µ–ø–∫–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞ 1–°. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–µ—Ä–≤–∏—Å–∞, –º–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏ —á—Ç–µ–Ω–∏—è —Å–ª–µ–ø–∫–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Laravel API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π.

---

## üéØ –ö–æ–Ω—Ç–µ–∫—Å—Ç

–°–µ—Ä–≤–∏—Å `SnapshotService` —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª–µ–ø–∫–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞. –û–Ω –¥–æ–ª–∂–µ–Ω:
- –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–µ–ø–∫–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞
- –ß–∏—Ç–∞—Ç—å —Å–ª–µ–ø–∫–∏ –∏–∑ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- –†–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ PHP API endpoints (REST endpoints –≤ –ø–∞–ø–∫–µ `api/`)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- –≠—Ç–∞–ø 1 (TASK-019-01-01, TASK-019-01-02) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ª–µ–ø–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞

```
vue-app/src/services/graph-state/
‚îú‚îÄ‚îÄ SnapshotService.js          # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ snapshot-utils.js           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ snapshot-validators.js     # –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —ç—Ç–∞–ø–∞ 2-02)
```

### –ö–ª–∞—Å—Å SnapshotService

**–ü–∞—Ç—Ç–µ—Ä–Ω:** Singleton –∏–ª–∏ –∫–ª–∞—Å—Å —Å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ (–Ω–∞ –≤—ã–±–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å —Å –º–µ—Ç–æ–¥–∞–º–∏, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã.

---

## üìù –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)

### 1. `createSnapshot(sectorData, type, metadata)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ª–µ–ø–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ Laravel API.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `sectorData` (Object) ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞ –∏–∑ `DashboardSector1CService.getSectorData()`
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: `{ stages, employees, zeroPoint, tickets }`
- `type` (String) ‚Äî —Ç–∏–ø —Å–ª–µ–ø–∫–∞: `'week_start' | 'week_end' | 'manual' | 'current'`
- `metadata` (Object, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  - `createdBy` (Object) ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–∑–¥–∞—Ç–µ–ª–µ: `{ id: number, name: string }`
  - `sectorId` (String) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–∫—Ç–æ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `'1C'`)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<Object>` ‚Äî —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–ª–µ–ø–æ–∫ —Å –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```javascript
import SnapshotService from '@/services/graph-state/SnapshotService';

// –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–µ–ø–∫–∞ –Ω–∞—á–∞–ª–∞ –Ω–µ–¥–µ–ª–∏
const sectorData = await DashboardSector1CService.getSectorData();
const snapshot = await SnapshotService.createSnapshot(
  sectorData,
  'week_start',
  {
    createdBy: {
      id: 123,
      name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤'
    }
  }
);
```

**–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞:**
1. –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç —Å–ª–µ–ø–∫–∞
2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–≤–µ—Ä—Å–∏—è, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è, —Ç–∏–ø, —Å–æ–∑–¥–∞—Ç–µ–ª—å)
3. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–ª–µ–ø–∫–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –≤–µ—Ä—Å–∏–∏ 1.0
4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ PHP API (`api/snapshots.php`) –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞
5. –í–µ—Ä–Ω—É—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–ª–µ–ø–æ–∫

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API (—Å–µ—Ç—å, —Å–µ—Ä–≤–µ—Ä, –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

---

### 2. `getSnapshot(date, type)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ª–µ–ø–æ–∫ –ø–æ –¥–∞—Ç–µ –∏ —Ç–∏–ø—É.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `date` (String | Date) ‚Äî –¥–∞—Ç–∞ —Å–ª–µ–ø–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `'YYYY-MM-DD'` –∏–ª–∏ –æ–±—ä–µ–∫—Ç Date
- `type` (String) ‚Äî —Ç–∏–ø —Å–ª–µ–ø–∫–∞: `'week_start' | 'week_end' | 'manual' | 'current'`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<Object | null>` ‚Äî —Å–ª–µ–ø–æ–∫ –∏–ª–∏ `null`, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Å–ª–µ–ø–æ–∫ –Ω–∞—á–∞–ª–∞ –Ω–µ–¥–µ–ª–∏ –æ—Ç 2025-12-01
const snapshot = await SnapshotService.getSnapshot('2025-12-01', 'week_start');

if (snapshot) {
  console.log('–°–ª–µ–ø–æ–∫ –Ω–∞–π–¥–µ–Ω:', snapshot.metadata);
} else {
  console.log('–°–ª–µ–ø–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω');
}
```

**–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞:**
1. –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç `YYYY-MM-DD`
2. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å–æ–≥–ª–∞—Å–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ PHP API (`api/snapshots.php`) –¥–ª—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞
4. –ü–∞—Ä—Å–∏—Ç—å JSON-–¥–∞–Ω–Ω—ã–µ
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é —Ñ–æ—Ä–º–∞—Ç–∞ (–¥–ª—è –±—É–¥—É—â–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏)
6. –í–µ—Ä–Ω—É—Ç—å —Å–ª–µ–ø–æ–∫ –∏–ª–∏ `null`

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –≤–µ—Ä–Ω—É—Ç—å `null` (–Ω–µ –æ—à–∏–±–∫–∞)
- –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞ ‚Üí –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON ‚Üí –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

---

### 3. `getAllSnapshots(period)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–ª–µ–ø–∫–∏ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `period` (Object, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –ø–µ—Ä–∏–æ–¥ –≤—ã–±–æ—Ä–∫–∏
  - `startDate` (String | Date) ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ)
  - `endDate` (String | Date) ‚Äî –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ)
  - `type` (String, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —Å–ª–µ–ø–∫–∞
  - `sectorId` (String, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–µ–∫—Ç–æ—Ä—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `'1C'`)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<Array<Object>>` ‚Äî –º–∞—Å—Å–∏–≤ —Å–ª–µ–ø–∫–æ–≤, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–ª–µ–ø–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
const startDate = new Date();
startDate.setMonth(startDate.getMonth() - 1);

const snapshots = await SnapshotService.getAllSnapshots({
  startDate: startDate.toISOString().split('T')[0],
  endDate: new Date().toISOString().split('T')[0]
});

// –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–ª–µ–ø–∫–∏ –Ω–∞—á–∞–ª–∞ –Ω–µ–¥–µ–ª–∏
const weekStartSnapshots = await SnapshotService.getAllSnapshots({
  type: 'week_start'
});
```

**–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞:**
1. –ï—Å–ª–∏ –ø–µ—Ä–∏–æ–¥ –Ω–µ —É–∫–∞–∑–∞–Ω, –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–ª–µ–ø–∫–∏
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ PHP API (`api/snapshots.php`) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤
3. –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –ø–µ—Ä–∏–æ–¥—É –∏ —Ç–∏–ø—É (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã)
4. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–∂–¥—ã–π —Å–ª–µ–ø–æ–∫ —á–µ—Ä–µ–∑ `getSnapshot()`
5. –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º)
6. –í–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ —Å–ª–µ–ø–∫–æ–≤

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ ‚Üí –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–ª–µ–ø–∫–∞ ‚Üí –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ, –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É
- –ü—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ `[]`

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PHP API

### Endpoints PHP API

**–ë–∞–∑–æ–≤—ã–π URL:** `/api/snapshots.php` (PHP endpoint –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª–µ–ø–∫–∞–º–∏)

**Endpoints:**
1. `POST /api/snapshots.php` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–µ–ø–∫–∞
2. `GET /api/snapshots.php?date={date}&type={type}` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ª–µ–ø–∫–∞
3. `GET /api/snapshots.php` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–ø–∫–æ–≤ (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

**–°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–µ–ø–∫–∞:**
```javascript
POST /api/snapshots.php
Content-Type: application/json

{
  "action": "create",
  "snapshot": {
    "metadata": { ... },
    "statistics": { ... },
    "ticketIds": [ ... ],
    "tickets": [ ... ]
  },
  "type": "week_start",
  "date": "2025-12-01"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "snapshot": { ... },
    "path": "snapshots/sector-1c/2025/week-49/week-start-2025-12-01.json"
  }
}
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª–µ–ø–∫–∞:**
```javascript
GET /api/snapshots.php?action=get&date=2025-12-01&type=week_start
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "snapshot": { ... }
  }
}
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞:**
```javascript
GET /api/snapshots.php?action=list&startDate=2025-12-01&endDate=2025-12-07&type=week_start
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "snapshots": [
      { "date": "2025-12-01", "type": "week_start", "path": "..." },
      { "date": "2025-12-07", "type": "week_end", "path": "..." }
    ]
  }
}
```

---

## üõ†Ô∏è –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### `normalizeSectorData(sectorData)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç —Å–ª–µ–ø–∫–∞ –≤–µ—Ä—Å–∏–∏ 1.0.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `sectorData` (Object) ‚Äî –¥–∞–Ω–Ω—ã–µ –∏–∑ `DashboardSector1CService.getSectorData()`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Object` ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–ª–µ–ø–∫–∞

**–õ–æ–≥–∏–∫–∞:**
- –ò–∑–≤–ª–µ—á—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —ç—Ç–∞–ø–∞–º
- –ò–∑–≤–ª–µ—á—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
- –ò–∑–≤–ª–µ—á—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω—É–ª–µ–≤–æ–π —Ç–æ—á–∫–∏
- –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ `ticketIds` –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–∫–µ—Ç–∞—Ö

---

### `generateSnapshotMetadata(type, createdBy, sectorId)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–ª–µ–ø–∫–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `type` (String) ‚Äî —Ç–∏–ø —Å–ª–µ–ø–∫–∞
- `createdBy` (Object) ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–∑–¥–∞—Ç–µ–ª–µ
- `sectorId` (String) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–∫—Ç–æ—Ä–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Object` ‚Äî –æ–±—ä–µ–∫—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```javascript
{
  version: '1.0',
  createdAt: '2025-12-08T08:54:00+03:00', // ISO 8601 —Å —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º
  createdBy: { id: 123, name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤' },
  type: 'week_start',
  sectorId: '1C',
  sectorName: '–°–µ–∫—Ç–æ—Ä 1–°'
}
```

---

### `formatDate(date)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç `YYYY-MM-DD`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `date` (String | Date) ‚Äî –¥–∞—Ç–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `String` ‚Äî –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DD`

---

### `buildFilePath(date, type)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å–ª–µ–ø–∫–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `date` (String | Date) ‚Äî –¥–∞—Ç–∞ —Å–ª–µ–ø–∫–∞
- `type` (String) ‚Äî —Ç–∏–ø —Å–ª–µ–ø–∫–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `String` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `2025/week-49/week-start-2025-12-01.json`)

**–õ–æ–≥–∏–∫–∞:**
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ–¥ –∏ –Ω–æ–º–µ—Ä –Ω–µ–¥–µ–ª–∏ –∏–∑ –¥–∞—Ç—ã
- –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏–º—è —Ñ–∞–π–ª–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
- –í–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—ã–π –ø—É—Ç—å

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–∞

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```javascript
// vue-app/src/config/snapshot-config.js
export default {
  apiBaseUrl: process.env.VUE_APP_API_URL || '',
  snapshotsEndpoint: '/api/snapshots.php',
  defaultSectorId: '1C',
  snapshotVersion: '1.0',
  timeout: 30000 // 30 —Å–µ–∫—É–Ω–¥
};
```

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **HTTP-–∫–ª–∏–µ–Ω—Ç:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fetch` (–Ω–∞—Ç–∏–≤–Ω—ã–π) –∏–ª–∏ `axios` (–µ—Å–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ)
- **–£—Ç–∏–ª–∏—Ç—ã –¥–∞—Ç:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–π `Date` –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `date-fns`, –µ—Å–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `DashboardSector1CService` ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞ (–Ω–∞ —ç—Ç–∞–ø–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–µ–ø–∫–∞)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API (–±–∞–∑–æ–≤—ã–π URL, endpoints)

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] –ö–ª–∞—Å—Å `SnapshotService` —Å–æ–∑–¥–∞–Ω –≤ `vue-app/src/services/graph-state/SnapshotService.js`
- [ ] –ú–µ—Ç–æ–¥ `createSnapshot()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ú–µ—Ç–æ–¥ `getSnapshot()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ú–µ—Ç–æ–¥ `getAllSnapshots()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PHP API —Ä–∞–±–æ—Ç–∞–µ—Ç (endpoint `api/snapshots.php` —Å–æ–∑–¥–∞–Ω –∏–ª–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω)
- [ ] –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (`normalizeSectorData`, `generateSnapshotMetadata`, `formatDate`, `buildFilePath`)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (try/catch, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞ (ESLint, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫ –º–µ—Ç–æ–¥–∞–º (JSDoc)
- [ ] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìù –î–µ–π—Å—Ç–≤–∏—è

1. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ `vue-app/src/services/graph-state/`
2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `SnapshotService.js` —Å –∫–ª–∞—Å—Å–æ–º/–º–æ–¥—É–ª–µ–º
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `createSnapshot()` —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `getSnapshot()` —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `getAllSnapshots()` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
6. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (`normalizeSectorData`, `generateSnapshotMetadata`, `formatDate`, `buildFilePath`)
7. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å PHP API (–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å endpoint `api/snapshots.php`, —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–æ–≤)
8. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (try/catch, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –∏–ª–∏ —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
9. –î–æ–±–∞–≤–∏—Ç—å JSDoc-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –º–µ—Ç–æ–¥–∞–º
10. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –≤—Ä—É—á–Ω—É—é (—á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** `DOCS/TASKS/TASK-019-00-plan.md`
- **–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–¥–∞—á–∏:** 
  - `DOCS/TASKS/TASK-019-01-01.md` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö)
  - `DOCS/TASKS/TASK-019-01-02.md` (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è)
- **–°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞:** `DOCS/TASKS/TASK-019-02-02.md` (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —É–¥–∞–ª–µ–Ω–∏–µ, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- **–°–µ—Ä–≤–∏—Å –¥–∞—à–±–æ—Ä–¥–∞:** `vue-app/src/services/dashboard-sector-1c/DashboardSector1CService.js`
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:** `DOCS/ARCHITECTURE/graph-state-snapshots.md` (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω)

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∞

```javascript
// vue-app/src/services/graph-state/SnapshotService.js

import snapshotConfig from '@/config/snapshot-config';

/**
 * –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª–µ–ø–∫–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞
 * 
 * @class SnapshotService
 */
class SnapshotService {
  /**
   * –ë–∞–∑–æ–≤—ã–π URL API
   * @private
   */
  static apiBaseUrl = snapshotConfig.apiBaseUrl;

  /**
   * Endpoint –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª–µ–ø–∫–∞–º–∏
   * @private
   */
  static snapshotsEndpoint = snapshotConfig.snapshotsEndpoint;

  /**
   * –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ª–µ–ø–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞
   * 
   * @param {Object} sectorData - –î–∞–Ω–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞ –∏–∑ DashboardSector1CService
   * @param {String} type - –¢–∏–ø —Å–ª–µ–ø–∫–∞: 'week_start' | 'week_end' | 'manual' | 'current'
   * @param {Object} metadata - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
   * @returns {Promise<Object>} –°–æ–∑–¥–∞–Ω–Ω—ã–π —Å–ª–µ–ø–æ–∫
   */
  static async createSnapshot(sectorData, type, metadata = {}) {
    try {
      // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
      const normalizedData = this.normalizeSectorData(sectorData);
      
      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
      const snapshotMetadata = this.generateSnapshotMetadata(
        type,
        metadata.createdBy,
        metadata.sectorId || snapshotConfig.defaultSectorId
      );

      // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–ª–µ–ø–∫–∞
      const snapshot = {
        metadata: snapshotMetadata,
        statistics: normalizedData.statistics,
        ticketIds: normalizedData.ticketIds,
        tickets: normalizedData.tickets
      };

      // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ PHP API
      const response = await fetch(`${this.apiBaseUrl}${this.snapshotsEndpoint}`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-Requested-With': 'XMLHttpRequest'
        },
        body: JSON.stringify({
          action: 'create',
          snapshot,
          type,
          date: this.formatDate(new Date())
        })
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const result = await response.json();

      if (!result.success) {
        throw new Error(result.message || '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–µ–ø–∫–∞');
      }

      return result.data.snapshot;
    } catch (error) {
      console.error('SnapshotService.createSnapshot error:', error);
      throw error;
    }
  }

  /**
   * –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ª–µ–ø–æ–∫ –ø–æ –¥–∞—Ç–µ –∏ —Ç–∏–ø—É
   * 
   * @param {String|Date} date - –î–∞—Ç–∞ —Å–ª–µ–ø–∫–∞
   * @param {String} type - –¢–∏–ø —Å–ª–µ–ø–∫–∞
   * @returns {Promise<Object|null>} –°–ª–µ–ø–æ–∫ –∏–ª–∏ null, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω
   */
  static async getSnapshot(date, type) {
    try {
      const dateStr = this.formatDate(date);
      const url = `${this.apiBaseUrl}${this.snapshotsEndpoint}?action=get&date=${dateStr}&type=${type}`;

      const response = await fetch(url, {
        method: 'GET',
        headers: {
          'X-Requested-With': 'XMLHttpRequest'
        }
      });

      if (response.status === 404) {
        return null; // –°–ª–µ–ø–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
      }

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const result = await response.json();

      if (!result.success) {
        throw new Error(result.message || '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–µ–ø–∫–∞');
      }

      return result.data.snapshot;
    } catch (error) {
      console.error('SnapshotService.getSnapshot error:', error);
      throw error;
    }
  }

  /**
   * –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–ª–µ–ø–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
   * 
   * @param {Object} period - –ü–µ—Ä–∏–æ–¥ –≤—ã–±–æ—Ä–∫–∏
   * @returns {Promise<Array<Object>>} –ú–∞—Å—Å–∏–≤ —Å–ª–µ–ø–∫–æ–≤
   */
  static async getAllSnapshots(period = {}) {
    try {
      const params = new URLSearchParams();
      
      if (period.startDate) {
        params.append('startDate', this.formatDate(period.startDate));
      }
      if (period.endDate) {
        params.append('endDate', this.formatDate(period.endDate));
      }
      if (period.type) {
        params.append('type', period.type);
      }
      if (period.sectorId) {
        params.append('sectorId', period.sectorId);
      }

      const url = `${this.apiBaseUrl}${this.snapshotsEndpoint}?${params.toString()}`;

      const response = await fetch(url, {
        method: 'GET',
        headers: {
          'X-Requested-With': 'XMLHttpRequest'
        }
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const result = await response.json();

      if (!result.success) {
        throw new Error(result.message || '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å–ª–µ–ø–∫–æ–≤');
      }

      // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–≥–æ —Å–ª–µ–ø–∫–∞
      const snapshots = await Promise.all(
        result.data.snapshots.map(async (snapshotInfo) => {
          try {
            return await this.getSnapshot(snapshotInfo.date, snapshotInfo.type);
          } catch (error) {
            console.warn(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–µ–ø–∫–∞ ${snapshotInfo.date}/${snapshotInfo.type}:`, error);
            return null;
          }
        })
      );

      // –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å null –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ
      return snapshots
        .filter(snapshot => snapshot !== null)
        .sort((a, b) => new Date(a.metadata.createdAt) - new Date(b.metadata.createdAt));
    } catch (error) {
      console.error('SnapshotService.getAllSnapshots error:', error);
      throw error;
    }
  }

  // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ)
  static normalizeSectorData(sectorData) { /* ... */ }
  static generateSnapshotMetadata(type, createdBy, sectorId) { /* ... */ }
  static formatDate(date) { /* ... */ }
  static buildFilePath(date, type) { /* ... */ }
}

export default SnapshotService;
```

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

**3-4 —á–∞—Å–∞**

---

## üîó –°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ **TASK-019-02-02: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ SnapshotService (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —É–¥–∞–ª–µ–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)**.

---

## –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- **2025-12-08 08:54 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω–∞ –∑–∞–¥–∞—á–∞
- **2025-12-08 09:00 (UTC+3, –ë—Ä–µ—Å—Ç):** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –∑–∞–º–µ–Ω–µ–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è Laravel API –Ω–∞ PHP API endpoints (`api/snapshots.php`)
- **2025-12-08 10:44 (UTC+3, –ë—Ä–µ—Å—Ç):** –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- **2025-12-08 13:54 (UTC+3, –ë—Ä–µ—Å—Ç):** –ó–∞–¥–∞—á–∞ –∑–∞–∫—Ä—ã—Ç–∞ –∫–∞–∫ —É—Å–ø–µ—à–Ω–∞—è (–≤—Å–µ –∑–∞–¥–∞—á–∏ TASK-019 –∑–∞–≤–µ—Ä—à–µ–Ω—ã)

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

**–î–∞—Ç–∞:** 2025-12-08 10:44 (UTC+3, –ë—Ä–µ—Å—Ç)

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `vue-app/src/config/snapshot-config.js`
- ‚úÖ –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `SnapshotService` –≤ `vue-app/src/services/graph-state/SnapshotService.js`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `createSnapshot()` —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å PHP API
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `getSnapshot()` —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null, –µ—Å–ª–∏ —Å–ª–µ–ø–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `getAllSnapshots()` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –ø–µ—Ä–∏–æ–¥—É –∏ —Ç–∏–ø—É
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `normalizeSectorData()` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç —Å–ª–µ–ø–∫–∞
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `generateSnapshotMetadata()` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `formatDate()` –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞—Ç
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `buildFilePath()` –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `getWeekNumber()` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –Ω–µ–¥–µ–ª–∏ –ø–æ ISO 8601
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (try/catch, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ console.error)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã JSDoc-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫–æ –≤—Å–µ–º –º–µ—Ç–æ–¥–∞–º
- ‚úÖ –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω –ª–∏–Ω—Ç–µ—Ä–æ–º ‚Äî –æ—à–∏–±–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å SnapshotService —Å–æ–∑–¥–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** PHP API endpoint (`api/snapshots.php`) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞.

---

**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.1

