# TASK-009-02: Плавающая кнопка "НАЗАД" для мобильной версии дашборда сектора 1С

**Дата создания:** 2025-12-06 13:26 (UTC+3, Брест)  
**Статус:** Новая  
**Приоритет:** Средний  
**Исполнитель:** Bitrix24 Программист (Vue.js)

---

## Описание

Добавить плавающую кнопку "НАЗАД" для мобильной версии дашборда сектора 1С. Кнопка должна быть закреплена на уровне скролла экрана, быть небольшой, но призывающей, давая понимание, что нажав на неё можно вернуться назад на экран старта.

---

## Контекст

Дашборд сектора 1С является отдельной страницей в приложении с большим количеством контента, который требует прокрутки на мобильных устройствах. На мобильной версии кнопка "НАЗАД" в заголовке может быть скрыта или неудобна для доступа при прокрутке страницы.

**Текущее состояние:**
- Дашборд реализован в компоненте `DashboardSector1C.vue`
- На мобильной версии (< 768px) контент отображается в одну колонку с вертикальной прокруткой
- Кнопка "НАЗАД" в заголовке может быть скрыта на мобильной версии (TASK-009-01)

**Требуется:**
- Добавить плавающую кнопку "НАЗАД" для мобильной версии
- Кнопка должна быть закреплена на уровне скролла (fixed position)
- Кнопка должна быть небольшой, но заметной и призывающей
- Кнопка должна обеспечивать возврат на стартовую страницу (`/`)

---

## Модули и компоненты

### Изменяемые файлы:
- `vue-app/src/components/dashboard/DashboardSector1C.vue` — главный компонент дашборда
  - Добавление плавающей кнопки в шаблон
  - Добавление метода навигации (если не добавлен в TASK-009-01)
  - Добавление стилей для плавающей кнопки
  - Добавление логики показа/скрытия кнопки при скролле (опционально)

### Используемые зависимости:
- `vue-router` — для навигации (уже используется в проекте)
- `useRouter` из `vue-router` — композабл для работы с роутером
- Vue.js Composition API — для реактивности и обработки событий

---

## Зависимости

### От других задач:
- **TASK-009-01** — кнопка "НАЗАД" в заголовке (может использовать тот же метод навигации)
- **TASK-005** — дашборд сектора 1С должен быть реализован и работать

### От модулей:
- `vue-router` — для навигации
- Vue.js 3.x (Composition API) — для компонентов

---

## Ступенчатые подзадачи

1. **Добавление плавающей кнопки в шаблон**
   - Добавить элемент плавающей кнопки в конец шаблона компонента
   - Кнопка должна быть вне основного контента (на уровне корневого элемента)
   - Добавить обработчик события `@click="goBack"`

2. **Реализация метода навигации (если не реализован в TASK-009-01)**
   - Создать или использовать существующий метод `goBack()` в `setup()` функции
   - Метод должен выполнять `router.push('/')` для перехода на стартовую страницу

3. **Стилизация плавающей кнопки**
   - Добавить стили для плавающей кнопки в секцию `<style scoped>`
   - Использовать `position: fixed` для закрепления кнопки
   - Расположить кнопку в удобном месте (например, нижний правый угол)
   - Добавить тень и визуальные эффекты для привлекательности
   - Кнопка должна быть небольшой, но заметной

4. **Адаптивность и видимость**
   - Кнопка должна отображаться только на мобильной версии (< 768px)
   - На десктопе и планшете кнопка должна быть скрыта
   - Кнопка должна быть видна при любом уровне скролла

5. **Дополнительные улучшения (опционально)**
   - Добавить анимацию появления/исчезновения кнопки при скролле
   - Добавить индикатор прокрутки (если требуется)
   - Добавить плавную анимацию при наведении

---

## Технические требования

### Версии:
- **Vue.js:** 3.x (Composition API)
- **Vue Router:** последняя версия (уже используется в проекте)

### Дизайн плавающей кнопки:
- **Размер:** Небольшая, но заметная (например, 56x56px или 48x48px)
- **Форма:** Круглая или скруглённая (rounded)
- **Иконка:** Стрелка влево (←) или иконка "домой"
- **Цвет:** Акцентный цвет Bitrix24 или контрастный цвет для привлечения внимания
- **Тень:** Заметная тень для эффекта "плавания"
- **Расположение:** Нижний правый угол экрана (или другое удобное место)
- **Отступы:** Отступы от краёв экрана (например, 16px снизу и справа)

### Поведение:
- При клике на кнопку происходит переход на стартовую страницу (`/`)
- Использовать `router.push('/')` для программной навигации
- Кнопка должна быть видна при любом уровне скролла
- Кнопка должна быть доступна во всех состояниях компонента

### Адаптивность:
- **Мобильный (< 768px):** Кнопка видна и закреплена
- **Планшет (768px - 1024px):** Кнопка скрыта
- **Десктоп (> 1024px):** Кнопка скрыта

### Accessibility:
- Добавить `aria-label` для screen readers
- Обеспечить достаточный контраст для читаемости
- Кнопка должна быть доступна для навигации с клавиатуры

---

## Пример реализации

### Структура плавающей кнопки:

```vue
<template>
  <div class="dashboard-sector-1c" :class="{ 'is-dragging': draggedTicket }">
    <!-- ... остальной контент ... -->
    
    <!-- Плавающая кнопка "НАЗАД" для мобильной версии -->
    <button 
      class="floating-back-button" 
      @click="goBack"
      aria-label="Вернуться на главную"
      title="Вернуться на главную"
    >
      <span class="floating-back-button-icon">←</span>
    </button>
  </div>
</template>
```

### Метод навигации (если не реализован в TASK-009-01):

```javascript
import { onMounted, useRouter } from 'vue';

export default {
  name: 'DashboardSector1C',
  setup() {
    const router = useRouter();
    
    /**
     * Возврат на стартовую страницу
     */
    const goBack = () => {
      router.push('/');
    };
    
    // ... остальной код ...
    
    return {
      // ... остальные возвращаемые значения ...
      goBack
    };
  }
};
```

### Стили плавающей кнопки:

```css
/* Плавающая кнопка "НАЗАД" для мобильной версии */
.floating-back-button {
  display: none; /* Скрыта по умолчанию */
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: #2196F3; /* Акцентный цвет Bitrix24 */
  color: white;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 1000; /* Поверх всего контента */
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  line-height: 1;
}

.floating-back-button:hover {
  background: #1976D2;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2), 0 3px 6px rgba(0, 0, 0, 0.15);
  transform: scale(1.05);
}

.floating-back-button:active {
  background: #1565C0;
  transform: scale(0.95);
}

.floating-back-button-icon {
  font-size: 28px;
  line-height: 1;
  font-weight: bold;
}

/* Показываем кнопку только на мобильной версии */
@media (max-width: 768px) {
  .floating-back-button {
    display: flex;
  }
}

/* Скрываем на планшете и десктопе */
@media (min-width: 769px) {
  .floating-back-button {
    display: none;
  }
}
```

### Альтернативный вариант с текстом:

```css
/* Вариант с текстом "НАЗАД" */
.floating-back-button {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 20px;
  min-width: 80px;
  height: 48px;
  padding: 0 16px;
  border-radius: 24px;
  background: #2196F3;
  color: white;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
}

.floating-back-button-icon {
  font-size: 20px;
  line-height: 1;
}
```

---

## Критерии приёмки

- [ ] Плавающая кнопка "НАЗАД" добавлена в компонент дашборда
- [ ] Кнопка отображается только на мобильной версии (< 768px)
- [ ] Кнопка скрыта на планшете и десктопе (≥ 768px)
- [ ] Кнопка закреплена на уровне скролла (fixed position)
- [ ] Кнопка имеет небольшой, но заметный размер
- [ ] Кнопка имеет привлекательный дизайн (тень, цвет, форма)
- [ ] При клике на кнопку происходит переход на стартовую страницу (`/`)
- [ ] Кнопка видна при любом уровне скролла страницы
- [ ] Кнопка имеет hover-эффект и визуальную обратную связь
- [ ] Кнопка доступна для навигации с клавиатуры (accessibility)
- [ ] Кнопка имеет aria-label для screen readers
- [ ] Код соответствует стандартам Vue.js и PSR-12 (для комментариев)

---

## Тестирование

### Функциональное тестирование:
1. Открыть дашборд сектора 1С на мобильном устройстве (< 768px)
2. Проверить наличие плавающей кнопки "НАЗАД"
3. Проверить расположение кнопки (нижний правый угол или другое место)
4. Прокрутить страницу вниз — кнопка должна оставаться видимой
5. Прокрутить страницу вверх — кнопка должна оставаться видимой
6. Кликнуть на кнопку — должен произойти переход на стартовую страницу (`/`)
7. Проверить работу кнопки в состоянии загрузки
8. Проверить работу кнопки в состоянии ошибки
9. Проверить работу кнопки при отображении контента

### Адаптивное тестирование:
1. Проверить отображение кнопки на мобильной версии (< 768px)
2. Проверить скрытие кнопки на планшете (768px - 1024px)
3. Проверить скрытие кнопки на десктопе (> 1024px)
4. Проверить работу кнопки в разных ориентациях (портретная/ландшафтная)

### Тестирование визуального дизайна:
1. Проверить размер кнопки (небольшая, но заметная)
2. Проверить цвет и контрастность
3. Проверить наличие тени и эффекта "плавания"
4. Проверить hover-эффект
5. Проверить анимацию при клике

### Тестирование доступности:
1. Проверить работу кнопки с клавиатуры (Tab, Enter)
2. Проверить наличие aria-label для screen readers
3. Проверить контрастность текста/иконки кнопки

---

## Связанные задачи

- **TASK-009-01:** Кнопка "НАЗАД" в заголовке дашборда сектора 1С (для десктопа и планшета)
- **TASK-005:** Внедрение дашборда сектора 1С (базовая реализация)

---

## Дополнительные рекомендации

### Оптимизация производительности:
- Использовать CSS transitions для плавных анимаций
- Избегать сложных JavaScript-анимаций, которые могут влиять на производительность

### UX-улучшения:
- Можно добавить индикатор прокрутки (если требуется)
- Можно добавить анимацию появления кнопки при первом скролле
- Можно добавить вибрацию при клике (на поддерживаемых устройствах)

### Альтернативные варианты расположения:
- Нижний правый угол (рекомендуется)
- Нижний левый угол
- Центр снизу
- Верхний правый угол (менее удобно для большого пальца)

---

## История правок

- **2025-12-06 13:26 (UTC+3, Брест):** Создана задача TASK-009-02 для добавления плавающей кнопки "НАЗАД" для мобильной версии дашборда сектора 1С

---

**Автор:** UX/UI-дизайнер  
**Статус:** Новая

