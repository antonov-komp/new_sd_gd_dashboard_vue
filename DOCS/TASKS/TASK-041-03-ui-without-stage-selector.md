# TASK-041-03: UI без селектора этапов для модуля «График приёма и закрытий сектора 1С»

**Дата создания:** 2025-12-15 12:36 (UTC+0300, Brest)  
**Дата завершения:** 2025-12-15 18:00 (UTC+0300, Brest)  
**Статус:** ✅ Завершено  
**Приоритет:** Высокий  
**Исполнитель:** Bitrix24 Программист (Vue.js Developer)  
**Связь с задачей:** Шаг 3 из TASK-041

## Цель этапа
Убрать селектор «Этапы для отображения» и адаптировать UI модуля, сохранив фильтры и визуальный каркас графиков сектора 1С. Обеспечить корректное отображение всех стадий сразу, без выбора, и подготовить графики к работе с недельной агрегацией.

## Контекст
- Базовый модуль: «График состояния сектора 1С» — используем его фильтры/структуру/доступы.
- Новый модуль: «График приёма и закрытий сектора 1С» (TASK-041). Селектор этапов отсутствует; все стадии показываются сразу.
- Неделя: ISO-8601 (пн–вс), расчёт на бэкенде, данные уже агрегированы по неделе (UTC).
- Графики: линейный, столбчатый, круговая (Новые vs Закрытые).

## Задачи этапа
1) Удаление селектора этапов  
   - Найти и убрать UI-элементы, связанные с «Этапы для отображения», в новом модуле.  
   - Убедиться, что удаление не ломает фильтры и общий layout.

2) Адаптация графиков к отсутствию селектора  
   - Линейный/бар: работают с агрегированными недельными значениями (series.new[], series.closed[]).  
   - Круговая: «Новые» vs «Закрытые» за неделю.  
   - Легенды/цвета: повторить текущий модуль, исключив элементы, связанные с выбором этапов.

3) Сохранение фильтров и структуры  
   - Фильтры — без изменений (как в «Графике состояния сектора 1С»).  
   - Структура компонента/страницы — аналогичная, за исключением удалённого селектора.

4) Пустые состояния и устойчивость  
   - Отобразить нулевые значения/плейсхолдеры, если нет данных.  
   - Проверить, что отсутствие селектора не вызывает ошибок в тултипах/легендах.

5) Связь с данными  
   - Предусмотреть, что данные приходят уже агрегированными за неделю; нет показа по дням.  
   - Убедиться, что цвета/подписи для закрывающих стадий (успех/отклонено/закрыли без задачи) остаются согласованными с текущими соглашениями.

## Ожидаемые результаты этапа
- Селектор этапов удалён из UI нового модуля.  
- Графики работают с недельной агрегацией без дополнительных выборов этапов.  
- Фильтры и layout сохранены, ошибки/артефакты отсутствуют.  
- Легенды/цвета/тултипы корректны после удаления селектора.

## Критерии приёмки этапа
- Селектор «Этапы для отображения» отсутствует в UI.  
- Линейный/бар-графы отображают агрегаты недели (new/closed), круговая — Новые vs Закрытые.  
- Фильтры функционируют как в исходном модуле; layout не нарушен.  
- Нет ошибок в тултипах/легендах из-за удаления селектора; пустые состояния отображаются корректно.  

## Дополнительные уточнения
- Проверьте зависимости на селектор этапов в существующих компонентах: если есть вычисляемые свойства/слоты/хэндлеры, удалить или заглушить, чтобы не было undefined.  
- При правках UI ориентироваться на структуру/стили `GraphStateChart.vue`; переиспользовать классы/переменные цветов, чтобы не расходиться с существующей темой.  
- Убедиться, что состояние фильтров не содержит ключа для селектора этапов; если есть — очистить/не передавать его в запросы.  
- Проверить тултипы/легенды: убрать лишние элементы, завязанные на выбранные этапы, оставить только серии new/closed.

