# TASK-048: –ß–µ—Ä–Ω–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-12-16 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –∑–∞—Ç–µ–º –æ—Ç–∫–∞—á–µ–Ω–∞ (TASK-049)

---

## üìã –ß—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å –≤ TASK-048

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏:
1. **–†–∞—Å—à–∏—Ä–∏—Ç—å –ª–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ —Å 1 –Ω–µ–¥–µ–ª–∏ –¥–æ 4 –Ω–µ–¥–µ–ª—å** (—Ç–µ–∫—É—â–∞—è + 3 –ø—Ä–µ–¥—ã–¥—É—â–∏–µ)
2. **–£–±—Ä–∞—Ç—å –∫–ª–∏–∫–∏ –Ω–∞ –ø–æ–ø–∞–ø—ã** —Ç–æ—á–µ–∫ –≥—Ä–∞—Ñ–∏–∫–∞ (–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ tooltip)
3. **–î–æ–±–∞–≤–∏—Ç—å –ª–∏–Ω–∏–∏ –¥–ª—è —Ä–∞–∑–±–∏–≤–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤** –Ω–∞ –≥—Ä–∞—Ñ–∏–∫:
   - –ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)
   - –ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)
4. **–î–æ–±–∞–≤–∏—Ç—å –ª–∏–Ω–∏–∏ –¥–ª—è —Ä–∞–∑–±–∏–≤–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤** –Ω–∞ –≥—Ä–∞—Ñ–∏–∫:
   - –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)
   - –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)

---

## üîç –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

#### 1. –£–±—Ä–∞–Ω—ã –∫–ª–∏–∫–∏ –Ω–∞ –ø–æ–ø–∞–ø—ã —Ç–æ—á–µ–∫ –≥—Ä–∞—Ñ–∏–∫–∞
**–§–∞–π–ª:** `vue-app/src/components/graph-admission-closure/GraphAdmissionClosureChart.vue`

**–°—Ç—Ä–æ–∫–∞ 292:**
```javascript
// TASK-049: –£–±—Ä–∞–Ω onClick –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ - –∫–ª–∏–∫–∏ –Ω–∞ —Ç–æ—á–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –ø–æ–ø–∞–ø—ã (–∫–∞–∫ –≤ TASK-048)
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ** (—á–µ—Ä–µ–∑ TASK-049)

#### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–∏–Ω–∏–∏ –¥–ª—è —Ä–∞–∑–±–∏–≤–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã—Ö –∏ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤
**–§–∞–π–ª:** `vue-app/src/components/graph-admission-closure/GraphAdmissionClosureChart.vue`

**–°—Ç—Ä–æ–∫–∏ 179-222:**
- –õ–∏–Ω–∏—è "–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)" ‚Äî –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è, —Å–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω–∞—è
- –õ–∏–Ω–∏—è "–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)" ‚Äî –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è, –∂—ë–ª—Ç–∞—è
- –õ–∏–Ω–∏—è "–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)" ‚Äî –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è, —Å–≤–µ—Ç–ª–æ-–æ—Ä–∞–Ω–∂–µ–≤–∞—è
- –õ–∏–Ω–∏—è "–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)" ‚Äî –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è, —Ç—ë–º–Ω–æ-–æ—Ä–∞–Ω–∂–µ–≤–∞—è

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ**

#### 3. –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –Ω–µ–¥–µ–ª—è–º–∏ (–≤ API)
**–§–∞–π–ª:** `api/graph-1c-admission-closure.php`

**–°—Ç—Ä–æ–∫–∏ 64-97:** –§—É–Ω–∫—Ü–∏—è `getFourWeeksBounds()` ‚Äî –≤—ã—á–∏—Å–ª—è–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã 4 –Ω–µ–¥–µ–ª—å
```php
function getFourWeeksBounds(DateTimeImmutable $currentWeekStart, DateTimeImmutable $currentWeekEnd): array
{
    // –í—ã—á–∏—Å–ª—è–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã 4 –Ω–µ–¥–µ–ª—å (—Ç–µ–∫—É—â–∞—è + 3 –ø—Ä–µ–¥—ã–¥—É—â–∏–µ)
    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–µ–¥–µ–ª—è—Ö (–æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º)
}
```

**–°—Ç—Ä–æ–∫–∏ 126-192:** –§—É–Ω–∫—Ü–∏—è `calculateWeekMetrics()` ‚Äî –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–µ–¥–µ–ª–∏
```php
function calculateWeekMetrics(
    DateTimeImmutable $weekStart,
    DateTimeImmutable $weekEnd,
    array $allTickets,
    // ...
): array {
    // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –Ω–µ–¥–µ–ª–∏
    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: newTickets, closedTickets, closedTicketsCreatedThisWeek, –∏ —Ç.–¥.
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**

---

### ‚ùå –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

#### 1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ 4 –Ω–µ–¥–µ–ª–∏
**–§–∞–π–ª:** `api/graph-1c-admission-closure.php`

**–°—Ç—Ä–æ–∫–∏ 820-830:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `series` —Å –æ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –¥–ª—è –æ–¥–Ω–æ–π –Ω–µ–¥–µ–ª–∏
```php
// TASK-049: –í–æ–∑–≤—Ä–∞—Ç –∫ –ª–æ–≥–∏–∫–µ –æ–¥–Ω–æ–π –Ω–µ–¥–µ–ª–∏ (–æ—Ç–∫–∞—Ç TASK-048)
// –§–æ—Ä–º–∏—Ä—É–µ–º series —Å –æ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–µ–¥–µ–ª–∏
$series = [
    'new' => [$newCount],
    'closed' => [$closedCount],
    // ... –ø–æ –æ–¥–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –¥–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏
];
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§—É–Ω–∫—Ü–∏—è `getFourWeeksBounds()` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –§—É–Ω–∫—Ü–∏—è `calculateWeekMetrics()` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–π –Ω–µ–¥–µ–ª–∏
- –í –æ—Ç–≤–µ—Ç–µ API –Ω–µ—Ç –º–∞—Å—Å–∏–≤–∞ `weeks` —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –æ 4 –Ω–µ–¥–µ–ª—è—Ö
- –í –æ—Ç–≤–µ—Ç–µ API –Ω–µ—Ç –º–∞—Å—Å–∏–≤–∞ `weeksData` —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–∏

**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** (–æ—Ç–∫–∞—á–µ–Ω–æ –≤ TASK-049)

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è 4 –Ω–µ–¥–µ–ª—å
**–§–∞–π–ª:** `vue-app/src/components/graph-admission-closure/GraphAdmissionClosureChart.vue`

**–°—Ç—Ä–æ–∫–∏ 145-225:** `lineBarData` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–¥–Ω–æ–π –Ω–µ–¥–µ–ª–µ–π
```javascript
const lineBarData = computed(() => {
  // TASK-049: –ü–æ–ª—É—á–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–µ–¥–µ–ª–µ
  const weekNumber = props.meta?.weekNumber;
  const weekLabel = weekNumber ? `–ù–µ–¥–µ–ª—è ${weekNumber}` : '–ù–µ–¥–µ–ª—è';
  const labels = [weekLabel]; // –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –Ω–µ–¥–µ–ª—è!
  
  // –°–µ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å –æ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º
  const newSeries = [props.data.series?.new?.[0] ?? props.data.newTickets ?? 0];
  // ...
});
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `labels` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –Ω–µ–¥–µ–ª—é
- –í—Å–µ —Å–µ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö (`newSeries`, `closedSeries`, –∏ —Ç.–¥.) —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç
- –ù–µ—Ç –ª–æ–≥–∏–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Å—Å–∏–≤–∞ `meta.weeks` —Å 4 –Ω–µ–¥–µ–ª—è–º–∏
- –ù–µ—Ç –ª–æ–≥–∏–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Å—Å–∏–≤–æ–≤ `series` —Å 4 —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** (–æ—Ç–∫–∞—á–µ–Ω–æ –≤ TASK-049)

---

## üîÑ –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ (–∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π)

### TASK-048 ‚Üí TASK-049: –û—Ç–∫–∞—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞—Ç–∞:** –°—É–¥—è –ø–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º –≤ –∫–æ–¥–µ, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å 4 –Ω–µ–¥–µ–ª—å –±—ã–ª–∞ –æ—Ç–∫–∞—á–µ–Ω–∞ –≤ TASK-049.

**–°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–∞ –æ—Ç–∫–∞—Ç–∞:**

1. **–í API (`api/graph-1c-admission-closure.php`, —Å—Ç—Ä–æ–∫–∞ 820):**
   ```php
   // TASK-049: –í–æ–∑–≤—Ä–∞—Ç –∫ –ª–æ–≥–∏–∫–µ –æ–¥–Ω–æ–π –Ω–µ–¥–µ–ª–∏ (–æ—Ç–∫–∞—Ç TASK-048)
   ```

2. **–í API (`api/graph-1c-admission-closure.php`, —Å—Ç—Ä–æ–∫–∞ 945):**
   ```php
   // TASK-049: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–¥–Ω–æ–π –Ω–µ–¥–µ–ª–∏ (–æ—Ç–∫–∞—Ç TASK-048)
   ```

3. **–í–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (`GraphAdmissionClosureChart.vue`, —Å—Ç—Ä–æ–∫–∞ 118):**
   ```javascript
   series: { // TASK-049: –º–∞—Å—Å–∏–≤—ã —Å –æ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–µ–¥–µ–ª–∏
   ```

4. **–í–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (`GraphAdmissionClosureChart.vue`, —Å—Ç—Ä–æ–∫–∞ 146):**
   ```javascript
   // TASK-049: –ü–æ–ª—É—á–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–µ–¥–µ–ª–µ
   ```

**–í—ã–≤–æ–¥:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å 4 –Ω–µ–¥–µ–ª—å –±—ã–ª–∞ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –Ω–æ –∑–∞—Ç–µ–º –æ—Ç–∫–∞—á–µ–Ω–∞ –≤ TASK-049. –û—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ:
- –£–±—Ä–∞–Ω–Ω—ã–µ –∫–ª–∏–∫–∏ –Ω–∞ –ø–æ–ø–∞–ø—ã (—á–µ—Ä–µ–∑ TASK-049)
- –õ–∏–Ω–∏–∏ –¥–ª—è —Ä–∞–∑–±–∏–≤–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã—Ö –∏ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ (—Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –æ–¥–Ω–æ–π –Ω–µ–¥–µ–ª–∏)

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–¥–∞

### API (`api/graph-1c-admission-closure.php`)

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `getFourWeeksBounds()` ‚Äî –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `calculateWeekMetrics()` ‚Äî –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ –ü–æ–¥—Å—á—ë—Ç —Ä–∞–∑–±–∏–≤–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ (`closedTicketsCreatedThisWeek`, `closedTicketsCreatedOtherWeek`)
- ‚úÖ –ü–æ–¥—Å—á—ë—Ç —Ä–∞–∑–±–∏–≤–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ (`carryoverTicketsCreatedThisWeek`, `carryoverTicketsCreatedOtherWeek`)

**–ß–µ–≥–æ –Ω–µ—Ç:**
- ‚ùå –í—ã–∑–æ–≤ `getFourWeeksBounds()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü 4 –Ω–µ–¥–µ–ª—å
- ‚ùå –¶–∏–∫–ª –ø–æ 4 –Ω–µ–¥–µ–ª—è–º —Å –≤—ã–∑–æ–≤–æ–º `calculateWeekMetrics()` –¥–ª—è –∫–∞–∂–¥–æ–π
- ‚ùå –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤ `series` —Å 4 —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- ‚ùå –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ `weeksData` —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–∏
- ‚ùå –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ `meta.weeks` —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –æ 4 –Ω–µ–¥–µ–ª—è—Ö

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (`vue-app/src/components/graph-admission-closure/GraphAdmissionClosureChart.vue`)

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ 7 –ª–∏–Ω–∏–π –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ (–ù–æ–≤—ã–µ, –ó–∞–∫—Ä—ã—Ç—ã–µ –≤—Å–µ, –ó–∞–∫—Ä—ã—Ç—ã–µ —ç—Ç–∞ –Ω–µ–¥–µ–ª—è, –ó–∞–∫—Ä—ã—Ç—ã–µ –¥—Ä—É–≥–∞—è –Ω–µ–¥–µ–ª—è, –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ –≤—Å–µ, –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —ç—Ç–∞ –Ω–µ–¥–µ–ª—è, –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ –¥—Ä—É–≥–∞—è –Ω–µ–¥–µ–ª—è)
- ‚úÖ –ü—É–Ω–∫—Ç–∏—Ä–Ω—ã–µ –ª–∏–Ω–∏–∏ –¥–ª—è —Ä–∞–∑–±–∏–≤–∫–∏ (`borderDash: [5, 5]`)
- ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –≤—Å–µ—Ö –ª–∏–Ω–∏–π
- ‚úÖ –£–±—Ä–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `onClick` –¥–ª—è —Ç–æ—á–µ–∫ –≥—Ä–∞—Ñ–∏–∫–∞

**–ß–µ–≥–æ –Ω–µ—Ç:**
- ‚ùå –õ–æ–≥–∏–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 4 –Ω–µ–¥–µ–ª—å (—Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –Ω–µ–¥–µ–ª—è)
- ‚ùå –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ `labels` –¥–ª—è 4 –Ω–µ–¥–µ–ª—å
- ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Å—Å–∏–≤–æ–≤ `series` —Å 4 —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ `meta.weeks` —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –æ 4 –Ω–µ–¥–µ–ª—è—Ö
- ‚ùå –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ tooltip –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–µ

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è TASK-048

### –≠—Ç–∞–ø 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API (–±—ç–∫–µ–Ω–¥)

**–ó–∞–¥–∞—á–∏:**
1. –í—ã–∑–≤–∞—Ç—å `getFourWeeksBounds()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü 4 –Ω–µ–¥–µ–ª—å
2. –î–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–∏ –≤—ã–∑–≤–∞—Ç—å `calculateWeekMetrics()` –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –º–µ—Ç—Ä–∏–∫
3. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤—ã `series` —Å 4 —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ (–ø–æ –æ–¥–Ω–æ–º—É –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–∏)
4. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ `weeksData` —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–∏
5. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ `meta.weeks` —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –æ 4 –Ω–µ–¥–µ–ª—è—Ö

**–§–∞–π–ª:** `api/graph-1c-admission-closure.php`

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏:**
```php
// –ü–æ–ª—É—á–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã 4 –Ω–µ–¥–µ–ª—å
$weeks = getFourWeeksBounds($weekStart, $weekEnd);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å series
$series = [
    'new' => [],
    'closed' => [],
    'closedCreatedThisWeek' => [],
    'closedCreatedOtherWeek' => [],
    'carryover' => [],
    'carryoverCreatedThisWeek' => [],
    'carryoverCreatedOtherWeek' => []
];

$weeksData = [];

// –î–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–∏ –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏
foreach ($weeks as $week) {
    $weekMetrics = calculateWeekMetrics(
        $week['weekStart'],
        $week['weekEnd'],
        $allTickets,
        $targetStages,
        $closingStages,
        $keeperId
    );
    
    // –î–æ–±–∞–≤–∏—Ç—å –≤ series
    $series['new'][] = $weekMetrics['newTickets'];
    $series['closed'][] = $weekMetrics['closedTickets'];
    // ... –∏ —Ç.–¥.
    
    // –î–æ–±–∞–≤–∏—Ç—å –≤ weeksData
    $weeksData[] = [
        'weekNumber' => $week['weekNumber'],
        ...$weekMetrics
    ];
}
```

### –≠—Ç–∞–ø 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

**–ó–∞–¥–∞—á–∏:**
1. –û–±–Ω–æ–≤–∏—Ç—å `lineBarData` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å 4 –Ω–µ–¥–µ–ª—è–º–∏
2. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å `labels` –¥–ª—è 4 –Ω–µ–¥–µ–ª—å –∏–∑ `meta.weeks`
3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –º–∞—Å—Å–∏–≤—ã `series` —Å 4 —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
4. –û–±–Ω–æ–≤–∏—Ç—å tooltip –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–µ

**–§–∞–π–ª:** `vue-app/src/components/graph-admission-closure/GraphAdmissionClosureChart.vue`

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏:**
```javascript
const lineBarData = computed(() => {
  // –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –Ω–µ–¥–µ–ª—è—Ö
  const weeks = props.meta?.weeks || [];
  const labels = weeks.map(week => `–ù–µ–¥–µ–ª—è ${week.weekNumber}`).reverse();
  
  // –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö (—É–∂–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ: –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º)
  const newSeries = Array.isArray(props.data.series?.new) 
    ? props.data.series.new.reverse() 
    : [props.data.currentWeek?.newTickets || 0];
  
  // ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–∏–π
  
  return {
    labels,
    datasets: [
      // ... 7 datasets —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è 4 –Ω–µ–¥–µ–ª—å
    ]
  };
});
```

---

## üìù –í—ã–≤–æ–¥—ã

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:
1. ‚úÖ –£–±—Ä–∞–Ω—ã –∫–ª–∏–∫–∏ –Ω–∞ –ø–æ–ø–∞–ø—ã —Ç–æ—á–µ–∫ –≥—Ä–∞—Ñ–∏–∫–∞
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–∏–Ω–∏–∏ –¥–ª—è —Ä–∞–∑–±–∏–≤–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã—Ö –∏ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤
3. ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –Ω–µ–¥–µ–ª—è–º–∏

### –ß—Ç–æ –ù–ï –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:
1. ‚ùå –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ 4 –Ω–µ–¥–µ–ª–∏
2. ‚ùå –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è 4 –Ω–µ–¥–µ–ª—å

### –ü—Ä–∏—á–∏–Ω–∞ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±—ã–ª–∞ –æ—Ç–∫–∞—á–µ–Ω–∞ –≤ TASK-049 (–≤–æ–∑–≤—Ä–∞—Ç –∫ –ª–æ–≥–∏–∫–µ –æ–¥–Ω–æ–π –Ω–µ–¥–µ–ª–∏)
- –û—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (—É–±—Ä–∞–Ω—ã –∫–ª–∏–∫–∏, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ª–∏–Ω–∏–∏ —Ä–∞–∑–±–∏–≤–∫–∏)

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞ 4 –Ω–µ–¥–µ–ª–∏
- –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è 4 –Ω–µ–¥–µ–ª—å –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å 4 –Ω–µ–¥–µ–ª—è–º–∏

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑ —è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–Ω–æ–≤—ã–º –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–ø–æ–ª–Ω–µ–Ω –ø–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è TASK-049 –∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.

