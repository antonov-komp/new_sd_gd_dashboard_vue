# TASK-032-02: –≠—Ç–∞–ø 2 - –°–æ–∑–¥–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-12 08:38 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-12-12 09:41 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js)  
**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** TASK-032

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∞–ø–∞

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫ –Ω–∞ –ª–∏–Ω–µ–π–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ. –£—Ç–∏–ª–∏—Ç–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏, –≥–¥–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫ —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–ª–∏ –±–ª–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è Y, –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏.

---

## üéØ –¶–µ–ª—å —ç—Ç–∞–ø–∞

–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é —É—Ç–∏–ª–∏—Ç—É, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Chart.js –≥—Ä–∞—Ñ–∏–∫ –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ —Å –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–º–∏—Å—è —Ç–æ—á–∫–∞–º–∏, –≤–æ–∑–≤—Ä–∞—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞).

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
–£—Ç–∏–ª–∏—Ç–∞ `lineChartUtils.js` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –ø–ª–∞–≥–∏–Ω–æ–º Chart.js –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è–º–∏.

---

## üìù –ü–æ–¥–∑–∞–¥–∞—á–∏

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 2.1: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —É—Ç–∏–ª–∏—Ç—ã

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è —É—Ç–∏–ª–∏—Ç –∞–Ω–∞–ª–∏–∑–∞ –ª–∏–Ω–µ–π–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞.

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `vue-app/src/utils/graph-state/` (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `lineChartUtils.js`
3. –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —ç–∫—Å–ø–æ—Ä—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–π

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –ü—É—Ç—å: `vue-app/src/utils/graph-state/lineChartUtils.js`
- –§–æ—Ä–º–∞—Ç: ES6 –º–æ–¥—É–ª—å —Å –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã (–Ω–µ default export)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: `vue-app/src/utils/graph-state/` (–º–æ–∂–µ—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö —É—Ç–∏–ª–∏—Ç)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
ls -la vue-app/src/utils/graph-state/

# –ï—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞—Ç—å –µ—ë
mkdir -p vue-app/src/utils/graph-state/
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:**
- `vue-app/src/utils/graph-state/` - –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥—Ä—É–≥–∏–µ —É—Ç–∏–ª–∏—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `employeeChartUtils.js`)
- –ù–æ–≤—ã–π —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

**–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```javascript
/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–∏–Ω–µ–π–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ Chart.js
 * 
 * @module lineChartUtils
 */

/**
 * –ù–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è —Ç–æ—á–∫–∏ –Ω–∞ –ª–∏–Ω–µ–π–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ
 * @param {Object} chart - –≠–∫–∑–µ–º–ø–ª—è—Ä Chart.js
 * @param {number} threshold - –ü–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.5)
 * @returns {Array} –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è—Ö
 */
export function findOverlappingPoints(chart, threshold = 0.5) {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
}

/**
 * –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏
 * @param {number} position - –ò–Ω–¥–µ–∫—Å –ø–æ–∑–∏—Ü–∏–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–æ—á–∫–∏)
 * @param {Array} datasets - –ú–∞—Å—Å–∏–≤ datasets –≥—Ä–∞—Ñ–∏–∫–∞
 * @param {number} threshold - –ü–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è
 * @returns {number} –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫
 */
export function getOverlapCount(position, datasets, threshold = 0.5) {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –§–∞–π–ª `lineChartUtils.js` —Å–æ–∑–¥–∞–Ω
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 2.2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ getOverlapCount()

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏.

**–ó–∞–¥–∞—á–∏:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Å–±–æ—Ä–∞ –≤—Å–µ—Ö —Ç–æ—á–µ–∫ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É —Ç–æ—á–µ–∫ —Å –±–ª–∏–∑–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ Y
3. –í–µ—Ä–Ω—É—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –≤ —Å–∞–º–æ–π –±–æ–ª—å—à–æ–π –≥—Ä—É–ø–ø–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç: `position` (–∏–Ω–¥–µ–∫—Å), `datasets` (–º–∞—Å—Å–∏–≤), `threshold` (–ø–æ—Ä–æ–≥)
- –ü–æ—Ä–æ–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.5 –µ–¥–∏–Ω–∏—Ü—ã Y
- –¢–æ—á–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–º–∏—Å—è, –µ—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –∏—Ö Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç < threshold

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –°–æ–±—Ä–∞—Ç—å –≤—Å–µ —Ç–æ—á–∫–∏ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ –≤—Å–µ—Ö datasets
2. –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–æ—á–∫–∏ —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (–Ω–µ null, –Ω–µ undefined)
3. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—á–∫–∏ –ø–æ –±–ª–∏–∑–æ—Å—Ç–∏ Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö threshold)
4. –ù–∞–π—Ç–∏ –≥—Ä—É–ø–ø—É —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ—á–µ–∫
5. –í–µ—Ä–Ω—É—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
/**
 * –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏
 * 
 * –¢–æ—á–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–º–∏—Å—è, –µ—Å–ª–∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è Y –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –º–µ–Ω–µ–µ —á–µ–º –Ω–∞ threshold.
 * –§—É–Ω–∫—Ü–∏—è –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ç–æ—á–∫–∏ –ø–æ –±–ª–∏–∑–æ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Å–∞–º–æ–π –±–æ–ª—å—à–æ–π –≥—Ä—É–ø–ø—ã.
 * 
 * @param {number} position - –ò–Ω–¥–µ–∫—Å –ø–æ–∑–∏—Ü–∏–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–æ—á–∫–∏) –Ω–∞ –æ—Å–∏ X
 * @param {Array<Object>} datasets - –ú–∞—Å—Å–∏–≤ datasets –≥—Ä–∞—Ñ–∏–∫–∞ Chart.js
 * @param {number} [threshold=0.5] - –ü–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è (–≤ –µ–¥–∏–Ω–∏—Ü–∞—Ö Y)
 * @returns {number} –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫ (0 –µ—Å–ª–∏ –Ω–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π –∏–ª–∏ –º–µ–Ω—å—à–µ 2 —Ç–æ—á–µ–∫)
 * 
 * @example
 * const datasets = [
 *   { data: [10, 20, 30] },
 *   { data: [10, 25, 35] },
 *   { data: [15, 30, 40] }
 * ];
 * const count = getOverlapCount(0, datasets, 0.5); // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 2 (10 –∏ 10 –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç—Å—è)
 */
export function getOverlapCount(position, datasets, threshold = 0.5) {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  if (!datasets || !Array.isArray(datasets) || datasets.length === 0) {
    return 0;
  }
  
  if (typeof position !== 'number' || position < 0) {
    return 0;
  }
  
  if (typeof threshold !== 'number' || threshold <= 0) {
    console.warn('getOverlapCount: threshold –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 0.5');
    threshold = 0.5;
  }
  
  // –°–±–æ—Ä –≤—Å–µ—Ö —Ç–æ—á–µ–∫ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ –≤—Å–µ—Ö datasets
  const points = [];
  datasets.forEach((dataset, datasetIndex) => {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ dataset
    if (!dataset || !dataset.data || !Array.isArray(dataset.data)) {
      return; // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å dataset –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö
    }
    
    const value = dataset.data[position];
    
    // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å null, undefined, NaN
    if (value !== undefined && value !== null && !isNaN(value)) {
      points.push({
        datasetIndex,
        value: Number(value), // –ü—Ä–∏–≤–µ—Å—Ç–∏ –∫ —á–∏—Å–ª—É –Ω–∞ —Å–ª—É—á–∞–π —Å—Ç—Ä–æ–∫
        y: Number(value) // Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ (–∑–Ω–∞—á–µ–Ω–∏–µ)
      });
    }
  });
  
  // –ù–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π, –µ—Å–ª–∏ –º–µ–Ω—å—à–µ 2 —Ç–æ—á–µ–∫
  if (points.length < 2) {
    return 0;
  }
  
  // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç–æ—á–µ–∫ –ø–æ –±–ª–∏–∑–æ—Å—Ç–∏ Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
  const groups = [];
  
  points.forEach(point => {
    let foundGroup = false;
    
    // –ü–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≥—Ä—É–ø–ø—ã, –≤ –∫–æ—Ç–æ—Ä—É—é –ø–æ–ø–∞–¥–∞–µ—Ç —Ç–æ—á–∫–∞
    for (const group of groups) {
      // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Y –≥—Ä—É–ø–ø—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
      const groupY = group.y;
      const diff = Math.abs(point.y - groupY);
      
      // –ï—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–Ω—å—à–µ threshold, —Ç–æ—á–∫–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –≥—Ä—É–ø–ø—É
      if (diff < threshold) {
        group.points.push(point);
        // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Y –≥—Ä—É–ø–ø—ã
        group.y = group.points.reduce((sum, p) => sum + p.y, 0) / group.points.length;
        foundGroup = true;
        break;
      }
    }
    
    // –ï—Å–ª–∏ –≥—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é
    if (!foundGroup) {
      groups.push({
        points: [point],
        y: point.y // –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Y –≥—Ä—É–ø–ø—ã
      });
    }
  });
  
  // –ù–∞–π—Ç–∏ –≥—Ä—É–ø–ø—É —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ—á–µ–∫
  if (groups.length === 0) {
    return 0;
  }
  
  const maxGroup = groups.reduce((max, group) => 
    group.points.length > max.points.length ? group : max, 
    groups[0]
  );
  
  return maxGroup.points.length;
}
```

**–£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:**
–¢–µ–∫—É—â–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Y –≥—Ä—É–ø–ø—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —Ç–æ—á–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Y –≥—Ä—É–ø–ø—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–∫–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π.

**Edge cases, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è:**
1. –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ datasets ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0
2. Dataset –±–µ–∑ —Å–≤–æ–π—Å—Ç–≤–∞ data ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
3. –ó–Ω–∞—á–µ–Ω–∏–µ null/undefined ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
4. –ó–Ω–∞—á–µ–Ω–∏–µ NaN ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
5. –°—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ —á–∏—Å–ª—É
6. –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π position ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0
7. –ú–µ–Ω—å—à–µ 2 —Ç–æ—á–µ–∫ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0
8. –ù–µ—Ç –≥—Ä—É–ø–ø –ø–æ—Å–ª–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏
- [ ] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç edge cases (–ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ, –æ–¥–Ω–∞ —Ç–æ—á–∫–∞, –Ω–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π)
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç threshold –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±–ª–∏–∑–æ—Å—Ç–∏ —Ç–æ—á–µ–∫
- [ ] –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0, –µ—Å–ª–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π –Ω–µ—Ç

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 2.3: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ findOverlappingPoints()

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ.

**–ó–∞–¥–∞—á–∏:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ö–æ–¥ –ø–æ –≤—Å–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–æ–∑–∏—Ü–∏—è–º (labels)
2. –î–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `getOverlapCount()` –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π
3. –°–æ–±—Ä–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–∑–∏—Ü–∏—è—Ö —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è–º–∏
4. –í–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è—Ö

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç: `chart` (—ç–∫–∑–µ–º–ø–ª—è—Ä Chart.js), `threshold` (–ø–æ—Ä–æ–≥)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –≥—Ä–∞—Ñ–∏–∫–∞: —Ç–æ–ª—å–∫–æ –¥–ª—è `'line'`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤: `{ position, count, x, y, points }`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞:**
```javascript
{
  position: 0,        // –ò–Ω–¥–µ–∫—Å –ø–æ–∑–∏—Ü–∏–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–æ—á–∫–∏)
  count: 3,           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫
  x: 100,              // X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ç–æ—á–∫–∏ (–¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏)
  y: 50,               // Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ç–æ—á–∫–∏ (—Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
  points: [            // –ú–∞—Å—Å–∏–≤ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫
    { datasetIndex: 0, value: 10 },
    { datasetIndex: 1, value: 10 },
    { datasetIndex: 2, value: 10 }
  ]
}
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
/**
 * –ù–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è —Ç–æ—á–∫–∏ –Ω–∞ –ª–∏–Ω–µ–π–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ Chart.js
 * 
 * –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –≥—Ä–∞—Ñ–∏–∫–∞ –∏ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–∑–∏—Ü–∏–∏, –≥–¥–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫
 * —Ä–∞–∑–Ω—ã—Ö datasets –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–ª–∏ –±–ª–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è Y (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö threshold).
 * 
 * @param {Object} chart - –≠–∫–∑–µ–º–ø–ª—è—Ä Chart.js (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∏–ø–∞ 'line')
 * @param {number} [threshold=0.5] - –ü–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –≤ –µ–¥–∏–Ω–∏—Ü–∞—Ö Y
 * @returns {Array<Object>} –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è—Ö
 * @returns {number} returns[].position - –ò–Ω–¥–µ–∫—Å –ø–æ–∑–∏—Ü–∏–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–æ—á–∫–∏)
 * @returns {number} returns[].count - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫
 * @returns {number} returns[].x - X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞ canvas (–¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏)
 * @returns {number} returns[].y - Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞ canvas (–¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏)
 * @returns {number} returns[].value - –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Y –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫
 * @returns {Array} returns[].points - –ú–∞—Å—Å–∏–≤ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ dataset
 * 
 * @example
 * const chart = chartInstance; // –≠–∫–∑–µ–º–ø–ª—è—Ä Chart.js
 * const overlaps = findOverlappingPoints(chart, 0.5);
 * // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: [{ position: 0, count: 3, x: 100, y: 50, value: 10, points: [...] }]
 */
export function findOverlappingPoints(chart, threshold = 0.5) {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  if (!chart) {
    console.warn('findOverlappingPoints: chart –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω');
    return [];
  }
  
  if (!chart.config || chart.config.type !== 'line') {
    // –ù–µ –ª–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
    // (—Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≥—Ä–∞—Ñ–∏–∫–æ–≤)
    return [];
  }
  
  const datasets = chart.data?.datasets;
  const labels = chart.data?.labels || [];
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö
  if (!datasets || !Array.isArray(datasets) || datasets.length === 0) {
    return [];
  }
  
  if (!Array.isArray(labels) || labels.length === 0) {
    return [];
  }
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è threshold
  if (typeof threshold !== 'number' || threshold <= 0) {
    console.warn('findOverlappingPoints: threshold –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 0.5');
    threshold = 0.5;
  }
  
  const overlaps = [];
  
  // –ü—Ä–æ—Ö–æ–¥ –ø–æ –∫–∞–∂–¥–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ (label)
  labels.forEach((label, positionIndex) => {
    try {
      // –ü–æ–¥—Å—á—ë—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏
      const overlapCount = getOverlapCount(positionIndex, datasets, threshold);
      
      // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –±–µ–∑ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π (–º–µ–Ω—å—à–µ 2 —Ç–æ—á–µ–∫)
      if (overlapCount < 2) {
        return;
      }
      
      // –°–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Å–µ—Ö —Ç–æ—á–∫–∞—Ö –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏
      const allPoints = [];
      
      datasets.forEach((dataset, datasetIndex) => {
        if (!dataset || !dataset.data || !Array.isArray(dataset.data)) {
          return;
        }
        
        const value = dataset.data[positionIndex];
        
        // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        if (value === undefined || value === null || isNaN(value)) {
          return;
        }
        
        allPoints.push({
          datasetIndex,
          value: Number(value),
          label: dataset.label || `Dataset ${datasetIndex}`
        });
      });
      
      if (allPoints.length < 2) {
        return;
      }
      
      // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç–æ—á–µ–∫ —Å –±–ª–∏–∑–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
      const grouped = groupOverlappingPoints(allPoints, threshold);
      
      if (grouped.length === 0) {
        return;
      }
      
      // –ù–∞–π—Ç–∏ –≥—Ä—É–ø–ø—É —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ—á–µ–∫
      const maxGroup = grouped.reduce((max, group) => 
        group.points.length > max.points.length ? group : max, 
        grouped[0]
      );
      
      // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≥—Ä—É–ø–ø—ã —Å –º–µ–Ω–µ–µ —á–µ–º 2 —Ç–æ—á–∫–∞–º–∏
      if (maxGroup.points.length < 2) {
        return;
      }
      
      // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–æ—á–∫–∏ –Ω–∞ canvas –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–≤—ã–π dataset, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç —Ç–æ—á–∫—É –Ω–∞ —ç—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏
      let pointMeta = null;
      let pointElement = null;
      
      for (let i = 0; i < datasets.length; i++) {
        try {
          const meta = chart.getDatasetMeta(i);
          if (meta && meta.data && meta.data[positionIndex]) {
            pointMeta = meta;
            pointElement = meta.data[positionIndex];
            break;
          }
        } catch (error) {
          // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å dataset, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å meta
          continue;
        }
      }
      
      // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Ç–æ—á–∫—É –Ω–∞ canvas, –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
      if (!pointElement || typeof pointElement.x !== 'number' || typeof pointElement.y !== 'number') {
        return;
      }
      
      // –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–∏
      overlaps.push({
        position: positionIndex,
        count: maxGroup.points.length,
        x: pointElement.x,
        y: pointElement.y,
        value: maxGroup.y, // –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Y –≥—Ä—É–ø–ø—ã
        points: maxGroup.points.map(p => ({
          datasetIndex: p.datasetIndex,
          value: p.value,
          label: p.label
        }))
      });
      
    } catch (error) {
      // –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É, –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥—Ä—É–≥–∏—Ö –ø–æ–∑–∏—Ü–∏–π
      console.warn(`findOverlappingPoints: –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–æ–∑–∏—Ü–∏–∏ ${positionIndex}:`, error);
    }
  });
  
  return overlaps;
}

/**
 * –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ç–æ—á–∫–∏ —Å –±–ª–∏–∑–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ Y
 * 
 * @param {Array} points - –ú–∞—Å—Å–∏–≤ —Ç–æ—á–µ–∫
 * @param {number} threshold - –ü–æ—Ä–æ–≥ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
 * @returns {Array} –ú–∞—Å—Å–∏–≤ –≥—Ä—É–ø–ø —Ç–æ—á–µ–∫
 */
function groupOverlappingPoints(points, threshold) {
  const groups = [];
  
  points.forEach(point => {
    let foundGroup = false;
    
    for (const group of groups) {
      const groupY = group.y;
      if (Math.abs(point.value - groupY) < threshold) {
        group.points.push(point);
        // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Y –≥—Ä—É–ø–ø—ã
        group.y = group.points.reduce((sum, p) => sum + p.value, 0) / group.points.length;
        foundGroup = true;
        break;
      }
    }
    
    if (!foundGroup) {
      groups.push({
        points: [point],
        y: point.value
      });
    }
  });
  
  return groups;
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è —Ç–æ—á–∫–∏
- [ ] –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è—Ö
- [ ] –í–∫–ª—é—á–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã X –∏ Y –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ (–≤–∞–ª–∏–¥–Ω—ã–µ —á–∏—Å–ª–∞)
- [ ] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç edge cases (–ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ, –æ–¥–∏–Ω dataset, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ —Ç.–¥.)
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏–Ω–µ–π–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç [] –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤)
- [ ] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã (try-catch –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏)
- [ ] –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (chart, threshold)
- [ ] –õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–æ—á–∫–∏:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `chart.getDatasetMeta(datasetIndex)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö dataset
   - `meta.data[positionIndex]` —Å–æ–¥–µ—Ä–∂–∏—Ç —ç–ª–µ–º–µ–Ω—Ç —Ç–æ—á–∫–∏ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ `x` –∏ `y`
   - –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–π dataset –Ω–µ –∏–º–µ–µ—Ç —Ç–æ—á–∫–∏ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ—Å—Ç–∞–ª—å–Ω—ã–µ datasets
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - –ö–∞–∂–¥–∞—è –ø–æ–∑–∏—Ü–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ try-catch –±–ª–æ–∫–µ
   - –û—à–∏–±–∫–∞ –Ω–∞ –æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
   - –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º, –Ω–æ –Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `chart.config`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –≥—Ä–∞—Ñ–∏–∫–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `datasets` –∏ `labels`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ `threshold`

4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –§—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–µ –≥—Ä–∞—Ñ–∏–∫–∞
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π, –º–Ω–æ–≥–æ datasets)
   - –í –≠—Ç–∞–ø–µ 5 –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 2.4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã

**–¶–µ–ª—å:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö.

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è–º–∏
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `getOverlapCount()` –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `findOverlappingPoints()` –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –≥—Ä–∞—Ñ–∏–∫–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É edge cases

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

1. **–ù–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π:**
   - –î–∞–Ω–Ω—ã–µ: `[10, 20, 30]`, `[15, 25, 35]`
   - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `getOverlapCount()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0

2. **–î–≤–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è:**
   - –î–∞–Ω–Ω—ã–µ: `[10, 20, 30]`, `[10, 25, 35]`
   - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `getOverlapCount(0)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 2

3. **–¢—Ä–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è:**
   - –î–∞–Ω–Ω—ã–µ: `[10, 20, 30]`, `[10, 25, 30]`, `[10, 30, 30]`
   - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `getOverlapCount(0)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 3, `getOverlapCount(2)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 3

4. **–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏—è —Å threshold:**
   - –î–∞–Ω–Ω—ã–µ: `[10, 20, 30]`, `[10.3, 25, 35]` (threshold = 0.5)
   - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `getOverlapCount(0)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 2 (10 –∏ 10.3 —Å—á–∏—Ç–∞—é—Ç—Å—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–º–∏—Å—è)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] Edge cases –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –§—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 2.5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

**–¶–µ–ª—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

**–ó–∞–¥–∞—á–∏:**
1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
3. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
4. –£–±–µ–¥–∏—Ç—å—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–æ–¥–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –ö–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω (–Ω–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (try-catch –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –£—Ç–∏–ª–∏—Ç–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø–ª–∞–≥–∏–Ω–µ

---

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

1. **`vue-app/src/utils/graph-state/lineChartUtils.js`**
   - –§—É–Ω–∫—Ü–∏—è `findOverlappingPoints(chart, threshold)`
   - –§—É–Ω–∫—Ü–∏—è `getOverlapCount(position, datasets, threshold)`
   - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `groupOverlappingPoints(points, threshold)`

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π

**`findOverlappingPoints(chart, threshold)`**
- `chart` (Object, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) ‚Äî —ç–∫–∑–µ–º–ø–ª—è—Ä Chart.js
- `threshold` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.5) ‚Äî –ø–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –≤ –µ–¥–∏–Ω–∏—Ü–∞—Ö Y

**`getOverlapCount(position, datasets, threshold)`**
- `position` (number, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) ‚Äî –∏–Ω–¥–µ–∫—Å –ø–æ–∑–∏—Ü–∏–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–æ—á–∫–∏)
- `datasets` (Array, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) ‚Äî –º–∞—Å—Å–∏–≤ datasets –≥—Ä–∞—Ñ–∏–∫–∞
- `threshold` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.5) ‚Äî –ø–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è

### –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

**`findOverlappingPoints()`** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤:
```javascript
[
  {
    position: 0,        // –ò–Ω–¥–µ–∫—Å –ø–æ–∑–∏—Ü–∏–∏
    count: 3,           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π
    x: 100,             // X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞ canvas
    y: 50,              // Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞ canvas
    value: 10,          // –ó–Ω–∞—á–µ–Ω–∏–µ Y (—Å—Ä–µ–¥–Ω–µ–µ)
    points: [           // –ú–∞—Å—Å–∏–≤ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫
      { datasetIndex: 0, value: 10, label: '–≠—Ç–∞–ø 1' },
      { datasetIndex: 1, value: 10, label: '–≠—Ç–∞–ø 2' },
      { datasetIndex: 2, value: 10, label: '–≠—Ç–∞–ø 3' }
    ]
  }
]
```

**`getOverlapCount()`** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∏—Å–ª–æ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫, 0 –µ—Å–ª–∏ –Ω–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π).

### –ê–ª–≥–æ—Ä–∏—Ç–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

1. –î–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –Ω–∞–π—Ç–∏ –≥—Ä—É–ø–ø—É —Å –±–ª–∏–∑–∫–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º Y (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö threshold)
2. –ï—Å–ª–∏ –≥—Ä—É–ø–ø–∞ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É –≤ –≥—Ä—É–ø–ø—É
3. –ï—Å–ª–∏ –≥—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É
4. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ Y –≥—Ä—É–ø–ø—ã –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–∫–∏

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:

- [ ] –§–∞–π–ª `lineChartUtils.js` —Å–æ–∑–¥–∞–Ω –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- [ ] –§—É–Ω–∫—Ü–∏—è `findOverlappingPoints()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏—è `getOverlapCount()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Ö–æ–¥—è—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è —Ç–æ—á–∫–∏
- [ ] –§—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç edge cases (–ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ, –æ–¥–∏–Ω dataset –∏ —Ç.–¥.)
- [ ] –§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏–Ω–µ–π–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ:

- [ ] –ö–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω (–Ω–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –£—Ç–∏–ª–∏—Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ getOverlapCount()

```javascript
// –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
const datasets = [
  { data: [10, 20, 30] },
  { data: [10, 25, 35] },
  { data: [15, 30, 40] }
];

// –¢–µ—Å—Ç 1: –ù–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 1
const count1 = getOverlapCount(1, datasets, 0.5);
console.assert(count1 === 0, '–ù–∞ –ø–æ–∑–∏—Ü–∏–∏ 1 –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π');

// –¢–µ—Å—Ç 2: –î–≤–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 0
const count2 = getOverlapCount(0, datasets, 0.5);
console.assert(count2 === 2, '–ù–∞ –ø–æ–∑–∏—Ü–∏–∏ 0 –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 2 –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è');
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ findOverlappingPoints()

1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫ Chart.js —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è–º–∏
2. –í—ã–∑–≤–∞—Ç—å `findOverlappingPoints(chart, 0.5)`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏—è—Ö —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è–º–∏.

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ edge cases

1. –ü—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ: `datasets = []`
2. –û–¥–∏–Ω dataset: `datasets = [{ data: [10, 20] }]`
3. –ù–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π: –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–Ω—ã–µ
4. –í—Å–µ —Ç–æ—á–∫–∏ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç—Å—è: –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ edge cases –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏.

---

## ‚ö†Ô∏è –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞ 1: "Cannot read property 'data' of undefined"

**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `findOverlappingPoints(chart, 0.5)`

**–ü—Ä–∏—á–∏–Ω–∞:** `chart.data` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ `chart` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º Chart.js

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏:
   ```javascript
   if (!chart || !chart.data || !chart.data.datasets) {
     return [];
   }
   ```
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä Chart.js
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≥—Ä–∞—Ñ–∏–∫ —É–∂–µ –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã)

---

### –û—à–∏–±–∫–∞ 2: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ—á–µ–∫ NaN –∏–ª–∏ undefined

**–°–∏–º–ø—Ç–æ–º:** –ë–µ–π–¥–∂–∏ –Ω–µ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –∏–ª–∏ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

**–ü—Ä–∏—á–∏–Ω–∞:** `meta.data[positionIndex]` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ —Ç–æ—á–∫–∞ –µ—â—ë –Ω–µ –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–æ—á–∫–∏ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:
   ```javascript
   const point = meta.data[positionIndex];
   if (!point || typeof point.x !== 'number' || typeof point.y !== 'number') {
     return; // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
   }
   ```
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≥—Ä–∞—Ñ–∏–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º
3. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ª—É—á–∏—Ç—å —Ç–æ—á–∫—É –∏–∑ –¥—Ä—É–≥–æ–≥–æ dataset, –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –Ω–µ –∏–º–µ–µ—Ç —Ç–æ—á–∫–∏

---

### –û—à–∏–±–∫–∞ 3: –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –¥–ª—è –≤–∞–ª–∏–¥–Ω—ã—Ö –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π

**–°–∏–º–ø—Ç–æ–º:** –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –µ—Å—Ç—å, –Ω–æ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –∏—Ö

**–ü—Ä–∏—á–∏–Ω–∞:** 
- Threshold —Å–ª–∏—à–∫–æ–º –º–∞–ª
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- –î–∞–Ω–Ω—ã–µ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á–∏—Ç—å threshold –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
   ```javascript
   const overlaps = findOverlappingPoints(chart, 1.0); // –£–≤–µ–ª–∏—á–∏—Ç—å —Å 0.5 –¥–æ 1.0
   ```
2. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥:
   ```javascript
   console.log('Datasets:', datasets);
   console.log('Points at position:', points);
   console.log('Groups:', groups);
   ```
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ datasets (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Å–ª–∞, –Ω–µ —Å—Ç—Ä–æ–∫–∏)

---

### –û—à–∏–±–∫–∞ 4: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∏–∑–∫–∞—è (–º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞)

**–°–∏–º–ø—Ç–æ–º:** –ì—Ä–∞—Ñ–∏–∫ —Ç–æ—Ä–º–æ–∑–∏—Ç –ø—Ä–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ –∏–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –§—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ –∏–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—Å–º. –≠—Ç–∞–ø 5)
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
3. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã—Ö –ø–æ–∑–∏—Ü–∏–π (–µ—Å–ª–∏ –≥—Ä–∞—Ñ–∏–∫ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π)

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- **2025-12-12 08:38 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç TASK-032-02 —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ø–ª–∞–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏—è —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π
- **2025-12-12 09:41 (UTC+3, –ë—Ä–µ—Å—Ç):** –ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - —É—Ç–∏–ª–∏—Ç–∞ lineChartUtils.js —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

- **TASK-032:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–æ—á–µ–∫ –Ω–∞ –ª–∏–Ω–µ–π–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞ 1–° (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞)
- **TASK-032-01:** –≠—Ç–∞–ø 1 - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∏–ª–µ–π —Ç–æ—á–µ–∫ (–ø—Ä–µ–¥—ã–¥—É—â–∏–π —ç—Ç–∞–ø)
- **TASK-032-03:** –≠—Ç–∞–ø 3 - –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

- JavaScript (ES6+)
- Chart.js 4.x API

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- Chart.js API: https://www.chartjs.org/docs/latest/developers/api.html
- Chart.js Dataset Meta: https://www.chartjs.org/docs/latest/developers/api.html#getdatasetmeta

### –ê–ª–≥–æ—Ä–∏—Ç–º—ã:

- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç–æ—á–µ–∫ –ø–æ –±–ª–∏–∑–æ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–π ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞  
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** –£—Ç–∏–ª–∏—Ç–∞ lineChartUtils.js —Å–æ–∑–¥–∞–Ω–∞, —Ñ—É–Ω–∫—Ü–∏–∏ findOverlappingPoints –∏ getOverlapCount —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

