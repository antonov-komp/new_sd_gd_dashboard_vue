# TASK-026-01: Создание конфигурации "В работе" (UF_SLA_SERVICE_STR) для сектора 1С

**Дата создания:** 2025-12-11 18:45 (UTC+3, Брест)  
**Дата завершения:** 2025-12-11 13:26 (UTC+3, Брест)  
**Статус:** ✅ Завершена  
**Приоритет:** Высокий  
**Исполнитель:** Bitrix24 Программист (Vue.js)  
**Родитель:** TASK-026 (Система конфигурации значения "В работе" для сектора 1С)

## Цель
Создать централизованный конфигурационный файл для значения "В работе" (поле Bitrix24 `UF_SLA_SERVICE_STR`) в секторе 1С, определить устойчивые значения, визуальные параметры и утилиты. Подготовить фундамент для последующих этапов (маппер, UI, fallback).

## Контекст
- Источник данных: `UF_SLA_SERVICE_STR` в Bitrix24 (текст).  
- Использование: плашка "В работе" в карточках тикетов канбан дашборда сектора 1С.  
- Устойчивые значения (Bitrix24):  
  - 1С.Бухгалтерия  
  - 1С.Талоны  
  - 1С.ЗУП  
  - 1С.Документооборот  
  - 1С.Интеграции  
- Важно: конфиг относится только к сектору 1С. Аналогичные конфиги для других секторов создаются отдельно (с собственными значениями/цветами).
- Аналогия: структура и подход как в `TASK-025` (приоритеты), но для поля `UF_SLA_SERVICE_STR`.

## Требования
- Новый файл: `vue-app/src/config/service-config.js`.  
- Структура объекта значения:
  ```javascript
  {
    id: 'string',              // Уникальный внутренний идентификатор
    label: 'string',           // Отображаемое имя
    bitrixValue: 'string',     // Значение в Bitrix24 (UF_SLA_SERVICE_STR)
    color: 'string',           // Цвет рамки/акцента
    backgroundColor: 'string', // Цвет фона плашки
    textColor: 'string',       // Цвет текста
    order: number,             // Порядок сортировки
    description: 'string'      // Опционально
  }
  ```
- Добавить fallback-значение (для пустых/неизвестных), с нейтральной палитрой (серый) и понятным текстом ("Не указано" или аналог, финализировать в этом этапе).
- Определить палитру для каждого устойчивого значения (фон/текст/бордер). Можно взять за основу принципы из `priority-config.js`, но подобрать собственные оттенки для визуального различия.
- Предусмотреть экспорт утилит:
  - `getServiceByBitrixValue(value: string)` — возвращает объект из конфига или fallback.  
  - `getDefaultService()` — возвращает fallback.  
  - `getAllServices()` — возвращает отсортированный список.  
  - `isValidService(value: string)` — проверка наличия значения в конфиге.  
- Обратить внимание на регистр/пробелы: маппинг должен быть регистронезависимым (нормализовать входные значения).
- Документировать в файле описание структуры и принципы расширения (как добавить новый сервис).

## Область работ и файлы
- **Новый файл:** `vue-app/src/config/service-config.js`.
- **Ссылочно (без изменений на этом этапе):**
  - `vue-app/src/services/dashboard-sector-1c/mappers/ticket-mapper.js` (будет обновлён на этапе 026-02).
  - `vue-app/src/components/dashboard/TicketCard.vue` (будет обновлён на этапе 026-03).
  - `vue-app/src/services/dashboard-sector-1c/utils/constants.js` (проверить совместимость на этапах 026-02/03).

## Подзадачи
1. Создать файл `service-config.js` в `vue-app/src/config/`.  
2. Описать устойчивые значения (5 штук) с палитрой, порядком и описанием (кратко).  
3. Добавить fallback-значение (нейтральный цвет, текст "Не указано" или аналог).  
4. Реализовать утилиты: `getServiceByBitrixValue`, `getDefaultService`, `getAllServices`, `isValidService`.  
5. Нормализовать входные значения (trim, toLowerCase) перед сравнением.  
6. Экспортировать конфиг (список) и утилиты.  
7. Задокументировать внутри файла: структура, как добавлять новые значения, как менять палитру.  
8. Самопроверка: убедиться, что отсутствуют зависимости от Vue (чистый JS), и что файл можно импортировать в мапперы/компоненты.

## Критерии приёмки (для этапа 026-01) ✅
- [x] Файл `vue-app/src/config/service-config.js` создан.  
- [x] Все 5 устойчивых значений описаны с цветами и порядком.  
- [x] Fallback-значение добавлено и корректно возвращается утилитами.  
- [x] Утилиты работают регистронезависимо и обрабатывают `undefined/null/''`.  
- [x] Экспортированы: конфиг (массив) и утилиты.  
- [x] Есть встроенная документация (комментарии) по структуре и расширению.  
- [x] Нет связей с UI или Vue (чистый конфиг/утилиты).  
- [x] Не нарушена работа сборки (импорты/экспорты валидны).

## Тестирование (быстрый чек)
- Временный импорт в песочном модуле или unit-проверка:
  - `getServiceByBitrixValue('1С.Бухгалтерия')` → объект с label "1С.Бухгалтерия".  
  - `getServiceByBitrixValue('1с.бухгалтерия')` (другой регистр) → тот же объект.  
  - `getServiceByBitrixValue('')` или `undefined` → fallback.  
  - `isValidService('1С.ЗУП')` → `true`, `isValidService('Unknown')` → `false`.  
  - `getAllServices()` отсортирован по `order`, fallback в конце.

## Зависимости/заметки
- Поле должно приходить в ответе Bitrix24 (`crm.item.list`).  
- Цвета можно уточнить на UI-этапе, но задать базовые сейчас, чтобы двинуться дальше.  
- Для других секторов будут собственные конфиги (не смешивать значения).  
- В случае расширения списка значений — добавить в конфиг, сохранить порядок/цвета.

## История правок
- 2025-12-11 18:45 (UTC+3, Брест): Создана задача 026-01.
- 2025-12-11 13:26 (UTC+3, Брест): ✅ Этап успешно выполнен. Создан файл `service-config.js` с 5 устойчивыми значениями, fallback, утилитами и документацией. Сборка проходит успешно.

