# TASK-044-05: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ø–∞–ø–∞ ¬´–ü–æ —Å—Ä–æ–∫–∞–º¬ª –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-16 11:01 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js Developer)  
**–°–≤—è–∑—å —Å –∑–∞–¥–∞—á–µ–π:** –≠—Ç–∞–ø 5 –∏–∑ TASK-044

## –¶–µ–ª—å —ç—Ç–∞–ø–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ø–∞–ø `CarryoverDurationModal.vue`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Å—Ä–æ–∫–∞–º (–æ—Ç –¥–∞—Ç—ã –ø–µ—Ä–∏–æ–¥–∞), —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2 –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ä–æ–∫–∞.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ù–µ—Ç –ø–æ–ø–∞–ø–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ —Å—Ä–æ–∫–∞–º
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –°–æ–∑–¥–∞—Ç—å –ø–æ–ø–∞–ø `CarryoverDurationModal.vue` —Å –¥–≤—É–º—è —É—Ä–æ–≤–Ω—è–º–∏:
  - –£—Ä–æ–≤–µ–Ω—å 1: –ì—Ä–∞–¥–∞—Ü–∏—è ¬´–ü–æ —Å—Ä–æ–∫–∞–º¬ª —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - –£—Ä–æ–≤–µ–Ω—å 2: –°–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ä–æ–∫–∞
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 
  - TASK-044-01: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)
  - TASK-044-02: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)
  - TASK-044-03: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)
  - TASK-044-04: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API –¥–ª—è –≥—Ä–∞–¥–∞—Ü–∏–∏ –ø–æ —Å—Ä–æ–∫–∞–º (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)

## –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞

### 1) –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ CarryoverDurationModal
- –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `vue-app/src/components/graph-admission-closure/CarryoverDurationModal.vue`
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –¥–≤—É–º—è —É—Ä–æ–≤–Ω—è–º–∏ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `StagesModal.vue` –∏–∑ TASK-043)
- –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è: `popupLevel`, `selectedDurationCategory`, `tickets`, `isLoadingTickets`

### 2) –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è 1: –ì—Ä–∞–¥–∞—Ü–∏—è –ø–æ —Å—Ä–æ–∫–∞–º
- –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å—Ä–æ–∫–æ–≤ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–∏–∫–µ—Ç–æ–≤
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `StagesModal` (—Å–ø–∏—Å–æ–∫ —Å—Ç–∞–¥–∏–π)
- –î–æ–±–∞–≤–∏—Ç—å —Ü–≤–µ—Ç–Ω—É—é –ª–µ–≤—É—é –≥—Ä–∞–Ω–∏—Ü—É –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–≥—Ä–∞–¥–∏–µ–Ω—Ç –æ—Ç –∑–µ–ª—ë–Ω–æ–≥–æ –∫ –∫—Ä–∞—Å–Ω–æ–º—É)
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–µ–ª–∫—É –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### 3) –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è 2: –°–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å—Ä–æ–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2
- –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–∏–∫–µ—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ API (–ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–∏–∫–µ—Ç—ã —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `TicketCard`
- –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É ¬´–ù–∞–∑–∞–¥¬ª –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 1

### 4) –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API
- –†–∞—Å—à–∏—Ä–∏—Ç—å `admissionClosureService.js` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `includeCarryoverTicketsByDuration`
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å—Ä–æ–∫–æ–≤ —Å `includeCarryoverTicketsByDuration: true`
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å `includeTickets: true`
- –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è: –∑–∞–≥—Ä—É–∑–∫–∞, –æ—à–∏–±–∫–∞, –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### 5) –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ TicketCard
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `TicketCard` –∏–∑ `@/components/dashboard/TicketCard.vue`
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∏–∫–∞ –Ω–∞ —Ç–∏–∫–µ—Ç (–æ—Ç–∫—Ä—ã—Ç–∏–µ –≤ Bitrix24)

### 6) –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –¥–∞—à–±–æ—Ä–¥
- –í `GraphAdmissionClosureDashboard.vue` –¥–æ–±–∞–≤–∏—Ç—å `CarryoverDurationModal`
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `@open-carryover` –∏–∑ TASK-044-03
- –ü–µ—Ä–µ–¥–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ props

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–§–∞–π–ª:** `vue-app/src/components/graph-admission-closure/CarryoverDurationModal.vue`

```vue
<template>
  <div v-if="isVisible" class="modal-backdrop">
    <div class="modal">
      <Transition name="level" mode="out-in">
        <!-- –£—Ä–æ–≤–µ–Ω—å 1: –ì—Ä–∞–¥–∞—Ü–∏—è –ø–æ —Å—Ä–æ–∫–∞–º -->
        <div v-if="popupLevel === 1" key="level-1" class="level-1">
          <header class="modal__header">
            <h3 class="modal__title">–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã –ø–æ —Å—Ä–æ–∫–∞–º</h3>
            <button class="modal__close" @click="$emit('close')">‚úï</button>
          </header>
          
          <section class="modal__body">
            <Transition name="loading" mode="out-in">
              <div v-if="isLoadingCategories" key="loading" class="loading-state">
                <div class="loading-spinner"></div>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...</p>
              </div>
              
              <p v-else-if="!hasData" key="empty" class="modal__empty">
                –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é
              </p>
              
              <ul v-else key="list" class="duration-list">
                <li
                  v-for="category in durationCategories"
                  :key="category.durationCategory"
                  class="duration-list__item"
                  :class="{ 'duration-list__item--clickable': category.count > 0 }"
                  @click="(e) => handleCategoryClick(category, e)"
                  title="–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"
                >
                  <span 
                    class="duration-list__color" 
                    :style="{ backgroundColor: category.color }"
                  ></span>
                  <span class="duration-list__name">{{ category.durationLabel }}</span>
                  <span class="duration-list__count">
                    {{ category.count }} —Ç–∏–∫–µ—Ç–æ–≤
                  </span>
                  <span v-if="category.count > 0" class="duration-list__arrow">‚Üí</span>
                </li>
              </ul>
            </Transition>
          </section>
        </div>
        
        <!-- –£—Ä–æ–≤–µ–Ω—å 2: –°–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <div v-else-if="popupLevel === 2" key="level-2" class="level-2">
          <header class="modal__header">
            <button class="btn-back" @click="goBack">‚Üê –ù–∞–∑–∞–¥</button>
            <h3 class="modal__title">
              –¢–∏–∫–µ—Ç—ã: {{ selectedCategory?.durationLabel || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}
            </h3>
            <button class="modal__close" @click="$emit('close')">‚úï</button>
          </header>
          
          <section class="modal__body">
            <Transition name="loading" mode="out-in">
              <div v-if="isLoadingTickets" key="loading" class="loading-state">
                <div class="loading-spinner"></div>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...</p>
              </div>
              
              <div v-else-if="error" key="error" class="error-state">
                <div class="error-icon">‚ö†Ô∏è</div>
                <p class="error-title">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>
                <p class="error-message">{{ error }}</p>
                <button class="btn btn-retry" @click="retryLoadTickets">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
              </div>
              
              <div v-else-if="tickets.length === 0" key="empty" class="empty-state">
                <div class="empty-state-icon">üìã</div>
                <p class="empty-state-message">
                  –í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ¬´{{ selectedCategory?.durationLabel }}¬ª –Ω–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤
                </p>
              </div>
              
              <div v-else key="tickets" class="tickets-list-container">
                <TransitionGroup name="ticket" tag="div" class="tickets-list">
                  <TicketCard
                    v-for="(ticket, index) in tickets"
                    :key="ticket.id"
                    :ticket="ticket"
                    :draggable="false"
                    :style="{ '--ticket-index': index }"
                    @click="handleTicketClick"
                  />
                </TransitionGroup>
              </div>
            </Transition>
          </section>
        </div>
      </Transition>
    </div>
  </div>
</template>
```

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞

**–§–∞–π–ª:** `vue-app/src/services/graph-admission-closure/admissionClosureService.js`

```javascript
export async function fetchAdmissionClosureStats(params = {}) {
  const {
    endpoint = DEFAULT_ENDPOINT,
    product = '1C',
    weekStartUtc = null,
    weekEndUtc = null,
    useCache = true,
    forceRefresh = false,
    includeTickets = false,
    includeNewTicketsByStages = false,
    includeCarryoverTickets = true,
    includeCarryoverTicketsByDuration = false  // –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
  } = params;

  const body = {
    product,
    weekStartUtc,
    weekEndUtc,
    useCache,
    forceRefresh,
    includeTickets,
    includeNewTicketsByStages,
    includeCarryoverTickets,
    includeCarryoverTicketsByDuration  // –ø–µ—Ä–µ–¥–∞—Ç—å –≤ API
  };

  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
}
```

## –°—Ç—É–ø–µ–Ω—á–∞—Ç—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ CarryoverDurationModal**
   - –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `CarryoverDurationModal.vue`
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ `StagesModal.vue` (TASK-043-03)
   - –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å—Ä–æ–∫–æ–≤

2. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è 1: –ì—Ä–∞–¥–∞—Ü–∏—è –ø–æ —Å—Ä–æ–∫–∞–º**
   - –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ `durationCategories` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ API
   - –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º
   - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é

3. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è 2: –°–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤**
   - –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ `selectedCategory` –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `loadCategoryTickets(durationCategory)`
   - –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–∏–∫–µ—Ç—ã —á–µ—Ä–µ–∑ `TicketCard`
   - –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É ¬´–ù–∞–∑–∞–¥¬ª

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API**
   - –†–∞—Å—à–∏—Ä–∏—Ç—å `admissionClosureService.js`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å `includeCarryoverTicketsByDuration: true`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å `includeTickets: true`

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ TicketCard**
   - –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `TicketCard`
   - –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∏–∫–∞ –Ω–∞ —Ç–∏–∫–µ—Ç

6. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –¥–∞—à–±–æ—Ä–¥**
   - –í `GraphAdmissionClosureDashboard.vue` –¥–æ–±–∞–≤–∏—Ç—å `CarryoverDurationModal`
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `@open-carryover`
   - –ü–µ—Ä–µ–¥–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ props

7. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
   - –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å –∫–Ω–æ–ø–∫–æ–π ¬´–ü–æ–≤—Ç–æ—Ä–∏—Ç—å¬ª

## –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π

```javascript
// –í CarryoverDurationModal.vue
import { ref, computed, watch } from 'vue';
import { fetchAdmissionClosureStats } from '@/services/graph-admission-closure/admissionClosureService.js';
import { getTicketIframeUrl } from '@/services/dashboard-sector-1c/utils/constants.js';
import TicketCard from '@/components/dashboard/TicketCard.vue';

const props = defineProps({
  isVisible: Boolean,
  durationCategories: Array,  // carryoverTicketsByDuration –∏–∑ API
  weekStartUtc: String,
  weekEndUtc: String
});

const popupLevel = ref(1);
const selectedCategory = ref(null);
const tickets = ref([]);
const isLoadingTickets = ref(false);
const isLoadingCategories = ref(false);
const error = ref(null);

const hasData = computed(() => (props.durationCategories || []).length > 0);

/**
 * –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å—Ä–æ–∫–∞
 * –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2 –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤
 */
async function handleCategoryClick(category, event = null) {
  if (!category || category.count === 0) {
    return;
  }
  
  // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
  if (event && event.currentTarget) {
    event.currentTarget.style.transform = 'scale(0.98)';
    setTimeout(() => {
      if (event.currentTarget) {
        event.currentTarget.style.transform = '';
      }
    }, 150);
  }
  
  selectedCategory.value = category;
  popupLevel.value = 2;
  await loadCategoryTickets(category.durationCategory);
}

/**
 * –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ä–æ–∫–∞ –∏–∑ API
 */
async function loadCategoryTickets(durationCategory) {
  isLoadingTickets.value = true;
  error.value = null;
  
  try {
    if (!props.weekStartUtc || !props.weekEndUtc) {
      throw new Error('–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏');
    }
    
    const response = await fetchAdmissionClosureStats({
      product: '1C',
      weekStartUtc: props.weekStartUtc,
      weekEndUtc: props.weekEndUtc,
      includeCarryoverTickets: true,
      includeCarryoverTicketsByDuration: true,
      includeTickets: true
    });
    
    const category = response.data.carryoverTicketsByDuration?.find(
      c => c.durationCategory === durationCategory
    );
    const categoryTickets = category?.tickets || [];
    
    // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    tickets.value = categoryTickets.map(ticket => ({
      id: ticket.id,
      title: ticket.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è',
      ufSubject: ticket.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è',
      createdTime: ticket.createdTime,
      createdAt: ticket.createdTime,
      stageId: ticket.stageId,
      assignedById: ticket.assignedById,
      priorityId: 'medium',
      priorityLabel: '–°—Ä–µ–¥–Ω–∏–π',
      priorityColors: {
        color: '#ffc107',
        backgroundColor: '#fff3cd',
        textColor: '#856404'
      },
      priority: 'medium'
    }));
    
    if (tickets.value.length === 0) {
      error.value = null; // –ù–µ –æ—à–∏–±–∫–∞, –ø—Ä–æ—Å—Ç–æ –Ω–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤
    }
  } catch (err) {
    error.value = err.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤';
    console.error('[CarryoverDurationModal] Error loading tickets:', err);
    tickets.value = [];
  } finally {
    isLoadingTickets.value = false;
  }
}

function goBack() {
  popupLevel.value = 1;
  selectedCategory.value = null;
  tickets.value = [];
  error.value = null;
}

function handleTicketClick(ticket) {
  const url = getTicketIframeUrl(ticket.id);
  window.open(url, '_blank');
}

function retryLoadTickets() {
  if (selectedCategory.value) {
    loadCategoryTickets(selectedCategory.value.durationCategory);
  }
}

// –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞
watch(() => props.isVisible, (newValue) => {
  if (!newValue) {
    popupLevel.value = 1;
    selectedCategory.value = null;
    tickets.value = [];
    error.value = null;
  }
});
```

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ —ç—Ç–∞–ø–∞

- [x] –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ ¬´–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ¬ª –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `CarryoverDurationModal`
- [x] –í –ø–æ–ø–∞–ø–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≥—Ä–∞–¥–∞—Ü–∏—è ¬´–ü–æ —Å—Ä–æ–∫–∞–º¬ª —Å 6 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏:
  - [x] –î–æ 1 –º–µ—Å—è—Ü–∞ (0-13 –¥–Ω–µ–π)
  - [x] –ú–µ–Ω–µ–µ 1 –º–µ—Å—è—Ü–∞ (14-29 –¥–Ω–µ–π)
  - [x] –ë–æ–ª–µ–µ 1 –º–µ—Å—è—Ü–∞ (30-59 –¥–Ω–µ–π)
  - [x] –ë–æ–ª–µ–µ 2 –º–µ—Å—è—Ü–µ–≤ (60-179 –¥–Ω–µ–π)
  - [x] –ë–æ–ª–µ–µ –ø–æ–ª—É–≥–æ–¥–∞ (180-364 –¥–Ω—è)
  - [x] –ë–æ–ª–µ–µ –≥–æ–¥–∞ (‚â•365 –¥–Ω–µ–π)
- [x] –ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–∏–∫–µ—Ç–æ–≤
- [x] –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å 2 —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–∏–∫–µ—Ç–æ–≤
- [x] –¢–∏–∫–µ—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `TicketCard`
- [x] –ö–Ω–æ–ø–∫–∞ ¬´–ù–∞–∑–∞–¥¬ª –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 1
- [x] –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–ø–∞–ø–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è: ¬´–¢–∏–∫–µ—Ç—ã: [–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏]¬ª
- [x] –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ
- [x] –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å –∫–Ω–æ–ø–∫–æ–π ¬´–ü–æ–≤—Ç–æ—Ä–∏—Ç—å¬ª
- [x] –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ç–∏–∫–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ Bitrix24
- [x] –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –∏ –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç (–∫–∞–∫ –≤ TASK-042-04)
- [x] –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `StagesModal` –∏ `ResponsibleModal`
- [x] –¶–≤–µ—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç—É (–æ—Ç –∑–µ–ª—ë–Ω–æ–≥–æ –∫ –∫—Ä–∞—Å–Ω–æ–º—É)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Ç–æ—á–Ω–µ–Ω–∏—è

### –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å—Ä–æ–∫–æ–≤

- –¶–≤–µ—Ç–Ω–∞—è –ª–µ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ (`border-left: 3px solid`) —Å —Ü–≤–µ—Ç–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –§–æ–Ω: `var(--b24-bg-light, #f3f4f6)`
- –ü—Ä–∏ hover: `transform: translateX(2px)`, `box-shadow`
- –°—Ç—Ä–µ–ª–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å `count > 0`
- –ì—Ä–∞–¥–∏–µ–Ω—Ç —Ü–≤–µ—Ç–æ–≤: –∑–µ–ª—ë–Ω—ã–π ‚Üí –∂—ë–ª—Ç—ã–π ‚Üí –æ—Ä–∞–Ω–∂–µ–≤—ã–π ‚Üí –∫—Ä–∞—Å–Ω—ã–π ‚Üí —Ç—ë–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è TicketCard

- –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é –ª–æ–≥–∏–∫—É –∏–∑ `StagesModal`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç —Ç–∏–∫–µ—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º `TicketCard`

### –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∏–ª–∏ –∏–∑ `StagesModal.vue` –∏ `ResponsibleModal.vue`
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å—Ä–æ–∫–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–ª–∏ –¥–ª—è —Ü–≤–µ—Ç–Ω–æ–π –≥—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ä–æ–∫–æ–≤

**–í—Å–µ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ count = 0:**
- –î–æ 1 –º–µ—Å—è—Ü–∞ (0-13 –¥–Ω–µ–π) ‚Äî –∑–µ–ª—ë–Ω—ã–π `#28a745`
- –ú–µ–Ω–µ–µ 1 –º–µ—Å—è—Ü–∞ (14-29 –¥–Ω–µ–π) ‚Äî —Å–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω—ã–π `#6cbd45`
- –ë–æ–ª–µ–µ 1 –º–µ—Å—è—Ü–∞ (30-59 –¥–Ω–µ–π) ‚Äî –∂—ë–ª—Ç—ã–π `#ffc107`
- –ë–æ–ª–µ–µ 2 –º–µ—Å—è—Ü–µ–≤ (60-179 –¥–Ω–µ–π) ‚Äî –æ—Ä–∞–Ω–∂–µ–≤—ã–π `#ff9800`
- –ë–æ–ª–µ–µ –ø–æ–ª—É–≥–æ–¥–∞ (180-364 –¥–Ω—è) ‚Äî –∫—Ä–∞—Å–Ω—ã–π `#dc3545`
- –ë–æ–ª–µ–µ –≥–æ–¥–∞ (‚â•365 –¥–Ω–µ–π) ‚Äî —Ç—ë–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π `#c82333`

## –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- 2025-12-16 11:01 (UTC+3, –ë—Ä–µ—Å—Ç): –°–æ–∑–¥–∞–Ω —ç—Ç–∞–ø 5 –∑–∞–¥–∞—á–∏ TASK-044
- 2025-12-16 18:30 (UTC+3, –ë—Ä–µ—Å—Ç): –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ø–∞–ø ¬´–ü–æ —Å—Ä–æ–∫–∞–º¬ª –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤
  - –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `CarryoverDurationModal.vue` –Ω–∞ –æ—Å–Ω–æ–≤–µ `StagesModal.vue`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É—Ä–æ–≤–µ–Ω—å 1: –≥—Ä–∞–¥–∞—Ü–∏—è –ø–æ —Å—Ä–æ–∫–∞–º —Å 6 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–∏–∫–µ—Ç–æ–≤
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É—Ä–æ–≤–µ–Ω—å 2: —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ `TicketCard`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏ (–∫–Ω–æ–ø–∫–∞ ¬´–ù–∞–∑–∞–¥¬ª)
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–∏–∫–µ—Ç–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ (stagger –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–∏–∫–µ—Ç–æ–≤)
  - –û–±–Ω–æ–≤–ª—ë–Ω —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `includeCarryoverTicketsByDuration`
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –¥–∞—à–±–æ—Ä–¥ `GraphAdmissionClosureDashboard.vue`
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `prepareTicketsForDisplay()` –¥–ª—è –æ–±–æ–≥–∞—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤
- 2025-12-16 18:50 (UTC+3, –ë—Ä–µ—Å—Ç): –î–æ–±–∞–≤–ª–µ–Ω–∞ 6-—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è ¬´–î–æ 1 –º–µ—Å—è—Ü–∞¬ª
  - –†–∞–∑–¥–µ–ª–µ–Ω–∞ –ø–µ—Ä–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–∞ –¥–≤–µ: ¬´–î–æ 1 –º–µ—Å—è—Ü–∞¬ª (0-13 –¥–Ω–µ–π) –∏ ¬´–ú–µ–Ω–µ–µ 1 –º–µ—Å—è—Ü–∞¬ª (14-29 –¥–Ω–µ–π)
  - –û–±–Ω–æ–≤–ª—ë–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π

