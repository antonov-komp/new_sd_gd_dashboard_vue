# TASK-033-04: –≠—Ç–∞–ø 4 - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ø–∞–ø–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-12 09:24 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å:** –ù–æ–≤–∞—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js)  
**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** TASK-033

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∞–ø–∞

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ø–∞–ø–∞ –∏ –ø–ª–∞–≤–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É –≤—Å–µ–º–∏ —Ç—Ä–µ–º—è —É—Ä–æ–≤–Ω—è–º–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö, –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤—Å–µ—Ö –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤.

**–¶–µ–ª—å:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—É—é –∏ –ø–ª–∞–≤–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏ –ø–æ–ø–∞–ø–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ.

---

## üéØ –¶–µ–ª—å —ç—Ç–∞–ø–∞

–°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ø–∞–ø–∞, –∫–æ—Ç–æ—Ä–∞—è:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–ª–∞–≤–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É—Ä–æ–≤–Ω–∏
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º GraphStateChart
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏
- –í–∫–ª—é—á–∞–µ—Ç –ø–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ï–¥–∏–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ø–∞–ø–∞ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ—Ö —É—Ä–æ–≤–Ω–µ–π
- –ü–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è: 1 ‚Üí 2 ‚Üí 3 ‚Üí 2 ‚Üí 1
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö
- –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GraphStateChart

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ø–∞–ø–∞

### –ï–¥–∏–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```javascript
/**
 * –ï–¥–∏–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ø–∞–ø–∞ –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π
 */
const popupState = ref({
  // –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å (1, 2, –∏–ª–∏ 3)
  level: 1,
  
  // –î–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 1 (—Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å—Ç–∞–¥–∏–∏)
  level1: {
    stageName: string,        // –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–¥–∏–∏
    stageId: string,          // ID —Å—Ç–∞–¥–∏–∏
    totalCount: number,       // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ —Å—Ç–∞–¥–∏–∏
    employees: Array,         // –ú–∞—Å—Å–∏–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
    others: Object | null,    // –ì—Ä—É–ø–ø–∞ "–î—Ä—É–≥–∏–µ" (–µ—Å–ª–∏ –µ—Å—Ç—å)
    snapshot: Object | null,  // –°–ª–µ–ø–æ–∫ —Å –¥–∞–Ω–Ω—ã–º–∏ (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤)
    ticketDetails: Object | null // –î–µ—Ç–∞–ª–∏ —Ç–∏–∫–µ—Ç–æ–≤ (–µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ API)
  },
  
  // –î–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 2 (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≥—Ä–∞–¥–∞—Ü–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞)
  level2: {
    employeeId: number,       // ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    employeeName: string,     // –ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    stageId: string,          // ID —Å—Ç–∞–¥–∏–∏
    stageName: string,        // –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–¥–∏–∏
    totalCount: number,       // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    dateCategories: Array,    // –ú–∞—Å—Å–∏–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–∞–≤–Ω–æ—Å—Ç–∏
    snapshot: Object | null,  // –°–ª–µ–ø–æ–∫ (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤)
    ticketDetails: Object | null // –î–µ—Ç–∞–ª–∏ —Ç–∏–∫–µ—Ç–æ–≤
  },
  
  // –î–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 3 (–∑–∞–∫–∞–∑—á–∏–∫–∏ –≥—Ä–∞–¥–∞—Ü–∏–∏)
  level3: {
    employeeId: number,       // ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    employeeName: string,     // –ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    stageId: string,         // ID —Å—Ç–∞–¥–∏–∏
    stageName: string,       // –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–¥–∏–∏
    dateCategory: string,    // –ö–ª—é—á –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–∞–≤–Ω–æ—Å—Ç–∏
    dateCategoryLabel: string, // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    totalCount: number,      // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ –≤ –≥—Ä–∞–¥–∞—Ü–∏–∏
    departments: Array,      // –ú–∞—Å—Å–∏–≤ –∑–∞–∫–∞–∑—á–∏–∫–æ–≤
    snapshot: Object | null,  // –°–ª–µ–ø–æ–∫ (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤)
    ticketDetails: Object | null // –î–µ—Ç–∞–ª–∏ —Ç–∏–∫–µ—Ç–æ–≤
  }
});
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ refs)

```javascript
// –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥ —Å —Ä–∞–∑–¥–µ–ª—å–Ω—ã–º–∏ refs
const popupLevel = ref(1);
const level1Data = ref(null);
const level2Data = ref(null);
const level3Data = ref(null);
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ refs –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∫–æ–¥–∞ –∏ –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.

---

## üìù –ü–æ–¥–∑–∞–¥–∞—á–∏

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 4.1: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ø–∞–ø–∞

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ø–∞–ø–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π.

#### –ó–∞–¥–∞—á–∏

1. **–ò–∑—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ EmployeeDetailsModal**
   - –û—Ç–∫—Ä—ã—Ç—å `vue-app/src/components/graph-state/EmployeeDetailsModal.vue`
   - –ù–∞–π—Ç–∏ —Ç–µ–∫—É—â–∏–µ props –∏ refs
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è

2. **–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ—Å—Ç–æ—è–Ω–∏—è**
   ```javascript
   // –í <script setup> –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ EmployeeDetailsModal.vue
   
   import { ref, computed } from 'vue';
   
   /**
    * –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–ø–∞–ø–∞ (1, 2, –∏–ª–∏ 3)
    */
   const popupLevel = ref(1);
   
   /**
    * –î–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 1 (—Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å—Ç–∞–¥–∏–∏)
    * –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞ –∏ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ —Å —É—Ä–æ–≤–Ω—è 2
    */
   const level1Data = ref(null);
   
   /**
    * –î–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 2 (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≥—Ä–∞–¥–∞—Ü–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞)
    * –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2
    */
   const level2Data = ref(null);
   
   /**
    * –î–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 3 (–∑–∞–∫–∞–∑—á–∏–∫–∏ –≥—Ä–∞–¥–∞—Ü–∏–∏)
    * –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 3
    */
   const level3Data = ref(null);
   ```

3. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞**
   ```javascript
   /**
    * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è 1 –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞
    * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ isVisible —Å false –Ω–∞ true
    */
   watch(() => props.isVisible, (newValue) => {
     if (newValue) {
       // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è 1 –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ props
       level1Data.value = {
         stageName: props.stageName,
         stageId: props.stageId,
         totalCount: props.totalCount,
         employees: props.employees || [],
         others: props.others || null,
         snapshot: props.snapshot || null,
         ticketDetails: props.ticketDetails || null
       };
       
       // –°–±—Ä–æ—Å —É—Ä–æ–≤–Ω–µ–π 2 –∏ 3
       level2Data.value = null;
       level3Data.value = null;
       popupLevel.value = 1;
     } else {
       // –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
       resetPopup();
     }
   });
   ```

4. **Computed-—Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞**
   ```javascript
   /**
    * –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
    */
   const currentLevelData = computed(() => {
     switch (popupLevel.value) {
       case 1:
         return level1Data.value;
       case 2:
         return level2Data.value;
       case 3:
         return level3Data.value;
       default:
         return null;
     }
   });
   
   /**
    * –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞–∑–∞–¥
    */
   const canGoBack = computed(() => {
     return popupLevel.value > 1;
   });
   
   /**
    * –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–ø–∞–ø–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
    */
   const popupTitle = computed(() => {
     switch (popupLevel.value) {
       case 1:
         return level1Data.value?.stageName || '';
       case 2:
         return level2Data.value?.employeeName || '';
       case 3:
         return `${level2Data.value?.employeeName || ''} ‚Äî ${level3Data.value?.dateCategoryLabel || ''}`;
       default:
         return '';
     }
   });
   ```

5. **–§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è**
   ```javascript
   /**
    * –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ø–∞–ø–∞
    * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞
    */
   function resetPopup() {
     popupLevel.value = 1;
     level1Data.value = null;
     level2Data.value = null;
     level3Data.value = null;
   }
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Computed-—Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 4.2: –§—É–Ω–∫—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏ –ø–æ–ø–∞–ø–∞.

#### –ó–∞–¥–∞—á–∏

1. **–§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2**
   ```javascript
   /**
    * –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2 (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≥—Ä–∞–¥–∞—Ü–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞)
    * 
    * @param {Object} employee - –û–±—ä–µ–∫—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏–∑ —É—Ä–æ–≤–Ω—è 1
    * @param {number} employee.id - ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    * @param {string} employee.name - –ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    */
   async function goToLevel2(employee) {
     if (!employee || !employee.id) {
       console.error('Invalid employee data for level 2');
       return;
     }
     
     // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 1 (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã)
     if (!level1Data.value) {
       level1Data.value = {
         stageName: props.stageName,
         stageId: props.stageId,
         totalCount: props.totalCount,
         employees: props.employees || [],
         others: props.others || null,
         snapshot: props.snapshot || null,
         ticketDetails: props.ticketDetails || null
       };
     }
     
     // –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–∞ —Å—Ç–∞–¥–∏–∏
     const tickets = await getEmployeeTicketsForStage(
       employee.id,
       level1Data.value.stageId,
       level1Data.value.snapshot,
       level1Data.value.ticketDetails
     );
     
     if (!tickets || tickets.length === 0) {
       // –ù–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
       console.warn(`No tickets found for employee ${employee.id} on stage ${level1Data.value.stageId}`);
       // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
       return;
     }
     
     // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –≥—Ä–∞–¥–∞—Ü–∏—è–º
     const dateCategories = groupTicketsByDateCategory(tickets);
     
     // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 2
     level2Data.value = {
       employeeId: employee.id,
       employeeName: employee.name,
       stageId: level1Data.value.stageId,
       stageName: level1Data.value.stageName,
       totalCount: tickets.length,
       dateCategories: dateCategories,
       snapshot: level1Data.value.snapshot,
       ticketDetails: level1Data.value.ticketDetails
     };
     
     // –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2
     popupLevel.value = 2;
   }
   ```

2. **–§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 3**
   ```javascript
   /**
    * –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 3 (–¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∑–∞–∫–∞–∑—á–∏–∫–∞–º)
    * 
    * @param {Object} category - –û–±—ä–µ–∫—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–∞–≤–Ω–æ—Å—Ç–∏ –∏–∑ —É—Ä–æ–≤–Ω—è 2
    * @param {string} category.category - –ö–ª—é—á –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ('today', 'yesterday', ...)
    * @param {string} category.label - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ('–°–ï–ì–û–î–ù–Ø', '–í–ß–ï–†–ê', ...)
    * @param {number} category.count - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    * @param {Array} category.tickets - –ú–∞—Å—Å–∏–≤ —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    */
   function goToLevel3(category) {
     if (!category || !category.tickets || category.tickets.length === 0) {
       console.warn('No tickets in category:', category?.label);
       return;
     }
     
     // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è 2
     if (!level2Data.value) {
       console.error('Level 2 data not found');
       return;
     }
     
     // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–∫–µ—Ç—ã –ø–æ –∑–∞–∫–∞–∑—á–∏–∫–∞–º
     const departments = groupTicketsByDepartment(category.tickets);
     
     // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 3
     level3Data.value = {
       employeeId: level2Data.value.employeeId,
       employeeName: level2Data.value.employeeName,
       stageId: level2Data.value.stageId,
       stageName: level2Data.value.stageName,
       dateCategory: category.category,
       dateCategoryLabel: category.label,
       totalCount: category.count,
       departments: departments,
       snapshot: level2Data.value.snapshot,
       ticketDetails: level2Data.value.ticketDetails
     };
     
     // –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 3
     popupLevel.value = 3;
   }
   ```

3. **–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞–∑–∞–¥**
   ```javascript
   /**
    * –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
    * 
    * –õ–æ–≥–∏–∫–∞:
    * - –° —É—Ä–æ–≤–Ω—è 3 ‚Üí —É—Ä–æ–≤–µ–Ω—å 2 (–æ—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 3)
    * - –° —É—Ä–æ–≤–Ω—è 2 ‚Üí —É—Ä–æ–≤–µ–Ω—å 1 (–æ—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 2)
    * - –° —É—Ä–æ–≤–Ω—è 1 ‚Üí –∑–∞–∫—Ä—ã—Ç—å –ø–æ–ø–∞–ø (—á–µ—Ä–µ–∑ emit('close'))
    */
   function goBack() {
     if (popupLevel.value === 3) {
       // –í–æ–∑–≤—Ä–∞—Ç —Å —É—Ä–æ–≤–Ω—è 3 –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2
       popupLevel.value = 2;
       level3Data.value = null; // –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 3
     } else if (popupLevel.value === 2) {
       // –í–æ–∑–≤—Ä–∞—Ç —Å —É—Ä–æ–≤–Ω—è 2 –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 1
       popupLevel.value = 1;
       level2Data.value = null; // –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 2
       level3Data.value = null; // –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 3 (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
     } else if (popupLevel.value === 1) {
       // –ù–∞ —É—Ä–æ–≤–Ω–µ 1 –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –Ω–µ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è
       // –ù–æ –µ—Å–ª–∏ –≤—ã–∑–≤–∞–Ω–∞, –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ–ø–∞–ø
       close();
     }
   }
   ```

4. **–§—É–Ω–∫—Ü–∏–∏ –ø—Ä—è–º–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ (–¥–ª—è —Ö–ª–µ–±–Ω—ã—Ö –∫—Ä–æ—à–µ–∫)**
   ```javascript
   /**
    * –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 1 (—á–µ—Ä–µ–∑ —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏)
    */
   function goToLevel1() {
     if (level1Data.value) {
       popupLevel.value = 1;
       level2Data.value = null;
       level3Data.value = null;
     }
   }
   
   /**
    * –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2 (—á–µ—Ä–µ–∑ —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏)
    */
   function goToLevel2Direct() {
     if (level2Data.value) {
       popupLevel.value = 2;
       level3Data.value = null;
     }
   }
   ```

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏**
   ```javascript
   /**
    * –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å
    * 
    * @param {number} targetLevel - –¶–µ–ª–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å (1, 2, –∏–ª–∏ 3)
    * @returns {boolean} true, –µ—Å–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –≤–æ–∑–º–æ–∂–µ–Ω
    */
   function canNavigateToLevel(targetLevel) {
     switch (targetLevel) {
       case 1:
         return level1Data.value !== null;
       case 2:
         return level2Data.value !== null;
       case 3:
         return level3Data.value !== null;
       default:
         return false;
     }
   }
   ```

6. **–ò–º–ø–æ—Ä—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**
   ```javascript
   import { 
     getEmployeeTicketsForStage,
     groupTicketsByDateCategory,
     groupTicketsByDepartment
   } from '@/utils/graph-state/popupNavigationUtils.js';
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –§—É–Ω–∫—Ü–∏—è `goToLevel2()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏—è `goToLevel3()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏—è `goBack()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏–∏ –ø—Ä—è–º–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 4.3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ GraphStateChart

**–¶–µ–ª—å:** –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç GraphStateChart –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ø–∞–ø.

#### –ó–∞–¥–∞—á–∏

1. **–ò–∑—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ø–∞–ø**
   - –ù–∞–π—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `EmployeeDetailsModal` –≤ `GraphStateChart.vue`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ props –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

2. **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ props**
   ```vue
   <!-- –í GraphStateChart.vue -->
   <EmployeeDetailsModal
     :is-visible="showEmployeeModal"
     :stage-name="modalStageName"
     :stage-id="modalStageId"           <!-- –î–æ–±–∞–≤–∏—Ç—å -->
     :total-count="modalTotalCount"
     :employees="modalEmployees"
     :others="modalOthers"
     :snapshot="currentSnapshot"        <!-- –î–æ–±–∞–≤–∏—Ç—å -->
     :ticket-details="ticketDetails"    <!-- –î–æ–±–∞–≤–∏—Ç—å (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
     @close="closeEmployeeModal"
   />
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å ref –¥–ª—è snapshot**
   ```javascript
   // –í GraphStateChart.vue
   
   /**
    * –¢–µ–∫—É—â–∏–π —Å–ª–µ–ø–æ–∫ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –ø–æ–ø–∞–ø
    * –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞
    */
   const currentSnapshot = ref(null);
   ```

4. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–ø–∞–ø–∞ –¥–ª—è –ª–∏–Ω–µ–π–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞**
   ```javascript
   /**
    * –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –ª–∏–Ω–µ–π–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞
    * 
    * @param {string} stageId - ID —ç—Ç–∞–ø–∞
    * @param {string} timePoint - –í—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ ('weekStart' | 'weekEnd' | 'current')
    * @param {Array} employeeData - –î–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
    */
   function openEmployeeDetailsModalForLine(stageId, timePoint, employeeData) {
     const stage = stages.find(s => s.id === stageId);
     if (!stage) {
       return;
     }
     
     // –ü–æ–ª—É—á–∏—Ç—å —Å–ª–µ–ø–æ–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–æ—á–∫–µ
     const snapshot = getSnapshotByTimePoint(timePoint);
     
     // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–µ–ø–æ–∫ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –ø–æ–ø–∞–ø
     currentSnapshot.value = snapshot;
     
     // –ü–æ–ª—É—á–∏—Ç—å –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ —ç—Ç–∞–ø–∞
     const totalCount = snapshot?.statistics?.stages?.[stageId]?.count || 0;
     
     // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤
     const formatted = formatEmployeeProgressBarData(
       employeeData,
       totalCount,
       stage.color,
       10
     );
     
     // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É—Ä–æ–≤–Ω—è 1
     modalStageName.value = stage.name;
     modalStageId.value = stageId; // –î–æ–±–∞–≤–∏—Ç—å
     modalTotalCount.value = totalCount;
     modalEmployees.value = formatted.employees;
     modalOthers.value = formatted.others;
     
     // –û—Ç–∫—Ä—ã—Ç—å –ø–æ–ø–∞–ø
     showEmployeeModal.value = true;
   }
   ```

5. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–ø–∞–ø–∞ –¥–ª—è –∫—Ä—É–≥–æ–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã**
   ```javascript
   /**
    * –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –∫—Ä—É–≥–æ–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã
    * 
    * @param {string} stageId - ID —ç—Ç–∞–ø–∞
    * @param {Object} employeeData - –î–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
    */
   function openEmployeeDetailsModalForDoughnut(stageId, employeeData) {
     if (!employeeData || !employeeData.employees || employeeData.employees.length === 0) {
       notifications.warning('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö –¥–ª—è —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞');
       return;
     }
     
     // –ü–æ–ª—É—á–∏—Ç—å —Å–ª–µ–ø–æ–∫ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π –∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π)
     const snapshot = snapshots.value.current || snapshots.value.weekEnd || snapshots.value.weekStart;
     currentSnapshot.value = snapshot;
     
     // –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞–¥–∏—é
     const stage = stages.find(s => s.id === stageId);
     
     // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É—Ä–æ–≤–Ω—è 1
     modalStageName.value = employeeData.stageName;
     modalStageId.value = stageId; // –î–æ–±–∞–≤–∏—Ç—å
     modalTotalCount.value = employeeData.totalCount;
     modalEmployees.value = employeeData.employees;
     modalOthers.value = employeeData.others;
     
     // –û—Ç–∫—Ä—ã—Ç—å –ø–æ–ø–∞–ø
     showEmployeeModal.value = true;
   }
   ```

6. **–î–æ–±–∞–≤–∏—Ç—å ref –¥–ª—è modalStageId**
   ```javascript
   // –í GraphStateChart.vue
   
   /**
    * ID —Å—Ç–∞–¥–∏–∏ –¥–ª—è –ø–æ–ø–∞–ø–∞
    */
   const modalStageId = ref('');
   ```

7. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–ø–∞–ø–∞**
   ```javascript
   /**
    * –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
    */
   function closeEmployeeModal() {
     showEmployeeModal.value = false;
     modalStageName.value = '';
     modalStageId.value = ''; // –û—á–∏—Å—Ç–∏—Ç—å
     modalTotalCount.value = 0;
     modalEmployees.value = [];
     modalOthers.value = null;
     currentSnapshot.value = null; // –û—á–∏—Å—Ç–∏—Ç—å —Å–ª–µ–ø–æ–∫
   }
   ```

8. **–î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–µ—Ç–∞–ª–µ–π —Ç–∏–∫–µ—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
   ```javascript
   /**
    * –î–µ—Ç–∞–ª–∏ —Ç–∏–∫–µ—Ç–æ–≤ (–µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ API)
    * –ö–ª—é—á - ID —Ç–∏–∫–µ—Ç–∞, –∑–Ω–∞—á–µ–Ω–∏–µ - –æ–±—ä–µ–∫—Ç —Ç–∏–∫–µ—Ç–∞ —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    */
   const ticketDetails = ref(null);
   
   /**
    * –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è –ø–æ–ø–∞–ø–∞
    * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞, –µ—Å–ª–∏ —Å–ª–µ–ø–æ–∫ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    */
   async function loadTicketDetailsForPopup(snapshot) {
     if (!snapshot || !snapshot.ticketIds || snapshot.ticketIds.length === 0) {
       return null;
     }
     
     // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω—É–∂–Ω–∞ –ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π
     // –ï—Å–ª–∏ –≤ —Å–ª–µ–ø–∫–µ —É–∂–µ –µ—Å—Ç—å stageId –∏ departmentHead –≤ —Ç–∏–∫–µ—Ç–∞—Ö, –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –Ω—É–∂–Ω–∞
     const needsLoading = !snapshot.tickets || 
                          !snapshot.tickets[0]?.stageId || 
                          !snapshot.tickets[0]?.departmentHead;
     
     if (!needsLoading) {
       // –î–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ —Å–ª–µ–ø–∫–µ
       return null;
     }
     
     // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ—Ç–∞–ª–∏ —á–µ—Ä–µ–∑ API
     try {
       const details = await TicketDetailsService.getTicketsDetails(snapshot.ticketIds);
       return details;
     } catch (error) {
       console.error('Error loading ticket details:', error);
       return null;
     }
   }
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç GraphStateChart –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ props –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –ø–æ–ø–∞–ø
- [ ] –°–ª–µ–ø–æ–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –ø–æ–ø–∞–ø
- [ ] ID —Å—Ç–∞–¥–∏–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –ø–æ–ø–∞–ø
- [ ] –§—É–Ω–∫—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–ø–∞–ø–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π —Ç–∏–∫–µ—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 4.4: –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏ –ø–æ–ø–∞–ø–∞.

#### –ó–∞–¥–∞—á–∏

1. **–ò–∑—É—á–∏—Ç—å Vue transitions**
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://vuejs.org/guide/built-ins/transition.html
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∞–Ω–∏–º–∞—Ü–∏–∏ (fade, slide, scale)

2. **–î–æ–±–∞–≤–∏—Ç—å transition –¥–ª—è —É—Ä–æ–≤–Ω–µ–π**
   ```vue
   <template>
     <Teleport to="body">
       <div v-if="isVisible" class="employee-details-modal" ...>
         <div class="modal-content">
           <Transition name="level" mode="out-in">
             <!-- –£—Ä–æ–≤–µ–Ω—å 1: –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
             <div v-if="popupLevel === 1" key="level-1" class="level-1">
               <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–≤–Ω—è 1 -->
             </div>
             
             <!-- –£—Ä–æ–≤–µ–Ω—å 2: –í—Ä–µ–º–µ–Ω–Ω—ã–µ –≥—Ä–∞–¥–∞—Ü–∏–∏ -->
             <div v-else-if="popupLevel === 2" key="level-2" class="level-2">
               <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–≤–Ω—è 2 -->
             </div>
             
             <!-- –£—Ä–æ–≤–µ–Ω—å 3: –ó–∞–∫–∞–∑—á–∏–∫–∏ -->
             <div v-else-if="popupLevel === 3" key="level-3" class="level-3">
               <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–≤–Ω—è 3 -->
             </div>
           </Transition>
         </div>
       </div>
     </Teleport>
   </template>
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å CSS –∞–Ω–∏–º–∞—Ü–∏–∏**
   ```css
   /* –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏ */
   
   /* –í—Ö–æ–¥ (–ø–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è) */
   .level-enter-active {
     transition: all 0.3s ease-out;
   }
   
   .level-enter-from {
     opacity: 0;
     transform: translateX(20px);
   }
   
   .level-enter-to {
     opacity: 1;
     transform: translateX(0);
   }
   
   /* –í—ã—Ö–æ–¥ (–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è) */
   .level-leave-active {
     transition: all 0.3s ease-in;
   }
   
   .level-leave-from {
     opacity: 1;
     transform: translateX(0);
   }
   
   .level-leave-to {
     opacity: 0;
     transform: translateX(-20px);
   }
   ```

4. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è (fade)**
   ```css
   /* –ü—Ä–æ—Å—Ç–∞—è fade –∞–Ω–∏–º–∞—Ü–∏—è */
   .level-enter-active,
   .level-leave-active {
     transition: opacity 0.25s ease;
   }
   
   .level-enter-from,
   .level-leave-to {
     opacity: 0;
   }
   ```

5. **–ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"**
   ```css
   .btn-back {
     transition: all 0.2s ease;
   }
   
   .btn-back:hover {
     transform: translateX(-2px);
   }
   
   .btn-back:active {
     transform: translateX(-4px);
   }
   ```

6. **–ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã/—Å–ø–∏—Å–∫–∞**
   ```css
   .category-item,
   .department-row {
     transition: all 0.2s ease;
   }
   
   .category-item:hover,
   .department-row:hover {
     transform: translateX(4px);
   }
   ```

7. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   ```css
   /* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ will-change –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∞–Ω–∏–º–∞—Ü–∏–π */
   .level-enter-active,
   .level-leave-active {
     will-change: opacity, transform;
   }
   
   /* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ will-change –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ */
   .level-enter-to,
   .level-leave-from {
     will-change: auto;
   }
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] Transition –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] CSS –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–ª–∞–≤–Ω—ã–µ –∏ –Ω–µ –∑–∞–º–µ–¥–ª—è—é—Ç —Ä–∞–±–æ—Ç—É
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ–±–æ–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö (–≤–ø–µ—Ä–µ–¥ –∏ –Ω–∞–∑–∞–¥)
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

---

### –ü–æ–¥–∑–∞–¥–∞—á–∞ 4.5: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

**–¶–µ–ª—å:** –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –∏ –æ—à–∏–±–∫–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ–ø–∞–ø–∞.

#### –ó–∞–¥–∞—á–∏

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è 1**
   ```javascript
   /**
    * –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è 1
    */
   function validateLevel1Data() {
     if (!level1Data.value) {
       console.error('Level 1 data is missing');
       // –ó–∞–∫—Ä—ã—Ç—å –ø–æ–ø–∞–ø –∏–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
       close();
       return false;
     }
     
     if (!level1Data.value.stageId) {
       console.error('Stage ID is missing in level 1 data');
       return false;
     }
     
     return true;
   }
   ```

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–∏–∫–µ—Ç–æ–≤ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞**
   ```javascript
   /**
    * –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤ –Ω–∞ —Å—Ç–∞–¥–∏–∏
    */
   async function handleEmployeeClick(employee) {
     // ... –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ ...
     
     if (!tickets || tickets.length === 0) {
       // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
       notifications.info(`–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ "${employee.name}" –Ω–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤ –Ω–∞ —Å—Ç–∞–¥–∏–∏ "${level1Data.value.stageName}"`);
       return;
     }
     
     // –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2
     goToLevel2(employee);
   }
   ```

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**
   ```javascript
   /**
    * –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤
    */
   function handleCategoryClick(category) {
     if (!category || category.count === 0) {
       notifications.info(`–í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${category?.label || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è'}" –Ω–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤`);
       return;
     }
     
     if (!category.tickets || category.tickets.length === 0) {
       console.warn('Category has count but no tickets array');
       // –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
       return;
     }
     
     // –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 3
     goToLevel3(category);
   }
   ```

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–∞–∫–∞–∑—á–∏–∫–æ–≤**
   ```javascript
   /**
    * –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ –≤—Å–µ —Ç–∏–∫–µ—Ç—ã –±–µ–∑ –∑–∞–∫–∞–∑—á–∏–∫–∞
    */
   function groupTicketsByDepartment(tickets) {
     // ... –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ ...
     
     // –ï—Å–ª–∏ –≤—Å–µ —Ç–∏–∫–µ—Ç—ã –±–µ–∑ –∑–∞–∫–∞–∑—á–∏–∫–∞
     if (departments.length === 1 && departments[0].departmentName === '–ë–µ–∑ –∑–∞–∫–∞–∑—á–∏–∫–∞') {
       // –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è, –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
       return departments;
     }
     
     return departments;
   }
   ```

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö**
   ```javascript
   /**
    * –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–∏–∫–µ—Ç–æ–≤
    */
   async function getEmployeeTicketsForStage(employeeId, stageId, snapshot, ticketDetails) {
     try {
       // ... –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ ...
       return tickets;
     } catch (error) {
       console.error('Error getting employee tickets:', error);
       notifications.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ —Ç–∏–∫–µ—Ç–∞—Ö');
       return [];
     }
   }
   ```

6. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è**
   ```javascript
   /**
    * –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
    */
   function recoverFromError() {
     // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 2 –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –Ω–æ –º—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ 2
     if (popupLevel.value === 2 && !level2Data.value) {
       console.warn('Level 2 data missing, returning to level 1');
       popupLevel.value = 1;
     }
     
     // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è 3 –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –Ω–æ –º—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ 3
     if (popupLevel.value === 3 && !level3Data.value) {
       console.warn('Level 3 data missing, returning to level 2');
       if (level2Data.value) {
         popupLevel.value = 2;
       } else {
         popupLevel.value = 1;
       }
     }
   }
   ```

7. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö**
   ```javascript
   /**
    * –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –Ω–∞ —É—Ä–æ–≤–µ–Ω—å
    */
   function validateBeforeNavigation(targetLevel) {
     switch (targetLevel) {
       case 2:
         if (!level1Data.value || !level1Data.value.stageId) {
           console.error('Cannot navigate to level 2: missing level 1 data');
           return false;
         }
         return true;
       
       case 3:
         if (!level2Data.value || !level2Data.value.dateCategories) {
           console.error('Cannot navigate to level 3: missing level 2 data');
           return false;
         }
         return true;
       
       default:
         return true;
     }
   }
   ```

8. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**
   ```javascript
   /**
    * –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ø–∞–ø–∞ (—Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
   */
   function logPopupState() {
     if (import.meta.env?.MODE !== 'production') {
       console.log('Popup state:', {
         level: popupLevel.value,
         level1: level1Data.value ? 'exists' : 'null',
         level2: level2Data.value ? 'exists' : 'null',
         level3: level3Data.value ? 'exists' : 'null'
       });
     }
   }
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è 1 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–∏–∫–µ—Ç–æ–≤ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–∞–∫–∞–∑—á–∏–∫–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ EmployeeDetailsModal

```vue
<template>
  <Teleport to="body">
    <div
      v-if="isVisible"
      class="employee-details-modal"
      @click.self="close"
      @keydown.esc="close"
    >
      <div class="modal-content">
        <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
        <div v-if="popupLevel > 1" class="breadcrumbs">
          <span class="breadcrumb-item" @click="goToLevel1">
            {{ level1Data?.stageName || '–°—Ç–∞–¥–∏—è' }}
          </span>
          <span v-if="popupLevel >= 2" class="breadcrumb-separator">‚Üí</span>
          <span v-if="popupLevel >= 2" class="breadcrumb-item" @click="goToLevel2Direct">
            {{ level2Data?.employeeName || '–°–æ—Ç—Ä—É–¥–Ω–∏–∫' }}
          </span>
          <span v-if="popupLevel === 3" class="breadcrumb-separator">‚Üí</span>
          <span v-if="popupLevel === 3" class="breadcrumb-item active">
            {{ level3Data?.dateCategoryLabel || '–ì—Ä–∞–¥–∞—Ü–∏—è' }}
          </span>
        </div>
        
        <!-- Transition –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ -->
        <Transition name="level" mode="out-in">
          <!-- –£—Ä–æ–≤–µ–Ω—å 1: –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
          <div v-if="popupLevel === 1" key="level-1" class="level-1">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–≤–Ω—è 1 -->
          </div>
          
          <!-- –£—Ä–æ–≤–µ–Ω—å 2: –í—Ä–µ–º–µ–Ω–Ω—ã–µ –≥—Ä–∞–¥–∞—Ü–∏–∏ -->
          <div v-else-if="popupLevel === 2" key="level-2" class="level-2">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–≤–Ω—è 2 -->
          </div>
          
          <!-- –£—Ä–æ–≤–µ–Ω—å 3: –ó–∞–∫–∞–∑—á–∏–∫–∏ -->
          <div v-else-if="popupLevel === 3" key="level-3" class="level-3">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–≤–Ω—è 3 -->
          </div>
        </Transition>
      </div>
    </div>
  </Teleport>
</template>

<script setup>
import { ref, computed, watch } from 'vue';
import { 
  getEmployeeTicketsForStage,
  groupTicketsByDateCategory,
  groupTicketsByDepartment
} from '@/utils/graph-state/popupNavigationUtils.js';
import { useNotifications } from '@/composables/useNotifications.js';

const props = defineProps({
  isVisible: Boolean,
  stageName: String,
  stageId: String,        // –î–æ–±–∞–≤–∏—Ç—å
  totalCount: Number,
  employees: Array,
  others: Object | null,
  snapshot: Object | null,      // –î–æ–±–∞–≤–∏—Ç—å
  ticketDetails: Object | null  // –î–æ–±–∞–≤–∏—Ç—å
});

const emit = defineEmits(['close']);

const notifications = useNotifications();

// –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ø–∞–ø–∞
const popupLevel = ref(1);
const level1Data = ref(null);
const level2Data = ref(null);
const level3Data = ref(null);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
watch(() => props.isVisible, (newValue) => {
  if (newValue) {
    initializeLevel1();
  } else {
    resetPopup();
  }
});

// –§—É–Ω–∫—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
function initializeLevel1() { /* ... */ }
function goToLevel2(employee) { /* ... */ }
function goToLevel3(category) { /* ... */ }
function goBack() { /* ... */ }
function goToLevel1() { /* ... */ }
function goToLevel2Direct() { /* ... */ }
function resetPopup() { /* ... */ }
function close() { /* ... */ }

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤
function handleEmployeeClick(employee) { /* ... */ }
function handleCategoryClick(category) { /* ... */ }

// –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
function validateLevel1Data() { /* ... */ }
function validateBeforeNavigation(targetLevel) { /* ... */ }
function recoverFromError() { /* ... */ }
</script>
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª–Ω—ã–π –ø—É—Ç—å (1 ‚Üí 2 ‚Üí 3 ‚Üí 2 ‚Üí 1)

```javascript
// 1. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–ø–∞–ø–∞ (—É—Ä–æ–≤–µ–Ω—å 1)
popupLevel = 1
level1Data = { stageName: "–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ", ... }

// 2. –ö–ª–∏–∫ –Ω–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (1 ‚Üí 2)
goToLevel2(employee)
popupLevel = 2
level2Data = { employeeName: "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤", dateCategories: [...] }

// 3. –ö–ª–∏–∫ –Ω–∞ –≥—Ä–∞–¥–∞—Ü–∏—é (2 ‚Üí 3)
goToLevel3(category)
popupLevel = 3
level3Data = { departments: [...] }

// 4. –í–æ–∑–≤—Ä–∞—Ç –Ω–∞–∑–∞–¥ (3 ‚Üí 2)
goBack()
popupLevel = 2
level3Data = null

// 5. –í–æ–∑–≤—Ä–∞—Ç –Ω–∞–∑–∞–¥ (2 ‚Üí 1)
goBack()
popupLevel = 1
level2Data = null
level3Data = null
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ —á–µ—Ä–µ–∑ —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏

```javascript
// –ù–∞ —É—Ä–æ–≤–Ω–µ 3, –∫–ª–∏–∫ –Ω–∞ "–°—Ç–∞–¥–∏—è" –≤ —Ö–ª–µ–±–Ω—ã—Ö –∫—Ä–æ—à–∫–∞—Ö
goToLevel1()
popupLevel = 1
level2Data = null
level3Data = null

// –ù–∞ —É—Ä–æ–≤–Ω–µ 3, –∫–ª–∏–∫ –Ω–∞ "–°–æ—Ç—Ä—É–¥–Ω–∏–∫" –≤ —Ö–ª–µ–±–Ω—ã—Ö –∫—Ä–æ—à–∫–∞—Ö
goToLevel2Direct()
popupLevel = 2
level3Data = null
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```javascript
// –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2 –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è 1
if (!validateBeforeNavigation(2)) {
  // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É, –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å
  return;
}

// –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 3 –±–µ–∑ —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
if (category.count === 0) {
  // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å
  notifications.info('–ù–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤ –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏');
  return;
}
```

---

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è

```vue
<!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—Ä–æ–≤–Ω—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
<div class="level-indicator">
  <span :class="{ active: popupLevel === 1 }">1</span>
  <span class="separator">‚Üí</span>
  <span :class="{ active: popupLevel === 2 }">2</span>
  <span class="separator">‚Üí</span>
  <span :class="{ active: popupLevel === 3 }">3</span>
</div>
```

```css
.level-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 0;
  font-size: 12px;
  color: var(--b24-text-muted, #9ca3af);
}

.level-indicator span {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background-color: var(--b24-bg-light, #f3f4f6);
  color: var(--b24-text-muted, #9ca3af);
  font-weight: 600;
  transition: all 0.2s ease;
}

.level-indicator span.active {
  background-color: var(--b24-primary, #007bff);
  color: white;
}

.level-indicator .separator {
  width: auto;
  height: auto;
  background: transparent;
  color: var(--b24-text-muted, #9ca3af);
}
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `vue-app/src/components/graph-state/EmployeeDetailsModal.vue` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ø–∞–ø–∞
- `vue-app/src/components/graph-state/GraphStateChart.vue` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≥—Ä–∞—Ñ–∏–∫–∞
- `vue-app/src/utils/graph-state/popupNavigationUtils.js` ‚Äî —É—Ç–∏–ª–∏—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- `vue-app/src/composables/useNotifications.js` ‚Äî –∫–æ–º–ø–æ–∑–∞–±–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `DOCS/TASKS/TASK-033-02-level-2-implementation.md` ‚Äî —ç—Ç–∞–ø 2
- `DOCS/TASKS/TASK-033-03-level-3-implementation.md` ‚Äî —ç—Ç–∞–ø 3

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ —ç—Ç–∞–ø–∞ 4

- [ ] –ï–¥–∏–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ø–∞–ø–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö
- [ ] –§—É–Ω–∫—Ü–∏—è `goBack()` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- [ ] –ü—Ä—è–º—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —á–µ—Ä–µ–∑ —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–ª–∞–≤–Ω—ã–µ
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç GraphStateChart –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ props –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –ø–æ–ø–∞–ø
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ

---

## üîÑ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ó–∞–≤–∏—Å–∏—Ç –æ—Ç:**
- –≠—Ç–∞–ø 2 (TASK-033-02): –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è 2
- –≠—Ç–∞–ø 3 (TASK-033-03): –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è 3
- –≠—Ç–∞–ø 1 (TASK-033-01): –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤)

**–¢—Ä–µ–±—É–µ—Ç –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ç–∞–ø–∞:**
- –≠—Ç–∞–ø 5 (TASK-033-05): –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
  - –í—Å–µ —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ
  - –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- **2025-12-12 09:24 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç —ç—Ç–∞–ø–∞ 4
  - –î–æ–±–∞–≤–ª–µ–Ω—ã 5 –ø–æ–¥–∑–∞–¥–∞—á —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π
  - –û–ø–∏—Å–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ø–∞–ø–∞
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
  - –û–ø–∏—Å–∞–Ω—ã –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

---

**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js)  
**–î–∞—Ç–∞:** 2025-12-12 09:24 (UTC+3, –ë—Ä–µ—Å—Ç)





