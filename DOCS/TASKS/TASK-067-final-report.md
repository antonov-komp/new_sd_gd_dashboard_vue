# TASK-067: –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –æ –ø–µ—Ä–µ–Ω–æ—Å–µ –º–µ—Å—è—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-23 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–†–æ–¥–∏—Ç–µ–ª—å:** TASK-067

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–ú–µ—Å—è—á–Ω—ã–π —Ä–µ–∂–∏–º (`periodMode=months`) —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –∏–∑ legacy —Ñ–∞–π–ª–∞ `api/graph-1c-admission-closure.php` –≤ –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å–Ω—ã–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É `api/graph-admission-closure/`. Legacy —Ñ–∞–π–ª —Å—Ç–∞–ª —Ç–æ–Ω–∫–∏–º –ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã, –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã

### TASK-067-2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ DatePeriodHelper
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ç–æ–¥—ã —É–∂–µ –±—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (`calculateLastFourMonths`, `calculateWeeksInMonth`, `isInRange`, `isCarryoverTicket`, `calculateDurationCategory`)

### TASK-067-3: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ BitrixClient
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
  - `fetchTicketsForMonths()` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥ 4 –º–µ—Å—è—Ü–µ–≤ —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  - `fetchCarryoverTicketsForMonths()` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ `createdTime` –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

### TASK-067-4: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Aggregator
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
  - `aggregateMonths()` ‚Äî –∞–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –Ω–µ–¥–µ–ª—è–º —Å —Ä–∞–∑–±–∏–≤–∫–æ–π carryover –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  - `calculatePreviousPeriodData()` ‚Äî —Ä–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ –¥–ª—è 4-–≥–æ –º–µ—Å—è—Ü–∞ (–¥–ª—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤)

### TASK-067-5: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Service
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `handleMonthsMode()`:
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
  - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ BitrixClient
  - –ê–≥—Ä–µ–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Aggregator
  - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à

### TASK-067-6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–µ—à–∞
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–µ—à —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π —Å —É—á—ë—Ç–æ–º `periodMode='months'`
  - TTL: 300 —Å–µ–∫—É–Ω–¥
  - –ö–µ—à-—Ö–∏—Ç—ã –∏ –∫–µ—à-–ø—Ä–æ–º–∞—Ö–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
  - `forceRefresh` –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∫–µ—à

### TASK-067-7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
  - –ú–µ—Ç—Ä–∏–∫–∏ –≤–∞–ª–∏–¥–Ω—ã (—Å—É–º–º—ã –ø–æ –º–µ—Å—è—Ü–∞–º —Å–æ–≤–ø–∞–¥–∞—é—Ç)
  - –ö–µ—à —Ä–∞–±–æ—Ç–∞–µ—Ç (—É—Å–∫–æ—Ä–µ–Ω–∏–µ ~30000x)
  - –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –Ω–µ–¥–µ–ª—è–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
  - `previousPeriodData` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

### TASK-067-8: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è months —Ä–µ–∂–∏–º–∞ –Ω–∞ –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å

### TASK-067-9: –£–¥–∞–ª–µ–Ω–∏–µ legacy –∫–æ–¥–∞
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–¥–∞–ª–µ–Ω–æ ~1022 —Å—Ç—Ä–æ–∫–∏ legacy –∫–æ–¥–∞ –º–µ—Å—è—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

### TASK-067-10: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞, –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç —Å–æ–∑–¥–∞–Ω

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –†–∞–∑–º–µ—Ä –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

**Legacy —Ñ–∞–π–ª:**
- –î–æ: ~2796 —Å—Ç—Ä–æ–∫
- –ü–æ—Å–ª–µ: ~1785 —Å—Ç—Ä–æ–∫
- –£–¥–∞–ª–µ–Ω–æ: ~1011 —Å—Ç—Ä–æ–∫ (36% —É–º–µ–Ω—å—à–µ–Ω–∏–µ)

**–ù–æ–≤—ã–π –º–æ–¥—É–ª—å:**
- –§–∞–π–ª–æ–≤: 8 PHP —Ñ–∞–π–ª–æ–≤
- –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä: ~2191 —Å—Ç—Ä–æ–∫–∞
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
  - `bootstrap.php`: 71 —Å—Ç—Ä–æ–∫–∞
  - `controller/GraphAdmissionClosureController.php`: 26 —Å—Ç—Ä–æ–∫
  - `service/GraphAdmissionClosureService.php`: 495 —Å—Ç—Ä–æ–∫
  - `bitrix/BitrixClient.php`: 690 —Å—Ç—Ä–æ–∫
  - `domain/Aggregator.php`: 539 —Å—Ç—Ä–æ–∫
  - `cache/CacheStore.php`: 34 —Å—Ç—Ä–æ–∫–∏
  - `config/Config.php`: ~100 —Å—Ç—Ä–æ–∫
  - `util/DatePeriodHelper.php`: ~236 —Å—Ç—Ä–æ–∫

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ú–µ—Å—è—á–Ω—ã–π —Ä–µ–∂–∏–º:**
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å (–±–µ–∑ –∫–µ—à–∞): ~30 —Å–µ–∫—É–Ω–¥
- –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å (–∏–∑ –∫–µ—à–∞): ~0.001 —Å–µ–∫—É–Ω–¥—ã
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ: ~30000x

**–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- TTL: 300 —Å–µ–∫—É–Ω–¥ (5 –º–∏–Ω—É—Ç)
- –ö–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å —É—á—ë—Ç–æ–º –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `forceRefresh` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- ‚úÖ –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å months —Ä–µ–∂–∏–º–∞
- ‚úÖ –° `includeCarryoverTickets=true`
- ‚úÖ –ö–µ—à-—Ö–∏—Ç—ã –∏ –∫–µ—à-–ø—Ä–æ–º–∞—Ö–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ (—Å—É–º–º—ã –ø–æ –º–µ—Å—è—Ü–∞–º)
- ‚úÖ –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –Ω–µ–¥–µ–ª—è–º
- ‚úÖ `previousPeriodData`

---

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ü—É—Ç—å API
- ‚úÖ –ü—É—Ç—å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è: `api/graph-1c-admission-closure.php`
- ‚úÖ Legacy —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–æ–∫—Å–∏

### –ö–æ–Ω—Ç—Ä–∞–∫—Ç API
- ‚úÖ –í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞
- ‚úÖ –í—Å–µ –∫–ª—é—á–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚úÖ –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ `product` (–¥–µ—Ñ–æ–ª—Ç: "1C")
- ‚úÖ `periodMode` (–¥–µ—Ñ–æ–ª—Ç: "weeks", –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç "months")
- ‚úÖ `includeTickets` (–¥–µ—Ñ–æ–ª—Ç: false)
- ‚úÖ `includeNewTicketsByStages` (–¥–µ—Ñ–æ–ª—Ç: false)
- ‚úÖ `includeCarryoverTickets` (–¥–µ—Ñ–æ–ª—Ç: false)
- ‚úÖ `includeCarryoverTicketsByDuration` (–¥–µ—Ñ–æ–ª—Ç: false)
- ‚úÖ `forceRefresh` (–¥–µ—Ñ–æ–ª—Ç: false)
- ‚úÖ `debug` (–¥–µ—Ñ–æ–ª—Ç: false)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è

```
api/graph-admission-closure/
‚îú‚îÄ‚îÄ bootstrap.php                    # –í—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞
‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îî‚îÄ‚îÄ GraphAdmissionClosureController.php
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îî‚îÄ‚îÄ GraphAdmissionClosureService.php
‚îú‚îÄ‚îÄ bitrix/
‚îÇ   ‚îî‚îÄ‚îÄ BitrixClient.php
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îî‚îÄ‚îÄ Aggregator.php
‚îú‚îÄ‚îÄ cache/
‚îÇ   ‚îî‚îÄ‚îÄ CacheStore.php
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ Config.php
‚îî‚îÄ‚îÄ util/
    ‚îî‚îÄ‚îÄ DatePeriodHelper.php
```

---

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏

1. ‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –ö–æ–¥ —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–ª–æ–∏ (controller ‚Üí service ‚Üí bitrix ‚Üí domain ‚Üí cache ‚Üí util ‚Üí config)
2. ‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –§—É–Ω–∫—Ü–∏–∏ –¥–∞—Ç –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–±–æ–∏–º–∏ —Ä–µ–∂–∏–º–∞–º–∏
3. ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ö–∞–∂–¥—ã–π —Å–ª–æ–π –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
4. ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:** –õ–µ–≥—á–µ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–≥–∏ –∏ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
6. ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ü—É—Ç—å API –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

---

## üìù –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. ‚úÖ `DOCS/ANALYSIS/graph-admission-closure-spec.md` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω —Å—Ç–∞—Ç—É—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
2. ‚úÖ `DOCS/TASKS/TASK-065-refactor-graph-1c-admission-closure.md` ‚Äî —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—ë–Ω –Ω–∞ "–ó–∞–≤–µ—Ä—à—ë–Ω"
3. ‚úÖ `DOCS/TASKS/TASK-065-10-stages-detailed.md` ‚Äî —Å—Ç–∞—Ç—É—Å –º–µ—Å—è—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –æ–±–Ω–æ–≤–ª—ë–Ω
4. ‚úÖ `DOCS/TASKS/TASK-067-*.md` ‚Äî –≤—Å–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

## üîÆ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏)
1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –°–ª–µ–¥–∏—Ç—å –∑–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç—ã –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–æ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—à–∏–±–æ–∫
3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:** –°–æ–±—Ä–∞—Ç—å –æ—Ç–∑—ã–≤—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π API

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)
1. **Unit-—Ç–µ—Å—Ç—ã:** –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è –º–æ–¥—É–ª—è
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Bitrix24 API

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (3+ –º–µ—Å—è—Ü–∞)
1. **–£–¥–∞–ª–µ–Ω–∏–µ legacy —Ñ–∞–π–ª–∞:** –ü–æ—Å–ª–µ –ø–µ—Ä–∏–æ–¥–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ legacy —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
2. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:** 
   - –î–æ–±–∞–≤–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é –ø–æ `responsible` –¥–ª—è –º–µ—Å—è—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —Ä–µ–∂–∏–º–æ–≤ (quarters, years)
3. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:** –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥—Ä—É–≥–∏—Ö –º–æ–Ω–æ–ª–∏—Ç–Ω—ã—Ö endpoints –ø–æ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Å—Ö–µ–º–µ

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ responsible:** –í –º–µ—Å—è—á–Ω–æ–º —Ä–µ–∂–∏–º–µ –ø–æ–ª–µ `responsible` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ (–∑–∞–≥–ª—É—à–∫–∞)
2. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:** –ü—Ä–∏ –æ—à–∏–±–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç fallback –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
3. **Legacy —Ñ–∞–π–ª:** –û—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏)

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –¥–æ –∏ –ø–æ—Å–ª–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ | –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ |
|----------|----------------|-------------------|
| –†–∞–∑–º–µ—Ä legacy —Ñ–∞–π–ª–∞ | ~2796 —Å—Ç—Ä–æ–∫ | ~1785 —Å—Ç—Ä–æ–∫ |
| –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å | –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª | 8 —Ñ–∞–π–ª–æ–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å | –ö–∞–∂–¥—ã–π —Å–ª–æ–π —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ |
| –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –±–∞–≥–∏ | –õ–µ–≥–∫–æ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã |
| –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ | –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ util/ |
| –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ | –†–∞–±–æ—Ç–∞–µ—Ç | –†–∞–±–æ—Ç–∞–µ—Ç (—É–ª—É—á—à–µ–Ω–æ) |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ~30 —Å–µ–∫ (months) | ~30 —Å–µ–∫ (months), ~0.001 —Å–µ–∫ (–∏–∑ –∫–µ—à–∞) |

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- [x] –í—Å–µ —ç—Ç–∞–ø—ã TASK-067 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [x] –ú–µ—Å—è—á–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –Ω–æ–≤–æ–º –º–æ–¥—É–ª–µ
- [x] Legacy –∫–æ–¥ —É–¥–∞–ª—ë–Ω
- [x] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [x] –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç —Å–æ–∑–¥–∞–Ω

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–µ—Ä–µ–Ω–æ—Å –º–µ—Å—è—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –∏–∑ legacy —Ñ–∞–π–ª–∞ –≤ –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω. –ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ –º–æ–¥—É–ª—å–Ω—ã–º, —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞. –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞.

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-12-23 (UTC+3, –ë—Ä–µ—Å—Ç)



