# TASK-034-02: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-12 11:51 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js)  
**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** TASK-034 (–≠—Ç–∞–ø 2)

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–û–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–æ–ª–µ–π —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `TicketCard.vue`. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ snapshot –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π, –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è.

---

## üéØ –¶–µ–ª—å

1. –ò–∑—É—á–∏—Ç—å –≤—Å–µ –ø–æ–ª—è, —Ç—Ä–µ–±—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `TicketCard.vue`
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –ø–æ–ª—è –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ snapshot
3. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API

---

## üîç –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç TicketCard.vue

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `vue-app/src/components/dashboard/TicketCard.vue`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞–Ω–±–∞–Ω-—Ä–µ–∂–∏–º–µ –¥–∞—à–±–æ—Ä–¥–∞ 1–°
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –≤ —É—Ä–æ–≤–Ω–µ 4 –ø–æ–ø–∞–ø–∞ (–Ω–æ–≤–æ–µ)

**Props:**
- `ticket` (Object, required) ‚Äî –æ–±—ä–µ–∫—Ç —Ç–∏–∫–µ—Ç–∞
- `draggable` (Boolean, default: false) ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è –ø–æ–ø–∞–ø–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö snapshot

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∏–∫–µ—Ç–∞ –≤ snapshot:**
```javascript
{
  id: Number,                    // ‚úÖ –ï—Å—Ç—å
  title: String,                 // ‚úÖ –ï—Å—Ç—å
  assignedTo: Object,            // ‚úÖ –ï—Å—Ç—å
  createdAt: String,             // ‚úÖ –ï—Å—Ç—å
  updatedAt: String,             // ‚úÖ –ï—Å—Ç—å
  stageId: String | null,        // ‚úÖ –ï—Å—Ç—å (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ TASK-033)
  departmentHead: String | null, // ‚úÖ –ï—Å—Ç—å (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ TASK-033)
  departmentHeadFull: String | null, // ‚úÖ –ï—Å—Ç—å (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ TASK-033)
  priorityId: String | null,     // ‚úÖ –ï—Å—Ç—å (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ TASK-033)
  priorityLabel: String | null,  // ‚úÖ –ï—Å—Ç—å (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ TASK-033)
  service: Object | null,        // ‚úÖ –ï—Å—Ç—å (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ TASK-033)
  serviceLabel: String | null    // ‚úÖ –ï—Å—Ç—å (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ TASK-033)
}
```

### –ú–∞–ø–ø–µ—Ä —Ç–∏–∫–µ—Ç–æ–≤

**–§–∞–π–ª:** `vue-app/src/services/dashboard-sector-1c/mappers/ticket-mapper.js`  
**–§—É–Ω–∫—Ü–∏—è:** `mapTicket(bitrixTicket)`

**–°–æ–∑–¥–∞—ë—Ç –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∏–∫–µ—Ç–∞:**
- –í—Å–µ –ø–æ–ª—è –¥–ª—è `TicketCard.vue`
- –¶–≤–µ—Ç–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π

---

## üìù –ó–∞–¥–∞—á–∏

### –ó–∞–¥–∞—á–∞ 2.1: –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π TicketCard.vue

**–¶–µ–ª—å:** –ò–∑—É—á–∏—Ç—å –≤—Å–µ –ø–æ–ª—è, —Ç—Ä–µ–±—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `TicketCard.vue`, –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –ø–æ–ª—è –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ snapshot.

#### 2.1.1. –ò–∑—É—á–µ–Ω–∏–µ props –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ TicketCard.vue

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª `vue-app/src/components/dashboard/TicketCard.vue`
2. –ò–∑—É—á–∏—Ç—å JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ props –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
3. –ò–∑—É—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π –≤ computed-—Å–≤–æ–π—Å—Ç–≤–∞—Ö
4. –°–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª–µ–π

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ —Ç–∏–∫–µ—Ç–∞ (–∏–∑ JSDoc):**
```javascript
{
  // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
  id: Number,                    // ID —Ç–∏–∫–µ—Ç–∞
  title: String,                 // –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ (fallback, –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ufSubject)
  
  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  ufSubject: String | null,      // –¢–µ–º–∞ —Ç–∏–∫–µ—Ç–∞ –∏–∑ UF_SUBJECT (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
  
  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
  priorityId: String,            // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π id –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (–∏–∑ UF_CRM_7_UF_PRIORITY)
  priorityLabel: String,         // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
  priorityColors: Object,        // –¶–≤–µ—Ç–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ { color, backgroundColor, textColor }
  priority: String,              // legacy-–ø–æ–ª–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (id), —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  
  // –°–µ—Ä–≤–∏—Å
  service: Object,               // –û–±—ä–µ–∫—Ç —Å–µ—Ä–≤–∏—Å–∞
  serviceLabel: String,          // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
  serviceColors: Object,         // –¶–≤–µ—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞ { color, backgroundColor, textColor }
  
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
  status: String,                // –°—Ç–∞—Ç—É—Å (in_progress, new, done, pending)
  actionStr: String | null,      // –ó–Ω–∞—á–µ–Ω–∏–µ UF_ACTION_STR (–¥–∏–Ω–∞–º–∏—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  departmentHead: String | null, // –û—Ç–¥–µ–ª –∑–∞–∫–∞–∑—á–∏–∫–∞ –∏–∑ UF_CRM_7_DEPARTMENT_HEAD (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ 17 —Å–∏–º–≤–æ–ª–∞–º–∏, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  description: String,           // –û–ø–∏—Å–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  createdAt: String              // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (ISO)
}
```

#### 2.1.2. –ò–∑—É—á–µ–Ω–∏–µ computed-—Å–≤–æ–π—Å—Ç–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ò–∑—É—á–∏—Ç—å computed-—Å–≤–æ–π—Å—Ç–≤–∞ –≤ `setup()` —Ñ—É–Ω–∫—Ü–∏–∏:
   - `priorityData` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `priorityLabel`, `priorityColors`
   - `serviceData` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `service`, `serviceLabel`, `serviceColors`
   - `actionStrValue` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `actionStr` –∏–ª–∏ `ufActionStr`
   - `formattedCreatedDate` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `createdAt`
   - `dateAccentCategory` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `createdAt`

2. –ò–∑—É—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π –≤ —à–∞–±–ª–æ–Ω–µ:
   - `ticket.ufSubject || ticket.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫
   - `ticket.departmentHead` ‚Äî –æ—Ç–¥–µ–ª –∑–∞–∫–∞–∑—á–∏–∫–∞
   - `ticket.description` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –ø–æ–ª–µ–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ/–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ)
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ fallback-–∑–Ω–∞—á–µ–Ω–∏–π

#### 2.1.3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥–∞–Ω–Ω—ã–º–∏ snapshot

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°—Ä–∞–≤–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π –∏–∑ TicketCard.vue —Å –ø–æ–ª—è–º–∏ –≤ snapshot
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è:
   ```javascript
   // –ü–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ snapshot:
   {
     ufSubject: String | null,      // ‚ùì –ú–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
     priorityColors: Object,        // ‚ùì –ú–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å (–Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
     serviceColors: Object,         // ‚ùì –ú–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å (–Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
     actionStr: String | null,      // ‚ùì –ú–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
     description: String            // ‚ùì –ú–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
   }
   ```

2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
   - `priorityColors` ‚Äî –∏–∑ `priority-config.js` (—Ñ—É–Ω–∫—Ü–∏—è `getPriorityColors()`)
   - `serviceColors` ‚Äî –∏–∑ `service-config.js` (—Ñ—É–Ω–∫—Ü–∏—è `getServiceColors()`)

3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ API:
   - `ufSubject` ‚Äî –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ snapshot
   - `actionStr` ‚Äî –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ snapshot
   - `description` ‚Äî –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ snapshot

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–ø–∏—Å–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ–≥–¥–∞)
- –°–ø–∏—Å–æ–∫ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (–º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å)
- –°–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –°–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ API

#### 2.1.4. –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª–µ–π

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª–µ–π:

| –ü–æ–ª–µ TicketCard.vue | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | Fallback |
|---------------------|----------|--------------|----------|
| `id` | snapshot | ‚úÖ –î–∞ | - |
| `title` | snapshot | ‚úÖ –î–∞ | '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è' |
| `ufSubject` | snapshot / API | ‚ùå –ù–µ—Ç | `title` |
| `priorityId` | snapshot | ‚úÖ –î–∞ | 'unknown' |
| `priorityLabel` | snapshot | ‚úÖ –î–∞ | '–ù–µ —É–∫–∞–∑–∞–Ω–æ' |
| `priorityColors` | config | ‚úÖ –î–∞ | NEUTRAL_COLORS |
| `service` | snapshot | ‚ùå –ù–µ—Ç | DEFAULT_SERVICE |
| `serviceLabel` | snapshot | ‚ùå –ù–µ—Ç | '–ù–µ —É–∫–∞–∑–∞–Ω–æ' |
| `serviceColors` | config | ‚úÖ –î–∞ | NEUTRAL_SERVICE_COLORS |
| `actionStr` | snapshot / API | ‚ùå –ù–µ—Ç | null |
| `departmentHead` | snapshot | ‚ùå –ù–µ—Ç | null |
| `description` | snapshot / API | ‚ùå –ù–µ—Ç | '' |
| `createdAt` | snapshot | ‚úÖ –î–∞ | - |

2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª–µ–π —Å–æ–∑–¥–∞–Ω–∞
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —Å–æ–∑–¥–∞–Ω–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ –∑–∞–¥–∞—á–∏ 2.1:**
- [ ] –í—Å–µ –ø–æ–ª—è TicketCard.vue –∏–∑—É—á–µ–Ω—ã –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥–∞–Ω–Ω—ã–º–∏ snapshot –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- [ ] –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª–µ–π —Å–æ–∑–¥–∞–Ω–∞
- [ ] –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞

---

### –ó–∞–¥–∞—á–∞ 2.2: –§—É–Ω–∫—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `prepareTicketsForDisplay()`, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ snapshot –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π, –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è.

#### 2.2.1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —É—Ç–∏–ª–∏—Ç

**–§–∞–π–ª:** `vue-app/src/utils/graph-state/ticketListUtils.js` (—Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–∑ —ç—Ç–∞–ø–∞ 1)

**–ò–º–ø–æ—Ä—Ç—ã:**
```javascript
import { getPriorityColors } from '@/config/priority-config.js';
import { getServiceColors, getDefaultService } from '@/config/service-config.js';
import TicketDetailsService from '@/services/graph-state/TicketDetailsService.js';
```

#### 2.2.2. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤

**–§—É–Ω–∫—Ü–∏—è:**
```javascript
/**
 * –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ TicketCard.vue
 * 
 * –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ snapshot –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π —á–µ—Ä–µ–∑ API,
 * –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–µ TicketCard.vue,
 * –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è (fallback –∑–Ω–∞—á–µ–Ω–∏—è).
 * 
 * @param {Array} tickets - –ú–∞—Å—Å–∏–≤ —Ç–∏–∫–µ—Ç–æ–≤ –∏–∑ snapshot –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
 * @param {Object|null} snapshot - –°–ª–µ–ø–æ–∫ —Å –¥–∞–Ω–Ω—ã–º–∏ (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
 * @param {Object|null} ticketDetails - –î–µ—Ç–∞–ª–∏ —Ç–∏–∫–µ—Ç–æ–≤ (–µ—Å–ª–∏ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ API)
 * @returns {Promise<Array>} –ú–∞—Å—Å–∏–≤ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
 * 
 * @example
 * const preparedTickets = await prepareTicketsForDisplay(tickets, snapshot, null);
 */
export async function prepareTicketsForDisplay(tickets, snapshot = null, ticketDetails = null) {
  if (!tickets || tickets.length === 0) {
    return [];
  }

  // –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ —Ç–∏–∫–µ—Ç—ã –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ API
  const ticketsNeedingDetails = identifyTicketsNeedingDetails(tickets);
  
  // –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
  let loadedDetails = ticketDetails || null;
  if (ticketsNeedingDetails.length > 0 && !ticketDetails) {
    const ticketIds = ticketsNeedingDetails.map(t => t.id).filter(id => id);
    if (ticketIds.length > 0) {
      try {
        loadedDetails = await TicketDetailsService.getTicketsDetails(ticketIds);
      } catch (error) {
        console.warn('[ticketListUtils] Failed to load ticket details:', error);
        loadedDetails = null;
      }
    }
  }

  // –°–æ–∑–¥–∞—Ç—å Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –¥–µ—Ç–∞–ª—è–º
  const detailsMap = createDetailsMap(loadedDetails);

  // –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–∞–∂–¥—ã–π —Ç–∏–∫–µ—Ç
  const preparedTickets = tickets.map(ticket => {
    return prepareSingleTicket(ticket, detailsMap);
  });

  return preparedTickets;
}
```

#### 2.2.3. –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏

**–§—É–Ω–∫—Ü–∏—è:**
```javascript
/**
 * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ —Ç–∏–∫–µ—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ—Ç–∞–ª–µ–π —á–µ—Ä–µ–∑ API
 * 
 * @param {Array} tickets - –ú–∞—Å—Å–∏–≤ —Ç–∏–∫–µ—Ç–æ–≤
 * @returns {Array} –ú–∞—Å—Å–∏–≤ —Ç–∏–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω—ã –¥–µ—Ç–∞–ª–∏
 */
function identifyTicketsNeedingDetails(tickets) {
  return tickets.filter(ticket => {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ–π
    const hasUfSubject = ticket.ufSubject !== null && ticket.ufSubject !== undefined;
    const hasActionStr = ticket.actionStr !== null && ticket.actionStr !== undefined;
    const hasDescription = ticket.description !== null && ticket.description !== undefined;
    
    // –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω—É–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞
    return !hasUfSubject || !hasActionStr || !hasDescription;
  });
}
```

#### 2.2.4. –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è Map –¥–µ—Ç–∞–ª–µ–π

**–§—É–Ω–∫—Ü–∏—è:**
```javascript
/**
 * –°–æ–∑–¥–∞—Ç—å Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–µ—Ç–∞–ª—è–º —Ç–∏–∫–µ—Ç–æ–≤
 * 
 * @param {Array|Object|null} ticketDetails - –î–µ—Ç–∞–ª–∏ —Ç–∏–∫–µ—Ç–æ–≤ (–º–∞—Å—Å–∏–≤ –∏–ª–∏ –æ–±—ä–µ–∫—Ç)
 * @returns {Map} Map —Å –∫–ª—é—á–æ–º ID —Ç–∏–∫–µ—Ç–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º –¥–µ—Ç–∞–ª–µ–π
 */
function createDetailsMap(ticketDetails) {
  const detailsMap = new Map();

  if (!ticketDetails) {
    return detailsMap;
  }

  // –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω –º–∞—Å—Å–∏–≤
  if (Array.isArray(ticketDetails)) {
    ticketDetails.forEach(detail => {
      if (detail && detail.id) {
        detailsMap.set(detail.id, detail);
      }
    });
  }
  // –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω –æ–±—ä–µ–∫—Ç (–∫–ª—é—á - ID —Ç–∏–∫–µ—Ç–∞)
  else if (typeof ticketDetails === 'object') {
    Object.keys(ticketDetails).forEach(key => {
      const detail = ticketDetails[key];
      if (detail && detail.id) {
        detailsMap.set(detail.id, detail);
      }
    });
  }

  return detailsMap;
}
```

#### 2.2.5. –§—É–Ω–∫—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–¥–Ω–æ–≥–æ —Ç–∏–∫–µ—Ç–∞

**–§—É–Ω–∫—Ü–∏—è:**
```javascript
/**
 * –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ–¥–∏–Ω —Ç–∏–∫–µ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
 * 
 * @param {Object} ticket - –¢–∏–∫–µ—Ç –∏–∑ snapshot –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
 * @param {Map} detailsMap - Map —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ç–∏–∫–µ—Ç–æ–≤ (–∏–∑ API)
 * @returns {Object} –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π —Ç–∏–∫–µ—Ç –¥–ª—è TicketCard.vue
 */
function prepareSingleTicket(ticket, detailsMap) {
  // –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∏–∑ Map (–µ—Å–ª–∏ –µ—Å—Ç—å)
  const details = detailsMap.get(ticket.id) || null;

  // –ë–∞–∑–æ–≤—ã–µ –ø–æ–ª—è (–≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –≤ snapshot)
  const prepared = {
    id: ticket.id,
    title: ticket.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è',
    createdAt: ticket.createdAt || ticket.createdTime || '',
    updatedAt: ticket.updatedAt || ticket.updatedTime || ticket.modifiedAt || ''
  };

  // ufSubject (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
  prepared.ufSubject = details?.ufSubject || ticket.ufSubject || null;

  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
  const priorityId = details?.priorityId || ticket.priorityId || 'unknown';
  const priorityLabel = details?.priorityLabel || ticket.priorityLabel || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
  
  // –ü–æ–ª—É—á–∏—Ç—å —Ü–≤–µ—Ç–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  const priorityColors = getPriorityColors(priorityId);
  
  prepared.priorityId = priorityId;
  prepared.priorityLabel = priorityLabel;
  prepared.priorityColors = priorityColors;
  prepared.priority = priorityId; // legacy –ø–æ–ª–µ

  // –°–µ—Ä–≤–∏—Å
  const service = details?.service || ticket.service || getDefaultService();
  const serviceLabel = details?.serviceLabel || ticket.serviceLabel || service.label || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
  
  // –ü–æ–ª—É—á–∏—Ç—å —Ü–≤–µ—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  const serviceColors = getServiceColors(service);
  
  prepared.service = service;
  prepared.serviceLabel = serviceLabel;
  prepared.serviceColors = serviceColors;

  // actionStr (UF_ACTION_STR)
  prepared.actionStr = details?.actionStr || ticket.actionStr || ticket.ufActionStr || null;
  prepared.ufActionStr = prepared.actionStr; // –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

  // departmentHead (—É–∂–µ –µ—Å—Ç—å –≤ snapshot, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º)
  prepared.departmentHead = details?.departmentHead || ticket.departmentHead || null;
  prepared.departmentHeadFull = details?.departmentHeadFull || ticket.departmentHeadFull || ticket.departmentHead || null;

  // description
  prepared.description = details?.description || ticket.description || ticket.comments || '';

  // assignedTo (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  prepared.assignedTo = ticket.assignedTo || null;
  prepared.assigneeId = ticket.assigneeId || (ticket.assignedTo?.id || null);

  // stageId (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  prepared.stageId = ticket.stageId || null;

  // status (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ stageId, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
  if (!prepared.status && prepared.stageId) {
    prepared.status = mapStatus(prepared.stageId);
  } else {
    prepared.status = ticket.status || 'new';
  }

  return prepared;
}
```

#### 2.2.6. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è mapStatus

**–§—É–Ω–∫—Ü–∏—è:**
```javascript
/**
 * –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –∏–∑ stageId
 * 
 * @param {String} stageId - ID —Å—Ç–∞–¥–∏–∏
 * @returns {String} –°—Ç–∞—Ç—É—Å —Ç–∏–∫–µ—Ç–∞
 */
function mapStatus(stageId) {
  // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
  if (!stageId) {
    return 'new';
  }
  
  // –ï—Å–ª–∏ —Å—Ç–∞–¥–∏—è –≤ —Ä–∞–±–æ—Ç–µ - —Å—Ç–∞—Ç—É—Å in_progress
  if (stageId === 'review' || stageId === 'execution') {
    return 'in_progress';
  }
  
  // –ï—Å–ª–∏ —Å—Ç–∞–¥–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - —Å—Ç–∞—Ç—É—Å done
  if (stageId === 'done' || stageId === 'closed') {
    return 'done';
  }
  
  return 'new';
}
```

#### 2.2.7. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π (fallback –∑–Ω–∞—á–µ–Ω–∏—è)

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è fallback:**
```javascript
/**
 * –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è fallback
 */
const NEUTRAL_COLORS = {
  color: '#ced4da',
  backgroundColor: '#f1f3f5',
  textColor: '#6c757d'
};

const NEUTRAL_SERVICE_COLORS = {
  color: '#ced4da',
  backgroundColor: '#f8f9fa',
  textColor: '#6c757d'
};
```

**–õ–æ–≥–∏–∫–∞ fallback:**
- –ï—Å–ª–∏ `ufSubject` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `title`
- –ï—Å–ª–∏ `title` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `'–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'`
- –ï—Å–ª–∏ `priorityColors` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `NEUTRAL_COLORS`
- –ï—Å–ª–∏ `serviceColors` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `NEUTRAL_SERVICE_COLORS`
- –ï—Å–ª–∏ `actionStr` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí `null` (–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è)
- –ï—Å–ª–∏ `description` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí `''` (–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è)
- –ï—Å–ª–∏ `departmentHead` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí `null` (–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ –∑–∞–¥–∞—á–∏ 2.2:**
- [ ] –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è Map –¥–µ—Ç–∞–ª–µ–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–¥–Ω–æ–≥–æ —Ç–∏–∫–µ—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Fallback –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

### –ó–∞–¥–∞—á–∞ 2.3: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

#### 2.3.1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TicketDetailsService

**–§–∞–π–ª:** `vue-app/src/services/graph-state/TicketDetailsService.js`

**–ú–µ—Ç–æ–¥—ã:**
- `getTicketDetails(ticketId)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –æ–¥–Ω–æ–≥–æ —Ç–∏–∫–µ—Ç–∞
- `getTicketsDetails(ticketIds)` ‚Äî –±–∞—Ç—á-–∑–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Map)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞–ø–ø–µ—Ä–∞ `mapTicket()` –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

#### 2.3.2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `prepareTicketsForDisplay`:**
```javascript
export async function prepareTicketsForDisplay(tickets, snapshot = null, ticketDetails = null) {
  if (!tickets || tickets.length === 0) {
    return [];
  }

  // –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ —Ç–∏–∫–µ—Ç—ã –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ API
  const ticketsNeedingDetails = identifyTicketsNeedingDetails(tickets);
  
  console.log('[ticketListUtils] Tickets needing details:', {
    total: tickets.length,
    needingDetails: ticketsNeedingDetails.length,
    alreadyHaveDetails: tickets.length - ticketsNeedingDetails.length
  });

  // –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
  let loadedDetails = ticketDetails || null;
  if (ticketsNeedingDetails.length > 0 && !ticketDetails) {
    const ticketIds = ticketsNeedingDetails.map(t => t.id).filter(id => id);
    
    if (ticketIds.length > 0) {
      try {
        console.log('[ticketListUtils] Loading ticket details via API:', {
          ticketIdsCount: ticketIds.length,
          ticketIdsSample: ticketIds.slice(0, 5)
        });
        
        loadedDetails = await TicketDetailsService.getTicketsDetails(ticketIds);
        
        console.log('[ticketListUtils] Ticket details loaded:', {
          loadedCount: loadedDetails?.length || 0,
          sampleTicket: loadedDetails?.[0] ? {
            id: loadedDetails[0].id,
            hasUfSubject: !!loadedDetails[0].ufSubject,
            hasActionStr: !!loadedDetails[0].actionStr,
            hasDescription: !!loadedDetails[0].description
          } : null
        });
      } catch (error) {
        console.warn('[ticketListUtils] Failed to load ticket details:', error);
        console.error('[ticketListUtils] Error details:', {
          message: error.message,
          stack: error.stack,
          ticketIdsCount: ticketIds.length
        });
        loadedDetails = null;
      }
    }
  }

  // –°–æ–∑–¥–∞—Ç—å Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –¥–µ—Ç–∞–ª—è–º
  const detailsMap = createDetailsMap(loadedDetails);

  // –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–∞–∂–¥—ã–π —Ç–∏–∫–µ—Ç
  const preparedTickets = tickets.map(ticket => {
    return prepareSingleTicket(ticket, detailsMap);
  });

  return preparedTickets;
}
```

#### 2.3.3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–µ–π –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
2. –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–∏–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω—ã –¥–µ—Ç–∞–ª–∏
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à TicketDetailsService
4. –ë–∞—Ç—á-–∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```javascript
function identifyTicketsNeedingDetails(tickets) {
  return tickets.filter(ticket => {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ–π
    // –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω—É–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞
    
    const needsUfSubject = !ticket.ufSubject || ticket.ufSubject === '';
    const needsActionStr = ticket.actionStr === null || ticket.actionStr === undefined;
    const needsDescription = !ticket.description || ticket.description === '';
    
    return needsUfSubject || needsActionStr || needsDescription;
  });
}
```

#### 2.3.4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:**
1. –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ snapshot
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π
3. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
4. –ù–µ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
try {
  loadedDetails = await TicketDetailsService.getTicketsDetails(ticketIds);
} catch (error) {
  console.warn('[ticketListUtils] Failed to load ticket details, using snapshot data:', error);
  // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ snapshot
  loadedDetails = null;
}
```

#### 2.3.5. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- TicketDetailsService —É–∂–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ö–µ—à —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Map –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–∞
- –ö–µ—à –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–º–µ—Ç–æ–¥ `clearCache()`)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–µ—à–∞
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `ticketListUtils.js`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ –∑–∞–¥–∞—á–∏ 2.3:**
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üìö –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã

- `vue-app/src/components/dashboard/TicketCard.vue` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–∏–∫–µ—Ç–∞
- `vue-app/src/services/graph-state/TicketDetailsService.js` ‚Äî —Å–µ—Ä–≤–∏—Å –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ—Ç–∞–ª–µ–π
- `vue-app/src/services/dashboard-sector-1c/mappers/ticket-mapper.js` ‚Äî –º–∞–ø–ø–µ—Ä —Ç–∏–∫–µ—Ç–æ–≤
- `vue-app/src/config/priority-config.js` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
- `vue-app/src/config/service-config.js` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

- `vue-app/src/utils/graph-state/ticketListUtils.js` ‚Äî —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–∏–∫–µ—Ç–æ–≤ (—Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

### –ò–º–ø–æ—Ä—Ç—ã

```javascript
import { getPriorityColors } from '@/config/priority-config.js';
import { getServiceColors, getDefaultService } from '@/config/service-config.js';
import TicketDetailsService from '@/services/graph-state/TicketDetailsService.js';
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ —ç—Ç–∞–ø–∞ 2

- [x] –í—Å–µ –ø–æ–ª—è TicketCard.vue –∏–∑—É—á–µ–Ω—ã –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [x] –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª–µ–π —Å–æ–∑–¥–∞–Ω–∞
- [x] –§—É–Ω–∫—Ü–∏—è `prepareTicketsForDisplay()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [x] –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [x] –§—É–Ω–∫—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–¥–Ω–æ–≥–æ —Ç–∏–∫–µ—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [x] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- [x] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ JSDoc –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ (2025-12-12, UTC+3, –ë—Ä–µ—Å—Ç)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –°–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ —Ç–∏–∫–µ—Ç–æ–≤ —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ snapshot
2. –í—ã–∑–≤–∞—Ç—å `prepareTicketsForDisplay()`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —Ç–∏–∫–µ—Ç—ã –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- –¶–≤–µ—Ç–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –¢–µ—Å—Ç 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –°–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ —Ç–∏–∫–µ—Ç–æ–≤ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏ (ufSubject, actionStr, description)
2. –í—ã–∑–≤–∞—Ç—å `prepareTicketsForDisplay()`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ API

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ API
- Fallback –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –¥–ª—è –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å
- –í—Å–µ —Ç–∏–∫–µ—Ç—ã –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –¢–µ—Å—Ç 3: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å –æ—à–∏–±–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –°–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ —Ç–∏–∫–µ—Ç–æ–≤ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏
2. –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É API
3. –í—ã–∑–≤–∞—Ç—å `prepareTicketsForDisplay()`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ snapshot

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ snapshot
- Fallback –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- –ü—Ä–æ—Ü–µ—Å—Å –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è

### –¢–µ—Å—Ç 4: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –ø–µ—Ä–≤—ã–π —Ä–∞–∑ (–∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ API)
2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ –∂–µ —Ç–∏–∫–µ—Ç—ã –≤—Ç–æ—Ä–æ–π —Ä–∞–∑
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–µ—à–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ API
- –ü—Ä–∏ –≤—Ç–æ—Ä–æ–º –≤—ã–∑–æ–≤–µ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–µ—à–∞
- API –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- **2025-12-12 11:51 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω–∞ –∑–∞–¥–∞—á–∞ TASK-034-02
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã 3 –ø–æ–¥–∑–∞–¥–∞—á–∏ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —à–∞–≥–∞–º–∏
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
  - –û–ø–∏—Å–∞–Ω—ã –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ –∏ —Ç–µ—Å—Ç—ã

- **2025-12-12 (UTC+3, –ë—Ä–µ—Å—Ç):** –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∑–∞–¥–∞—á–∞ TASK-034-02
  - –†–∞—Å—à–∏—Ä–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `prepareTicketsForDisplay()` –≤ `ticketListUtils.js`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `identifyTicketsNeedingDetails()` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createDetailsMap()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Map —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ç–∏–∫–µ—Ç–æ–≤
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `prepareSingleTicket()` –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–¥–Ω–æ–≥–æ —Ç–∏–∫–µ—Ç–∞:
    - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ snapshot –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π
    - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π —Å fallback –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
    - –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –∏–∑ stageId
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `TicketDetailsService`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ snapshot)
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤ (fallback)
  - –í—Å–µ —Ç–∏–∫–µ—Ç—ã —Ç–µ–ø–µ—Ä—å –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ `TicketCard.vue`

---

**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js)






