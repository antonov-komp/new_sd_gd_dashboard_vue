# TASK-086: Добавление кнопки "Главная" в хлебные крошки дашбордов

**Дата создания:** 2026-01-10 12:00 (UTC+3, Брест)

**Статус:** Черновик

**Приоритет:** Средний

**Исполнитель:** Bitrix24 Vue.js Разработчик

---

## Цель

Добавить кнопку "Главная" в компонент хлебных крошек (breadcrumbs) во всех основных дашбордах системы: Сектор 1С, График состояния, График приема и закрытий, и Режим трудозатрат. Кнопка должна обеспечивать быстрый возврат на главную страницу приложения.

## Контекст задачи

В текущей реализации дашбордов хлебные крошки отображают только иерархию навигации внутри модуля, но отсутствует возможность быстрого возврата на главную страницу. Это создает неудобство для пользователей, которые работают с несколькими дашбордами и часто нуждаются в возврате к основному меню.

Задача затрагивает четыре ключевых дашборда:
- DashboardSector1C (Сектор 1С)
- GraphStateDashboard (График состояния)
- GraphAdmissionClosureDashboard (График приема и закрытий)
- TicketsTimeTrackingDashboard (Режим трудозатрат)

Реализация должна быть унифицирована для всех модулей с сохранением существующего дизайна и функциональности.

---

## Модули и компоненты

### Основные компоненты для модификации:

1. **DashboardSector1C.vue**
   - Расположение: `vue-app/src/components/sector-1c/DashboardSector1C.vue`
   - Компонент хлебных крошек: `Breadcrumbs.vue` (внутри компонента)

2. **GraphStateDashboard.vue**
   - Расположение: `vue-app/src/components/graph-state/GraphStateDashboard.vue`
   - Компонент хлебных крошек: встроенный или отдельный компонент

3. **GraphAdmissionClosureDashboard.vue**
   - Расположение: `vue-app/src/components/graph-admission-closure/GraphAdmissionClosureDashboard.vue`
   - Компонент хлебных крошек: встроенный

4. **TicketsTimeTrackingDashboard.vue**
   - Расположение: `vue-app/src/components/tickets-time-tracking/TicketsTimeTrackingDashboard.vue`
   - Компонент хлебных крошек: встроенный

### Общие компоненты:

- **Breadcrumbs.vue** (если используется общий компонент)
- **Router** для навигации к главной странице

---

## Зависимости

### Жесткие зависимости:
- Vue Router (для навигации)
- Существующие компоненты дашбордов
- Главная страница приложения (маршрут `/` или `/dashboard`)

### Мягкие зависимости:
- Общий компонент хлебных крошек (если планируется рефакторинг)
- Стили кнопки "Главная" должны соответствовать дизайну системы

### Связанные задачи:
- TASK-082: Кэширование состояния графика дашборда
- TASK-083: Исправление сортировки попапов сектора 1С
- TASK-084: Ручное кэширование иерархической сортировки

---

## Поэтапная реализация

### Этап 1: Анализ текущей реализации хлебных крошек
1. Изучить структуру каждого дашборда
2. Определить, где расположены хлебные крошки в каждом компоненте
3. Проверить наличие общего компонента Breadcrumbs
4. Зафиксировать текущий дизайн и поведение

### Этап 2: Проектирование кнопки "Главная"
1. Определить текст кнопки ("Главная")
2. Выбрать иконку (если используется)
3. Определить позицию в хлебных крошках (в начале или конце)
4. Спроектировать обработчик клика для навигации

### Этап 3: Модификация DashboardSector1C
1. Найти компонент хлебных крошек в DashboardSector1C.vue
2. Добавить кнопку "Главная" в начало хлебных крошек
3. Реализовать обработчик навигации
4. Протестировать функциональность

### Этап 4: Модификация GraphStateDashboard
1. Найти/создать компонент хлебных крошек
2. Добавить кнопку "Главная"
3. Обеспечить консистентность с другими дашбордами

### Этап 5: Модификация GraphAdmissionClosureDashboard
1. Аналогично этапу 4
2. Убедиться в соответствии дизайну

### Этап 6: Модификация TicketsTimeTrackingDashboard
1. Аналогично этапам 4-5
2. Финальное тестирование всех дашбордов

### Этап 7: Тестирование и рефакторинг
1. Проверка навигации во всех дашбордах
2. Тестирование адаптивности
3. Код-ревью и оптимизация

---

## API-методы и интеграции

### Vue Router методы:
- `this.$router.push('/')` - навигация на главную страницу
- `this.$route.path` - получение текущего пути

### Нет прямых вызовов REST API Bitrix24 для этой задачи.

---

## Технические требования

### Функциональные требования:
1. Кнопка "Главная" должна присутствовать во всех четырех дашбордах
2. При клике на кнопку должен осуществляться переход на главную страницу
3. Дизайн кнопки должен соответствовать существующему стилю хлебных крошек
4. Кнопка должна быть всегда доступна и видимой

### Нефункциональные требования:
1. **Производительность:** Добавление кнопки не должно влиять на время загрузки дашбордов
2. **Доступность:** Кнопка должна быть доступна для скрин-ридеров (ARIA-атрибуты)
3. **Адаптивность:** Кнопка должна корректно отображаться на мобильных устройствах
4. **Консистентность:** Реализация должна быть единой для всех дашбордов

### Ограничения:
- Не изменять существующую логику хлебных крошек
- Сохранить все текущие стили и поведение
- Не добавлять новые зависимости

---

## Критерии приёмки

### Функциональные критерии:
- [ ] Кнопка "Главная" присутствует в DashboardSector1C
- [ ] Кнопка "Главная" присутствует в GraphStateDashboard
- [ ] Кнопка "Главная" присутствует в GraphAdmissionClosureDashboard
- [ ] Кнопка "Главная" присутствует в TicketsTimeTrackingDashboard
- [ ] При клике на кнопку происходит переход на главную страницу
- [ ] Кнопка корректно отображается на всех устройствах

### Технические критерии:
- [ ] Код соответствует стандартам Vue.js
- [ ] Нет ошибок в консоли браузера
- [ ] Время загрузки дашбордов не увеличилось
- [ ] Код прошел линтинг (ESLint)

### Критерии качества:
- [ ] Код читаемый и документированный
- [ ] Реализация консистентна во всех дашбордах
- [ ] Отсутствуют дублирования кода
- [ ] Компоненты остаются модульными

---

## Примеры кода

### Шаблон модификации хлебных крошек (Vue.js):

```vue
<template>
  <div class="breadcrumbs">
    <!-- Кнопка Главная -->
    <button 
      class="breadcrumb-home-btn"
      @click="goToHome"
      aria-label="Перейти на главную страницу"
    >
      <i class="icon-home"></i>
      Главная
    </button>
    
    <!-- Существующие хлебные крошки -->
    <span class="breadcrumb-separator">/</span>
    <span class="breadcrumb-current">Текущий раздел</span>
  </div>
</template>

<script>
export default {
  name: 'Breadcrumbs',
  methods: {
    goToHome() {
      this.$router.push('/');
    }
  }
}
</script>

<style scoped>
.breadcrumb-home-btn {
  background: none;
  border: none;
  color: #007bff;
  cursor: pointer;
  font-size: 14px;
  padding: 4px 8px;
  border-radius: 4px;
  transition: background-color 0.2s;
}

.breadcrumb-home-btn:hover {
  background-color: #f8f9fa;
}

.breadcrumb-separator {
  margin: 0 8px;
  color: #6c757d;
}
</style>
```

### Пример для конкретного дашборда (DashboardSector1C):

```vue
<!-- Внутри DashboardSector1C.vue -->
<div class="dashboard-header">
  <div class="breadcrumbs">
    <button @click="$router.push('/')" class="home-button">
      Главная
    </button>
    <span class="separator">/</span>
    <span>Сектор 1С</span>
  </div>
  
  <!-- Остальной контент дашборда -->
</div>
```

---

## Тестирование

### Модульное тестирование:
1. Тест клика на кнопку "Главная"
2. Тест навигации через Vue Router
3. Тест доступности (ARIA-атрибуты)

### Интеграционное тестирование:
1. Проверка во всех четырех дашбордах
2. Тестирование на разных браузерах
3. Тестирование на мобильных устройствах

### Ручное тестирование:
1. **Сценарий 1:** Открыть каждый дашборд → Проверить наличие кнопки → Кликнуть → Проверить переход на главную
2. **Сценарий 2:** Проверить адаптивность на мобильных устройствах
3. **Сценарий 3:** Проверить доступность с клавиатуры

---

## Риски и mitigation

### Риски:
1. **Несоответствие дизайна:** Кнопка может выделяться из общего стиля
   - Mitigation: Использовать существующие стили хлебных крошек

2. **Проблемы с навигацией:** Неправильный маршрут главной страницы
   - Mitigation: Проверить актуальный маршрут главной страницы

3. **Производительность:** Добавление кнопки может замедлить рендеринг
   - Mitigation: Использовать легковесную реализацию без лишних вычислений

### Запасной план:
- Если возникнут проблемы с общим компонентом, реализовать индивидуально в каждом дашборде
- В случае проблем с дизайном, использовать минималистичный подход

---

## История изменений

| Дата | Автор | Изменения |
|------|-------|-----------|
| 2026-01-10 12:00 | Технический писатель | Создан черновик задачи |

---

## Вопросы для уточнения

1. Какой маршрут соответствует главной странице? (`/` или `/dashboard`)
2. Используется ли общий компонент Breadcrumbs или каждый дашборд имеет свой?
3. Какие стили должны использоваться для кнопки "Главная"?
4. Нужно ли добавлять иконку к кнопке?

---

## Приложения

- Ссылки на существующие компоненты дашбордов
- Макеты дизайна (если есть)
- Примеры реализации в других проектах