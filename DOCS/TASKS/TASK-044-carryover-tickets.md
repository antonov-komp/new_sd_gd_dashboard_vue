# TASK-044: Добавление категории «Переходящие тикеты» в модуль «График приёма и закрытий сектора 1С»

**Дата создания:** 2025-12-16 11:01 (UTC+3, Брест)  
**Статус:** Завершена  
**Приоритет:** Высокий  
**Исполнитель:** Bitrix24 Программист (Vue.js Developer)  
**Связь с задачей:** Расширение функциональности TASK-041, TASK-042, TASK-043

## Цель

Добавить третью категорию тикетов — **«Переходящие тикеты»** — в модуль «График приёма и закрытий сектора 1С». Переходящие тикеты — это тикеты, которые были новыми (находились в первых трёх рабочих стадиях) в прошлом периоде, но ещё не закрыты и переходят в текущий период.

## Контекст

### Текущее состояние модуля

В модуле «График приёма и закрытий сектора 1С» отображаются две категории тикетов:

1. **Новые тикеты** (`newTickets`):
   - Тикеты, созданные в текущую неделю
   - Фильтр: `createdTime` в диапазоне `[weekStartUtc, weekEndUtc]`
   - Отображаются на графике как точка/столбец «Новые»

2. **Закрытые тикеты** (`closedTickets`):
   - Тикеты, закрытые в текущую неделю
   - Фильтр: `movedTime` в диапазоне `[weekStartUtc, weekEndUtc]` И `stageId` в закрывающих стадиях
   - Отображаются на графике как точка/столбец «Закрытые»

### Проблема

**Не хватает третьей категории:**
- Тикеты, которые были новыми (первые три рабочие стадии) в прошлом периоде
- Но ещё не закрыты (не перешли в закрывающие стадии)
- И переходят в текущий период

**Пример:**
- Неделя 1 (2025-12-01 — 2025-12-07): создан тикет, он в стадии «Сформировано обращение» (DT140_12:UC_0VHWE2)
- Неделя 2 (2025-12-08 — 2025-12-14): тикет всё ещё в рабочей стадии, не закрыт
- **Этот тикет должен учитываться как «Переходящий» в неделе 2**

### Требуется

1. Добавить третью категорию «Переходящие тикеты» (`carryoverTickets`) в API и графики
2. Обновить логику фильтрации на бэкенде для определения переходящих тикетов
3. Добавить отображение переходящих тикетов на графиках (линейный, столбчатый, круговая диаграмма)
4. Добавить попап для переходящих тикетов (аналогично TASK-043 для новых тикетов)
5. Обновить summary-карточки с тремя категориями

## Анализ логики переходящих тикетов

### Определение переходящих тикетов

**Переходящий тикет** — это тикет, который:

1. **Создан ДО начала текущей недели:**
   - `createdTime < weekStartUtc`

2. **Находится в рабочих стадиях (первые три):**
   - `stageId` ∈ {`DT140_12:UC_0VHWE2`, `DT140_12:PREPARATION`, `DT140_12:CLIENT`}

3. **Ещё не закрыт:**
   - `stageId` ∉ {`DT140_12:SUCCESS`, `DT140_12:FAIL`, `DT140_12:UC_0GBU8Z`}

4. **Актуален на текущий момент:**
   - Тикет существует и находится в одной из рабочих стадий

### Рабочие стадии (targetStages)

Используются для определения переходящих тикетов:

1. **DT140_12:UC_0VHWE2** — «Сформировано обращение» (formed)
2. **DT140_12:PREPARATION** — «Рассмотрение ТЗ» (review)
3. **DT140_12:CLIENT** — «Исполнение» (execution)

### Закрывающие стадии (closingStages)

Исключаются из переходящих тикетов:

1. **DT140_12:SUCCESS** — «Успешное закрытие»
2. **DT140_12:FAIL** — «Отклонено»
3. **DT140_12:UC_0GBU8Z** — «Закрыли без задачи»

## Этапы реализации

Задача разделена на последовательные этапы:

1. **[TASK-044-01](TASK-044-01-backend-carryover-logic.md)** — Реализация логики переходящих тикетов на бэкенде
2. **[TASK-044-02](TASK-044-02-api-carryover-extension.md)** — Расширение API для возврата переходящих тикетов
3. **[TASK-044-03](TASK-044-03-frontend-charts-update.md)** — Обновление графиков для отображения трёх категорий
4. **[TASK-044-04](TASK-044-04-api-carryover-by-duration.md)** — Расширение API для градации переходящих тикетов по срокам
5. **[TASK-044-05](TASK-044-05-carryover-duration-popup.md)** — Реализация попапа «По срокам» для переходящих тикетов

**Порядок выполнения:** Этапы должны выполняться последовательно, так как каждый этап зависит от предыдущего.

## Общее описание задач

> **Примечание:** Детальное описание каждой задачи находится в соответствующих файлах этапов (TASK-044-01, TASK-044-02, TASK-044-03, TASK-044-04, TASK-044-05).

### 1) Реализация логики переходящих тикетов на бэкенде
**См. [TASK-044-01](TASK-044-01-backend-carryover-logic.md)**

**Текущее состояние API:**
- Endpoint: `POST /api/graph-1c-admission-closure.php`
- Возвращает только `newTickets` и `closedTickets`
- Не учитывает переходящие тикеты

**Требуется:**
- Добавить логику фильтрации переходящих тикетов:
  - `createdTime < weekStartUtc` (создан до начала недели)
  - `stageId` ∈ рабочих стадий (DT140_12:UC_0VHWE2, DT140_12:PREPARATION, DT140_12:CLIENT)
  - `stageId` ∉ закрывающих стадий (исключить закрытые)
- Подсчитать количество переходящих тикетов
- Опционально: возвращать сами тикеты (если `includeTickets: true`)

**Логика фильтрации:**
```php
// Псевдокод
$carryoverTickets = [];
foreach ($allTickets as $ticket) {
    // Создан до начала недели
    if ($ticket['createdTime'] < $weekStartUtc) {
        // Находится в рабочих стадиях
        if (in_array($ticket['stageId'], $targetStages)) {
            // Ещё не закрыт (не в закрывающих стадиях)
            if (!in_array($ticket['stageId'], $closingStages)) {
                $carryoverTickets[] = $ticket;
            }
        }
    }
}
```

### 2) Расширение API для возврата переходящих тикетов
**См. [TASK-044-02](TASK-044-02-api-carryover-extension.md)**

**Текущее состояние API:**
- Возвращает только `newTickets` и `closedTickets`
- Структура ответа: `{ newTickets, closedTickets, series: { new[], closed[] } }`

**Требуется:**
- Добавить в ответ поле `carryoverTickets` (количество)
- Добавить в `series` массив `carryover[]` для графиков
- Опционально: возвращать `carryoverTicketsByStages[]` (группировка по стадиям, аналогично `newTicketsByStages`)
- Опционально: возвращать `carryoverTicketsByDuration[]` (группировка по срокам, для попапа)

**Структура ответа API (расширенная):**
```json
{
  "success": true,
  "meta": {
    "weekNumber": 50,
    "weekStartUtc": "2025-12-08T00:00:00Z",
    "weekEndUtc": "2025-12-15T23:59:59Z"
  },
  "data": {
    "newTickets": 14,
    "closedTickets": 34,
    "carryoverTickets": 12,  // новый параметр
    "series": {
      "new": [14],
      "closed": [34],
      "carryover": [12]  // новый массив
    },
    "carryoverTicketsByStages": [  // опционально
      {
        "stageId": "DT140_12:UC_0VHWE2",
        "stageName": "Сформировано обращение",
        "count": 5,
        "tickets": [ ... ]  // если includeTickets: true
      },
      {
        "stageId": "DT140_12:PREPARATION",
        "stageName": "Рассмотрение ТЗ",
        "count": 4,
        "tickets": [ ... ]
      },
      {
        "stageId": "DT140_12:CLIENT",
        "stageName": "Исполнение",
        "count": 3,
        "tickets": [ ... ]
      }
    ],
    "carryoverTicketsByDuration": [  // опционально, для попапа "По срокам"
      {
        "durationCategory": "up_to_month",
        "durationLabel": "До 1 месяца",
        "count": 3,
        "tickets": [ ... ]  // если includeTickets: true
      },
      {
        "durationCategory": "less_than_month",
        "durationLabel": "Менее 1 месяца",
        "count": 2,
        "tickets": [ ... ]
      },
      {
        "durationCategory": "more_than_month",
        "durationLabel": "Более 1 месяца",
        "count": 3,
        "tickets": [ ... ]
      },
      {
        "durationCategory": "more_than_2_months",
        "durationLabel": "Более 2 месяцев",
        "count": 2,
        "tickets": [ ... ]
      },
      {
        "durationCategory": "more_than_half_year",
        "durationLabel": "Более полугода",
        "count": 1,
        "tickets": [ ... ]
      },
      {
        "durationCategory": "more_than_year",
        "durationLabel": "Более года",
        "count": 1,
        "tickets": [ ... ]
      }
    ],
    "stages": [ ... ],
    "responsible": [ ... ]
  }
}
```

### 3) Обновление графиков для отображения трёх категорий
**См. [TASK-044-03](TASK-044-03-frontend-charts-update.md)**

**Текущее состояние графиков:**
- Линейный график: две линии (Новые, Закрытые)
- Столбчатый график: два столбца (Новые, Закрытые)
- Круговая диаграмма: два сектора (Новые, Закрытые)

**Требуется:**
- Добавить третью линию/столбец/сектор для переходящих тикетов
- Обновить цвета и легенды
- Обновить summary-карточки (добавить карточку «Переходящие»)
- Обновить тултипы и подписи

**Визуальные изменения:**
- Линейный график: три линии (Новые, Закрытые, Переходящие)
- Столбчатый график: три столбца (Новые, Закрытые, Переходящие)
- Круговая диаграмма: три сектора (Новые, Закрытые, Переходящие)
- Summary-карточки: три карточки вместо двух

**Цвета (предложение):**
- Новые: синий `#007bff` (как сейчас)
- Закрытые: зелёный `#28a745` (как сейчас)
- Переходящие: оранжевый `#ff9800` (новый цвет)

### 4) Расширение API для градации переходящих тикетов по срокам
**См. [TASK-044-04](TASK-044-04-api-carryover-by-duration.md)**

**Требуется:**
- Добавить в API группировку переходящих тикетов по срокам (от даты периода `weekStartUtc`)
- Категории сроков:
  - Менее 1 месяца (от `weekStartUtc`)
  - Более 1 месяца
  - Более 2 месяцев
  - Более полугода
  - Более года
- Возвращать количество тикетов в каждой категории
- Опционально: возвращать сами тикеты для каждой категории

**Логика расчёта сроков:**
- Срок считается от `weekStartUtc` (начала текущего периода) до `createdTime` (даты создания тикета)
- Формула: `duration = weekStartUtc - createdTime` (в днях)
- Категории:
  - Менее 1 месяца: `duration < 30 дней`
  - Более 1 месяца: `30 дней ≤ duration < 60 дней`
  - Более 2 месяцев: `60 дней ≤ duration < 180 дней`
  - Более полугода: `180 дней ≤ duration < 365 дней`
  - Более года: `duration ≥ 365 дней`

**Структура данных API:**
```json
{
  "carryoverTicketsByDuration": [
    {
      "durationCategory": "less_than_month",
      "durationLabel": "Менее 1 месяца",
      "count": 5,
      "tickets": [ ... ]  // если includeTickets: true
    },
    {
      "durationCategory": "more_than_month",
      "durationLabel": "Более 1 месяца",
      "count": 3,
      "tickets": [ ... ]
    },
    {
      "durationCategory": "more_than_2_months",
      "durationLabel": "Более 2 месяцев",
      "count": 2,
      "tickets": [ ... ]
    },
    {
      "durationCategory": "more_than_half_year",
      "durationLabel": "Более полугода",
      "count": 1,
      "tickets": [ ... ]
    },
    {
      "durationCategory": "more_than_year",
      "durationLabel": "Более года",
      "count": 1,
      "tickets": [ ... ]
    }
  ]
}
```

### 5) Реализация попапа «По срокам» для переходящих тикетов
**См. [TASK-044-05](TASK-044-05-carryover-duration-popup.md)**

**Текущее состояние попапов:**
- При клике на «Новые» → открывается `StagesModal` (по стадиям)
- При клике на «Закрытые» → открывается `ResponsibleModal` (по сотрудникам)

**Требуется:**
- При клике на «Переходящие» → открывать попап `CarryoverDurationModal` для переходящих тикетов
- Попап должен отображать переходящие тикеты **по срокам** (не по стадиям)
- Уровень 1: градация «По срокам» с количеством тикетов в каждой категории
- Уровень 2: список тикетов выбранной категории срока

**Структура попапа:**

**Уровень 1: Градация по срокам**
- Заголовок: «Переходящие тикеты по срокам»
- Список категорий сроков с количеством тикетов:
  - Менее 1 месяца — X тикетов
  - Более 1 месяца — Y тикетов
  - Более 2 месяцев — Z тикетов
  - Более полугода — N тикетов
  - Более года — M тикетов
- Визуальное оформление аналогично `StagesModal.vue` из TASK-043
- Каждая категория отображается как отдельный элемент списка с цветом (градиент от зелёного к красному)

**Уровень 2: Список тикетов категории**
- Заголовок: «Тикеты: [Название категории срока]»
- Кнопка «Назад» для возврата на уровень 1
- Список тикетов через компонент `TicketCard`
- Stagger-анимация при появлении карточек

**Структура данных компонента:**
```javascript
durationCategories: [
  {
    durationCategory: 'less_than_month',
    durationLabel: 'Менее 1 месяца',
    count: 5,
    color: '#28a745',  // зелёный
    tickets: [ ... ]  // если загружены
  },
  {
    durationCategory: 'more_than_month',
    durationLabel: 'Более 1 месяца',
    count: 3,
    color: '#ffc107',  // жёлтый
    tickets: [ ... ]
  },
  {
    durationCategory: 'more_than_2_months',
    durationLabel: 'Более 2 месяцев',
    count: 2,
    color: '#ff9800',  // оранжевый
    tickets: [ ... ]
  },
  {
    durationCategory: 'more_than_half_year',
    durationLabel: 'Более полугода',
    count: 1,
    color: '#dc3545',  // красный
    tickets: [ ... ]
  },
  {
    durationCategory: 'more_than_year',
    durationLabel: 'Более года',
    count: 1,
    color: '#c82333',  // тёмно-красный
    tickets: [ ... ]
  }
]
```

### 4) Расширение API для градации переходящих тикетов по срокам
**См. [TASK-044-04](TASK-044-04-api-carryover-by-duration.md)**

**Требуется:**
- Добавить в API группировку переходящих тикетов по срокам (от даты периода `weekStartUtc`)
- Категории сроков:
  - Менее 1 месяца (от `weekStartUtc`)
  - Более 1 месяца
  - Более 2 месяцев
  - Более полугода
  - Более года
- Возвращать количество тикетов в каждой категории
- Опционально: возвращать сами тикеты для каждой категории

**Логика расчёта сроков:**
- Срок считается от `weekStartUtc` (начала текущего периода)
- Формула: `duration = weekStartUtc - createdTime`
- Категории:
  - Менее 1 месяца: `duration < 30 дней`
  - Более 1 месяца: `30 дней ≤ duration < 60 дней`
  - Более 2 месяцев: `60 дней ≤ duration < 180 дней`
  - Более полугода: `180 дней ≤ duration < 365 дней`
  - Более года: `duration ≥ 365 дней`

### 5) Реализация попапа «По срокам» для переходящих тикетов
**См. [TASK-044-05](TASK-044-05-carryover-duration-popup.md)**

**Текущее состояние попапов:**
- При клике на «Новые» → открывается `StagesModal` (по стадиям)
- При клике на «Закрытые» → открывается `ResponsibleModal` (по сотрудникам)

**Требуется:**
- При клике на «Переходящие» → открывать попап `CarryoverDurationModal` для переходящих тикетов
- Попап должен отображать переходящие тикеты **по срокам** (не по стадиям)
- Уровень 1: градация «По срокам» с количеством тикетов в каждой категории
- Уровень 2: список тикетов выбранной категории срока

**Структура попапа:**

**Уровень 1: Градация по срокам**
- Заголовок: «Переходящие тикеты по срокам»
- Список категорий сроков с количеством тикетов:
  - Менее 1 месяца — X тикетов
  - Более 1 месяца — Y тикетов
  - Более 2 месяцев — Z тикетов
  - Более полугода — N тикетов
  - Более года — M тикетов

**Уровень 2: Список тикетов категории**
- Заголовок: «Тикеты: [Название категории срока]»
- Кнопка «Назад» для возврата на уровень 1
- Список тикетов через компонент `TicketCard`
- Stagger-анимация при появлении карточек

**Визуальное оформление:**
- Аналогично `StagesModal.vue` из TASK-043
- Каждая категория срока отображается как отдельный элемент списка
- При клике на категорию открывается уровень 2 со списком тикетов

## Технические требования

### API (бэкенд)

**Расширение endpoint:** `POST /api/graph-1c-admission-closure.php`

**Новый параметр (опциональный):**
```json
{
  "product": "1C",
  "weekStartUtc": "2025-12-08T00:00:00Z",
  "weekEndUtc": "2025-12-15T23:59:59Z",
  "includeCarryoverTickets": true,  // новый параметр
  "includeCarryoverTicketsByStages": true,  // опционально
  "includeCarryoverTicketsByDuration": true,  // опционально, для попапа "По срокам"
  "includeTickets": true  // опционально, для получения тикетов
}
```

**Логика в API:**
- Если `includeCarryoverTickets === true`, фильтровать переходящие тикеты:
  - `createdTime < weekStartUtc` (создан до начала недели)
  - `stageId` ∈ рабочих стадий (DT140_12:UC_0VHWE2, DT140_12:PREPARATION, DT140_12:CLIENT)
  - `stageId` ∉ закрывающих стадий
- Подсчитать количество переходящих тикетов
- Если `includeCarryoverTicketsByStages === true`, группировать по стадиям
- Если `includeCarryoverTicketsByDuration === true`, группировать по срокам:
  - Рассчитать срок от `weekStartUtc` до `createdTime` каждого тикета
  - Распределить по категориям: менее 1 месяца, более 1 месяца, более 2 месяцев, более полугода, более года
- Если `includeTickets === true`, включать массив `tickets[]` для каждой категории

**Оптимизация:**
- Использовать тот же запрос к Bitrix24, что и для новых тикетов
- Фильтровать по `createdTime < weekStartUtc` и `stageId` ∈ рабочих стадий
- Исключить тикеты с закрывающими стадиями

### Фронтенд (Vue.js)

**Компоненты:**
- `GraphAdmissionClosureChart.vue` — модификация для трёх категорий
- `GraphAdmissionClosureDashboard.vue` — добавление состояния для переходящих тикетов
- `CarryoverDurationModal.vue` — новый компонент попапа «По срокам» (аналогично `StagesModal.vue`)

**Сервисы:**
- `admissionClosureService.js` — расширение для поддержки `includeCarryoverTickets` и `includeCarryoverTicketsByDuration`

**Утилиты:**
- Константы категорий сроков и их цветов
- Функция расчёта категории срока от `weekStartUtc` до `createdTime`

## Порядок выполнения этапов

Этапы должны выполняться последовательно:

1. **TASK-044-01** — Реализация логики на бэкенде
   - Добавление фильтрации переходящих тикетов
   - Подсчёт количества
   - Тестирование логики

2. **TASK-044-02** — Расширение API
   - Добавление параметра `includeCarryoverTickets`
   - Формирование ответа с `carryoverTickets` и `series.carryover[]`
   - Опционально: `carryoverTicketsByStages[]`

3. **TASK-044-03** — Обновление графиков (фронтенд)
   - Добавление третьей линии/столбца/сектора
   - Обновление summary-карточек
   - Обновление цветов и легенд

4. **TASK-044-04** — Расширение API для градации по срокам (бэкенд)
   - Добавление параметра `includeCarryoverTicketsByDuration`
   - Реализация логики расчёта сроков от `weekStartUtc`
   - Группировка переходящих тикетов по категориям сроков
   - Формирование ответа с `carryoverTicketsByDuration[]`

5. **TASK-044-05** — Попап «По срокам» для переходящих тикетов (фронтенд)
   - Создание компонента `CarryoverDurationModal.vue`
   - Реализация двух уровней (градация по срокам → список тикетов)
   - Интеграция с API и компонентом `TicketCard`

## Критерии приёмки

- [x] API возвращает `carryoverTickets` при `includeCarryoverTickets: true`
- [x] Переходящие тикеты фильтруются корректно:
  - [x] `createdTime < weekStartUtc` (создан до начала недели)
  - [x] `stageId` ∈ рабочих стадий (DT140_12:UC_0VHWE2, DT140_12:PREPARATION, DT140_12:CLIENT)
  - [x] `stageId` ∉ закрывающих стадий
- [x] На линейном графике отображаются три линии (Новые, Закрытые, Переходящие)
- [x] На столбчатом графике отображаются три столбца (Новые, Закрытые, Переходящие)
- [x] На круговой диаграмме отображаются три сектора (Новые, Закрытые, Переходящие)
- [x] Summary-карточки обновлены: три карточки вместо двух
- [x] При клике на «Переходящие» открывается попап `CarryoverDurationModal`
- [x] В попапе отображается градация «По срокам» с количеством тикетов в каждой категории:
  - [x] Менее 1 месяца
  - [x] Более 1 месяца
  - [x] Более 2 месяцев
  - [x] Более полугода
  - [x] Более года
- [x] При клике на категорию срока открывается уровень 2 со списком тикетов
- [x] Тикеты отображаются через компонент `TicketCard`
- [x] Кнопка «Назад» возвращает на уровень 1
- [x] Цвета и легенды обновлены для трёх категорий
- [x] Тултипы показывают значения для всех трёх категорий
- [x] API возвращает `carryoverTicketsByDuration[]` при `includeCarryoverTicketsByDuration: true`
- [x] Сроки рассчитываются корректно от `weekStartUtc` до `createdTime` каждого тикета

## Дополнительные уточнения

### Логика определения переходящих тикетов

**Важно:** Переходящие тикеты определяются на момент текущей недели, а не на момент создания.

**Пример:**
- Неделя 1 (2025-12-01 — 2025-12-07): создан тикет, он в стадии «Сформировано обращение»
- Неделя 2 (2025-12-08 — 2025-12-14): тикет всё ещё в рабочей стадии
- **В неделе 2 этот тикет учитывается как «Переходящий»**

**Если тикет закрыт в неделе 2:**
- Он учитывается как «Закрытый» в неделе 2
- Он НЕ учитывается как «Переходящий» в неделе 2

### Логика расчёта сроков для попапа «По срокам»

**Расчёт срока:**
- Срок считается от `weekStartUtc` (начала текущего периода) до `createdTime` (даты создания тикета)
- Формула: `duration = weekStartUtc - createdTime` (в днях)

**Категории сроков:**
1. **Менее 1 месяца:**
   - Условие: `duration < 30 дней`
   - Пример: тикет создан 2025-11-20, период начинается 2025-12-08 → срок = 18 дней

2. **Более 1 месяца:**
   - Условие: `30 дней ≤ duration < 60 дней`
   - Пример: тикет создан 2025-10-15, период начинается 2025-12-08 → срок = 54 дня

3. **Более 2 месяцев:**
   - Условие: `60 дней ≤ duration < 180 дней`
   - Пример: тикет создан 2025-09-01, период начинается 2025-12-08 → срок = 98 дней

4. **Более полугода:**
   - Условие: `180 дней ≤ duration < 365 дней`
   - Пример: тикет создан 2025-06-01, период начинается 2025-12-08 → срок = 190 дней

5. **Более года:**
   - Условие: `duration ≥ 365 дней`
   - Пример: тикет создан 2024-12-01, период начинается 2025-12-08 → срок = 372 дня

**Важно:**
- Все расчёты выполняются в UTC
- Используется точная разница в днях (не округление)
- Категории не пересекаются (каждый тикет попадает только в одну категорию)

### Оптимизация производительности

- Использовать тот же запрос к Bitrix24, что и для новых тикетов
- Фильтровать переходящие тикеты на стороне бэкенда
- Кэшировать результаты для снижения нагрузки

### Совместимость с существующим кодом

- Не ломать текущую функциональность для новых и закрытых тикетов
- Переиспользовать компоненты и утилиты из TASK-043
- Следовать существующим паттернам и стилям

### Цвета для переходящих тикетов

**Предложение:**
- Новые: синий `#007bff` (как сейчас)
- Закрытые: зелёный `#28a745` (как сейчас)
- Переходящие: оранжевый `#ff9800` (новый цвет, чтобы отличать от новых и закрытых)

**Альтернатива:**
- Переходящие: жёлтый `#ffc107` (близко к оранжевому, но более контрастный)

### Цвета для категорий сроков в попапе

**Предложение:**
- Менее 1 месяца: зелёный `#28a745` (свежие тикеты)
- Более 1 месяца: жёлтый `#ffc107` (требуют внимания)
- Более 2 месяцев: оранжевый `#ff9800` (критично)
- Более полугода: красный `#dc3545` (очень критично)
- Более года: тёмно-красный `#c82333` (максимально критично)

**Альтернатива (градиент):**
- Использовать градиент от зелёного к красному для визуального отображения критичности

## История правок

- 2025-12-16 11:01 (UTC+3, Брест): Создана задача
- 2025-12-16 18:30 (UTC+3, Брест): Задача завершена
  - ✅ TASK-044-01: Реализована логика переходящих тикетов на бэкенде
  - ✅ TASK-044-02: Расширен API для возврата переходящих тикетов
  - ✅ TASK-044-03: Обновлены графики для отображения трёх категорий
  - ✅ TASK-044-04: Расширен API для градации переходящих тикетов по срокам
  - ✅ TASK-044-05: Реализован попап «По срокам» для переходящих тикетов

