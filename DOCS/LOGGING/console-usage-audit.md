# Аудит использования console.* в дашборде сектора 1С

**Дата создания:** 2025-12-06 17:56 (UTC+3, Брест)  
**Статус:** В работе  
**Задача:** TASK-014-STEP-01

## Цель

Найти и задокументировать все места использования `console.*` в дашборде сектора 1С для последующей замены на централизованную службу логирования.

## Методология

Поиск выполнен с помощью `grep` по паттерну `console\.(log|error|warn|info|debug)` в директории `vue-app/src`.

## Результаты поиска

### Общая статистика

- **Всего найдено:** 62 использования `console.*`
- **console.error:** ~25 использований
- **console.warn:** ~8 использований
- **console.log:** ~28 использований
- **console.info:** ~1 использование

## Детальный перечень по файлам

### 1. Сервисы дашборда сектора 1С

#### `vue-app/src/services/dashboard-sector-1c/index.js`
**Найдено:** 6 использований

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 197 | `console.error` | `Error getting sector data` | Высокая | ERROR |
| 232 | `console.error` | `Error assigning ticket` | Высокая | ERROR |
| 271 | `console.error` | `Error creating ticket` | Высокая | ERROR |
| 290 | `console.error` | `Error getting ticket` | Высокая | ERROR |
| 314 | `console.error` | `Error getting ticket details` | Высокая | ERROR |
| 341 | `console.error` | `Error adding comment` | Высокая | ERROR |

**Классификация:** Все логи — ошибки, критичны для production.

---

#### `vue-app/src/services/dashboard-sector-1c/data/ticket-repository.js`
**Найдено:** 3 использования

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 86 | `console.error` | `Error loading tickets for stage` | Высокая | ERROR |
| 110 | `console.error` | `Error in getAllTickets` | Высокая | ERROR |
| 223 | `console.error` | `Error loading tickets batch` | Высокая | ERROR |

**Классификация:** Все логи — ошибки, критичны для production.

---

#### `vue-app/src/services/dashboard-sector-1c/data/employee-repository.js`
**Найдено:** 3 использования

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 42 | `console.log` | `Cache hit for employees` | Низкая | DEBUG |
| 68 | `console.warn` | `Unexpected user.get result format` | Средняя | WARN |
| 80 | `console.error` | `Error getting employees by IDs` | Высокая | ERROR |

**Классификация:** 
- Лог кеша — отладочный (DEBUG)
- Предупреждение о формате — средняя важность (WARN)
- Ошибка — критична (ERROR)

---

#### `vue-app/src/services/dashboard-sector-1c/mappers/employee-mapper.js`
**Найдено:** 1 использование

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 18 | `console.log` | `Employee mapper debug info` | Низкая | DEBUG |

**Классификация:** Отладочный лог, не критичен для production.

---

#### `vue-app/src/services/dashboard-sector-1c/groupers/ticket-grouper.js`
**Найдено:** 3 использования

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 35 | `console.warn` | `Tickets is not an array` | Средняя | WARN |
| 41 | `console.warn` | `Employees is not an array` | Средняя | WARN |
| 204 | `console.warn` | `Tickets is not an array in getZeroPointTickets` | Средняя | WARN |

**Классификация:** Все логи — предупреждения о валидации данных, средняя важность.

---

#### `vue-app/src/services/dashboard-sector-1c/utils/error-handler.js`
**Найдено:** 2 использования

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 13 | `console.error` | `API Error` | Высокая | ERROR |
| 64 | `console.error` | `Error logged` | Высокая | ERROR |

**Классификация:** Оба лога — ошибки, критичны для production.

---

#### `vue-app/src/services/dashboard-sector-1c/services/ticket-details-service.js`
**Найдено:** 1 использование

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 75 | `console.error` | `Error getting ticket details` | Высокая | ERROR |

**Классификация:** Ошибка, критична для production.

---

### 2. Композаблы

#### `vue-app/src/composables/useDashboardActions.js`
**Найдено:** 0 использований

**Примечание:** В файле нет прямых вызовов `console.*`.

---

#### `vue-app/src/composables/useDragAndDrop.js`
**Найдено:** 1 использование

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 93 | `console.error` | `Error parsing ticket data` | Высокая | ERROR |

**Классификация:** Ошибка парсинга данных, критична для production.

---

#### `vue-app/src/composables/useNotifications.js`
**Найдено:** 1 использование

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 28 | `console.log` | `Notification log` | Низкая | DEBUG |

**Классификация:** Отладочный лог уведомлений, не критичен для production.

---

### 3. Компоненты Vue

#### `vue-app/src/components/dashboard/DashboardStage.vue`
**Найдено:** 1 использование

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 189 | `console.log` | `Ticket clicked` | Низкая | DEBUG |

**Классификация:** Отладочный лог события клика, не критичен для production.

---

#### `vue-app/src/components/dashboard/EmployeeColumn.vue`
**Найдено:** 1 использование

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 226 | `console.log` | `Add ticket for employee` | Низкая | DEBUG |

**Классификация:** Отладочный лог действия, не критичен для production.

---

### 4. Устаревшие файлы (требуют проверки)

#### `vue-app/src/services/dashboard-sector-1c-service.js`
**Найдено:** 20+ использований

**Примечание:** Этот файл, похоже, является устаревшей версией сервиса. Требуется проверка, используется ли он в проекте. Если нет — можно удалить или заменить на актуальную версию.

**Найденные использования:**
- `console.log` — отладочные логи загрузки тикетов, сотрудников
- `console.error` — ошибки операций
- `console.warn` — предупреждения о формате данных

---

### 5. Другие файлы (не связанные напрямую с дашбордом 1С)

#### `vue-app/src/main.js`
**Найдено:** 2 использования

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 12 | `console.error` | `Vue error` | Высокая | ERROR |
| 27 | `console.error` | `Failed to log error` | Высокая | ERROR |

**Классификация:** Ошибки Vue и логирования, критичны для production.

**Примечание:** Эти логи можно оставить как есть или также заменить на службу логирования (опционально).

---

#### `vue-app/src/components/IndexPage.vue`
**Найдено:** 3 использования

| Строка | Тип | Контекст | Критичность | Предлагаемый уровень |
|--------|-----|----------|-------------|---------------------|
| 257 | `console.error` | `Error checking access` | Высокая | ERROR |
| 270 | `console.error` | `Route is not defined` | Высокая | ERROR |
| 298 | `console.error` | `Route is not defined for admin` | Высокая | ERROR |

**Классификация:** Ошибки доступа и маршрутизации, критичны для production.

**Примечание:** Эти логи не относятся напрямую к дашборду 1С, но можно заменить для единообразия.

---

## Классификация по типам

### ERROR (25 использований)
**Критичность:** Высокая  
**Назначение:** Логирование ошибок, которые требуют внимания в production.

**Файлы:**
- `index.js` — 6 использований
- `ticket-repository.js` — 3 использования
- `employee-repository.js` — 1 использование
- `error-handler.js` — 2 использования
- `ticket-details-service.js` — 1 использование
- `useDragAndDrop.js` — 1 использование
- `main.js` — 2 использования
- `IndexPage.vue` — 3 использования
- `dashboard-sector-1c-service.js` — ~6 использований

**Рекомендация:** Оставить в production, уровень `ERROR`.

---

### WARN (8 использований)
**Критичность:** Средняя  
**Назначение:** Предупреждения о потенциальных проблемах (некорректный формат данных, валидация).

**Файлы:**
- `employee-repository.js` — 1 использование
- `ticket-grouper.js` — 3 использования
- `dashboard-sector-1c-service.js` — ~4 использования

**Рекомендация:** Можно отключить в production, уровень `WARN` или выше.

---

### DEBUG/INFO (28 использований)
**Критичность:** Низкая  
**Назначение:** Отладочные логи, информационные сообщения (кеш, события, действия пользователя).

**Файлы:**
- `employee-repository.js` — 1 использование (кеш)
- `employee-mapper.js` — 1 использование (отладка)
- `useNotifications.js` — 1 использование (уведомления)
- `DashboardStage.vue` — 1 использование (события)
- `EmployeeColumn.vue` — 1 использование (действия)
- `dashboard-sector-1c-service.js` — ~20 использований (отладка загрузки)

**Рекомендация:** Отключить в production, уровень `DEBUG` только для разработки.

---

## План замены

### Приоритет 1: Критичные логи (ERROR)
- Заменить все `console.error` на `Logger.error()`
- Уровень: `ERROR` (всегда включен)

### Приоритет 2: Предупреждения (WARN)
- Заменить все `console.warn` на `Logger.warn()`
- Уровень: `WARN` (можно отключить в production)

### Приоритет 3: Отладочные логи (DEBUG/INFO)
- Заменить все `console.log` на `Logger.debug()` или `Logger.info()`
- Уровень: `DEBUG` (только для разработки)

---

## Рекомендации

1. **Уровень по умолчанию для production:** `ERROR` (только ошибки)
2. **Уровень по умолчанию для development:** `DEBUG` (все логи)
3. **Контекст для каждого лога:** Указывать имя модуля/компонента
4. **Форматирование:** Timestamp + уровень + контекст + сообщение
5. **Устаревшие файлы:** Проверить и удалить `dashboard-sector-1c-service.js`, если не используется

---

## История правок

- 2025-12-06 17:56 (UTC+3, Брест): Создан документ с результатами аудита

