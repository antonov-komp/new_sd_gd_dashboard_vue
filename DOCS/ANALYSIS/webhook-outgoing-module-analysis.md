# –ê–Ω–∞–ª–∏–∑ –º–æ–¥—É–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –≤–µ–±—Ö—É–∫–æ–≤ Bitrix24

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-18 10:00 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–¢–∏–ø:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

---

## üìã –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å **WebhookLogs** –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–∏—ë–º–∞, –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –≤–µ–±—Ö—É–∫–æ–≤ –æ—Ç Bitrix24. –ú–æ–¥—É–ª—å –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å —á—ë—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

**–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –ü—Ä–∏—ë–º —Å–æ–±—ã—Ç–∏–π –æ—Ç Bitrix24 —á–µ—Ä–µ–∑ –∏—Å—Ö–æ–¥—è—â–∏–µ –≤–µ–±—Ö—É–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ –≤–µ–±—Ö—É–∫–æ–≤ (HMAC-SHA256)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON-—Ñ–∞–π–ª—ã
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ API –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤
- –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Server-Sent Events (SSE)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
sd_it_gen_plan/
‚îú‚îÄ‚îÄ api/                                    # API endpoints (—Ç–æ–Ω–∫–∏–µ —Å–ª–æ–∏)
‚îÇ   ‚îú‚îÄ‚îÄ webhook-handler.php                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ webhook-logs.php                    # API –¥–ª—è —á—Ç–µ–Ω–∏—è –ª–æ–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ webhook-realtime.php                # SSE –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
‚îÇ
‚îú‚îÄ‚îÄ src/WebhookLogs/                        # –ú–æ–¥—É–ª—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WebhookLogsConfig.php          # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Service/                           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebhookHandlerService.php     # –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebhookValidationService.php  # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebhookLoggingService.php     # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebhookLogsApiService.php     # API –¥–ª—è —á—Ç–µ–Ω–∏—è –ª–æ–≥–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebhookRealtimeService.php    # SSE –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebhookLogsApiCache.php       # –ö–µ—à –¥–ª—è API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WebhookRealtimeCache.php      # –ö–µ—à –¥–ª—è SSE
‚îÇ   ‚îú‚îÄ‚îÄ Repository/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WebhookLogsRepository.php     # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Entity/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebhookEvent.php              # –°—É—â–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WebhookLogEntry.php           # –°—É—â–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ Exception/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebhookException.php          # –ë–∞–∑–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebhookValidationException.php # –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WebhookLoggingException.php    # –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventDetailsExtractor.php     # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LogFileManager.php            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ Autoloader.php                    # –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ bootstrap.php                     # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îÇ
‚îú‚îÄ‚îÄ logs/webhooks/                         # –•—Ä–∞–Ω–∏–ª–∏—â–µ –ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ tasks/                            # –õ–æ–≥–∏ —Å–æ–±—ã—Ç–∏–π –∑–∞–¥–∞—á
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ YYYY-MM-DD-HH.json           # –§–∞–π–ª—ã –ø–æ —á–∞—Å–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ smart-processes/                 # –õ–æ–≥–∏ —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ YYYY-MM-DD-HH.json
‚îÇ   ‚îî‚îÄ‚îÄ errors/                           # –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
‚îÇ       ‚îî‚îÄ‚îÄ YYYY-MM-DD-HH.json
‚îÇ
‚îî‚îÄ‚îÄ webhook-secret.php                     # –°–µ–∫—Ä–µ—Ç –≤–µ–±—Ö—É–∫–∞ (–Ω–µ –≤ git)
```

---

## üîÑ –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±—Ö—É–∫–∞

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π

```
1. Bitrix24 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å
   ‚Üì
2. api/webhook-handler.php (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
   ‚îú‚îÄ‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–∞ (—Ç–æ–ª—å–∫–æ POST)
   ‚îú‚îÄ‚îÄ –ü–æ–ª—É—á–µ–Ω–∏–µ raw body
   ‚îî‚îÄ‚îÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebhookHandlerService
   ‚Üì
3. WebhookHandlerService::handleWebhook()
   ‚îú‚îÄ‚îÄ –ü–∞—Ä—Å–∏–Ω–≥ payload (JSON –∏–ª–∏ URL-encoded)
   ‚îú‚îÄ‚îÄ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (event, data)
   ‚îî‚îÄ‚îÄ –í—ã–∑–æ–≤ WebhookValidationService
   ‚Üì
4. WebhookValidationService::validateWebhook()
   ‚îú‚îÄ‚îÄ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞ –∏–∑ webhook-secret.php
   ‚îú‚îÄ‚îÄ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ X-Bitrix-Signature
   ‚îú‚îÄ‚îÄ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ HMAC-SHA256 –æ—Ç raw body
   ‚îî‚îÄ‚îÄ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–µ–π (hash_equals –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç timing attacks)
   ‚Üì
5. WebhookLoggingService::logEvent()
   ‚îú‚îÄ‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ WebhookEvent –∏–∑ –¥–∞–Ω–Ω—ã—Ö
   ‚îú‚îÄ‚îÄ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (tasks, smart-processes)
   ‚îú‚îÄ‚îÄ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π —á–µ—Ä–µ–∑ EventDetailsExtractor
   ‚îú‚îÄ‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ WebhookLogEntry
   ‚îî‚îÄ‚îÄ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebhookLogsRepository
   ‚Üì
6. WebhookLogsRepository::save()
   ‚îú‚îÄ‚îÄ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É (logs/webhooks/{category}/YYYY-MM-DD-HH.json)
   ‚îú‚îÄ‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
   ‚îú‚îÄ‚îÄ –ß—Ç–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π –∏–∑ —Ñ–∞–π–ª–∞
   ‚îú‚îÄ‚îÄ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
   ‚îî‚îÄ‚îÄ –ó–∞–ø–∏—Å—å –≤ JSON —Ñ–∞–π–ª
   ‚Üì
7. –í–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞ Bitrix24
   ‚îî‚îÄ‚îÄ JSON: {success: true, event: "...", category: "...", logging_id: "..."}
```

---

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è

### 1. Config (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

#### `WebhookLogsConfig.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–¥—É–ª—è.

**–ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- `getBaseLogsPath()` ‚Äî –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å –∫ –ª–æ–≥–∞–º (`logs/webhooks/`)
- `getCategoryPath($category)` ‚Äî –ø—É—Ç—å –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `getCategories()` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: `['tasks', 'smart-processes', 'errors']`
- `getDefaultPaginationLimit()` ‚Äî –ª–∏–º–∏—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏: `50`
- `getSecretFilePath()` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å–µ–∫—Ä–µ—Ç–∞: `webhook-secret.php`
- `getTimezone()` ‚Äî —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å: `'Europe/Minsk'`
- `getJsonEncodeOptions()` ‚Äî –æ–ø—Ü–∏–∏ JSON: `JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE`

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
use WebhookLogs\Config\WebhookLogsConfig;

$path = WebhookLogsConfig::getBaseLogsPath();
$categories = WebhookLogsConfig::getCategories();
$secretPath = WebhookLogsConfig::getSecretFilePath();
```

---

### 2. Service (–°–µ—Ä–≤–∏—Å—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏)

#### 2.1. `WebhookHandlerService.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥—è—â–∏—Ö –≤–µ–±—Ö—É–∫–æ–≤.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `handleWebhook($rawBody, $server, $post, $get)` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–∞
- `handleError($error, $rawBody, $payload, $server)` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ü–∞—Ä—Å–∏—Ç payload –∏–∑ raw body (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JSON –∏ URL-encoded)
2. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (`event`, `data`)
3. –í—ã–∑—ã–≤–∞–µ—Ç `WebhookValidationService` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏
4. –í—ã–∑—ã–≤–∞–µ—Ç `WebhookLoggingService` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** `api/webhook-handler.php`

**–ü—Ä–∏–º–µ—Ä:**
```php
use WebhookLogs\Service\WebhookHandlerService;

$handler = new WebhookHandlerService();
$result = $handler->handleWebhook(
    file_get_contents('php://input'),
    $_SERVER,
    $_POST,
    $_GET
);
```

---

#### 2.2. `WebhookValidationService.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ –≤–µ–±—Ö—É–∫–æ–≤ –æ—Ç Bitrix24.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `validateWebhook($rawBody, $server, $payload, $get)` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–µ–±—Ö—É–∫–∞
- `validateSignature($rawBody, $signature, $secret)` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏
- `getSignatureFromRequest($server, $payload, $get)` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏
- `getWebhookSecret()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞

**–°–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞ (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞):**
1. –ò–∑ —Ñ–∞–π–ª–∞ `webhook-secret.php` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
2. –ò–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `BITRIX24_WEBHOOK_SECRET`
3. –ò–∑ `settings.json` (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

**–°–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏:**
1. –ò–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `X-Bitrix-Signature` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±)
2. –ò–∑ –ø–æ–ª—è `signature` –≤ payload
3. –ò–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `token` –≤ URL (–µ—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–µ–∫—Ä–µ—Ç–æ–º)

**–ê–ª–≥–æ—Ä–∏—Ç–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
```php
// –í—ã—á–∏—Å–ª–µ–Ω–∏–µ HMAC-SHA256
$computedSignature = hash_hmac('sha256', $rawBody, $secret);

// –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–µ–π (–∑–∞—â–∏—Ç–∞ –æ—Ç timing attacks)
return hash_equals($signature, $computedSignature);
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ï—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚Äî –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–æ –∑–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `hash_equals()` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç timing attacks

---

#### 2.3. `WebhookLoggingService.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤–µ–±—Ö—É–∫–æ–≤ –≤ —Ñ–∞–π–ª—ã.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `logEvent($eventType, $eventData, $fullPayload, $clientIp, $timestamp)` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
- `logError($error, $payload, $rawBody, $clientIp)` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
- `categorizeEvent($event)` ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–±—ã—Ç–∏—è

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –°–æ–∑–¥–∞—ë—Ç `WebhookEvent` –∏–∑ –¥–∞–Ω–Ω—ã—Ö
2. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ
3. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é (tasks, smart-processes, errors)
4. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ —á–µ—Ä–µ–∑ `EventDetailsExtractor`
5. –°–æ–∑–¥–∞—ë—Ç `WebhookLogEntry`
6. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–µ—Ä–µ–∑ `WebhookLogsRepository`

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- `ONTASK*` ‚Üí `tasks`
- `ONCRMDYNAMIC*` ‚Üí `smart-processes`
- –û—à–∏–±–∫–∏ ‚Üí `errors`

**–ü—Ä–∏–º–µ—Ä:**
```php
use WebhookLogs\Service\WebhookLoggingService;

$loggingService = new WebhookLoggingService();
$loggingId = $loggingService->logEvent(
    'ONTASKADD',
    ['TASK' => ['ID' => 123, 'TITLE' => 'Test']],
    $fullPayload,
    '192.168.1.1'
);
```

---

#### 2.4. `WebhookLogsApiService.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** API –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ª–æ–≥–æ–≤.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `getLogs($filters, $page, $limit)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `getLogsCount($filters)` ‚Äî –ø–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–æ–≥–æ–≤
- `getLogById($id)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–∞ –ø–æ ID

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (tasks, smart-processes, errors)
- `event` ‚Äî —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è
- `dateFrom` ‚Äî –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (YYYY-MM-DD)
- `dateTo` ‚Äî –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (YYYY-MM-DD)
- `hour` ‚Äî —á–∞—Å (0-23)

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** `api/webhook-logs.php`

---

#### 2.5. `WebhookRealtimeService.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Server-Sent Events (SSE) –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `stream($lastTimestamp, $category)` ‚Äî –ø–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–æ–≤—ã—Ö –ª–æ–≥–æ–≤
- `getNewLogs($lastTimestamp, $category)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ª–æ–≥–æ–≤

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–æ–≤—ã–µ –ª–æ–≥–∏ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç keep-alive –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –¢–∞–π–º–∞—É—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: 5 –º–∏–Ω—É—Ç
- –ö–µ—à–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** `api/webhook-realtime.php`

---

### 3. Repository (–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)

#### `WebhookLogsRepository.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –ª–æ–≥–æ–≤.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `save($category, $entry, $dateTime)` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- `read($category, $date, $hour)` ‚Äî —á—Ç–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- `readByDate($category, $date)` ‚Äî —á—Ç–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –∑–∞ –¥–∞—Ç—É
- `readByHour($category, $date, $hour)` ‚Äî —á—Ç–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∑–∞ —á–∞—Å
- `exists($filePath)` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
- `getFileMetadata($filePath)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞
- `delete($filePath)` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:**
- –ü—É—Ç—å: `logs/webhooks/{category}/YYYY-MM-DD-HH.json`
- –§–æ—Ä–º–∞—Ç: JSON –º–∞—Å—Å–∏–≤ –∑–∞–ø–∏—Å–µ–π
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —á–∞—Å–∞–º –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```php
use WebhookLogs\Repository\WebhookLogsRepository;

$repository = new WebhookLogsRepository();
$repository->save('tasks', $entry, new \DateTime());

$logs = $repository->read('tasks', '2025-12-18', 10); // –ß–∞—Å 10
$allLogs = $repository->readByDate('tasks', '2025-12-18');
```

---

### 4. Entity (–°—É—â–Ω–æ—Å—Ç–∏)

#### `WebhookEvent.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—É—â–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è –≤–µ–±—Ö—É–∫–∞.

**–°–≤–æ–π—Å—Ç–≤–∞:**
- `eventType` ‚Äî —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ONTASKADD`)
- `eventData` ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `payload` ‚Äî –ø–æ–ª–Ω—ã–π payload –≤–µ–±—Ö—É–∫–∞
- `timestamp` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
- `clientIp` ‚Äî IP –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞
- `signature` ‚Äî –ø–æ–¥–ø–∏—Å—å –≤–µ–±—Ö—É–∫–∞

**–ú–µ—Ç–æ–¥—ã:**
- `fromArray($data)` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞
- `toArray()` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤
- `validate()` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—É—â–Ω–æ—Å—Ç–∏
- `getCategory()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –¢–∏–ø —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç—É: `^[A-Z][A-Z0-9_]+$`
- –î–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∞—Å—Å–∏–≤–æ–º
- IP –∞–¥—Ä–µ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

---

#### `WebhookLogEntry.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—É—â–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞.

**–°–≤–æ–π—Å—Ç–≤–∞:**
- `id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (timestamp –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601)
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (tasks, smart-processes, errors)
- `event` ‚Äî —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è
- `timestamp` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
- `details` ‚Äî –¥–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è (–∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ EventDetailsExtractor)
- `payload` ‚Äî –ø–æ–ª–Ω—ã–π payload
- `metadata` ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (IP, –ø–æ–¥–ø–∏—Å—å –∏ —Ç.–¥.)

**–ú–µ—Ç–æ–¥—ã:**
- `fromWebhookEvent($event, $details)` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑ WebhookEvent
- `toArray()` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤

---

### 5. Utils (–£—Ç–∏–ª–∏—Ç—ã)

#### `EventDetailsExtractor.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π –∏–∑ —Å–æ–±—ã—Ç–∏–π.

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:**
- –°–æ–±—ã—Ç–∏—è –∑–∞–¥–∞—á (`ONTASK*`):
  - `ONTASKADD`, `ONTASKUPDATE`, `ONTASKDELETE`
  - `ONTASKCOMMENTADD`, `ONTASKCOMMENTUPDATE`, `ONTASKCOMMENTDELETE`
- –°–æ–±—ã—Ç–∏—è —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (`ONCRMDYNAMIC*`):
  - `ONCRMDYNAMICITEMADD`, `ONCRMDYNAMICITEMUPDATE`, `ONCRMDYNAMICITEMDELETE`

**–ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è –∑–∞–¥–∞—á:**
- `task_id`, `task_title`, `created_by`, `responsible_id`
- `status_id`, `priority`, `deadline`, `group_id`
- `crm_entities` (—Å–≤—è–∑–∏ —Å CRM)

**–ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**
- `entity_id`, `title`, `created_by`, `assigned_by`
- `stage_id`, `custom_fields` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è)
- `field_changes` (–¥–ª—è —Å–æ–±—ã—Ç–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

---

#### `LogFileManager.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏ –ª–æ–≥–æ–≤.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `ensureDirectory($path)` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

---

### 6. Exception (–ò—Å–∫–ª—é—á–µ–Ω–∏—è)

#### `WebhookValidationException.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

**–°–≤–æ–π—Å—Ç–≤–∞:**
- `validationType` ‚Äî —Ç–∏–ø –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (signature, required_field, parse –∏ —Ç.–¥.)
- `context` ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ (–º–∞—Å—Å–∏–≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏:**
- –ù–µ–≤–∞–ª–∏–¥–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏ –≤–µ–±—Ö—É–∫–∞
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- –û—à–∏–±–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON

---

#### `WebhookLoggingException.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏:**
- –û—à–∏–±–∫–µ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª
- –û—à–∏–±–∫–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –û—à–∏–±–∫–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π —Å–æ–±—ã—Ç–∏—è

---

## üîå API Endpoints

### 1. `api/webhook-handler.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –ø—Ä–∏—ë–º–∞ –≤–µ–±—Ö—É–∫–æ–≤ –æ—Ç Bitrix24.

**–ú–µ—Ç–æ–¥:** POST

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
- `Content-Type: application/json` –∏–ª–∏ `application/x-www-form-urlencoded`
- `X-Bitrix-Signature` ‚Äî –ø–æ–¥–ø–∏—Å—å –≤–µ–±—Ö—É–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "event": "ONTASKADD",
  "data": {
    "TASK": {
      "ID": 123,
      "TITLE": "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞"
    }
  }
}
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (—É—Å–ø–µ—Ö):**
```json
{
  "success": true,
  "event": "ONTASKADD",
  "category": "tasks",
  "logging_id": "2025-12-18T10:00:00+03:00",
  "timestamp": "2025-12-18T10:00:00+03:00"
}
```

**–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:**
- `200` ‚Äî —É—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- `400` ‚Äî –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `401` ‚Äî –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∏
- `405` ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–π –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞
- `500` ‚Äî –æ—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

### 2. `api/webhook-logs.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** API –¥–ª—è —á—Ç–µ–Ω–∏—è –ª–æ–≥–æ–≤.

**–ú–µ—Ç–æ–¥:** GET

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (tasks, smart-processes, errors)
- `event` ‚Äî —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è
- `dateFrom` ‚Äî –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (YYYY-MM-DD)
- `dateTo` ‚Äî –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (YYYY-MM-DD)
- `hour` ‚Äî —á–∞—Å (0-23)
- `page` ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)
- `limit` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 50)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/webhook-logs.php?category=tasks&dateFrom=2025-12-18&page=1&limit=50
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "data": [
    {
      "id": "2025-12-18T10:00:00+03:00",
      "category": "tasks",
      "event": "ONTASKADD",
      "timestamp": "2025-12-18T10:00:00+03:00",
      "details": {
        "task_id": 123,
        "task_title": "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞"
      },
      "payload": {...},
      "metadata": {...}
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 100,
    "totalPages": 2
  }
}
```

---

### 3. `api/webhook-realtime.php`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Server-Sent Events (SSE) –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

**–ú–µ—Ç–æ–¥:** GET

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `lastTimestamp` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –ª–æ–≥–∞ (ISO 8601)
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/webhook-realtime.php?lastTimestamp=2025-12-18T10:00:00+03:00&category=tasks
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (SSE):**
```
event: new_logs
data: [{"id": "...", "event": "...", ...}]

event: keep_alive
data: {"timestamp": "2025-12-18T10:00:00+03:00"}

event: error
data: {"message": "–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏"}
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. Bitrix24 –≤—ã—á–∏—Å–ª—è–µ—Ç HMAC-SHA256 –æ—Ç raw body –∑–∞–ø—Ä–æ—Å–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ–∫—Ä–µ—Ç–∞
2. –ü–æ–¥–ø–∏—Å—å –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-Bitrix-Signature`
3. –°–µ—Ä–≤–µ—Ä –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–≤–æ—é –ø–æ–¥–ø–∏—Å—å –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –ø–æ–ª—É—á–µ–Ω–Ω–æ–π
4. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `hash_equals()` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç timing attacks

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–∞:**
1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `webhook-secret.php` –∏–∑ `webhook-secret.php.example`
2. –£–∫–∞–∑–∞—Ç—å —Ç–æ–∫–µ–Ω, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π Bitrix24
3. –§–∞–π–ª —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`

**–ü—Ä–∏–º–µ—Ä:**
```php
// webhook-secret.php
return 'your_webhook_secret_token_from_bitrix24';
```

---

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

1. **Timing attacks:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `hash_equals()` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–µ–π
2. **Directory traversal:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Ç–µ–π —á–µ—Ä–µ–∑ `WebhookLogsConfig::isPathSafe()`
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Entity
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–∞: 10 –ú–ë

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤

### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤

**–ü—É—Ç—å:** `logs/webhooks/{category}/YYYY-MM-DD-HH.json`

**–ü—Ä–∏–º–µ—Ä:** `logs/webhooks/tasks/2025-12-18-10.json`

**–§–æ—Ä–º–∞—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:**
```json
[
  {
    "timestamp": "2025-12-18T10:00:00+03:00",
    "event": "ONTASKADD",
    "details": {
      "task_id": 123,
      "task_title": "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞",
      "created_by": 1,
      "responsible_id": 2
    },
    "payload": {
      "event": "ONTASKADD",
      "data": {
        "TASK": {...}
      }
    },
    "metadata": {
      "ip": "192.168.1.1",
      "signature": "..."
    }
  }
]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —á–∞—Å–∞–º –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è
- JSON —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º (pretty print)
- Unicode —Å–∏–º–≤–æ–ª—ã –Ω–µ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```php
require_once __DIR__ . '/src/WebhookLogs/bootstrap.php';
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–∞

```php
use WebhookLogs\Service\WebhookHandlerService;
use WebhookLogs\Exception\WebhookValidationException;

$handler = new WebhookHandlerService();

try {
    $result = $handler->handleWebhook(
        file_get_contents('php://input'),
        $_SERVER,
        $_POST,
        $_GET
    );
    
    http_response_code(200);
    echo json_encode($result);
} catch (WebhookValidationException $e) {
    http_response_code(401);
    echo json_encode(['error' => $e->getMessage()]);
}
```

### –ß—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤

```php
use WebhookLogs\Service\WebhookLogsApiService;

$apiService = new WebhookLogsApiService();

$logs = $apiService->getLogs(
    [
        'category' => 'tasks',
        'dateFrom' => '2025-12-18',
        'dateTo' => '2025-12-18'
    ],
    1,  // —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    50  // –ª–∏–º–∏—Ç
);
```

---

## üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Bitrix24

### –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –≤–µ–±—Ö—É–∫–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º** ‚Üí **–î—Ä—É–≥–æ–µ** ‚Üí **–ò—Å—Ö–æ–¥—è—â–∏–µ –≤–µ–±—Ö—É–∫–∏**
2. –ù–∞–∂–º–∏—Ç–µ **–î–æ–±–∞–≤–∏—Ç—å –≤–µ–±—Ö—É–∫**
3. –£–∫–∞–∂–∏—Ç–µ:
   - **URL**: `https://your-domain.com/api/webhook-handler.php`
   - **–°–æ–±—ã—Ç–∏—è**: –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–ó–∞–¥–∞—á–∏, –°–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å—ã)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤–µ–±—Ö—É–∫
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ `webhook-secret.php`

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Bitrix24:**
- https://context7.com/bitrix24/rest/webhook/
- https://apidocs.bitrix24.ru/rest_help/general/webhooks/index.php

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

**–§–∞–π–ª—ã –ª–æ–≥–æ–≤:**
- `logs/webhooks/tasks/` ‚Äî —Å–æ–±—ã—Ç–∏—è –∑–∞–¥–∞—á
- `logs/webhooks/smart-processes/` ‚Äî —Å–æ–±—ã—Ç–∏—è —Å–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `logs/webhooks/errors/` ‚Äî –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API:**
```bash
curl "https://your-domain.com/api/webhook-logs.php?category=tasks&dateFrom=2025-12-18"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞

**–°–∫—Ä–∏–ø—Ç:** `test-webhook-endpoint.sh`

```bash
./test-webhook-endpoint.sh
```

**–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
curl -X POST https://your-domain.com/api/webhook-handler.php \
  -H "Content-Type: application/json" \
  -H "X-Bitrix-Signature: your_signature" \
  -d '{"event":"ONTASKADD","data":{"TASK":{"ID":123}}}'
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–§–∞–π–ª:** `src/WebhookLogs/Config/WebhookLogsConfig.php`

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `getBaseLogsPath()` ‚Äî –ø—É—Ç—å –∫ –ª–æ–≥–∞–º
- `getDefaultPaginationLimit()` ‚Äî –ª–∏–º–∏—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (50)
- `getMaxLogFileSize()` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (10 –ú–ë)
- `getMaxLogEntriesPerFile()` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (10000)
- `getTimezone()` ‚Äî —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å (`Europe/Minsk`)

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```php
use WebhookLogs\Config\WebhookLogsConfig;

// –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
$errors = WebhookLogsConfig::validate();
if (!empty($errors)) {
    foreach ($errors as $error) {
        error_log("Config error: {$error}");
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π)
WebhookLogsConfig::initialize();
```

---

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫

1. **WebhookValidationException:**
   - –ù–µ–≤–∞–ª–∏–¥–Ω–∞—è –ø–æ–¥–ø–∏—Å—å
   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
   - –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON

2. **WebhookLoggingException:**
   - –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª
   - –û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π

3. **–û–±—â–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:**
   - –û—à–∏–±–∫–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
   - –û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤:
- `logs/webhooks/errors/YYYY-MM-DD-HH.json`
- PHP error_log (—á–µ—Ä–µ–∑ `error_log()`)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏ –æ–± –æ—à–∏–±–∫–µ:**
```json
{
  "timestamp": "2025-12-18T10:00:00+03:00",
  "error": "Invalid webhook signature",
  "file": "/path/to/file.php",
  "line": 123,
  "trace": "...",
  "category": "errors",
  "ip": "192.168.1.1",
  "payload": {...},
  "raw_body": "..."
}
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
   - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - API –∑–∞–ø—Ä–æ—Å—ã –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 2 –º–∏–Ω—É—Ç—ã

2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —á–∞—Å–∞–º:**
   - –§–∞–π–ª—ã —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –ø–æ —á–∞—Å–∞–º –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è
   - –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∑–∞ –¥–∞—Ç—É –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

3. **–ü–æ—Ç–æ–∫–æ–≤–æ–µ —á—Ç–µ–Ω–∏–µ:**
   - –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö (>5000 –∑–∞–ø–∏—Å–µ–π) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–≤–æ–µ —á—Ç–µ–Ω–∏–µ

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10 –ú–ë
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ñ–∞–π–ª–µ: 10000
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–æ–≤ –∑–∞ –∑–∞–ø—Ä–æ—Å: 10000
- –¢–∞–π–º–∞—É—Ç SSE —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: 5 –º–∏–Ω—É—Ç

---

## üîó –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [README –º–æ–¥—É–ª—è](../../src/WebhookLogs/README.md)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è](../../DOCS/USER-GUIDE/logs-webhooks/02-architecture.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ](../../DOCS/GUIDES/webhook-setup.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫](../../DOCS/GUIDES/webhook-troubleshooting.md)
- [TASK-018: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥—É–ª—è](../../DOCS/TASKS/ARCHIVE/TASK-018-refactor-webhook-logs-module.md)

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- **2025-12-18 10:00 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω –∞–Ω–∞–ª–∏–∑ –º–æ–¥—É–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –≤–µ–±—Ö—É–∫–æ–≤ Bitrix24

---

**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0



