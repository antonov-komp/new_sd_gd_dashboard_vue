# Bitrix24 REST Application

**Дата создания:** 2025-12-05 (UTC+3, Брест)  
**Статус:** ✅ Работает

## Описание

REST приложение для Bitrix24 с пользовательским интерфейсом и пунктом меню в левой части экрана. Приложение отображает информацию о профиле пользователя.

## Структура проекта

```
/var/www/back/
├── index.php          # Главная страница приложения (UI)
├── install.php        # Страница установки приложения
├── checkserver.php    # Проверка сервера (cURL, права доступа)
├── crest.php          # Библиотека для работы с Bitrix24 REST API
├── settings.php       # Настройки приложения (CLIENT_ID, CLIENT_SECRET)
├── .gitignore         # Игнорируемые файлы (settings.php)
├── logs/              # Логи приложения
└── README.md          # Документация проекта
```

## Функциональность

### ✅ Реализовано:

1. **Установка приложения** (`install.php`)
   - Обработка установки через Bitrix24
   - Сохранение токенов доступа
   - Отображение статуса установки

2. **Главная страница** (`index.php`)
   - Пользовательский интерфейс
   - Получение и отображение профиля пользователя через REST API
   - Обработка ошибок подключения
   - Интеграция с Bitrix24 UI (BX24 API)

3. **Проверка сервера** (`checkserver.php`)
   - Проверка наличия библиотеки cURL
   - Проверка прав на создание файлов
   - Проверка прав на создание логов

4. **Настройки** (`settings.php`)
   - Application ID (CLIENT_ID)
   - Application Secret (CLIENT_SECRET)
   - Файл в .gitignore для безопасности

## Настройка в Bitrix24

### Параметры приложения:

- **Application ID:** `local.69330b1ace2c65.27410382`
- **Application Secret:** (указан в `settings.php`)
- **Install URL:** `https://ваш-домен.com/back/install.php`
- **Application URL:** `https://ваш-домен.com/back/index.php`

### Тип приложения:

- REST приложение с пользовательским интерфейсом
- Пункт меню в левой части экрана Bitrix24

## Используемые технологии

- **PHP 8.3+** - серверная часть
- **Bitrix24 REST API** - интеграция с Bitrix24
- **CRest библиотека** - обертка для работы с REST API
- **Bitrix24 UI Kit** - интерфейс приложения (BX24 API)

## API методы

### Используемые методы Bitrix24 REST API:

- `profile` - получение профиля пользователя
  - Документация: https://context7.com/bitrix24/rest/profile

## Установка и запуск

1. **Настройка в Bitrix24:**
   - Создайте приложение в разделе "Разработчикам"
   - Укажите Install URL и Application URL
   - Скопируйте CLIENT_ID и CLIENT_SECRET в `settings.php`

2. **Установка приложения:**
   - Откройте Install URL в браузере
   - Или установите через интерфейс Bitrix24
   - После установки появится файл `settings.json`

3. **Использование:**
   - Приложение появится в меню Bitrix24
   - При клике откроется `index.php` с информацией о пользователе

## Проверка работоспособности

### Проверка сервера:
```
https://ваш-домен.com/back/checkserver.php
```

Должны быть проверены:
- ✅ Наличие библиотеки cURL
- ✅ Права на создание файлов
- ✅ Права на создание логов

### Проверка установки:
```
https://ваш-домен.com/back/install.php
```

### Главная страница:
```
https://ваш-домен.com/back/index.php
```

## Безопасность

- `settings.php` добавлен в `.gitignore`
- Секретные данные не хранятся в репозитории
- Используется HTTPS для подключения к Bitrix24

## Логирование

Логи сохраняются в папке `logs/`:
```
logs/YYYY-MM-DD/HH/timestamp_type_random.log
```

## Устранение проблем

См. файл `TROUBLESHOOTING.md` для решения типичных проблем.

## История изменений

- **2025-12-05** - Создание проекта, настройка приложения
  - Исправлены синтаксические ошибки в `install.php` и `index.php`
  - Добавлен пользовательский интерфейс
  - Настроена интеграция с Bitrix24 REST API
  - Приложение успешно установлено и работает

## Контакты и поддержка

Для вопросов и поддержки обращайтесь к разработчику проекта.

---

**Приложение готово к использованию!** ✅
