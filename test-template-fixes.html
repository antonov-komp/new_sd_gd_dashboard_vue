<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è template –≤ SectorDashboard</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f8f9fa; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: white; }
        .status { padding: 8px 12px; border-radius: 20px; font-weight: bold; display: inline-block; margin: 5px; }
        .status.fixed { background: #d4edda; color: #155724; }
        .status.testing { background: #cce5ff; color: #004085; }
        .code { background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; margin: 10px 0; white-space: pre-wrap; }
        .test-link { display: inline-block; padding: 12px 20px; background: #007bff; color: white; text-decoration: none; border-radius: 5px; margin: 10px 5px; transition: all 0.3s; }
        .test-link:hover { background: #0056b3; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
    </style>
</head>
<body>
    <h1>üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è template –≤ SectorDashboard</h1>

    <div class="test-section">
        <h2>‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å template</h2>

        <h3>1. <span class="status fixed">–ò–°–ü–†–ê–í–õ–ï–ù–û</span> –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ state.stages</h3>
        <p><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> –í template –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `state.stages`, –Ω–æ `state` - —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –∏–∑ setup —Å `...state`</p>
        <p><strong>–†–µ—à–µ–Ω–∏–µ:</strong> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `stages` –Ω–∞–ø—Ä—è–º—É—é, –ø–æ—Å–∫–æ–ª—å–∫—É `...state` –¥–µ–ª–∞–µ—Ç –≤—Å–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≤ template</p>
        <div class="code">// –ë—ã–ª–æ (–æ—à–∏–±–∫–∞):
v-for="stage in state.stages"
{{ state.stages.length }}

// –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
v-for="stage in stages"
{{ stages.length }}</div>

        <h3>2. <span class="status fixed">–ò–°–ü–†–ê–í–õ–ï–ù–û</span> –ó–∞—â–∏—Ç–∞ –æ—Ç undefined —Å–≤–æ–π—Å—Ç–≤</h3>
        <p><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> –ï—Å–ª–∏ `stages` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º, –∫–æ–¥ –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π</p>
        <p><strong>–†–µ—à–µ–Ω–∏–µ:</strong> –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `Array.isArray(stages)` –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</p>
        <div class="code">// –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞:
v-if="Array.isArray(stages) && stages.length > 0"
v-for="stage in (Array.isArray(stages) ? stages : [])"
{{ Array.isArray(stages) ? stages.length : 0 }}</div>

        <h3>3. <span class="status fixed">–ò–°–ü–†–ê–í–õ–ï–ù–û</span> DEBUG –±–ª–æ–∫ –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π UI</h3>
        <p><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> DEBUG –±–ª–æ–∫ —Å –∫—Ä–∞—Å–Ω—ã–º —Ñ–æ–Ω–æ–º –±—ã–ª –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ</p>
        <p><strong>–†–µ—à–µ–Ω–∏–µ:</strong> –ó–∞–º–µ–Ω–µ–Ω –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫</p>
    </div>

    <div class="test-section">
        <h2>üéØ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–µ–ø–µ—Ä—å</h2>

        <h3>–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞ —Å–µ–∫—Ç–æ—Ä–∞:</h3>
        <ol>
            <li><strong>‚úÖ Template —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è</strong> –±–µ–∑ –æ—à–∏–±–æ–∫ Vue</li>
            <li><strong>‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏</strong> "–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–µ–∫—Ç–æ—Ä–∞..."</li>
            <li><strong>‚úÖ –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ</strong> –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —ç—Ç–∞–ø—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</li>
            <li><strong>‚úÖ –ü—Ä–∏ –æ—à–∏–±–∫–µ</strong> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"</li>
            <li><strong>‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Å—Å–∏–≤–æ–≤</strong> –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –æ—à–∏–±–∫–∏</li>
        </ol>

        <h3>–õ–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:</h3>
        <div class="code">[SectorDashboard] SETUP called for sector: pdm
[SectorDashboard] State initialized: {hasStages: true, stagesType: 'object', stagesIsArray: true, stagesValue: []}
[SectorDashboard] üöÄ Mounted for sector: pdm (PDM)
[SectorDashboard] üì° Starting data load for sector: pdm
‚úÖ [useUniversalDashboardActions] Sector data loaded successfully for pdm
[SectorDashboard] ‚úÖ Data loaded successfully for sector: pdm</code>
    </div>

    <div class="test-section">
        <h2>üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏</h2>
        <p>–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</p>

        <a href="https://back.kompo.by/rest_api_aps/sd_it_gen_plan/index.php#/dashboard/sector-pdm" class="test-link">
            üîß –°–µ–∫—Ç–æ—Ä PDM (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π template)
        </a>

        <a href="https://back.kompo.by/rest_api_aps/sd_it_gen_plan/index.php#/dashboard/sector-bitrix24" class="test-link">
            üåê –°–µ–∫—Ç–æ—Ä Bitrix24 (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π template)
        </a>

        <a href="https://back.kompo.by/rest_api_aps/sd_it_gen_plan/index.php#/dashboard/sector-infrastructure" class="test-link">
            üñ•Ô∏è –°–µ–∫—Ç–æ—Ä Infrastructure (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π template)
        </a>
    </div>

    <div class="test-section">
        <h2>üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π</h2>

        <h3>–§–∞–π–ª—ã, –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ:</h3>
        <ul>
            <li><code>vue-app/src/components/SectorDashboard.vue</code>
                <ul>
                    <li>‚úÖ –ó–∞–º–µ–Ω–µ–Ω–æ `state.stages` –Ω–∞ `stages` –≤ template (8 –º–µ—Å—Ç)</li>
                    <li>‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `Array.isArray(stages)` (6 –º–µ—Å—Ç)</li>
                    <li>‚úÖ DEBUG –±–ª–æ–∫ –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π UI</li>
                    <li>‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã console.log –≤ setup –∏ onMounted</li>
                </ul>
            </li>
        </ul>

        <h3>–ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞:</h3>
        <div class="code">–í Vue 3 Composition API –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `...state` –≤ return setup,
–≤—Å–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑ `state` —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≤ template –Ω–∞–ø—Ä—è–º—É—é.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `state.stages` –±—ã–ª–æ –æ—à–∏–±–∫–æ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ `state` - —ç—Ç–æ
—É–∂–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ–±—ä–µ–∫—Ç, –∞ –Ω–µ —Å—Å—ã–ª–∫–∞ –Ω–∞ composable.</div>

        <h3>Vue reactivity –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ:</h3>
        <div class="code">setup() {
  const state = useUniversalDashboardState(sectorId);
  return { ...state }; // stages —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –≤ template
}

template:
  {{ stages }} ‚úÖ (—Ä–∞–±–æ—Ç–∞–µ—Ç)
  {{ state.stages }} ‚ùå (state –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ template scope)</div>
    </div>

    <div class="test-section">
        <h2>üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏</h2>
        <ol>
            <li><strong>–û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥—ã —Å–µ–∫—Ç–æ—Ä–æ–≤</strong> - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫</li>
            <li><strong>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏</strong> - –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</li>
            <li><strong>–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"</strong> –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö</li>
            <li><strong>–£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ Vue –æ—à–∏–±–æ–∫</strong> –≤ –∫–æ–Ω—Å–æ–ª–∏</li>
            <li><strong>–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</strong> –≤–º–µ—Å—Ç–æ mock</li>
        </ol>

        <div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px; margin-top: 15px;">
            <strong>üéâ Template –∏—Å–ø—Ä–∞–≤–ª–µ–Ω!</strong><br>
            –¢–µ–ø–µ—Ä—å –¥–∞—à–±–æ—Ä–¥—ã —Å–µ–∫—Ç–æ—Ä–æ–≤ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ Vue.
        </div>
    </div>
</body>
</html>