const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ticketListUtils-M5rAkasm.js","./priority-config-B4f8aY0n.js","./main-BakJJ3UO.js","./main-DFwah1ox.css","./priority-config-Bxxce_5E.css","./ticket-mapper-D6J6RPoh.js"])))=>i.map(i=>d[i]);
var Gt=Object.defineProperty;var Ft=(s,t,e)=>t in s?Gt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var et=(s,t,e)=>Ft(s,typeof t!="symbol"?t+"":t,e);import{_ as we,g as Z,G as Te,m as ot,H as Wt,f as ke,o as m,j as re,k as oe,a as _,d as Q,b as r,y as ve,n as ne,B as ue,I as Ht,J as ze,K as ie,L as Vt,M as At,N as Fe,O as Yt,P as zt,Q as jt,R as qt,S as Zt,U as Xt,V as Jt,W as Kt,X as rt,c as j,Y as w,t as C,F as ae,e as se,Z as Je,$ as Qt,x as er,l as $e,a0 as tr,z as Dt,r as Et,a1 as Bt,a2 as Ae,T as Ke,a3 as He,a4 as bt}from"./main-BakJJ3UO.js";import{F as Nt}from"./FiltersPanel-DITtOw9g.js";import{L as De,D as rr,B as ar}from"./index-B91zTF2i.js";import{g as wt,a as sr,b as Ct,D as or,T as Qe,c as nt}from"./priority-config-B4f8aY0n.js";const nr={key:0,class:"modal-overlay"},lr={class:"modal-container",role:"dialog","aria-labelledby":"modal-title","aria-modal":"true"},ir={class:"modal-body"},cr={class:"mode-description"},dr={__name:"PeriodModeInfoModal",props:{isVisible:{type:Boolean,required:!0},currentMode:{type:String,default:"weeks",validator:s=>["weeks","months"].includes(s)}},emits:["close","start-loading","select-mode"],setup(s,{emit:t}){const e=s,a=t,n=Z(e.currentMode);function l(y){if(!["weeks","months"].includes(y)){console.warn("[PeriodModeInfoModal] Invalid mode:",y);return}n.value=y,console.log("[DEBUG Modal] handleModeSelect: mode =",y),console.log("[DEBUG Modal] Emitting select-mode event"),a("select-mode",y),console.log("[DEBUG Modal] Emitting close event"),a("close"),console.log("[DEBUG Modal] Scheduling start-loading event in 100ms"),setTimeout(()=>{console.log("[DEBUG Modal] Emitting start-loading event"),a("start-loading")},100)}function d(){console.log("[DEBUG Modal] handleClose called, selectedMode =",n.value),console.log("[DEBUG Modal] Emitting select-mode event with",n.value),a("select-mode",n.value),console.log("[DEBUG Modal] Emitting close event"),a("close")}function c(y){y.key==="Escape"&&e.isVisible&&d()}return Te(()=>e.currentMode,y=>{["weeks","months"].includes(y)&&(n.value=y)}),ot(()=>{e.isVisible&&document.addEventListener("keydown",c)}),Wt(()=>{document.removeEventListener("keydown",c)}),Te(()=>e.isVisible,y=>{y?(document.addEventListener("keydown",c),n.value=e.currentMode):document.removeEventListener("keydown",c)}),(y,f)=>(m(),ke(Ht,{to:"body"},[re(ue,{name:"modal-fade"},{default:oe(()=>[s.isVisible?(m(),_("div",nr,[r("div",lr,[r("div",{class:"modal-header"},[f[2]||(f[2]=r("h2",{id:"modal-title",class:"modal-title"},[r("span",{class:"modal-icon"},"‚ÑπÔ∏è"),ve(" –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è ")],-1)),r("button",{class:"modal-close-btn",onClick:d,"aria-label":"–ó–∞–∫—Ä—ã—Ç—å",type:"button"}," √ó ")]),r("div",ir,[f[5]||(f[5]=r("p",{class:"modal-description"}," –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π: ",-1)),r("div",cr,[r("button",{class:ne(["mode-item mode-item--clickable",{"mode-item--selected":n.value==="weeks"}]),onClick:f[0]||(f[0]=D=>l("weeks")),type:"button"},[...f[3]||(f[3]=[r("div",{class:"mode-header"},[r("span",{class:"mode-icon"},"üìÖ"),r("h3",{class:"mode-title"},"4 –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–µ–¥–µ–ª–∏")],-1),r("p",{class:"mode-text"}," –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 –Ω–µ–¥–µ–ª–∏ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –Ω–µ–¥–µ–ª—è–º. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–∏–Ω–∞–º–∏–∫–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏—è —Ç–∏–∫–µ—Ç–æ–≤. ",-1)])],2),r("button",{class:ne(["mode-item mode-item--clickable",{"mode-item--selected":n.value==="months"}]),onClick:f[1]||(f[1]=D=>l("months")),type:"button"},[...f[4]||(f[4]=[r("div",{class:"mode-header"},[r("span",{class:"mode-icon"},"üìä"),r("h3",{class:"mode-title"},"3 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –º–µ—Å—è—Ü–∞")],-1),r("p",{class:"mode-text"}," –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –Ω–µ–¥–µ–ª—è–º –≤–Ω—É—Ç—Ä–∏ –º–µ—Å—è—Ü–µ–≤. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤—ã—è–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–æ–≤. ",-1)])],2)])])])])):Q("",!0)]),_:1})]))}},ur=we(dr,[["__scopeId","data-v-4a42a9a6"]]);/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Tt=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var s=window.screen;if(s)return(s.deviceXDPI||1)/(s.logicalXDPI||1)}return 1}(),Ve={toTextLines:function(s){var t=[],e;for(s=[].concat(s);s.length;)e=s.pop(),typeof e=="string"?t.unshift.apply(t,e.split(`
`)):Array.isArray(e)?s.push.apply(s,e):Fe(s)||t.unshift(""+e);return t},textSize:function(s,t,e){var a=[].concat(t),n=a.length,l=s.font,d=0,c;for(s.font=e.string,c=0;c<n;++c)d=Math.max(s.measureText(a[c]).width,d);return s.font=l,{height:n*e.lineHeight,width:d}},bound:function(s,t,e){return Math.max(s,Math.min(t,e))},arrayDiff:function(s,t){var e=s.slice(),a=[],n,l,d,c;for(n=0,d=t.length;n<d;++n)c=t[n],l=e.indexOf(c),l===-1?a.push([c,1]):e.splice(l,1);for(n=0,d=e.length;n<d;++n)a.push([e[n],-1]);return a},rasterize:function(s){return Math.round(s*Tt)/Tt}};function tt(s,t){var e=t.x,a=t.y;if(e===null)return{x:0,y:-1};if(a===null)return{x:1,y:0};var n=s.x-e,l=s.y-a,d=Math.sqrt(n*n+l*l);return{x:d?n/d:0,y:d?l/d:-1}}function vr(s,t,e,a,n){switch(n){case"center":e=a=0;break;case"bottom":e=0,a=1;break;case"right":e=1,a=0;break;case"left":e=-1,a=0;break;case"top":e=0,a=-1;break;case"start":e=-e,a=-a;break;case"end":break;default:n*=Math.PI/180,e=Math.cos(n),a=Math.sin(n);break}return{x:s,y:t,vx:e,vy:a}}var kr=0,Ut=1,St=2,It=4,Mt=8;function je(s,t,e){var a=kr;return s<e.left?a|=Ut:s>e.right&&(a|=St),t<e.top?a|=Mt:t>e.bottom&&(a|=It),a}function hr(s,t){for(var e=s.x0,a=s.y0,n=s.x1,l=s.y1,d=je(e,a,t),c=je(n,l,t),y,f,D;!(!(d|c)||d&c);)y=d||c,y&Mt?(f=e+(n-e)*(t.top-a)/(l-a),D=t.top):y&It?(f=e+(n-e)*(t.bottom-a)/(l-a),D=t.bottom):y&St?(D=a+(l-a)*(t.right-e)/(n-e),f=t.right):y&Ut&&(D=a+(l-a)*(t.left-e)/(n-e),f=t.left),y===d?(e=f,a=D,d=je(e,a,t)):(n=f,l=D,c=je(n,l,t));return{x0:e,x1:n,y0:a,y1:l}}function qe(s,t){var e=t.anchor,a=s,n,l;return t.clamp&&(a=hr(a,t.area)),e==="start"?(n=a.x0,l=a.y0):e==="end"?(n=a.x1,l=a.y1):(n=(a.x0+a.x1)/2,l=(a.y0+a.y1)/2),vr(n,l,s.vx,s.vy,t.align)}var Ze={arc:function(s,t){var e=(s.startAngle+s.endAngle)/2,a=Math.cos(e),n=Math.sin(e),l=s.innerRadius,d=s.outerRadius;return qe({x0:s.x+a*l,y0:s.y+n*l,x1:s.x+a*d,y1:s.y+n*d,vx:a,vy:n},t)},point:function(s,t){var e=tt(s,t.origin),a=e.x*s.options.radius,n=e.y*s.options.radius;return qe({x0:s.x-a,y0:s.y-n,x1:s.x+a,y1:s.y+n,vx:e.x,vy:e.y},t)},bar:function(s,t){var e=tt(s,t.origin),a=s.x,n=s.y,l=0,d=0;return s.horizontal?(a=Math.min(s.x,s.base),l=Math.abs(s.base-s.x)):(n=Math.min(s.y,s.base),d=Math.abs(s.base-s.y)),qe({x0:a,y0:n+d,x1:a+l,y1:n,vx:e.x,vy:e.y},t)},fallback:function(s,t){var e=tt(s,t.origin);return qe({x0:s.x,y0:s.y,x1:s.x+(s.width||0),y1:s.y+(s.height||0),vx:e.x,vy:e.y},t)}},Ce=Ve.rasterize;function yr(s){var t=s.borderWidth||0,e=s.padding,a=s.size.height,n=s.size.width,l=-n/2,d=-a/2;return{frame:{x:l-e.left-t,y:d-e.top-t,w:n+e.width+t*2,h:a+e.height+t*2},text:{x:l,y:d,w:n,h:a}}}function mr(s,t){var e=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!e)return null;if(e.xCenter!==void 0&&e.yCenter!==void 0)return{x:e.xCenter,y:e.yCenter};var a=e.getBasePixel();return s.horizontal?{x:a,y:null}:{x:null,y:a}}function pr(s){return s instanceof qt?Ze.arc:s instanceof Zt?Ze.point:s instanceof Xt?Ze.bar:Ze.fallback}function fr(s,t,e,a,n,l){var d=Math.PI/2;if(l){var c=Math.min(l,n/2,a/2),y=t+c,f=e+c,D=t+a-c,x=e+n-c;s.moveTo(t,f),y<D&&f<x?(s.arc(y,f,c,-Math.PI,-d),s.arc(D,f,c,-d,0),s.arc(D,x,c,0,d),s.arc(y,x,c,d,Math.PI)):y<D?(s.moveTo(y,e),s.arc(D,f,c,-d,d),s.arc(y,f,c,d,Math.PI+d)):f<x?(s.arc(y,f,c,-Math.PI,0),s.arc(y,x,c,0,Math.PI)):s.arc(y,f,c,-Math.PI,Math.PI),s.closePath(),s.moveTo(t,e)}else s.rect(t,e,a,n)}function gr(s,t,e){var a=e.backgroundColor,n=e.borderColor,l=e.borderWidth;!a&&(!n||!l)||(s.beginPath(),fr(s,Ce(t.x)+l/2,Ce(t.y)+l/2,Ce(t.w)-l,Ce(t.h)-l,e.borderRadius),s.closePath(),a&&(s.fillStyle=a,s.fill()),n&&l&&(s.strokeStyle=n,s.lineWidth=l,s.lineJoin="miter",s.stroke()))}function _r(s,t,e){var a=e.lineHeight,n=s.w,l=s.x,d=s.y+a/2;return t==="center"?l+=n/2:(t==="end"||t==="right")&&(l+=n),{h:a,w:n,x:l,y:d}}function br(s,t,e){var a=s.shadowBlur,n=e.stroked,l=Ce(e.x),d=Ce(e.y),c=Ce(e.w);n&&s.strokeText(t,l,d,c),e.filled&&(a&&n&&(s.shadowBlur=0),s.fillText(t,l,d,c),a&&n&&(s.shadowBlur=a))}function wr(s,t,e,a){var n=a.textAlign,l=a.color,d=!!l,c=a.font,y=t.length,f=a.textStrokeColor,D=a.textStrokeWidth,x=f&&D,X;if(!(!y||!d&&!x))for(e=_r(e,n,c),s.font=c.string,s.textAlign=n,s.textBaseline="middle",s.shadowBlur=a.textShadowBlur,s.shadowColor=a.textShadowColor,d&&(s.fillStyle=l),x&&(s.lineJoin="round",s.lineWidth=D,s.strokeStyle=f),X=0,y=t.length;X<y;++X)br(s,t[X],{stroked:x,filled:d,w:e.w,x:e.x,y:e.y+e.h*X})}var Ot=function(s,t,e,a){var n=this;n._config=s,n._index=a,n._model=null,n._rects=null,n._ctx=t,n._el=e};ze(Ot.prototype,{_modelize:function(s,t,e,a){var n=this,l=n._index,d=Yt(ie([e.font,{}],a,l)),c=ie([e.color,zt.color],a,l);return{align:ie([e.align,"center"],a,l),anchor:ie([e.anchor,"center"],a,l),area:a.chart.chartArea,backgroundColor:ie([e.backgroundColor,null],a,l),borderColor:ie([e.borderColor,null],a,l),borderRadius:ie([e.borderRadius,0],a,l),borderWidth:ie([e.borderWidth,0],a,l),clamp:ie([e.clamp,!1],a,l),clip:ie([e.clip,!1],a,l),color:c,display:s,font:d,lines:t,offset:ie([e.offset,4],a,l),opacity:ie([e.opacity,1],a,l),origin:mr(n._el,a),padding:jt(ie([e.padding,4],a,l)),positioner:pr(n._el),rotation:ie([e.rotation,0],a,l)*(Math.PI/180),size:Ve.textSize(n._ctx,t,d),textAlign:ie([e.textAlign,"start"],a,l),textShadowBlur:ie([e.textShadowBlur,0],a,l),textShadowColor:ie([e.textShadowColor,c],a,l),textStrokeColor:ie([e.textStrokeColor,c],a,l),textStrokeWidth:ie([e.textStrokeWidth,0],a,l)}},update:function(s){var t=this,e=null,a=null,n=t._index,l=t._config,d,c,y,f=ie([l.display,!0],s,n);f&&(d=s.dataset.data[n],c=Vt(At(l.formatter,[d,s]),d),y=Fe(c)?[]:Ve.toTextLines(c),y.length&&(e=t._modelize(f,y,l,s),a=yr(e))),t._model=e,t._rects=a},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(s,t){var e=this,a=s.ctx,n=e._model,l=e._rects,d;this.visible()&&(a.save(),n.clip&&(d=n.area,a.beginPath(),a.rect(d.left,d.top,d.right-d.left,d.bottom-d.top),a.clip()),a.globalAlpha=Ve.bound(0,n.opacity,1),a.translate(Ce(t.x),Ce(t.y)),a.rotate(n.rotation),gr(a,l.frame,n),wr(a,n.lines,l.text,n),a.restore())}});var Cr=Number.MIN_SAFE_INTEGER||-9007199254740991,Tr=Number.MAX_SAFE_INTEGER||9007199254740991;function Ge(s,t,e){var a=Math.cos(e),n=Math.sin(e),l=t.x,d=t.y;return{x:l+a*(s.x-l)-n*(s.y-d),y:d+n*(s.x-l)+a*(s.y-d)}}function $t(s,t){var e=Tr,a=Cr,n=t.origin,l,d,c,y,f;for(l=0;l<s.length;++l)d=s[l],c=d.x-n.x,y=d.y-n.y,f=t.vx*c+t.vy*y,e=Math.min(e,f),a=Math.max(a,f);return{min:e,max:a}}function Xe(s,t){var e=t.x-s.x,a=t.y-s.y,n=Math.sqrt(e*e+a*a);return{vx:(t.x-s.x)/n,vy:(t.y-s.y)/n,origin:s,ln:n}}var Rt=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};ze(Rt.prototype,{center:function(){var s=this._rect;return{x:s.x+s.w/2,y:s.y+s.h/2}},update:function(s,t,e){this._rotation=e,this._rect={x:t.x+s.x,y:t.y+s.y,w:t.w,h:t.h}},contains:function(s){var t=this,e=1,a=t._rect;return s=Ge(s,t.center(),-t._rotation),!(s.x<a.x-e||s.y<a.y-e||s.x>a.x+a.w+e*2||s.y>a.y+a.h+e*2)},intersects:function(s){var t=this._points(),e=s._points(),a=[Xe(t[0],t[1]),Xe(t[0],t[3])],n,l,d;for(this._rotation!==s._rotation&&a.push(Xe(e[0],e[1]),Xe(e[0],e[3])),n=0;n<a.length;++n)if(l=$t(t,a[n]),d=$t(e,a[n]),l.max<d.min||d.max<l.min)return!1;return!0},_points:function(){var s=this,t=s._rect,e=s._rotation,a=s.center();return[Ge({x:t.x,y:t.y},a,e),Ge({x:t.x+t.w,y:t.y},a,e),Ge({x:t.x+t.w,y:t.y+t.h},a,e),Ge({x:t.x,y:t.y+t.h},a,e)]}});function Pt(s,t,e){var a=t.positioner(s,t),n=a.vx,l=a.vy;if(!n&&!l)return{x:a.x,y:a.y};var d=e.w,c=e.h,y=t.rotation,f=Math.abs(d/2*Math.cos(y))+Math.abs(c/2*Math.sin(y)),D=Math.abs(d/2*Math.sin(y))+Math.abs(c/2*Math.cos(y)),x=1/Math.max(Math.abs(n),Math.abs(l));return f*=n*x,D*=l*x,f+=t.offset*n,D+=t.offset*l,{x:a.x+f,y:a.y+D}}function $r(s,t){var e,a,n,l;for(e=s.length-1;e>=0;--e)for(n=s[e].$layout,a=e-1;a>=0&&n._visible;--a)l=s[a].$layout,l._visible&&n._box.intersects(l._box)&&t(n,l);return s}function Wr(s){var t,e,a,n,l,d,c;for(t=0,e=s.length;t<e;++t)a=s[t],n=a.$layout,n._visible&&(c=new Proxy(a._el,{get:(y,f)=>y.getProps([f],!0)[f]}),l=a.geometry(),d=Pt(c,a.model(),l),n._box.update(d,l,a.rotation()));return $r(s,function(y,f){var D=y._hidable,x=f._hidable;D&&x||x?f._visible=!1:D&&(y._visible=!1)})}var Ye={prepare:function(s){var t=[],e,a,n,l,d;for(e=0,n=s.length;e<n;++e)for(a=0,l=s[e].length;a<l;++a)d=s[e][a],t.push(d),d.$layout={_box:new Rt,_hidable:!1,_visible:!0,_set:e,_idx:d._index};return t.sort(function(c,y){var f=c.$layout,D=y.$layout;return f._idx===D._idx?D._set-f._set:D._idx-f._idx}),this.update(t),t},update:function(s){var t=!1,e,a,n,l,d;for(e=0,a=s.length;e<a;++e)n=s[e],l=n.model(),d=n.$layout,d._hidable=l&&l.display==="auto",d._visible=n.visible(),t|=d._hidable;t&&Wr(s)},lookup:function(s,t){var e,a;for(e=s.length-1;e>=0;--e)if(a=s[e].$layout,a&&a._visible&&a._box.contains(t))return s[e];return null},draw:function(s,t){var e,a,n,l,d,c;for(e=0,a=t.length;e<a;++e)n=t[e],l=n.$layout,l._visible&&(d=n.geometry(),c=Pt(n._el,n.model(),d),l._box.update(c,d,n.rotation()),n.draw(s,c))}},Ar=function(s){if(Fe(s))return null;var t=s,e,a,n;if(Jt(s))if(!Fe(s.label))t=s.label;else if(!Fe(s.r))t=s.r;else for(t="",e=Object.keys(s),n=0,a=e.length;n<a;++n)t+=(n!==0?", ":"")+e[n]+": "+s[e[n]];return""+t},Dr={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Ar,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},de="$datalabels",xt="$default";function Er(s,t){var e=s.datalabels,a={},n=[],l,d;return e===!1?null:(e===!0&&(e={}),t=ze({},[t,e]),l=t.labels||{},d=Object.keys(l),delete t.labels,d.length?d.forEach(function(c){l[c]&&n.push(ze({},[t,l[c],{_key:c}]))}):n.push(t),a=n.reduce(function(c,y){return Kt(y.listeners||{},function(f,D){c[D]=c[D]||{},c[D][y._key||xt]=f}),delete y.listeners,c},{}),{labels:n,listeners:a})}function at(s,t,e,a){if(t){var n=e.$context,l=e.$groups,d;t[l._set]&&(d=t[l._set][l._key],d&&At(d,[n,a])===!0&&(s[de]._dirty=!0,e.update(n)))}}function Br(s,t,e,a,n){var l,d;!e&&!a||(e?a?e!==a&&(d=l=!0):d=!0:l=!0,d&&at(s,t.leave,e,n),l&&at(s,t.enter,a,n))}function Nr(s,t){var e=s[de],a=e._listeners,n,l;if(!(!a.enter&&!a.leave)){if(t.type==="mousemove")l=Ye.lookup(e._labels,t);else if(t.type!=="mouseout")return;n=e._hovered,e._hovered=l,Br(s,a,n,l,t)}}function Ur(s,t){var e=s[de],a=e._listeners.click,n=a&&Ye.lookup(e._labels,t);n&&at(s,a,n,t)}var Lt={id:"datalabels",defaults:Dr,beforeInit:function(s){s[de]={_actives:[]}},beforeUpdate:function(s){var t=s[de];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(s,t,e){var a=t.index,n=s[de],l=n._datasets[a]=[],d=s.isDatasetVisible(a),c=s.data.datasets[a],y=Er(c,e),f=t.meta.data||[],D=s.ctx,x,X,K,B,A,g,u,h;for(D.save(),x=0,K=f.length;x<K;++x)if(u=f[x],u[de]=[],d&&u&&s.getDataVisibility(x)&&!u.skip)for(X=0,B=y.labels.length;X<B;++X)A=y.labels[X],g=A._key,h=new Ot(A,D,u,x),h.$groups={_set:a,_key:g||xt},h.$context={active:!1,chart:s,dataIndex:x,dataset:c,datasetIndex:a},h.update(h.$context),u[de].push(h),l.push(h);D.restore(),ze(n._listeners,y.listeners,{merger:function(E,W,I){W[E]=W[E]||{},W[E][t.index]=I[E],n._listened=!0}})},afterUpdate:function(s){s[de]._labels=Ye.prepare(s[de]._datasets)},afterDatasetsDraw:function(s){Ye.draw(s,s[de]._labels)},beforeEvent:function(s,t){if(s[de]._listened){var e=t.event;switch(e.type){case"mousemove":case"mouseout":Nr(s,e);break;case"click":Ur(s,e);break}}},afterEvent:function(s){var t=s[de],e=t._actives,a=t._actives=s.getActiveElements(),n=Ve.arrayDiff(e,a),l,d,c,y,f,D,x;for(l=0,d=n.length;l<d;++l)if(f=n[l],f[1])for(x=f[0].element[de]||[],c=0,y=x.length;c<y;++c)D=x[c],D.$context.active=f[1]===1,D.update(D.$context);(t._dirty||n.length)&&(Ye.update(t._labels),s.render()),delete t._dirty}};const Sr={class:"ac-chart"},Ir={class:"ac-chart__header"},Mr={class:"ac-chart__subtitle"},Or={class:"ac-chart__controls"},Rr={class:"chart-type-selector"},Pr=["onClick"],xr={class:"chart-type-icon"},Lr={class:"chart-type-label"},Gr={class:"ac-chart__summary"},Fr={class:"summary-week-block summary-week-block--current"},Hr={class:"summary-week-block__title"},Vr={class:"summary-week-block__title-week"},Yr={key:0,class:"summary-week-block__title-dates"},zr={class:"summary-week-block__cards"},jr={class:"summary-card__value-wrapper"},qr={class:"summary-card__value"},Zr=["title"],Xr={class:"percentage-indicator__arrow"},Jr={class:"percentage-indicator__value"},Kr={class:"percentage-indicator__label"},Qr={class:"summary-card__value-wrapper"},ea={class:"summary-card__value-main"},ta=["title"],ra={class:"percentage-indicator__arrow"},aa={class:"percentage-indicator__value"},sa={class:"percentage-indicator__label"},oa={class:"summary-card__breakdown"},na={class:"breakdown-item breakdown-item--this-week"},la={class:"breakdown-item__value"},ia={class:"breakdown-item breakdown-item--other-week"},ca={class:"breakdown-item__value"},da={class:"summary-card__value-wrapper"},ua={class:"summary-card__value-main"},va=["title"],ka={class:"percentage-indicator__arrow"},ha={class:"percentage-indicator__value"},ya={class:"percentage-indicator__label"},ma={class:"summary-card__breakdown"},pa={class:"breakdown-item breakdown-item--this-week"},fa={class:"breakdown-item__value"},ga={class:"breakdown-item breakdown-item--previous-week"},_a={class:"breakdown-item__value"},ba={class:"breakdown-item breakdown-item--older"},wa={class:"breakdown-item__value"},Ca={class:"summary-card summary-card--stages"},Ta={class:"summary-card__tags"},$a={key:0,class:"stage-tag stage-tag--empty"},Wa={key:0,class:"summary-week-divider"},Aa={key:1,class:"summary-week-block summary-week-block--previous"},Da={class:"summary-week-block__title"},Ea={class:"summary-week-block__title-week"},Ba={key:0,class:"summary-week-block__title-dates"},Na={class:"summary-week-block__cards"},Ua={class:"summary-card__value-wrapper"},Sa={class:"summary-card__values-comparison"},Ia={class:"summary-card__value-comparison-item summary-card__value-comparison-item--previous"},Ma={class:"summary-card__value"},Oa={class:"value-label"},Ra={class:"summary-card__value-comparison-item summary-card__value-comparison-item--current"},Pa={class:"summary-card__value summary-card__value--current-week"},xa={class:"value-label"},La=["title"],Ga={class:"percentage-indicator__arrow"},Fa={class:"percentage-indicator__value"},Ha={class:"percentage-indicator__label"},Va={class:"summary-card__value-wrapper"},Ya={class:"summary-card__values-comparison"},za={class:"summary-card__value-comparison-item summary-card__value-comparison-item--previous"},ja={class:"summary-card__value-main"},qa={class:"value-label"},Za={class:"summary-card__value-comparison-item summary-card__value-comparison-item--current"},Xa={class:"summary-card__value-main summary-card__value-main--current-week"},Ja={class:"value-label"},Ka=["title"],Qa={class:"percentage-indicator__arrow"},es={class:"percentage-indicator__value"},ts={class:"percentage-indicator__label"},rs={class:"summary-card__breakdown"},as={class:"breakdown-item breakdown-item--this-week"},ss={class:"breakdown-item__value"},os={class:"breakdown-item breakdown-item--other-week"},ns={class:"breakdown-item__value"},ls={class:"summary-card__value-wrapper"},is={class:"summary-card__values-comparison"},cs={class:"summary-card__value-comparison-item summary-card__value-comparison-item--previous"},ds={class:"summary-card__value-main"},us={class:"value-label"},vs={class:"summary-card__value-comparison-item summary-card__value-comparison-item--current"},ks={class:"summary-card__value-main summary-card__value-main--current-week"},hs={class:"value-label"},ys=["title"],ms={class:"percentage-indicator__arrow"},ps={class:"percentage-indicator__value"},fs={class:"percentage-indicator__label"},gs={class:"summary-card__breakdown"},_s={class:"breakdown-item breakdown-item--this-week"},bs={class:"breakdown-item__value"},ws={class:"breakdown-item breakdown-item--previous-week"},Cs={class:"breakdown-item__value"},Ts={class:"breakdown-item breakdown-item--older"},$s={class:"breakdown-item__value"},Ws={class:"summary-card summary-card--stages summary-card--previous"},As={class:"summary-card__tags"},Ds={key:0,class:"stage-tag stage-tag--empty"},Es={class:"ac-chart__body"},Bs={key:0,class:"split-charts-container"},Ns={class:"chart-wrapper chart-wrapper--left"},Us={class:"chart-canvas-wrapper"},Ss={class:"chart-wrapper chart-wrapper--right"},Is={class:"chart-canvas-wrapper"},Ms={__name:"GraphAdmissionClosureChart",props:{meta:{type:Object,default:()=>({weekNumber:null,weekStartUtc:null,weekEndUtc:null})},data:{type:Object,default:()=>({newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedPreviousWeek:0,carryoverTicketsCreatedOlder:0,carryoverTicketsCreatedOtherWeek:0,series:{new:[0],closed:[0],closedCreatedThisWeek:[0],closedCreatedOtherWeek:[0],carryover:[0],carryoverCreatedThisWeek:[0],carryoverCreatedPreviousWeek:[0],carryoverCreatedOlder:[0],carryoverCreatedOtherWeek:[0]},stagesByWeek:[],stages:[],responsible:[]})}},emits:["open-responsible","open-stages","open-carryover"],setup(s,{emit:t}){rt.register(Lt);const e=s,a=t,n=j(()=>{var o;const i=((o=e.meta)==null?void 0:o.weeks)||[];return i.length>=2?i[i.length-2]:null}),l=[{value:"line",label:"–õ–∏–Ω–µ–π–Ω—ã–π",icon:"üìà"},{value:"bar",label:"–°—Ç–æ–ª–±—á–∞—Ç—ã–π",icon:"üìä"},{value:"doughnut",label:"–ö—Ä—É–≥–æ–≤–∞—è",icon:"üç©"}],d=Z("line"),c={color:"#111827",font:{size:12,weight:"bold"},backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:i=>{var o;return((o=i==null?void 0:i.dataset)==null?void 0:o.borderColor)||"#111827"},borderWidth:1,borderRadius:4,padding:4,offset:8,formatter:i=>i==null||isNaN(i)?"":u(i),display:i=>{var N,G,S,Y;if(((G=(N=i==null?void 0:i.chart)==null?void 0:N.config)==null?void 0:G.type)!=="line")return!1;const T=(Y=(S=i==null?void 0:i.dataset)==null?void 0:S.data)==null?void 0:Y[i.dataIndex];return T!=null&&!isNaN(T)&&isFinite(T)}};j(()=>{var i;return((i=e.meta)==null?void 0:i.weekNumber)??"‚Äî"});const y=()=>{var o,T;const i=((o=e.meta)==null?void 0:o.weeks)||[];return i.length>0?i.map(N=>`–ù–µ–¥–µ–ª—è ${N.weekNumber}`):[(T=e.meta)!=null&&T.weekNumber?`–ù–µ–¥–µ–ª—è ${e.meta.weekNumber}`:"–ù–µ–¥–µ–ª—è"]};function f(i,o,T,N=.3,G=0){if(!o)return((p,k)=>{const L=parseInt(p.slice(1,3),16),M=parseInt(p.slice(3,5),16),J=parseInt(p.slice(5,7),16);return`rgba(${L}, ${M}, ${J}, ${k})`})(T,N);const S=(ee,p)=>{const k=parseInt(ee.slice(1,3),16),L=parseInt(ee.slice(3,5),16),M=parseInt(ee.slice(5,7),16);return`rgba(${k}, ${L}, ${M}, ${p})`},Y=i.createLinearGradient(0,o.bottom,0,o.top);return Y.addColorStop(0,S(T,N)),Y.addColorStop(1,S(T,G)),Y}const D=j(()=>{var S,Y,ee,p;const i=y(),o=Array.isArray((S=e.data.series)==null?void 0:S.new)&&e.data.series.new.length>0?e.data.series.new:[e.data.newTickets??0],T=Array.isArray((Y=e.data.series)==null?void 0:Y.closed)&&e.data.series.closed.length>0?e.data.series.closed:[e.data.closedTickets??0],N=Array.isArray((ee=e.data.series)==null?void 0:ee.closedCreatedThisWeek)&&e.data.series.closedCreatedThisWeek.length>0?e.data.series.closedCreatedThisWeek:[e.data.closedTicketsCreatedThisWeek??0],G=Array.isArray((p=e.data.series)==null?void 0:p.closedCreatedOtherWeek)&&e.data.series.closedCreatedOtherWeek.length>0?e.data.series.closedCreatedOtherWeek:[e.data.closedTicketsCreatedOtherWeek??0];return{labels:i,datasets:[{label:"–ù–æ–≤—ã–µ",data:o,backgroundColor:k=>{const L=k.chart,{ctx:M,chartArea:J}=L;return f(M,J,w.primary)},borderColor:w.primary,borderWidth:3,tension:.4,fill:!0,pointRadius:4,pointBorderWidth:1,pointBorderColor:w.primary,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.primary,pointBackgroundColor:w.primary,datalabels:{...c,anchor:"end",align:"top",offset:10,color:w.primary,borderColor:w.primary}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (–≤—Å–µ)",data:T,backgroundColor:k=>{const L=k.chart,{ctx:M,chartArea:J}=L;return f(M,J,w.success)},borderColor:w.success,borderWidth:3,tension:.4,fill:!0,pointRadius:4,pointBorderWidth:1,pointBorderColor:w.success,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.success,pointBackgroundColor:w.success,datalabels:{...c,anchor:"start",align:"bottom",offset:10,color:w.success,borderColor:w.success}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:N,backgroundColor:w.successLight,borderColor:w.successLight,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:w.successLight,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.successLight,pointBackgroundColor:w.successLight,datalabels:{...c,anchor:"end",align:"bottom",offset:8,color:w.successLight,borderColor:w.successLight}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:G,backgroundColor:w.warning,borderColor:w.warning,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:w.warning,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.warning,pointBackgroundColor:w.warning,datalabels:{...c,anchor:"end",align:"bottom",offset:8,color:w.warning,borderColor:w.warning}}]}}),x=j(()=>{var S,Y,ee,p,k;const i=y(),o=Array.isArray((S=e.data.series)==null?void 0:S.carryover)&&e.data.series.carryover.length>0?e.data.series.carryover:[e.data.carryoverTickets??0],T=Array.isArray((Y=e.data.series)==null?void 0:Y.carryoverCreatedThisWeek)&&e.data.series.carryoverCreatedThisWeek.length>0?e.data.series.carryoverCreatedThisWeek:[e.data.carryoverTicketsCreatedThisWeek??0],N=Array.isArray((ee=e.data.series)==null?void 0:ee.carryoverCreatedPreviousWeek)&&e.data.series.carryoverCreatedPreviousWeek.length>0?e.data.series.carryoverCreatedPreviousWeek:[e.data.carryoverTicketsCreatedPreviousWeek??0],G=Array.isArray((p=e.data.series)==null?void 0:p.carryoverCreatedOlder)&&e.data.series.carryoverCreatedOlder.length>0?e.data.series.carryoverCreatedOlder:[e.data.carryoverTicketsCreatedOlder??0];return Array.isArray((k=e.data.series)==null?void 0:k.carryoverCreatedOtherWeek)&&e.data.series.carryoverCreatedOtherWeek.length>0?e.data.series.carryoverCreatedOtherWeek:e.data.carryoverTicketsCreatedOtherWeek,{labels:i,datasets:[{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (–≤—Å–µ)",data:o,backgroundColor:L=>{const M=L.chart,{ctx:J,chartArea:ce}=M;return f(J,ce,w.carryover)},borderColor:w.carryover,borderWidth:3,tension:.4,fill:!0,pointRadius:4,pointBorderWidth:1,pointBorderColor:w.carryover,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.carryover,pointBackgroundColor:w.carryover,datalabels:{...c,anchor:"end",align:"top",offset:8,color:w.carryover,borderColor:w.carryover}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:T,backgroundColor:w.carryoverLight,borderColor:w.carryoverLight,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:w.carryoverLight,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.carryoverLight,pointBackgroundColor:w.carryoverLight,datalabels:{...c,anchor:"end",align:"top",offset:6,color:w.carryoverLight,borderColor:w.carryoverLight}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–µ–π)",data:N,backgroundColor:w.warning,borderColor:w.warning,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:w.warning,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.warning,pointBackgroundColor:w.warning,datalabels:{...c,anchor:"end",align:"top",offset:6,color:w.warning,borderColor:w.warning}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –Ω–µ–¥–µ–ª—è–º–∏)",data:G,backgroundColor:w.carryoverDark,borderColor:w.carryoverDark,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:w.carryoverDark,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.carryoverDark,pointBackgroundColor:w.carryoverDark,datalabels:{...c,anchor:"end",align:"top",offset:6,color:w.carryoverDark,borderColor:w.carryoverDark}}]}}),X=j(()=>{var L,M,J,ce,he,ye,me,pe,fe,ge,_e;const i=((L=e.meta)==null?void 0:L.weeks)||[],o=i.length>0?i.map(be=>`–ù–µ–¥–µ–ª—è ${be.weekNumber}`):[(M=e.meta)!=null&&M.weekNumber?`–ù–µ–¥–µ–ª—è ${e.meta.weekNumber}`:"–ù–µ–¥–µ–ª—è"],T=Array.isArray((J=e.data.series)==null?void 0:J.new)&&e.data.series.new.length>0?e.data.series.new:[e.data.newTickets??0],N=Array.isArray((ce=e.data.series)==null?void 0:ce.closed)&&e.data.series.closed.length>0?e.data.series.closed:[e.data.closedTickets??0],G=Array.isArray((he=e.data.series)==null?void 0:he.closedCreatedThisWeek)&&e.data.series.closedCreatedThisWeek.length>0?e.data.series.closedCreatedThisWeek:[e.data.closedTicketsCreatedThisWeek??0],S=Array.isArray((ye=e.data.series)==null?void 0:ye.closedCreatedOtherWeek)&&e.data.series.closedCreatedOtherWeek.length>0?e.data.series.closedCreatedOtherWeek:[e.data.closedTicketsCreatedOtherWeek??0],Y=Array.isArray((me=e.data.series)==null?void 0:me.carryover)&&e.data.series.carryover.length>0?e.data.series.carryover:[e.data.carryoverTickets??0],ee=Array.isArray((pe=e.data.series)==null?void 0:pe.carryoverCreatedThisWeek)&&e.data.series.carryoverCreatedThisWeek.length>0?e.data.series.carryoverCreatedThisWeek:[e.data.carryoverTicketsCreatedThisWeek??0],p=Array.isArray((fe=e.data.series)==null?void 0:fe.carryoverCreatedPreviousWeek)&&e.data.series.carryoverCreatedPreviousWeek.length>0?e.data.series.carryoverCreatedPreviousWeek:[e.data.carryoverTicketsCreatedPreviousWeek??0],k=Array.isArray((ge=e.data.series)==null?void 0:ge.carryoverCreatedOlder)&&e.data.series.carryoverCreatedOlder.length>0?e.data.series.carryoverCreatedOlder:[e.data.carryoverTicketsCreatedOlder??0];return Array.isArray((_e=e.data.series)==null?void 0:_e.carryoverCreatedOtherWeek)&&e.data.series.carryoverCreatedOtherWeek.length>0?e.data.series.carryoverCreatedOtherWeek:e.data.carryoverTicketsCreatedOtherWeek,{labels:o,datasets:[{label:"–ù–æ–≤—ã–µ",data:T,backgroundColor:w.primary,borderColor:w.primary,tension:.3,fill:!1,pointRadius:4,pointBorderWidth:1,pointBorderColor:w.primary,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.primary,pointBackgroundColor:w.primary,datalabels:{...c,anchor:"end",align:"top",offset:10,color:w.primary,borderColor:w.primary}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (–≤—Å–µ)",data:N,backgroundColor:w.success,borderColor:w.success,tension:.3,fill:!1,pointRadius:4,pointBorderWidth:1,pointBorderColor:w.success,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.success,pointBackgroundColor:w.success,datalabels:{...c,anchor:"start",align:"bottom",offset:10,color:w.success,borderColor:w.success}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:G,backgroundColor:w.successLight,borderColor:w.successLight,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:w.successLight,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.successLight,pointBackgroundColor:w.successLight,datalabels:{...c,anchor:"end",align:"bottom",offset:8,color:w.successLight,borderColor:w.successLight}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:S,backgroundColor:w.warning,borderColor:w.warning,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:w.warning,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.warning,pointBackgroundColor:w.warning,datalabels:{...c,anchor:"end",align:"bottom",offset:8,color:w.warning,borderColor:w.warning}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (–≤—Å–µ)",data:Y,backgroundColor:w.carryover,borderColor:w.carryover,tension:.3,fill:!1,pointRadius:4,pointBorderWidth:1,pointBorderColor:w.carryover,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.carryover,pointBackgroundColor:w.carryover,datalabels:{...c,anchor:"end",align:"top",offset:8,color:w.carryover,borderColor:w.carryover}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:ee,backgroundColor:w.carryoverLight,borderColor:w.carryoverLight,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:w.carryoverLight,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.carryoverLight,pointBackgroundColor:w.carryoverLight,datalabels:{...c,anchor:"end",align:"top",offset:6,color:w.carryoverLight,borderColor:w.carryoverLight}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–µ–π)",data:p,backgroundColor:w.warning,borderColor:w.warning,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:w.warning,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.warning,pointBackgroundColor:w.warning,datalabels:{...c,anchor:"end",align:"top",offset:6,color:w.warning,borderColor:w.warning}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –Ω–µ–¥–µ–ª—è–º–∏)",data:k,backgroundColor:w.carryoverDark,borderColor:w.carryoverDark,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:w.carryoverDark,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:w.carryoverDark,pointBackgroundColor:w.carryoverDark,datalabels:{...c,anchor:"end",align:"top",offset:6,color:w.carryoverDark,borderColor:w.carryoverDark}}]}}),K=j(()=>({labels:["–ù–æ–≤—ã–µ","–ó–∞–∫—Ä—ã—Ç—ã–µ","–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ"],datasets:[{data:[e.data.newTickets??0,e.data.closedTickets??0,e.data.carryoverTickets??0],backgroundColor:[w.primary,w.success,w.carryover],borderWidth:1}]})),B=j(()=>{switch(d.value){case"line":return De;case"bar":return ar;case"doughnut":return rr;default:return De}}),A=j(()=>d.value==="doughnut"?K.value:X.value),g=i=>{if(!i)return"‚Äî";try{return new Date(i).toLocaleDateString("ru-RU",{day:"2-digit",month:"short"})}catch{return i}};function u(i){return i==null||isNaN(i)?"0":i>=1e3?i.toLocaleString("ru-RU"):i.toString()}function h(i){const o=i%10,T=i%100;return T>=11&&T<=14?"—Ç–∏–∫–µ—Ç–æ–≤":o===1?"—Ç–∏–∫–µ—Ç":o>=2&&o<=4?"—Ç–∏–∫–µ—Ç–∞":"—Ç–∏–∫–µ—Ç–æ–≤"}const E=j(()=>({responsive:!0,maintainAspectRatio:!1,resizeDelay:0,animation:{duration:800,easing:"easeOutQuart"},interaction:{intersect:!1,mode:"index"},plugins:{datalabels:{...c,anchor:"end",align:"top"},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 0.98)",titleColor:"#111827",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,padding:16,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},displayColors:!0,boxPadding:6,usePointStyle:!0,animation:{duration:300,easing:"easeOutQuart"},callbacks:{title:i=>{var Y,ee,p,k,L,M;if(!i||i.length===0)return"";const o=(Y=i[0])==null?void 0:Y.dataIndex,T=((ee=e.meta)==null?void 0:ee.weeks)||[];if(T.length>0&&o!==void 0&&T[o]){const J=T[o];return`–ù–µ–¥–µ–ª—è ${J.weekNumber} (${g(J.weekStartUtc)} ‚Äî ${g(J.weekEndUtc)})`}const N=(p=e.meta)==null?void 0:p.weekNumber,G=(k=e.meta)==null?void 0:k.weekStartUtc,S=(L=e.meta)==null?void 0:L.weekEndUtc;return N&&G&&S?`–ù–µ–¥–µ–ª—è ${N} (${g(G)} ‚Äî ${g(S)})`:((M=i[0])==null?void 0:M.label)||""},label:i=>{const o=i.parsed.y,T=i.dataset.label||"";if(o==null||isNaN(o))return`${T}: 0 —Ç–∏–∫–µ—Ç–æ–≤`;const N=u(o),G=h(o);return`${T}: ${N} ${G}`}}},legend:{position:"bottom",labels:{font:{size:13,weight:"500"},padding:12,boxWidth:18,boxHeight:12,usePointStyle:!0,pointStyle:"circle",generateLabels:i=>rt.defaults.plugins.legend.labels.generateLabels(i).map((T,N)=>{const G=i.data.datasets[N],S=i.getDatasetMeta(N),Y=G.borderDash&&Array.isArray(G.borderDash)&&G.borderDash.length>0||G.borderWidth===2||G.fill===!1;return S.hidden?(T.fontColor="#9ca3af",T.textDecoration="line-through",T.opacity=.5):Y?T.fontColor="#6b7280":T.fontColor="#111827",T})},onClick:(i,o)=>{const T=o.datasetIndex;if(T==null){console.warn("[Legend] Invalid datasetIndex:",T);return}const N=i.chart;if(!N){console.warn("[Legend] Chart not found");return}const G=N.getDatasetMeta(T);if(!G){console.warn("[Legend] Dataset meta not found for index:",T);return}G.hidden=!G.hidden,N.update("active")},onHover:(i,o)=>{i.native&&i.native.target&&(i.native.target.style.cursor="pointer")},onLeave:(i,o)=>{i.native&&i.native.target&&(i.native.target.style.cursor="default")}}},scales:d.value==="doughnut"?{}:{y:{beginAtZero:!0,ticks:{precision:0,font:{size:14},padding:10,color:"#374151",callback:i=>i==null||isNaN(i)?"0":u(i)},title:{display:!1},grid:{color:i=>{if(!i||!i.tick||i.tick.value===void 0)return"#e5e7eb";const o=i.tick.value;return isNaN(o)||!isFinite(o)?"#e5e7eb":o===0||o%5===0?"#d1d5db":"#e5e7eb"},lineWidth:i=>{if(!i||!i.tick||i.tick.value===void 0)return 1;const o=i.tick.value;return isNaN(o)||!isFinite(o)?1:o===0||o%5===0?1.5:1}}},x:{ticks:{maxRotation:45,minRotation:45,font:{size:14},padding:10,color:"#374151"},title:{display:!1},grid:{color:"#e5e7eb",lineWidth:1}}}})),W=j(()=>{var i,o,T,N,G,S,Y,ee;if((i=e.data)!=null&&i.series){const p=e.data.series,k=Math.max((Array.isArray(p.new)?p.new.length:0)-1,(Array.isArray(p.closed)?p.closed.length:0)-1,(Array.isArray(p.closedCreatedThisWeek)?p.closedCreatedThisWeek.length:0)-1,(Array.isArray(p.closedCreatedOtherWeek)?p.closedCreatedOtherWeek.length:0)-1,(Array.isArray(p.carryover)?p.carryover.length:0)-1,(Array.isArray(p.carryoverCreatedThisWeek)?p.carryoverCreatedThisWeek.length:0)-1,(Array.isArray(p.carryoverCreatedPreviousWeek)?p.carryoverCreatedPreviousWeek.length:0)-1,(Array.isArray(p.carryoverCreatedOlder)?p.carryoverCreatedOlder.length:0)-1,(Array.isArray(p.carryoverCreatedOtherWeek)?p.carryoverCreatedOtherWeek.length:0)-1,-1);if(k>=0){const L={newTickets:Array.isArray(p.new)&&p.new[k]!==void 0?p.new[k]:0,closedTickets:Array.isArray(p.closed)&&p.closed[k]!==void 0?p.closed[k]:0,closedTicketsCreatedThisWeek:Array.isArray(p.closedCreatedThisWeek)&&p.closedCreatedThisWeek[k]!==void 0?p.closedCreatedThisWeek[k]:0,closedTicketsCreatedOtherWeek:Array.isArray(p.closedCreatedOtherWeek)&&p.closedCreatedOtherWeek[k]!==void 0?p.closedCreatedOtherWeek[k]:0,carryoverTickets:Array.isArray(p.carryover)&&p.carryover[k]!==void 0?p.carryover[k]:0,carryoverTicketsCreatedThisWeek:Array.isArray(p.carryoverCreatedThisWeek)&&p.carryoverCreatedThisWeek[k]!==void 0?p.carryoverCreatedThisWeek[k]:0,carryoverTicketsCreatedPreviousWeek:Array.isArray(p.carryoverCreatedPreviousWeek)&&p.carryoverCreatedPreviousWeek[k]!==void 0?p.carryoverCreatedPreviousWeek[k]:0,carryoverTicketsCreatedOlder:Array.isArray(p.carryoverCreatedOlder)&&p.carryoverCreatedOlder[k]!==void 0?p.carryoverCreatedOlder[k]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(p.carryoverCreatedOtherWeek)&&p.carryoverCreatedOtherWeek[k]!==void 0?p.carryoverCreatedOtherWeek[k]:0};if(L.carryoverTickets>0&&console.log("[DEBUG currentWeekData]",{total:L.carryoverTickets,thisWeek:L.carryoverTicketsCreatedThisWeek,previousWeek:L.carryoverTicketsCreatedPreviousWeek,older:L.carryoverTicketsCreatedOlder,otherWeek:L.carryoverTicketsCreatedOtherWeek,sum:L.carryoverTicketsCreatedThisWeek+L.carryoverTicketsCreatedPreviousWeek+L.carryoverTicketsCreatedOlder,lastIndex:k,series:{carryoverCreatedPreviousWeek:p.carryoverCreatedPreviousWeek,carryoverCreatedOlder:p.carryoverCreatedOlder,carryoverCreatedPreviousWeekLength:(o=p.carryoverCreatedPreviousWeek)==null?void 0:o.length,carryoverCreatedOlderLength:(T=p.carryoverCreatedOlder)==null?void 0:T.length,carryoverCreatedPreviousWeekLast:(N=p.carryoverCreatedPreviousWeek)==null?void 0:N[k],carryoverCreatedOlderLast:(G=p.carryoverCreatedOlder)==null?void 0:G[k]},currentWeek:e.data.currentWeek,data:{carryoverTicketsCreatedPreviousWeek:e.data.carryoverTicketsCreatedPreviousWeek,carryoverTicketsCreatedOlder:e.data.carryoverTicketsCreatedOlder}}),L.newTickets>0||L.closedTickets>0||L.carryoverTickets>0)return L}}if((S=e.data)!=null&&S.currentWeek&&typeof e.data.currentWeek=="object"){const p=e.data.currentWeek;if((p.newTickets??0)>0||(p.closedTickets??0)>0||(p.carryoverTickets??0)>0)return p}if((Y=e.data)!=null&&Y.weeksData&&Array.isArray(e.data.weeksData)&&e.data.weeksData.length>0){const p=e.data.weeksData[e.data.weeksData.length-1];if((p.newTickets??0)>0||(p.closedTickets??0)>0||(p.carryoverTickets??0)>0)return p}if((ee=e.data)!=null&&ee.series){const p=e.data.series,k=Math.max((Array.isArray(p.new)?p.new.length:0)-1,(Array.isArray(p.closed)?p.closed.length:0)-1,(Array.isArray(p.carryover)?p.carryover.length:0)-1,-1);if(k>=0)return{newTickets:Array.isArray(p.new)&&p.new[k]!==void 0?p.new[k]:0,closedTickets:Array.isArray(p.closed)&&p.closed[k]!==void 0?p.closed[k]:0,closedTicketsCreatedThisWeek:Array.isArray(p.closedCreatedThisWeek)&&p.closedCreatedThisWeek[k]!==void 0?p.closedCreatedThisWeek[k]:0,closedTicketsCreatedOtherWeek:Array.isArray(p.closedCreatedOtherWeek)&&p.closedCreatedOtherWeek[k]!==void 0?p.closedCreatedOtherWeek[k]:0,carryoverTickets:Array.isArray(p.carryover)&&p.carryover[k]!==void 0?p.carryover[k]:0,carryoverTicketsCreatedThisWeek:Array.isArray(p.carryoverCreatedThisWeek)&&p.carryoverCreatedThisWeek[k]!==void 0?p.carryoverCreatedThisWeek[k]:0,carryoverTicketsCreatedPreviousWeek:Array.isArray(p.carryoverCreatedPreviousWeek)&&p.carryoverCreatedPreviousWeek[k]!==void 0?p.carryoverCreatedPreviousWeek[k]:0,carryoverTicketsCreatedOlder:Array.isArray(p.carryoverCreatedOlder)&&p.carryoverCreatedOlder[k]!==void 0?p.carryoverCreatedOlder[k]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(p.carryoverCreatedOtherWeek)&&p.carryoverCreatedOtherWeek[k]!==void 0?p.carryoverCreatedOtherWeek[k]:0}}return e.data||{}}),I=j(()=>{var o,T,N,G,S,Y,ee,p,k,L;const i=((o=e.meta)==null?void 0:o.weeks)||[];return i.length>0?i[i.length-1]:{weekNumber:((N=(T=e.meta)==null?void 0:T.currentWeek)==null?void 0:N.weekNumber)??((G=e.meta)==null?void 0:G.weekNumber)??null,weekStartUtc:((Y=(S=e.meta)==null?void 0:S.currentWeek)==null?void 0:Y.weekStartUtc)??((ee=e.meta)==null?void 0:ee.weekStartUtc)??null,weekEndUtc:((k=(p=e.meta)==null?void 0:p.currentWeek)==null?void 0:k.weekEndUtc)??((L=e.meta)==null?void 0:L.weekEndUtc)??null}}),$=j(()=>{var i,o,T,N,G,S,Y,ee,p;if((i=e.data)!=null&&i.series){const k=e.data.series,L=Math.max((Array.isArray(k.new)?k.new.length:0)-1,(Array.isArray(k.closed)?k.closed.length:0)-1,(Array.isArray(k.closedCreatedThisWeek)?k.closedCreatedThisWeek.length:0)-1,(Array.isArray(k.closedCreatedOtherWeek)?k.closedCreatedOtherWeek.length:0)-1,(Array.isArray(k.carryover)?k.carryover.length:0)-1,(Array.isArray(k.carryoverCreatedThisWeek)?k.carryoverCreatedThisWeek.length:0)-1,(Array.isArray(k.carryoverCreatedPreviousWeek)?k.carryoverCreatedPreviousWeek.length:0)-1,(Array.isArray(k.carryoverCreatedOlder)?k.carryoverCreatedOlder.length:0)-1,(Array.isArray(k.carryoverCreatedOtherWeek)?k.carryoverCreatedOtherWeek.length:0)-1,-1);if(L>=1){const M=L-1,J=(T=(o=e.meta)==null?void 0:o.weeks)==null?void 0:T[M],ce={weekNumber:(J==null?void 0:J.weekNumber)??null,weekStartUtc:(J==null?void 0:J.weekStartUtc)??null,weekEndUtc:(J==null?void 0:J.weekEndUtc)??null,newTickets:Array.isArray(k.new)&&k.new[M]!==void 0?k.new[M]:0,closedTickets:Array.isArray(k.closed)&&k.closed[M]!==void 0?k.closed[M]:0,closedTicketsCreatedThisWeek:Array.isArray(k.closedCreatedThisWeek)&&k.closedCreatedThisWeek[M]!==void 0?k.closedCreatedThisWeek[M]:0,closedTicketsCreatedOtherWeek:Array.isArray(k.closedCreatedOtherWeek)&&k.closedCreatedOtherWeek[M]!==void 0?k.closedCreatedOtherWeek[M]:0,carryoverTickets:Array.isArray(k.carryover)&&k.carryover[M]!==void 0?k.carryover[M]:0,carryoverTicketsCreatedThisWeek:Array.isArray(k.carryoverCreatedThisWeek)&&k.carryoverCreatedThisWeek[M]!==void 0?k.carryoverCreatedThisWeek[M]:0,carryoverTicketsCreatedPreviousWeek:Array.isArray(k.carryoverCreatedPreviousWeek)&&k.carryoverCreatedPreviousWeek[M]!==void 0?k.carryoverCreatedPreviousWeek[M]:0,carryoverTicketsCreatedOlder:Array.isArray(k.carryoverCreatedOlder)&&k.carryoverCreatedOlder[M]!==void 0?k.carryoverCreatedOlder[M]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(k.carryoverCreatedOtherWeek)&&k.carryoverCreatedOtherWeek[M]!==void 0?k.carryoverCreatedOtherWeek[M]:0};if(ce.newTickets>0||ce.closedTickets>0||ce.carryoverTickets>0)return ce}}if((N=e.data)!=null&&N.weeksData&&Array.isArray(e.data.weeksData)&&e.data.weeksData.length>=2){const k=e.data.weeksData.length-2,L=e.data.weeksData[k],M=(S=(G=e.meta)==null?void 0:G.weeks)==null?void 0:S[k];if((L.newTickets??0)>0||(L.closedTickets??0)>0||(L.carryoverTickets??0)>0)return{weekNumber:L.weekNumber??(M==null?void 0:M.weekNumber)??null,weekStartUtc:(M==null?void 0:M.weekStartUtc)??null,weekEndUtc:(M==null?void 0:M.weekEndUtc)??null,newTickets:L.newTickets??0,closedTickets:L.closedTickets??0,closedTicketsCreatedThisWeek:L.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:L.closedTicketsCreatedOtherWeek??0,carryoverTickets:L.carryoverTickets??0,carryoverTicketsCreatedThisWeek:L.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:L.carryoverTicketsCreatedOtherWeek??0}}if((Y=e.data)!=null&&Y.series){const k=e.data.series,L=Math.max((Array.isArray(k.new)?k.new.length:0)-1,(Array.isArray(k.closed)?k.closed.length:0)-1,(Array.isArray(k.carryover)?k.carryover.length:0)-1,-1);if(L>=1){const M=L-1,J=(p=(ee=e.meta)==null?void 0:ee.weeks)==null?void 0:p[M];return{weekNumber:(J==null?void 0:J.weekNumber)??null,weekStartUtc:(J==null?void 0:J.weekStartUtc)??null,weekEndUtc:(J==null?void 0:J.weekEndUtc)??null,newTickets:Array.isArray(k.new)&&k.new[M]!==void 0?k.new[M]:0,closedTickets:Array.isArray(k.closed)&&k.closed[M]!==void 0?k.closed[M]:0,closedTicketsCreatedThisWeek:Array.isArray(k.closedCreatedThisWeek)&&k.closedCreatedThisWeek[M]!==void 0?k.closedCreatedThisWeek[M]:0,closedTicketsCreatedOtherWeek:Array.isArray(k.closedCreatedOtherWeek)&&k.closedCreatedOtherWeek[M]!==void 0?k.closedCreatedOtherWeek[M]:0,carryoverTickets:Array.isArray(k.carryover)&&k.carryover[M]!==void 0?k.carryover[M]:0,carryoverTicketsCreatedThisWeek:Array.isArray(k.carryoverCreatedThisWeek)&&k.carryoverCreatedThisWeek[M]!==void 0?k.carryoverCreatedThisWeek[M]:0,carryoverTicketsCreatedPreviousWeek:Array.isArray(k.carryoverCreatedPreviousWeek)&&k.carryoverCreatedPreviousWeek[M]!==void 0?k.carryoverCreatedPreviousWeek[M]:0,carryoverTicketsCreatedOlder:Array.isArray(k.carryoverCreatedOlder)&&k.carryoverCreatedOlder[M]!==void 0?k.carryoverCreatedOlder[M]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(k.carryoverCreatedOtherWeek)&&k.carryoverCreatedOtherWeek[M]!==void 0?k.carryoverCreatedOtherWeek[M]:0}}}return null}),z=j(()=>{var o;const i=(o=e.data)==null?void 0:o.stagesByWeek;return Array.isArray(i)?i:null}),U=j(()=>{var o;const i=z.value;if(i&&i.length>0){const T=i.length-1,N=i[T];if(Array.isArray(N))return N}return((o=e.data)==null?void 0:o.stages)??[]}),O=j(()=>{const i=z.value;if(i&&i.length>=2){const o=i.length-2,T=i[o];if(Array.isArray(T))return T}return[]}),F=j(()=>{var i;return(i=$.value)!=null&&i.weekNumber?`–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–µ–¥–µ–ª–∏ ${$.value.weekNumber}`:"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"});function H(i,o){if(typeof i!="number"||isNaN(i)||o==null||typeof o!="number"||isNaN(o)||o===0)return null;if(i===o)return 0;const T=(i-o)/o*100;return!isFinite(T)||isNaN(T)?null:T}function R(i){return i==null||isNaN(i)?"":`${i>=0?"+":""}${i.toFixed(1)}%`}const q=j(()=>{var i,o,T;if((i=e.data)!=null&&i.series){const N=e.data.series,G=Math.max((Array.isArray(N.new)?N.new.length:0)-1,(Array.isArray(N.closed)?N.closed.length:0)-1,(Array.isArray(N.carryover)?N.carryover.length:0)-1,-1);if(G>=2){const S=G-2,Y=(T=(o=e.meta)==null?void 0:o.weeks)==null?void 0:T[S];return{weekNumber:(Y==null?void 0:Y.weekNumber)??null,newTickets:Array.isArray(N.new)&&N.new[S]!==void 0?N.new[S]:0,closedTickets:Array.isArray(N.closed)&&N.closed[S]!==void 0?N.closed[S]:0,carryoverTickets:Array.isArray(N.carryover)&&N.carryover[S]!==void 0?N.carryover[S]:0}}}return null}),b=j(()=>{const i=W.value,o=$.value;return!i||!o?{newTickets:null,closedTickets:null,carryoverTickets:null}:{newTickets:H(i.newTickets??0,o.newTickets??0),closedTickets:H(i.closedTickets??0,o.closedTickets??0),carryoverTickets:H(i.carryoverTickets??0,o.carryoverTickets??0)}}),v=j(()=>{const i=$.value,o=q.value;return!i||!o?{newTickets:null,closedTickets:null,carryoverTickets:null}:{newTickets:H(i.newTickets??0,o.newTickets??0),closedTickets:H(i.closedTickets??0,o.closedTickets??0),carryoverTickets:H(i.carryoverTickets??0,o.carryoverTickets??0)}});function P(i,o){if(!i||!o)return"";try{const T=new Date(i),N=new Date(o),G=T.getUTCDate(),S=T.toLocaleDateString("ru-RU",{month:"short",timeZone:"UTC"}),Y=T.getUTCFullYear(),ee=N.getUTCDate(),p=N.toLocaleDateString("ru-RU",{month:"short",timeZone:"UTC"}),k=N.getUTCFullYear();return Y===k&&S===p?`${G} ‚Äî ${ee} ${S}`:Y===k?`${G} ${S} ‚Äî ${ee} ${p}`:`${G} ${S} ${Y} ‚Äî ${ee} ${p} ${k}`}catch(T){return console.error("[formatWeekDates] Error:",T),""}}const V=i=>{var Y;const o=W.value,T=(o==null?void 0:o.newTickets)??0,N=(o==null?void 0:o.closedTickets)??0,G=(o==null?void 0:o.carryoverTickets)??0,S=I.value;i==="new"&&T>0?a("open-stages",{weekNumber:S.weekNumber,weekStartUtc:S.weekStartUtc,weekEndUtc:S.weekEndUtc}):i==="closed"&&N>0?(((Y=e.data)==null?void 0:Y.responsible)||[]).length>0&&a("open-responsible",{weekNumber:S.weekNumber,weekStartUtc:S.weekStartUtc,weekEndUtc:S.weekEndUtc}):i==="carryover"&&G>0&&a("open-carryover",{weekNumber:S.weekNumber,weekStartUtc:S.weekStartUtc,weekEndUtc:S.weekEndUtc})},te=i=>{const o=$.value;if(!o)return;const T=(o==null?void 0:o.newTickets)??0,N=(o==null?void 0:o.closedTickets)??0,G=(o==null?void 0:o.carryoverTickets)??0,S=n.value;S&&(i==="new"&&T>0?a("open-stages",{weekNumber:S.weekNumber,weekStartUtc:S.weekStartUtc,weekEndUtc:S.weekEndUtc}):i==="closed"&&N>0?a("open-responsible",{weekNumber:S.weekNumber,weekStartUtc:S.weekStartUtc,weekEndUtc:S.weekEndUtc}):i==="carryover"&&G>0&&a("open-carryover",{weekNumber:S.weekNumber,weekStartUtc:S.weekStartUtc,weekEndUtc:S.weekEndUtc}))};return(i,o)=>{var T,N,G,S,Y,ee,p,k,L,M,J,ce,he,ye,me,pe,fe,ge,_e,be,Ee,Be,Ne,Ue,Se,Ie,Me,Oe,Re,Pe,xe,Le,lt,it,ct,dt,ut,vt,kt,ht,yt,mt,pt,ft,gt,_t;return m(),_("div",Sr,[r("header",Ir,[r("div",null,[o[6]||(o[6]=r("h2",{class:"ac-chart__title"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),r("p",Mr," –ù–µ–¥–µ–ª—è "+C(((N=(T=s.meta)==null?void 0:T.currentWeek)==null?void 0:N.weekNumber)??((G=s.meta)==null?void 0:G.weekNumber)??"‚Äî")+" ¬∑ "+C((((Y=(S=s.meta)==null?void 0:S.currentWeek)==null?void 0:Y.weekStartUtc)??((ee=s.meta)==null?void 0:ee.weekStartUtc))||"‚Äî")+" ‚Äî "+C((((k=(p=s.meta)==null?void 0:p.currentWeek)==null?void 0:k.weekEndUtc)??((L=s.meta)==null?void 0:L.weekEndUtc))||"‚Äî")+" (UTC) ",1)]),r("div",Or,[r("div",Rr,[(m(),_(ae,null,se(l,le=>r("button",{key:le.value,class:ne(["chart-type-btn",{active:d.value===le.value}]),onClick:kc=>d.value=le.value},[r("span",xr,C(le.icon),1),r("span",Lr,C(le.label),1)],10,Pr)),64))])])]),r("section",Gr,[r("div",Fr,[r("h3",Hr,[o[7]||(o[7]=r("span",{class:"summary-week-block__title-text"},"–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è",-1)),r("span",Vr," –ù–µ–¥–µ–ª—è "+C(I.value.weekNumber??"‚Äî"),1),I.value.weekStartUtc?(m(),_("span",Yr,C(P(I.value.weekStartUtc,I.value.weekEndUtc)),1)):Q("",!0)]),r("div",zr,[r("div",{class:"summary-card summary-card--new",onClick:o[0]||(o[0]=le=>V("new"))},[o[8]||(o[8]=r("div",{class:"summary-card__label"},"–ù–æ–≤—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",jr,[r("div",qr,C(((M=W.value)==null?void 0:M.newTickets)??0),1),b.value.newTickets!==null?(m(),_("div",{key:0,class:ne(["percentage-indicator",b.value.newTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((J=$.value)==null?void 0:J.weekNumber)??"‚Äî"}): ${R(b.value.newTickets)}`},[r("span",Xr,C(b.value.newTickets>=0?"‚Üë":"‚Üì"),1),r("span",Jr,C(R(b.value.newTickets)),1),r("span",Kr,"–∫ –Ω–µ–¥–µ–ª–µ "+C(((ce=$.value)==null?void 0:ce.weekNumber)??"‚Äî"),1)],10,Zr)):Q("",!0)])]),r("div",{class:"summary-card summary-card--closed-breakdown",onClick:o[1]||(o[1]=le=>V("closed"))},[o[13]||(o[13]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",Qr,[r("div",ea,C(((he=W.value)==null?void 0:he.closedTickets)??0),1),b.value.closedTickets!==null?(m(),_("div",{key:0,class:ne(["percentage-indicator",b.value.closedTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((ye=$.value)==null?void 0:ye.weekNumber)??"‚Äî"}): ${R(b.value.closedTickets)}`},[r("span",ra,C(b.value.closedTickets>=0?"‚Üë":"‚Üì"),1),r("span",aa,C(R(b.value.closedTickets)),1),r("span",sa,"–∫ –Ω–µ–¥–µ–ª–µ "+C(((me=$.value)==null?void 0:me.weekNumber)??"‚Äî"),1)],10,ta)):Q("",!0)]),r("div",oa,[r("div",na,[o[9]||(o[9]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",la,C(((pe=W.value)==null?void 0:pe.closedTicketsCreatedThisWeek)??0),1),o[10]||(o[10]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))]),r("div",ia,[o[11]||(o[11]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",ca,C(((fe=W.value)==null?void 0:fe.closedTicketsCreatedOtherWeek)??0),1),o[12]||(o[12]=r("span",{class:"breakdown-item__label"},"–¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))])])]),r("div",{class:"summary-card summary-card--carryover-breakdown",onClick:o[2]||(o[2]=le=>V("carryover"))},[o[20]||(o[20]=r("div",{class:"summary-card__label"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ",-1)),r("div",da,[r("div",ua,C(((ge=W.value)==null?void 0:ge.carryoverTickets)??0),1),b.value.carryoverTickets!==null?(m(),_("div",{key:0,class:ne(["percentage-indicator",b.value.carryoverTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((_e=$.value)==null?void 0:_e.weekNumber)??"‚Äî"}): ${R(b.value.carryoverTickets)}`},[r("span",ka,C(b.value.carryoverTickets>=0?"‚Üë":"‚Üì"),1),r("span",ha,C(R(b.value.carryoverTickets)),1),r("span",ya,"–∫ –Ω–µ–¥–µ–ª–µ "+C(((be=$.value)==null?void 0:be.weekNumber)??"‚Äî"),1)],10,va)):Q("",!0)]),r("div",ma,[r("div",pa,[o[14]||(o[14]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",fa,C(((Ee=W.value)==null?void 0:Ee.carryoverTicketsCreatedThisWeek)??0),1),o[15]||(o[15]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–∏",-1))]),r("div",ga,[o[16]||(o[16]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",_a,C(((Be=W.value)==null?void 0:Be.carryoverTicketsCreatedPreviousWeek)??0),1),o[17]||(o[17]=r("span",{class:"breakdown-item__label"},"–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏",-1))]),r("div",ba,[o[18]||(o[18]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",wa,C(((Ne=W.value)==null?void 0:Ne.carryoverTicketsCreatedOlder)??0),1),o[19]||(o[19]=r("span",{class:"breakdown-item__label"},"–æ—Å—Ç–∞–ª—å–Ω—ã–µ",-1))])])]),r("div",Ca,[o[21]||(o[21]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),r("div",Ta,[(m(!0),_(ae,null,se(U.value,le=>(m(),_("span",{key:le.stageId,class:"stage-tag"},C(le.stageName||le.stageId)+" ‚Äî "+C(le.count),1))),128)),!U.value||U.value.length===0?(m(),_("span",$a," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):Q("",!0)])])])]),$.value?(m(),_("div",Wa,[...o[22]||(o[22]=[r("div",{class:"summary-week-divider__line"},null,-1),r("div",{class:"summary-week-divider__label"},"–ü—Ä–µ–¥—ã–¥—É—â–∞—è –Ω–µ–¥–µ–ª—è",-1)])])):Q("",!0),$.value?(m(),_("div",Aa,[r("h3",Da,[o[23]||(o[23]=r("span",{class:"summary-week-block__title-text"},"–ü—Ä–µ–¥—ã–¥—É—â–∞—è –Ω–µ–¥–µ–ª—è",-1)),r("span",Ea," –ù–µ–¥–µ–ª—è "+C($.value.weekNumber??"‚Äî"),1),$.value.weekStartUtc?(m(),_("span",Ba,C(P($.value.weekStartUtc,$.value.weekEndUtc)),1)):Q("",!0)]),r("div",Na,[r("div",{class:"summary-card summary-card--new summary-card--previous summary-card--clickable",onClick:o[3]||(o[3]=le=>te("new"))},[o[24]||(o[24]=r("div",{class:"summary-card__label"},"–ù–æ–≤—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",Ua,[r("div",Sa,[r("div",Ia,[r("div",Ma,C(((Ue=$.value)==null?void 0:Ue.newTickets)??0),1),r("span",Oa,"–ù–µ–¥–µ–ª—è "+C(((Se=$.value)==null?void 0:Se.weekNumber)??"‚Äî"),1)]),r("div",Ra,[r("div",Pa,C(((Ie=q.value)==null?void 0:Ie.newTickets)??0),1),r("span",xa,"–ù–µ–¥–µ–ª—è "+C(((Me=q.value)==null?void 0:Me.weekNumber)??"‚Äî"),1)])]),v.value.newTickets!==null?(m(),_("div",{key:0,class:ne(["percentage-indicator",v.value.newTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((Oe=q.value)==null?void 0:Oe.weekNumber)??"‚Äî"}): ${R(v.value.newTickets)}`},[r("span",Ga,C(v.value.newTickets>=0?"‚Üë":"‚Üì"),1),r("span",Fa,C(R(v.value.newTickets)),1),r("span",Ha,"–∫ –Ω–µ–¥–µ–ª–µ "+C(((Re=q.value)==null?void 0:Re.weekNumber)??"‚Äî"),1)],10,La)):Q("",!0)])]),r("div",{class:"summary-card summary-card--closed-breakdown summary-card--previous summary-card--clickable",onClick:o[4]||(o[4]=le=>te("closed"))},[o[29]||(o[29]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",Va,[r("div",Ya,[r("div",za,[r("div",ja,C(((Pe=$.value)==null?void 0:Pe.closedTickets)??0),1),r("span",qa,"–ù–µ–¥–µ–ª—è "+C(((xe=$.value)==null?void 0:xe.weekNumber)??"‚Äî"),1)]),r("div",Za,[r("div",Xa,C(((Le=q.value)==null?void 0:Le.closedTickets)??0),1),r("span",Ja,"–ù–µ–¥–µ–ª—è "+C(((lt=q.value)==null?void 0:lt.weekNumber)??"‚Äî"),1)])]),v.value.closedTickets!==null?(m(),_("div",{key:0,class:ne(["percentage-indicator",v.value.closedTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((it=q.value)==null?void 0:it.weekNumber)??"‚Äî"}): ${R(v.value.closedTickets)}`},[r("span",Qa,C(v.value.closedTickets>=0?"‚Üë":"‚Üì"),1),r("span",es,C(R(v.value.closedTickets)),1),r("span",ts,"–∫ –Ω–µ–¥–µ–ª–µ "+C(((ct=q.value)==null?void 0:ct.weekNumber)??"‚Äî"),1)],10,Ka)):Q("",!0)]),r("div",rs,[r("div",as,[o[25]||(o[25]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",ss,C(((dt=$.value)==null?void 0:dt.closedTicketsCreatedThisWeek)??0),1),o[26]||(o[26]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))]),r("div",os,[o[27]||(o[27]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",ns,C(((ut=$.value)==null?void 0:ut.closedTicketsCreatedOtherWeek)??0),1),o[28]||(o[28]=r("span",{class:"breakdown-item__label"},"–¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))])])]),r("div",{class:"summary-card summary-card--carryover-breakdown summary-card--previous summary-card--clickable",onClick:o[5]||(o[5]=le=>te("carryover"))},[o[36]||(o[36]=r("div",{class:"summary-card__label"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ",-1)),r("div",ls,[r("div",is,[r("div",cs,[r("div",ds,C(((vt=$.value)==null?void 0:vt.carryoverTickets)??0),1),r("span",us,"–ù–µ–¥–µ–ª—è "+C(((kt=$.value)==null?void 0:kt.weekNumber)??"‚Äî"),1)]),r("div",vs,[r("div",ks,C(((ht=q.value)==null?void 0:ht.carryoverTickets)??0),1),r("span",hs,"–ù–µ–¥–µ–ª—è "+C(((yt=q.value)==null?void 0:yt.weekNumber)??"‚Äî"),1)])]),v.value.carryoverTickets!==null?(m(),_("div",{key:0,class:ne(["percentage-indicator",v.value.carryoverTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((mt=q.value)==null?void 0:mt.weekNumber)??"‚Äî"}): ${R(v.value.carryoverTickets)}`},[r("span",ms,C(v.value.carryoverTickets>=0?"‚Üë":"‚Üì"),1),r("span",ps,C(R(v.value.carryoverTickets)),1),r("span",fs,"–∫ –Ω–µ–¥–µ–ª–µ "+C(((pt=q.value)==null?void 0:pt.weekNumber)??"‚Äî"),1)],10,ys)):Q("",!0)]),r("div",gs,[r("div",_s,[o[30]||(o[30]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",bs,C(((ft=$.value)==null?void 0:ft.carryoverTicketsCreatedThisWeek)??0),1),o[31]||(o[31]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–∏",-1))]),r("div",ws,[o[32]||(o[32]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",Cs,C(((gt=$.value)==null?void 0:gt.carryoverTicketsCreatedPreviousWeek)??0),1),o[33]||(o[33]=r("span",{class:"breakdown-item__label"},"–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏",-1))]),r("div",Ts,[o[34]||(o[34]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",$s,C(((_t=$.value)==null?void 0:_t.carryoverTicketsCreatedOlder)??0),1),o[35]||(o[35]=r("span",{class:"breakdown-item__label"},"–æ—Å—Ç–∞–ª—å–Ω—ã–µ",-1))])])]),r("div",Ws,[o[37]||(o[37]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),r("div",As,[(m(!0),_(ae,null,se(O.value,le=>(m(),_("span",{key:le.stageId,class:"stage-tag"},C(le.stageName||le.stageId)+" ‚Äî "+C(le.count),1))),128)),!O.value||O.value.length===0?(m(),_("span",Ds,C(F.value),1)):Q("",!0)])])])])):Q("",!0)]),r("div",Es,[d.value==="line"?(m(),_("div",Bs,[r("div",Ns,[o[38]||(o[38]=r("h3",{class:"chart-subtitle"},"–ù–æ–≤—ã–µ –∏ –ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã",-1)),r("div",Us,[re(Je(De),{data:D.value,options:E.value},null,8,["data","options"])])]),r("div",Ss,[o[39]||(o[39]=r("h3",{class:"chart-subtitle"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã",-1)),r("div",Is,[re(Je(De),{data:x.value,options:E.value},null,8,["data","options"])])])])):(m(),ke(Qt(B.value),{key:1,data:A.value,options:E.value},null,8,["data","options"]))])])}}},Os=we(Ms,[["__scopeId","data-v-a704951e"]]),Rs={class:"summary-cards-months"},Ps={class:"summary-card summary-card--new"},xs={class:"card-content"},Ls={class:"card-main-value"},Gs=["title"],Fs={class:"card-month-breakdown"},Hs={class:"month-name"},Vs={class:"month-value"},Ys={key:0,class:"month-item month-item--empty"},zs={class:"summary-card summary-card--closed"},js={class:"card-content"},qs={class:"card-main-value"},Zs=["title"],Xs={class:"card-month-breakdown-hierarchical"},Js={class:"month-header"},Ks={class:"month-name"},Qs={class:"month-value"},eo={class:"month-breakdown"},to={class:"breakdown-item breakdown-this-week"},ro={class:"breakdown-value"},ao={class:"breakdown-item breakdown-other-week"},so={class:"breakdown-value"},oo={key:0,class:"month-item-hierarchical month-item--empty"},no={class:"summary-card summary-card--carryover"},lo={class:"card-content"},io={class:"card-current-value"},co={class:"current-value"},uo=["title"],vo={class:"card-month-breakdown"},ko={class:"month-name"},ho={class:"month-value"},yo={key:0,class:"month-item month-item--empty"},mo={class:"summary-card summary-card--stages"},po={class:"card-content"},fo={class:"stages-list"},go={class:"stage-icon"},_o={class:"stage-name"},bo={class:"stage-value"},wo={key:0,class:"stage-item stage-item--empty"},Co={__name:"SummaryCardsMonths",props:{data:{type:Object,required:!0,default:()=>({newTickets:0,newTicketsByMonth:[],closedTickets:0,closedTicketsByMonth:[],carryoverTickets:0,carryoverTicketsByMonth:[],stages:[]})}},setup(s){const t=s;function e(g){return g==null||isNaN(g)?"0":g>=1e6?(g/1e6).toFixed(1)+"M":g>=1e3?g.toLocaleString("ru-RU"):g.toString()}function a(g){return g==null||isNaN(g)?"":`${g>=0?"+":""}${g.toFixed(1)}%`}function n(g,u){if(typeof g!="number"||isNaN(g)||u==null||typeof u!="number"||isNaN(u)||u===0)return null;if(g===u)return 0;const h=(g-u)/u*100;return!isFinite(h)||isNaN(h)?null:h}const l=j(()=>{var g;return((g=t.data)==null?void 0:g.newTickets)||0}),d=j(()=>e(l.value)),c=j(()=>{var g;return((g=t.data)==null?void 0:g.newTicketsByMonth)||[]}),y=j(()=>{var g;return((g=t.data)==null?void 0:g.closedTicketsByMonth)||[]}),f=j(()=>{var g;return((g=t.data)==null?void 0:g.carryoverTicketsByMonth)||[]}),D=j(()=>{const g=f.value;if(g.length===0)return 0;const u=g[g.length-1];return(u==null?void 0:u.count)||0}),x=j(()=>{var h,E,W,I;const g=typeof((h=t.data)==null?void 0:h.newTickets)=="number"?t.data.newTickets:parseInt((E=t.data)==null?void 0:E.newTickets)||0,u=(I=(W=t.data)==null?void 0:W.previousPeriodData)==null?void 0:I.newTickets;return n(g,u)}),X=j(()=>{var h,E,W,I;const g=typeof((h=t.data)==null?void 0:h.closedTickets)=="number"?t.data.closedTickets:parseInt((E=t.data)==null?void 0:E.closedTickets)||0,u=(I=(W=t.data)==null?void 0:W.previousPeriodData)==null?void 0:I.closedTickets;return n(g,u)}),K=j(()=>{var E;const g=D.value,u=f.value,h=u.length>0?((E=u[0])==null?void 0:E.count)||0:null;return n(g,h)});function B(g){return{"DT140_12:SUCCESS":"stage-success","DT140_12:FAIL":"stage-fail","DT140_12:UC_0GBU8Z":"stage-other"}[g]||""}function A(g){return{"DT140_12:SUCCESS":"‚úì","DT140_12:FAIL":"‚úó","DT140_12:UC_0GBU8Z":"‚ö†"}[g]||"‚Ä¢"}return(g,u)=>(m(),_("div",Rs,[r("div",Ps,[u[0]||(u[0]=r("h3",{class:"card-title"},"–ù–æ–≤—ã–µ –∑–∞ –ø–µ—Ä–∏–æ–¥",-1)),r("div",xs,[r("div",Ls,[ve(C(d.value)+" ",1),x.value!==null?(m(),_("span",{key:0,class:ne(["percentage-badge",x.value>=0?"positive":"negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞: ${a(x.value)}`},C(a(x.value)),11,Gs)):Q("",!0)]),r("div",Fs,[(m(!0),_(ae,null,se(c.value,h=>(m(),_("div",{key:`new-${h.month}`,class:"month-item"},[r("span",Hs,C(h.monthName)+":",1),r("span",Vs,C(e(h.count)),1)]))),128)),c.value.length===0?(m(),_("div",Ys," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):Q("",!0)])])]),r("div",zs,[u[5]||(u[5]=r("h3",{class:"card-title"},"–ó–∞–∫—Ä—ã—Ç—ã–µ –≤—Å–µ–≥–æ",-1)),r("div",js,[r("div",qs,[ve(C(e(s.data.closedTickets||0))+" ",1),X.value!==null?(m(),_("span",{key:0,class:ne(["percentage-badge",X.value>=0?"positive":"negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞: ${a(X.value)}`},C(a(X.value)),11,Zs)):Q("",!0)]),r("div",Xs,[(m(!0),_(ae,null,se(y.value,h=>(m(),_("div",{key:`closed-${h.month}`,class:"month-item-hierarchical"},[r("div",Js,[r("span",Ks,C(h.monthName)+":",1),r("span",Qs,C(e(h.count||0)),1)]),r("div",eo,[r("div",to,[u[1]||(u[1]=r("span",{class:"breakdown-icon"},"‚úì",-1)),u[2]||(u[2]=r("span",{class:"breakdown-label"},"—ç—Ç–æ–≥–æ –º–µ—Å—è—Ü–∞:",-1)),r("span",ro,C(e(h.closedCreatedThisWeek||0)),1)]),r("div",ao,[u[3]||(u[3]=r("span",{class:"breakdown-icon"},"‚Üª",-1)),u[4]||(u[4]=r("span",{class:"breakdown-label"},"–¥—Ä—É–≥–æ–≥–æ –º–µ—Å—è—Ü–∞:",-1)),r("span",so,C(e(h.closedCreatedOtherWeek||0)),1)])])]))),128)),y.value.length===0?(m(),_("div",oo," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):Q("",!0)])])]),r("div",no,[u[7]||(u[7]=r("h3",{class:"card-title"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ –≤—Å–µ–≥–æ",-1)),u[8]||(u[8]=r("p",{class:"card-hint"},"–ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã —Å–µ–∫—Ç–æ—Ä–∞ –≤ —Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö —Å—Ç–∞–¥–∏—è—Ö (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)",-1)),r("div",lo,[r("div",io,[u[6]||(u[6]=r("span",{class:"current-label"},"–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:",-1)),r("span",co,[ve(C(e(D.value))+" ",1),K.value!==null?(m(),_("span",{key:0,class:ne(["percentage-badge",K.value>=0?"positive":"negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞: ${a(K.value)}`},C(a(K.value)),11,uo)):Q("",!0)])]),r("div",vo,[(m(!0),_(ae,null,se(f.value,h=>(m(),_("div",{key:`carryover-${h.month}`,class:"month-item"},[r("span",ko,C(h.monthName)+":",1),r("span",ho,C(e(h.count||0)),1)]))),128)),f.value.length===0?(m(),_("div",yo," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):Q("",!0)])])]),r("div",mo,[u[10]||(u[10]=r("h3",{class:"card-title"},"–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),r("div",po,[r("div",fo,[(m(!0),_(ae,null,se(s.data.stages||[],h=>(m(),_("div",{key:h.stageId,class:ne(["stage-item",B(h.stageId)])},[r("span",go,C(A(h.stageId)),1),r("span",_o,C(h.stageName||h.stageId)+":",1),r("span",bo,C(e(h.count||0)),1)],2))),128)),!s.data.stages||s.data.stages.length===0?(m(),_("div",wo,[...u[9]||(u[9]=[r("span",{class:"stage-name"},"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö",-1)])])):Q("",!0)])])])]))}},To=we(Co,[["__scopeId","data-v-15d88b90"]]),$o={class:"line-chart-months"},Wo={class:"chart-section"},Ao={class:"chart-title"},Do={key:0,class:"chart-period"},Eo={class:"chart-wrapper"},Bo={class:"chart-container"},No={class:"chart-summary"},Uo={class:"summary-numbers"},So={class:"summary-row"},Io={class:"summary-values"},Mo={class:"summary-row"},Oo={class:"summary-values"},Ro={class:"summary-analysis"},Po=["innerHTML"],xo={class:"chart-section"},Lo={class:"chart-title"},Go={key:0,class:"chart-period"},Fo={class:"chart-wrapper"},Ho={class:"chart-container"},Vo={class:"chart-analysis"},Yo={class:"analysis-content"},zo=["innerHTML"],jo={class:"chart-table-section"},qo={class:"chart-table-wrapper"},Zo={class:"data-table"},Xo={class:"data-row data-row--new"},Jo={class:"data-row data-row--closed"},Ko={class:"data-row data-row--carryover"},Qo={__name:"LineChartMonths",props:{data:{type:Object,required:!0,default:()=>({newTicketsByMonth:[],closedTicketsByMonth:[],carryoverTicketsByMonth:[]})},meta:{type:Object,default:()=>({months:[]})}},setup(s){rt.register(Lt);const t=s;function e(B){return B==null||isNaN(B)?"0":B>=1e3?B.toLocaleString("ru-RU"):B.toString()}const a=j(()=>{var A,g,u;const B=new Set;return(A=t.data.newTicketsByMonth)==null||A.forEach(h=>{h.weeks&&Array.isArray(h.weeks)&&h.weeks.forEach(E=>{E&&E.weekNumber&&B.add(E.weekNumber)})}),(g=t.data.closedTicketsByMonth)==null||g.forEach(h=>{h.weeks&&Array.isArray(h.weeks)&&h.weeks.forEach(E=>{E&&E.weekNumber&&B.add(E.weekNumber)})}),(u=t.data.carryoverTicketsByMonth)==null||u.forEach(h=>{h.weeks&&Array.isArray(h.weeks)&&h.weeks.forEach(E=>{E&&E.weekNumber&&B.add(E.weekNumber)})}),Array.from(B).sort((h,E)=>h-E)}),n=j(()=>{const B=t.data.newTicketsByMonth||[],A=B.map(h=>h.monthName||`–ú–µ—Å—è—Ü ${h.month}`),g=B.map(h=>h.count||0),u=(t.data.closedTicketsByMonth||[]).map(h=>h.count||0);return{labels:A,datasets:[{label:"–ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã",data:g,borderColor:w.primary,backgroundColor:"rgba(0, 123, 255, 0.1)",tension:.4,fill:!1,datalabels:{anchor:"end",align:"top",offset:10,color:w.primary,font:{size:12,weight:"bold"},backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:w.primary,borderWidth:1,borderRadius:4,padding:4}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã",data:u,borderColor:w.success,backgroundColor:"rgba(40, 167, 69, 0.1)",tension:.4,fill:!1,datalabels:{anchor:"start",align:"bottom",offset:10,color:w.success,font:{size:12,weight:"bold"},backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:w.success,borderWidth:1,borderRadius:4,padding:4}}]}}),l=j(()=>{const B=t.data.carryoverTicketsByMonth||[],A=B.map(u=>u.monthName||`–ú–µ—Å—è—Ü ${u.month}`),g=B.map(u=>u.count||0);return{labels:A,datasets:[{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã",data:g,borderColor:w.carryover,backgroundColor:"rgba(255, 152, 0, 0.1)",tension:.4,fill:!1,datalabels:{anchor:"end",align:"top",offset:4,color:w.carryover}}]}}),d={responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:16,right:0,top:56,bottom:0}},plugins:{legend:{position:"left",labels:{font:{size:14,weight:"500"},padding:16,boxWidth:20,boxHeight:12}},tooltip:{enabled:!0,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},padding:12},datalabels:{anchor:"end",align:"top",formatter:(B,A)=>B==null||isNaN(B)?"":B.toString(),color:"#333",font:{size:12,weight:"bold"},padding:{top:4,bottom:4},display:function(B){const A=B.dataset.data[B.dataIndex];return A!=null&&!isNaN(A)&&isFinite(A)},backgroundColor:"rgba(255, 255, 255, 0.8)",borderColor:"#333",borderWidth:1,borderRadius:4,padding:4}},scales:{y:{beginAtZero:!0,ticks:{precision:0,font:{size:14},padding:10},grid:{lineWidth:1.5}},x:{ticks:{maxRotation:0,minRotation:0,font:{size:14},padding:10},grid:{lineWidth:1.5}}}};function c(B){if(!B||B.length===0)return null;const A=B[0],g=B[B.length-1];if(!A||!g)return null;const u=A.monthName||`–ú–µ—Å—è—Ü ${A.month}`,h=g.monthName||`–ú–µ—Å—è—Ü ${g.month}`,E=A.year||new Date().getFullYear();return`${u} ‚Äî ${h} ${E}`}const y=j(()=>{var B;return c(((B=t.data)==null?void 0:B.newTicketsByMonth)||[])}),f=j(()=>{var B;return c(((B=t.data)==null?void 0:B.carryoverTicketsByMonth)||[])}),D=j(()=>{var h,E;const B=((h=t.data)==null?void 0:h.newTicketsByMonth)||[],A=((E=t.data)==null?void 0:E.closedTicketsByMonth)||[];if(B.length===0)return{new:"‚Äî",closed:"‚Äî"};const g=B.map(W=>`${e(W.count||0)} (${W.monthName||W.month})`).join(" ‚Üí "),u=A.map(W=>`${e(W.count||0)} (${W.monthName||W.month})`).join(" ‚Üí ");return{new:g,closed:u}}),x=j(()=>{var E,W;const B=((E=t.data)==null?void 0:E.newTicketsByMonth)||[],A=((W=t.data)==null?void 0:W.closedTicketsByMonth)||[];if(B.length<2)return["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"];const g=[],u=[],h=[];if(B.length>=2){const I=B[0],$=B[1],z=B[2];if($&&I&&typeof I.count=="number"&&typeof $.count=="number"){const U=I.monthName||I.month,O=$.monthName||$.month,F=e(I.count||0),H=e($.count||0);if(I.count>0){const R=($.count-I.count)/I.count*100;if(isFinite(R)&&!isNaN(R)){const q=R>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",b=Math.abs(R),v=R>=0?"+":"-",P=R>=0?"#28a745":"#dc3545",V=R>=0?"#28a745":"#dc3545";u.push(`  ‚Ä¢ <span style="color: ${P}; font-weight: 600;">${q}</span> —Å ${F} (${U}) –¥–æ ${H} (${O}) ‚Äî <span style="color: ${V}; font-weight: 600;">${v}${b.toFixed(1)}%</span>`)}}else I.count===0&&$.count>0&&u.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${U}) –¥–æ ${H} (${O})`)}if(z&&$&&typeof $.count=="number"&&typeof z.count=="number"){const U=$.monthName||$.month,O=z.monthName||z.month,F=e($.count||0),H=e(z.count||0);if($.count>0){const R=(z.count-$.count)/$.count*100;if(isFinite(R)&&!isNaN(R))if(Math.abs(R)<.1)u.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${F} (${U}) ‚Üí ${H} (${O}) ‚Äî 0.0%`);else{const q=R>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",b=Math.abs(R),v=R>=0?"+":"-",P=R>=0?"#28a745":"#dc3545",V=R>=0?"#28a745":"#dc3545";u.push(`  ‚Ä¢ <span style="color: ${P}; font-weight: 600;">${q}</span> —Å ${F} (${U}) –¥–æ ${H} (${O}) ‚Äî <span style="color: ${V}; font-weight: 600;">${v}${b.toFixed(1)}%</span>`)}}else $.count===0&&z.count>0&&u.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${U}) –¥–æ ${H} (${O})`)}}if(A.length>=2){const I=A[0],$=A[1],z=A[2];if($&&I&&typeof I.count=="number"&&typeof $.count=="number"){const U=I.monthName||I.month,O=$.monthName||$.month,F=e(I.count||0),H=e($.count||0);if(I.count>0){const R=($.count-I.count)/I.count*100;if(isFinite(R)&&!isNaN(R))if(Math.abs(R)<.1)h.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${F} (${U}) ‚Üí ${H} (${O}) ‚Äî 0.0%`);else{const q=R>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",b=Math.abs(R),v=R>=0?"+":"-",P=R>=0?"#28a745":"#dc3545",V=R>=0?"#28a745":"#dc3545";h.push(`  ‚Ä¢ <span style="color: ${P}; font-weight: 600;">${q}</span> —Å ${F} (${U}) –¥–æ ${H} (${O}) ‚Äî <span style="color: ${V}; font-weight: 600;">${v}${b.toFixed(1)}%</span>`)}}else I.count===0&&$.count>0&&h.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π: —Å 0 (${U}) –¥–æ ${H} (${O})`)}if(z&&$&&typeof $.count=="number"&&typeof z.count=="number"){const U=$.monthName||$.month,O=z.monthName||z.month,F=e($.count||0),H=e(z.count||0);if($.count>0){const R=(z.count-$.count)/$.count*100;if(isFinite(R)&&!isNaN(R))if(Math.abs(R)<.1)h.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${F} (${U}) ‚Üí ${H} (${O}) ‚Äî 0.0%`);else{const q=R>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",b=Math.abs(R),v=R>=0?"+":"-",P=R>=0?"#28a745":"#dc3545",V=R>=0?"#28a745":"#dc3545";h.push(`  ‚Ä¢ <span style="color: ${P}; font-weight: 600;">${q}</span> —Å ${F} (${U}) –¥–æ ${H} (${O}) ‚Äî <span style="color: ${V}; font-weight: 600;">${v}${b.toFixed(1)}%</span>`)}}else $.count===0&&z.count>0&&h.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π: —Å 0 (${U}) –¥–æ ${H} (${O})`)}}if(u.length>0&&(g.push("–ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã:"),g.push(...u)),h.length>0&&(g.push("–ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã:"),g.push(...h)),B.length>=3&&A.length>=3){const I=B[0],$=B[B.length-1],z=A[0],U=A[A.length-1],O=I.count||0,F=$.count||0,H=z.count||0,R=U.count||0;if(O>0&&H>0){const q=(F-O)/O*100,b=(R-H)/H*100;if(isFinite(q)&&isFinite(b)){const v=I.monthName||I.month,P=$.monthName||$.month,V=z.monthName||z.month,te=U.monthName||U.month,i=q>=0?"#28a745":"#dc3545",o=q>=0?"#28a745":"#dc3545",T=b>=0?"#28a745":"#dc3545",N=b>=0?"#28a745":"#dc3545";g.push("–û–±—â–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥:"),g.push(`  ‚Ä¢ –ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã: <span style="color: ${i}; font-weight: 600;">${q>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ"}</span> —Å ${e(O)} (${v}) –¥–æ ${e(F)} (${P}) ‚Äî <span style="color: ${o}; font-weight: 600;">${q>=0?"+":"-"}${Math.abs(q).toFixed(1)}%</span>`),g.push(`  ‚Ä¢ –ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã: <span style="color: ${T}; font-weight: 600;">${b>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ"}</span> —Å ${e(H)} (${V}) –¥–æ ${e(R)} (${te}) ‚Äî <span style="color: ${N}; font-weight: 600;">${b>=0?"+":"-"}${Math.abs(b).toFixed(1)}%</span>`)}}}return g.length>0?g:["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"]}),X=j(()=>{var h;const B=((h=t.data)==null?void 0:h.carryoverTicketsByMonth)||[];if(B.length===0)return["–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"];const A=[],g=[],u=B.filter(E=>E&&typeof E.count=="number").map(E=>`${e(E.count||0)} (${E.monthName||E.month||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"})`).join(" ‚Üí ");if(u&&A.push(`–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã: ${u}`),B.length>=2){const E=B[0],W=B[1],I=B[2];if(W&&E&&typeof E.count=="number"&&typeof W.count=="number"){const $=E.monthName||E.month,z=W.monthName||W.month,U=e(E.count||0),O=e(W.count||0);if(E.count>0){const F=(W.count-E.count)/E.count*100;if(isFinite(F)&&!isNaN(F))if(Math.abs(F)<.1)g.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${U} (${$}) ‚Üí ${O} (${z}) ‚Äî 0.0%`);else{const H=F>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",R=Math.abs(F),q=F>=0?"+":"-",b=F>=0?"#28a745":"#dc3545",v=F>=0?"#28a745":"#dc3545";g.push(`  ‚Ä¢ <span style="color: ${b}; font-weight: 600;">${H}</span> —Å ${U} (${$}) –¥–æ ${O} (${z}) ‚Äî <span style="color: ${v}; font-weight: 600;">${q}${R.toFixed(1)}%</span>`)}}else E.count===0&&W.count>0&&g.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${$}) –¥–æ ${O} (${z})`)}if(I&&W&&typeof W.count=="number"&&typeof I.count=="number"){const $=W.monthName||W.month,z=I.monthName||I.month,U=e(W.count||0),O=e(I.count||0);if(W.count>0){const F=(I.count-W.count)/W.count*100;if(isFinite(F)&&!isNaN(F))if(Math.abs(F)<.1)g.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${U} (${$}) ‚Üí ${O} (${z}) ‚Äî 0.0%`);else{const H=F>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",R=Math.abs(F),q=F>=0?"+":"-",b=F>=0?"#28a745":"#dc3545",v=F>=0?"#28a745":"#dc3545";g.push(`  ‚Ä¢ <span style="color: ${b}; font-weight: 600;">${H}</span> —Å ${U} (${$}) –¥–æ ${O} (${z}) ‚Äî <span style="color: ${v}; font-weight: 600;">${q}${R.toFixed(1)}%</span>`)}}else W.count===0&&I.count>0&&g.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${$}) –¥–æ ${O} (${z})`)}}if(g.length>0&&(A.push("–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º:"),A.push(...g)),B.length>=3){const E=B[0],W=B[B.length-1];if(E&&W&&typeof E.count=="number"&&typeof W.count=="number"){const I=E.count||0,$=W.count||0,z=E.monthName||E.month,U=W.monthName||W.month,O=e(I),F=e($);if(I>0){const H=($-I)/I*100;if(isFinite(H)&&!isNaN(H))if(Math.abs(H)<1)A.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥:"),A.push(`  ‚Ä¢ –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${O} (${z}) ‚Üí ${F} (${U}) ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–µ–Ω–µ–µ 1%`);else{const R=H>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",q=Math.abs(H),b=H>=0?"+":"-",v=H>=0?"#28a745":"#dc3545",P=H>=0?"#28a745":"#dc3545";A.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥:"),A.push(`  ‚Ä¢ <span style="color: ${v}; font-weight: 600;">${R}</span> —Å ${O} (${z}) –¥–æ ${F} (${U}) ‚Äî <span style="color: ${P}; font-weight: 600;">${b}${q.toFixed(1)}%</span>`)}}else I===0&&$>0?(A.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥:"),A.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${z}) –¥–æ ${F} (${U})`)):I>0&&$===0&&(A.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥:"),A.push(`  ‚Ä¢ –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤: —Å ${O} (${z}) –¥–æ 0 (${U})`))}}return A.length>0?A:["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"]});function K(B,A){let g=[];switch(B){case"new":g=t.data.newTicketsByMonth||[];break;case"closed":g=t.data.closedTicketsByMonth||[];break;case"carryover":g=t.data.carryoverTicketsByMonth||[];break;default:return"-"}for(const u of g){if(!u.weeks||!Array.isArray(u.weeks))continue;const h=u.weeks.find(E=>E&&E.weekNumber===A);if(h){const E=h.count||0;return E>0?e(E):"-"}}return"-"}return(B,A)=>(m(),_("div",$o,[r("div",Wo,[r("h3",Ao,[A[0]||(A[0]=ve(" –ù–æ–≤—ã–µ –∏ –ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã ",-1)),y.value?(m(),_("span",Do,"("+C(y.value)+")",1)):Q("",!0)]),r("div",Eo,[r("div",Bo,[re(Je(De),{data:n.value,options:d},null,8,["data"])]),r("div",No,[A[3]||(A[3]=r("h4",{class:"summary-title"},"–°–≤–æ–¥–Ω—ã–π –∏—Ç–æ–≥",-1)),r("div",Uo,[r("div",So,[A[1]||(A[1]=r("span",{class:"summary-label"},"–ù–æ–≤—ã–µ:",-1)),r("span",Io,C(D.value.new),1)]),r("div",Mo,[A[2]||(A[2]=r("span",{class:"summary-label"},"–ó–∞–∫—Ä—ã—Ç—ã–µ:",-1)),r("span",Oo,C(D.value.closed),1)])]),r("div",Ro,[(m(!0),_(ae,null,se(x.value,(g,u)=>(m(),_("p",{key:u,innerHTML:g},null,8,Po))),128))])])])]),r("div",xo,[r("h3",Lo,[A[4]||(A[4]=ve(" –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã ",-1)),f.value?(m(),_("span",Go,"("+C(f.value)+")",1)):Q("",!0)]),r("div",Fo,[r("div",Ho,[re(Je(De),{data:l.value,options:d},null,8,["data"])]),r("div",Vo,[A[5]||(A[5]=r("h4",{class:"analysis-title"},"–ê–Ω–∞–ª–∏–∑",-1)),r("div",Yo,[(m(!0),_(ae,null,se(X.value,(g,u)=>(m(),_("p",{key:u,innerHTML:g},null,8,zo))),128))])])])]),r("div",jo,[A[10]||(A[10]=r("h3",{class:"chart-title"},"–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –Ω–µ–¥–µ–ª—è–º",-1)),r("div",qo,[r("table",Zo,[r("thead",null,[r("tr",null,[A[6]||(A[6]=r("th",{class:"month-header-cell"},"–ú–µ—Å—è—Ü",-1)),(m(!0),_(ae,null,se(a.value,g=>(m(),_("th",{key:`week-${g}`,class:"week-header-cell"}," –ù–µ–¥–µ–ª—è "+C(g),1))),128))])]),r("tbody",null,[r("tr",Xo,[A[7]||(A[7]=r("td",{class:"data-type-cell"},"–ù–æ–≤—ã–µ",-1)),(m(!0),_(ae,null,se(a.value,g=>(m(),_("td",{key:`new-${g}`,class:"week-data-cell"},C(K("new",g)),1))),128))]),r("tr",Jo,[A[8]||(A[8]=r("td",{class:"data-type-cell"},"–ó–∞–∫—Ä—ã—Ç—ã–µ",-1)),(m(!0),_(ae,null,se(a.value,g=>(m(),_("td",{key:`closed-${g}`,class:"week-data-cell"},C(K("closed",g)),1))),128))]),r("tr",Ko,[A[9]||(A[9]=r("td",{class:"data-type-cell"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ",-1)),(m(!0),_(ae,null,se(a.value,g=>(m(),_("td",{key:`carryover-${g}`,class:"week-data-cell"},C(K("carryover",g)),1))),128))])])])])])]))}},en=we(Qo,[["__scopeId","data-v-31a3d565"]]),tn={class:"months-preloader"},rn={class:"preloader-content"},an={class:"progress-container"},sn={class:"progress-bar"},on={class:"progress-text"},nn={class:"preloader-message"},ln={class:"stages-list"},cn={class:"stage-icon"},dn={class:"stage-text"},un={__name:"MonthsModePreloader",props:{progress:{type:Number,required:!0,validator:s=>s>=0&&s<=100},currentStage:{type:String,default:""}},setup(s){const t=s,e=[{label:"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",threshold:5},{label:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 1)...",threshold:35},{label:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 2)...",threshold:65},{label:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 3)...",threshold:85},{label:"–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö...",threshold:90},{label:"–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤...",threshold:100}];function a(l){return t.progress>=e[l].threshold}function n(l){const d=e[l].threshold,c=l>0?e[l-1].threshold:0;return t.progress>=c&&t.progress<d}return(l,d)=>(m(),_("div",tn,[r("div",rn,[d[0]||(d[0]=er('<div class="preloader-spinner" data-v-b571fe67><div class="spinner-ring" data-v-b571fe67></div><div class="spinner-ring" data-v-b571fe67></div><div class="spinner-ring" data-v-b571fe67></div></div><h3 class="preloader-title" data-v-b571fe67>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ 3 –º–µ—Å—è—Ü–∞</h3>',2)),r("div",an,[r("div",sn,[r("div",{class:"progress-fill",style:$e({width:`${s.progress}%`})},null,4)]),r("div",on,C(Math.round(s.progress))+"%",1)]),r("p",nn,C(s.currentStage),1),r("div",ln,[(m(),_(ae,null,se(e,(c,y)=>r("div",{key:y,class:ne(["stage-item",{"stage-completed":a(y),"stage-current":n(y)}])},[r("span",cn,C(a(y)?"‚úì":n(y)?"‚Üí":"‚óã"),1),r("span",dn,C(c.label),1)],2)),64))])])]))}},vn=we(un,[["__scopeId","data-v-b571fe67"]]),kn="/api/graph-1c-admission-closure.php";function hn(s){var a,n,l,d,c,y,f,D,x,X,K,B,A,g,u,h,E,W,I,$,z,U,O,F,H,R,q,b,v,P,V,te,i,o,T,N,G,S,Y,ee,p,k,L,M,J,ce,he,ye,me,pe,fe,ge,_e,be,Ee,Be,Ne,Ue,Se,Ie,Me,Oe,Re,Pe,xe,Le;if(!s)return{meta:null,data:{currentWeek:{newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedOtherWeek:0,carryoverTicketsCreatedPreviousWeek:0,carryoverTicketsCreatedOlder:0},newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,series:{new:[0],closed:[0],closedCreatedThisWeek:[0],closedCreatedOtherWeek:[0],carryover:[0],carryoverCreatedThisWeek:[0],carryoverCreatedOtherWeek:[0],carryoverCreatedPreviousWeek:[0],carryoverCreatedOlder:[0]},weeksData:[],stagesByWeek:[],stages:[],responsible:[],responsibleCreatedThisWeek:[],responsibleCreatedOtherWeek:[]}};const t=s.data||s.result||s,e=t.meta||s.meta||null;return{meta:{...e,currentWeek:(e==null?void 0:e.currentWeek)||(e?{weekNumber:e.weekNumber,weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc}:null),weeks:(e==null?void 0:e.weeks)||[]},data:{currentWeek:((a=t.data)==null?void 0:a.currentWeek)||(t.data?{newTickets:t.data.newTickets??0,closedTickets:t.data.closedTickets??0,closedTicketsCreatedThisWeek:t.data.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:t.data.closedTicketsCreatedOtherWeek??0,carryoverTickets:t.data.carryoverTickets??0,carryoverTicketsCreatedThisWeek:t.data.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:t.data.carryoverTicketsCreatedOtherWeek??0,carryoverTicketsCreatedPreviousWeek:t.data.carryoverTicketsCreatedPreviousWeek??0,carryoverTicketsCreatedOlder:t.data.carryoverTicketsCreatedOlder??0}:{newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedOtherWeek:0,carryoverTicketsCreatedPreviousWeek:0,carryoverTicketsCreatedOlder:0}),newTickets:((l=(n=t.data)==null?void 0:n.currentWeek)==null?void 0:l.newTickets)??((d=t.data)==null?void 0:d.newTickets)??t.newTickets??0,closedTickets:((y=(c=t.data)==null?void 0:c.currentWeek)==null?void 0:y.closedTickets)??((f=t.data)==null?void 0:f.closedTickets)??t.closedTickets??0,closedTicketsCreatedThisWeek:((x=(D=t.data)==null?void 0:D.currentWeek)==null?void 0:x.closedTicketsCreatedThisWeek)??((X=t.data)==null?void 0:X.closedTicketsCreatedThisWeek)??t.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:((B=(K=t.data)==null?void 0:K.currentWeek)==null?void 0:B.closedTicketsCreatedOtherWeek)??((A=t.data)==null?void 0:A.closedTicketsCreatedOtherWeek)??t.closedTicketsCreatedOtherWeek??0,carryoverTickets:((u=(g=t.data)==null?void 0:g.currentWeek)==null?void 0:u.carryoverTickets)??((h=t.data)==null?void 0:h.carryoverTickets)??t.carryoverTickets??0,carryoverTicketsCreatedThisWeek:((W=(E=t.data)==null?void 0:E.currentWeek)==null?void 0:W.carryoverTicketsCreatedThisWeek)??((I=t.data)==null?void 0:I.carryoverTicketsCreatedThisWeek)??t.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:((z=($=t.data)==null?void 0:$.currentWeek)==null?void 0:z.carryoverTicketsCreatedOtherWeek)??((U=t.data)==null?void 0:U.carryoverTicketsCreatedOtherWeek)??t.carryoverTicketsCreatedOtherWeek??0,carryoverTicketsCreatedPreviousWeek:((F=(O=t.data)==null?void 0:O.currentWeek)==null?void 0:F.carryoverTicketsCreatedPreviousWeek)??((H=t.data)==null?void 0:H.carryoverTicketsCreatedPreviousWeek)??t.carryoverTicketsCreatedPreviousWeek??0,carryoverTicketsCreatedOlder:((q=(R=t.data)==null?void 0:R.currentWeek)==null?void 0:q.carryoverTicketsCreatedOlder)??((b=t.data)==null?void 0:b.carryoverTicketsCreatedOlder)??t.carryoverTicketsCreatedOlder??0,series:{new:((P=(v=t.data)==null?void 0:v.series)==null?void 0:P.new)??((V=t.series)==null?void 0:V.new)??[0],closed:((i=(te=t.data)==null?void 0:te.series)==null?void 0:i.closed)??((o=t.series)==null?void 0:o.closed)??[0],closedCreatedThisWeek:((N=(T=t.data)==null?void 0:T.series)==null?void 0:N.closedCreatedThisWeek)??((G=t.series)==null?void 0:G.closedCreatedThisWeek)??[0],closedCreatedOtherWeek:((Y=(S=t.data)==null?void 0:S.series)==null?void 0:Y.closedCreatedOtherWeek)??((ee=t.series)==null?void 0:ee.closedCreatedOtherWeek)??[0],carryover:((k=(p=t.data)==null?void 0:p.series)==null?void 0:k.carryover)??((L=t.series)==null?void 0:L.carryover)??[0],carryoverCreatedThisWeek:((J=(M=t.data)==null?void 0:M.series)==null?void 0:J.carryoverCreatedThisWeek)??((ce=t.series)==null?void 0:ce.carryoverCreatedThisWeek)??[0],carryoverCreatedOtherWeek:((ye=(he=t.data)==null?void 0:he.series)==null?void 0:ye.carryoverCreatedOtherWeek)??((me=t.series)==null?void 0:me.carryoverCreatedOtherWeek)??[0],carryoverCreatedPreviousWeek:((fe=(pe=t.data)==null?void 0:pe.series)==null?void 0:fe.carryoverCreatedPreviousWeek)??((ge=t.series)==null?void 0:ge.carryoverCreatedPreviousWeek)??[0],carryoverCreatedOlder:((be=(_e=t.data)==null?void 0:_e.series)==null?void 0:be.carryoverCreatedOlder)??((Ee=t.series)==null?void 0:Ee.carryoverCreatedOlder)??[0]},weeksData:((Be=t.data)==null?void 0:Be.weeksData)??t.weeksData??[],stagesByWeek:((Ne=t.data)==null?void 0:Ne.stagesByWeek)??t.stagesByWeek??[],stages:((Ue=t.data)==null?void 0:Ue.stages)??t.stages??[],responsible:((Se=t.data)==null?void 0:Se.responsible)??t.responsible??[],responsibleCreatedThisWeek:((Ie=t.data)==null?void 0:Ie.responsibleCreatedThisWeek)??t.responsibleCreatedThisWeek??[],responsibleCreatedOtherWeek:((Me=t.data)==null?void 0:Me.responsibleCreatedOtherWeek)??t.responsibleCreatedOtherWeek??[],newTicketsByStages:((Oe=t.data)==null?void 0:Oe.newTicketsByStages)??t.newTicketsByStages??null,carryoverTicketsByDuration:((Re=t.data)==null?void 0:Re.carryoverTicketsByDuration)??t.carryoverTicketsByDuration??null,newTicketsByMonth:((Pe=t.data)==null?void 0:Pe.newTicketsByMonth)??t.newTicketsByMonth??[],closedTicketsByMonth:((xe=t.data)==null?void 0:xe.closedTicketsByMonth)??t.closedTicketsByMonth??[],carryoverTicketsByMonth:((Le=t.data)==null?void 0:Le.carryoverTicketsByMonth)??t.carryoverTicketsByMonth??[]}}}async function We(s={}){const{endpoint:t=kn,product:e="1C",weekStartUtc:a=null,weekEndUtc:n=null,periodMode:l="weeks",useCache:d=!0,forceRefresh:c=!1,includeTickets:y=!1,includeNewTicketsByStages:f=!1,includeCarryoverTickets:D=!0,includeCarryoverTicketsByDuration:x=!1}=s,X={product:e,weekStartUtc:a,weekEndUtc:n,periodMode:l,useCache:d,forceRefresh:c,includeTickets:y,includeNewTicketsByStages:f,includeCarryoverTickets:D,includeCarryoverTicketsByDuration:x},K=tr(t),B=await fetch(K,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(X)});if(!B.ok)throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ (${B.status})`);const A=await B.json();if((A==null?void 0:A.success)===!1)throw new Error(A.message||"–ë—ç–∫–µ–Ω–¥ –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É");return hn(A)}const yn={class:"ac-dashboard-months"},mn={key:"content"},pn={class:"dashboard-header"},fn={class:"header-content"},gn={class:"breadcrumbs-row"},_n=["aria-label","aria-disabled","data-fallback","disabled"],bn={class:"breadcrumbs","aria-label":"–ù–∞–≤–∏–≥–∞—Ü–∏—è"},wn={class:"dashboard-layout"},Cn={class:"filters-container"},Tn={class:"chart-container"},$n={__name:"GraphAdmissionClosureMonthsDashboard",setup(s){const t=Dt(),e=Z(!0),a=Z(0),n=Z("–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."),l=Z(null),d=Z(null),c=Z({newTickets:0,closedTickets:0,carryoverTickets:0,newTicketsByMonth:[],closedTicketsByMonth:[],carryoverTicketsByMonth:[],previousPeriodData:{newTickets:null,closedTickets:null,carryoverTickets:null}}),y=Z(!1),f=j(()=>typeof window>"u"?!1:window.history.length>1),D=j(()=>f.value?"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É":"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"),x={name:"dashboard-sector-1c"};function X(U){var O;if((O=U==null?void 0:U.preventDefault)==null||O.call(U),!y.value){y.value=!0;try{if(f.value){t.back();return}console.warn("GraphAdmissionClosureMonthsDashboard: fallback navigation to dashboard-sector-1c"),t.push(x)}finally{y.value=!1}}}const K=Z({stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}}),B=j(()=>{const U=K.value.customDateRange.startDate||K.value.customDateRange.endDate,O=K.value.employees.length===1&&K.value.employees.includes("all");return U||!O});async function A(U,O,F=500){const H=a.value,R=10,q=(U-H)/R,b=F/R;for(let v=0;v<R;v++)await new Promise(P=>setTimeout(P,b)),a.value=Math.min(H+q*(v+1),U);a.value=U,n.value=O}async function g(){console.log("[DEBUG MonthsDashboard] loadData called"),console.log("[DEBUG MonthsDashboard] isLoading before:",e.value),e.value=!0,l.value=null,a.value=0,n.value="–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",console.log("[DEBUG MonthsDashboard] isLoading set to true");let U=null,O=null;try{console.log("[DEBUG MonthsDashboard] Starting API call"),await A(5,"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",200);const F=Date.now(),H=2e4;U=setInterval(()=>{const v=Date.now()-F,P=Math.min(5+v/H*85,90);a.value=P,P<35?n.value="–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 1)...":P<65?n.value="–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 2)...":P<85?n.value="–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 3)...":n.value="–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö..."},500),O=setTimeout(()=>{U&&(clearInterval(U),U=null)},H+1e4);const R=await We({product:"1C",periodMode:"months",includeTickets:!0});clearTimeout(O),U&&(clearInterval(U),U=null),a.value=90,n.value="–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞",await A(100,"–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤...",300),console.log("[DEBUG MonthsDashboard] API call successful, result:",R);const{meta:q,data:b}=R;d.value=q,c.value=b,console.log("[DEBUG MonthsDashboard] Data set, meta:",q,"data keys:",Object.keys(b)),await new Promise(v=>setTimeout(v,200))}catch(F){U&&(clearInterval(U),U=null),O&&(clearTimeout(O),O=null),console.error("[DEBUG MonthsDashboard] API call failed:",F),l.value=F instanceof Error?F:new Error("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"),console.error("[GraphAdmissionClosureMonthsDashboard] loadData error:",F),a.value=100,n.value="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö"}finally{console.log("[DEBUG MonthsDashboard] Finally block: setting isLoading to false"),e.value=!1,console.log("[DEBUG MonthsDashboard] isLoading after:",e.value)}}function u(U){K.value.stages=U}function h(U){K.value.employees=U}function E(U){K.value.dateRange=U}function W(U){K.value.customDateRange=U}function I(){K.value={stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}},$()}function $(){g()}function z(U){if(!["weeks","months"].includes(U)){console.warn("[GraphAdmissionClosureMonthsDashboard] Invalid periodMode:",U);return}U==="weeks"&&window.dispatchEvent(new CustomEvent("period-mode-change",{detail:{mode:U}}))}return ot(()=>{console.log("[DEBUG MonthsDashboard] onMounted called"),console.log("[DEBUG MonthsDashboard] isLoading before loadData:",e.value),g()}),(U,O)=>{const F=Et("router-link");return m(),_("div",yn,[re(ue,{name:"fade",mode:"out-in"},{default:oe(()=>[e.value?(m(),ke(vn,{key:"preloader",progress:a.value,"current-stage":n.value},null,8,["progress","current-stage"])):(m(),_("div",mn,[r("div",pn,[r("div",fn,[r("div",gn,[r("button",{class:"btn-back-link",type:"button",onClick:X,"aria-label":D.value,"aria-disabled":!f.value,"data-fallback":!f.value,disabled:y.value,title:"–ù–∞–∑–∞–¥"}," ‚Üê ",8,_n),r("nav",bn,[re(F,{to:{name:"dashboard-sector-1c"},class:"breadcrumb-link"},{default:oe(()=>[...O[0]||(O[0]=[ve(" –î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–° ",-1)])]),_:1}),O[2]||(O[2]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),re(F,{to:{name:"dashboard-graph-state"},class:"breadcrumb-link"},{default:oe(()=>[...O[1]||(O[1]=[ve(" –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è ",-1)])]),_:1}),O[3]||(O[3]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),O[4]||(O[4]=r("span",{class:"breadcrumb-current"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π",-1))])]),O[5]||(O[5]=r("h1",{class:"dashboard-title"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),O[6]||(O[6]=r("p",{class:"dashboard-subtitle"}," –î–æ—Å—Ç—É–ø—ã –∏ —Ñ–∏–ª—å—Ç—Ä—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã ¬´–ì—Ä–∞—Ñ–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è¬ª, —Å–µ–ª–µ–∫—Ç–æ—Ä —ç—Ç–∞–ø–æ–≤ —Å–∫—Ä—ã—Ç. ",-1))])]),r("div",wn,[r("div",Cn,[re(Nt,{stages:K.value.stages,employees:K.value.employees,dateRange:K.value.dateRange,customDateRange:K.value.customDateRange,hasActiveFilters:B.value,hideStages:!0,weekPickerMode:!1,showPeriodMode:!0,"period-mode":"months","onUpdate:stages":u,"onUpdate:employees":h,"onUpdate:dateRange":E,"onUpdate:customDateRange":W,"onUpdate:periodMode":z,onReset:I,onApply:$},null,8,["stages","employees","dateRange","customDateRange","hasActiveFilters"])]),r("div",Tn,[l.value?(m(),ke(Bt,{key:0,type:"error",title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",message:l.value.message},null,8,["message"])):(m(),_(ae,{key:1},[re(To,{data:c.value},null,8,["data"]),re(en,{data:c.value,meta:d.value},null,8,["data","meta"])],64))])])]))]),_:1})])}}},Wn=we($n,[["__scopeId","data-v-fe3ca7ed"]]);class st{static async getSectorData(){try{const t=await this.getAllTickets();console.log("Total tickets loaded:",t.length);const e=this.extractUniqueEmployeeIds(t);console.log("Unique employee IDs:",e);const a=await this.getEmployeesByIds(e);return console.log("Loaded employees:",a.length),{stages:this.groupTicketsByStages(t,a),employees:a,zeroPointTickets:this.getZeroPointTickets(t)}}catch(t){throw console.error("Error getting sector data:",t),t}}static async getAllTickets(){const t=["DT140_12:UC_0VHWE2","DT140_12:PREPARATION","DT140_12:CLIENT"],e=[];for(const a of t){console.log(`Loading tickets for stage: ${a}`);const n=await this.getTicketsByStage(a);e.push(...n),console.log(`Loaded ${n.length} tickets for stage ${a}`)}return e}static async getTicketsByStage(t){const e=[];let a=0;const n=50;let l=!0;for(;l;)try{const c=await Ae.call("crm.item.list",{entityTypeId:this.ENTITY_TYPE_ID,filter:{stageId:t},select:["*"],order:{id:"DESC"},start:a,useOriginalUfNames:"Y"});let y=[];c&&c.result&&(Array.isArray(c.result)?y=c.result:c.result.items&&Array.isArray(c.result.items)?y=c.result.items:c.result.data&&Array.isArray(c.result.data)&&(y=c.result.data)),y.length>0?(e.push(...y),a+=y.length,l=y.length===n):l=!1}catch(c){console.error(`Error loading tickets batch for stage ${t} (start: ${a}):`,c),l=!1}e.length>0&&(console.log("Sample ticket structure (full JSON):",JSON.stringify(e[0],null,2)),console.log("Sample ticket keys:",Object.keys(e[0])),console.log("Sample ticket assignedById variants:",{assignedById:e[0].assignedById,assignedByIdId:e[0].assignedByIdId,ASSIGNED_BY_ID:e[0].ASSIGNED_BY_ID}));const d=e.filter(c=>{const y=c.UF_CRM_7_TYPE_PRODUCT||c.uf_crm_7_type_product||c.ufCrm7TypeProduct||c.UF_CRM_7_TYPE_PRODUCT||c.uf_crm_7_type_product;return Array.isArray(y)?y.includes(this.SECTOR_TAG):typeof y=="object"&&y!==null?y.value===this.SECTOR_TAG||y===this.SECTOR_TAG:y===this.SECTOR_TAG});return console.log(`Filtered ${d.length} tickets from ${e.length} for stage ${t} (sector tag: ${this.SECTOR_TAG})`),d}static extractUniqueEmployeeIds(t){if(!Array.isArray(t))return[];const e=new Set;return t.forEach(a=>{const n=a.assignedById||a.assignedByIdId||a.ASSIGNED_BY_ID||a.assignedById||a.assignedById&&typeof a.assignedById=="object"&&(a.assignedById.id||a.assignedById.ID)||a.assignedById&&typeof a.assignedById=="object"&&a.assignedById.value;if(n){const l=parseInt(n);l&&!isNaN(l)&&l>0&&e.add(l)}}),t.length>0&&(console.log("Sample ticket for employee extraction:",t[0]),console.log("Sample ticket assignedById variants:",{assignedById:t[0].assignedById,assignedByIdId:t[0].assignedByIdId,ASSIGNED_BY_ID:t[0].ASSIGNED_BY_ID}),console.log("Extracted employee IDs:",Array.from(e))),Array.from(e)}static async getEmployeesByIds(t){if(!Array.isArray(t)||t.length===0)return[];try{const e=await Ae.call("user.get",{filter:{ID:t}});let a=[];return e&&e.result&&(Array.isArray(e.result)?a=e.result:console.warn("Unexpected user.get result format:",e)),a.map(n=>({id:parseInt(n.ID||n.id||0),name:`${n.NAME||n.name||""} ${n.LAST_NAME||n.lastName||""}`.trim()||n.EMAIL||n.email||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π",position:n.WORK_POSITION||n.workPosition||"–°–æ—Ç—Ä—É–¥–Ω–∏–∫",email:n.EMAIL||n.email||"",tickets:[]}))}catch(e){return console.error("Error getting employees by IDs:",e),[]}}static groupTicketsByStages(t,e){Array.isArray(t)||(console.warn("Tickets is not an array:",t),t=[]),Array.isArray(e)||(console.warn("Employees is not an array:",e),e=[]);const a=[{id:"formed",name:"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ",color:"#007bff",employees:e.map(n=>({...n,tickets:[]}))},{id:"review",name:"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó",color:"#ffc107",employees:e.map(n=>({...n,tickets:[]}))},{id:"execution",name:"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ",color:"#28a745",employees:e.map(n=>({...n,tickets:[]}))}];return t.forEach(n=>{const l=this.mapStageId(n.stageId||n.STAGE_ID||""),d=a.find(c=>c.id===l);if(d){const c=n.assignedById||n.ASSIGNED_BY_ID||null,y=c?parseInt(c):null;if(y){let f=d.employees.find(D=>D.id===y);f||(f={id:y,name:`–°–æ—Ç—Ä—É–¥–Ω–∏–∫ #${y}`,position:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ",email:"",tickets:[]},d.employees.push(f)),f.tickets.push(this.mapTicket(n))}}}),a}static mapStageId(t){return{"DT140_12:UC_0VHWE2":"formed","DT140_12:PREPARATION":"review","DT140_12:CLIENT":"execution"}[t]||"formed"}static mapStageIdToBitrix(t){return{formed:"DT140_12:UC_0VHWE2",review:"DT140_12:PREPARATION",execution:"DT140_12:CLIENT"}[t]||"DT140_12:UC_0VHWE2"}static mapTicket(t){const e=parseInt(t.id||t.ID||0),a=t.title||t.TITLE||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è",n=t.stageId||t.STAGE_ID||"",l=t.assignedById||t.ASSIGNED_BY_ID||null,d=t.createdTime||t.CREATED_DATE||t.CREATED_TIME||"",c=t.updatedTime||t.MODIFY_DATE||t.UPDATED_TIME||"",y=t.UF_CRM_7_UF_PRIORITY||t.uf_crm_7_uf_priority||t.ufCrm7UfPriority||t.UF_CRM_7_UF_PRIORITY||t.uf_crm_7_uf_priority||t.priority||t.PRIORITY||null,f=wt(y),D=sr(f);return{id:e,title:a,priorityId:f.id,priorityLabel:f.label,priorityColors:D,priority:f.id,priorityBitrixValue:f.bitrixValue||null,status:this.mapStatus(n),assigneeId:l?parseInt(l):null,stageId:this.mapStageId(n),createdAt:d,modifiedAt:c,amount:t.opportunity||t.OPPORTUNITY||0,currency:t.currencyId||t.CURRENCY_ID||"RUB",description:t.comments||t.COMMENTS||""}}static mapPriority(t){return wt(t).id}static mapPriorityToBitrix(t){if(t&&typeof t=="object")return t.bitrixValue||null;const e=Ct(t);if(e&&e.bitrixValue)return e.bitrixValue;const a={3:"3",2:"2",1:"1",high:"3",medium:"2",low:"1"};return a[t]?a[t]:Ct(or).bitrixValue}static mapStatus(t){return"in_progress"}static getZeroPointTickets(t){const e={formed:[],review:[],execution:[]};return Array.isArray(t)?(t.filter(a=>!(a.assignedById||a.ASSIGNED_BY_ID)).forEach(a=>{const n=this.mapStageId(a.stageId||a.STAGE_ID||"");e[n]&&e[n].push(this.mapTicket(a))}),e):(console.warn("Tickets is not an array in getZeroPointTickets:",t),e)}static async assignTicket(t,e,a){try{const n=this.mapStageIdToBitrix(a);return(await Ae.call("crm.item.update",{entityTypeId:this.ENTITY_TYPE_ID,id:t,fields:{assignedById:e,stageId:n}})).result===!0}catch(n){throw console.error("Error assigning ticket:",n),n}}static async createTicket(t){try{const e=await Ae.call("crm.item.add",{entityTypeId:this.ENTITY_TYPE_ID,fields:{title:t.title,assignedById:t.employeeId,stageId:this.mapStageIdToBitrix(t.stageId)}});return e.result?parseInt(e.result):0}catch(e){throw console.error("Error creating ticket:",e),e}}static async getTicket(t){try{const e=await Ae.call("crm.item.get",{entityTypeId:this.ENTITY_TYPE_ID,id:t});return this.mapTicket(e.result)}catch(e){throw console.error("Error getting ticket:",e),e}}static async addComment(t,e){try{return(await Ae.call("crm.timeline.comment.add",{fields:{entityId:t,entityType:"DYNAMIC_"+this.ENTITY_TYPE_ID,comment:e}})).result!==void 0}catch(a){throw console.error("Error adding comment:",a),a}}}et(st,"ENTITY_TYPE_ID",140),et(st,"SECTOR_TAG","1C");const An={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true"},Dn={class:"modal"},En={key:0,class:"modal__tabs"},Bn={key:"level-0-categories",class:"level-0"},Nn={class:"modal__header"},Un={class:"modal__title"},Sn={key:0},In={class:"modal__body"},Mn={class:"categories-list"},On=["onClick"],Rn={class:"category-item"},Pn={class:"category-item__icon"},xn={key:0},Ln={key:1},Gn={class:"category-item__content"},Fn={class:"category-item__label"},Hn={class:"category-item__count"},Vn={key:0,class:"category-item__arrow"},Yn={class:"modal__footer"},zn={key:"level-1-categories",class:"level-1"},jn={class:"modal__header"},qn={class:"modal__body"},Zn={key:"loading",class:"loading-names"},Xn={key:"empty",class:"modal__empty"},Jn={key:"list",class:"responsible-list"},Kn=["onClick"],Qn={class:"responsible-list__name"},el={class:"responsible-list__count"},tl={key:0,class:"responsible-list__arrow"},rl={class:"modal__footer"},al={key:"level-2-categories",class:"level-2"},sl={class:"modal__header"},ol={class:"modal__title"},nl={class:"modal__body"},ll={key:"loading",class:"loading-state"},il={key:"error",class:"error-state"},cl={class:"error-message"},dl={key:"empty",class:"empty-state"},ul={key:"tickets",class:"tickets-list-container"},vl={key:"level-0-employees",class:"level-0"},kl={class:"modal__header"},hl={class:"modal__title"},yl={key:0},ml={class:"modal__body"},pl={key:"loading",class:"loading-names"},fl={key:"empty",class:"modal__empty"},gl={key:"list",class:"responsible-list"},_l=["onClick"],bl={class:"responsible-list__name"},wl={class:"responsible-list__count"},Cl={key:0,class:"responsible-list__arrow"},Tl={class:"modal__footer"},$l={key:"level-1-employees",class:"level-1"},Wl={class:"modal__header"},Al={class:"modal__title"},Dl={class:"modal__body"},El={class:"categories-list"},Bl=["onClick"],Nl={class:"category-item"},Ul={class:"category-item__icon"},Sl={key:0},Il={key:1},Ml={class:"category-item__content"},Ol={class:"category-item__label"},Rl={class:"category-item__count"},Pl={key:0,class:"category-item__arrow"},xl={class:"modal__footer"},Ll={key:"level-2-employees",class:"level-2"},Gl={class:"modal__header"},Fl={class:"modal__title"},Hl={class:"modal__body"},Vl={key:"loading",class:"loading-state"},Yl={key:"error",class:"error-state"},zl={class:"error-message"},jl={key:"empty",class:"empty-state"},ql={class:"empty-state-message"},Zl={key:"tickets",class:"tickets-list-container"},Xl={__name:"ResponsibleModal",props:{isVisible:{type:Boolean,default:!1},responsible:{type:Array,default:()=>[]},closedTicketsCreatedThisWeek:{type:Number,default:0},closedTicketsCreatedOtherWeek:{type:Number,default:0},responsibleCreatedThisWeek:{type:Array,default:()=>[]},responsibleCreatedOtherWeek:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},weekStartUtc:{type:String,default:null},weekEndUtc:{type:String,default:null}},setup(s){const t=s,e=Z(0),a=Z("categories"),n=Z(null),l=Z(null),d=Z(null),c=Z([]),y=Z(!1),f=Z(null),D=Z([]),x=Z([]),X=Z(!1),K=j(()=>[{id:"created-this-week",label:"–¢–∏–∫–µ—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª—å—é –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª—å—é",count:t.closedTicketsCreatedThisWeek??0,responsible:t.responsibleCreatedThisWeek??[]},{id:"created-other-week",label:"–¢–∏–∫–µ—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª—å—é –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ",count:t.closedTicketsCreatedOtherWeek??0,responsible:t.responsibleCreatedOtherWeek??[]}]),B=j(()=>{const b=new Map;return(t.responsibleCreatedThisWeek||[]).forEach(v=>{const P=v.id??"unassigned";b.has(P)||b.set(P,{id:v.id,name:v.name,thisWeekCount:0,otherWeekCount:0,totalCount:0,thisWeekTickets:[],otherWeekTickets:[]});const V=b.get(P);V.thisWeekCount=v.count??0,V.thisWeekTickets=v.tickets||[],V.totalCount+=V.thisWeekCount}),(t.responsibleCreatedOtherWeek||[]).forEach(v=>{const P=v.id??"unassigned";b.has(P)||b.set(P,{id:v.id,name:v.name,thisWeekCount:0,otherWeekCount:0,totalCount:0,thisWeekTickets:[],otherWeekTickets:[]});const V=b.get(P);V.otherWeekCount=v.count??0,V.otherWeekTickets=v.tickets||[],V.totalCount+=V.otherWeekCount}),Array.from(b.values())}),A=j(()=>{if(!l.value)return[];const b=l.value.thisWeekTickets||[],v=l.value.otherWeekTickets||[];return console.log("[ResponsibleModal] Computing gradations for employee:",{id:l.value.id,name:l.value.name,thisWeekCount:l.value.thisWeekCount,otherWeekCount:l.value.otherWeekCount,thisWeekTickets:b.length,otherWeekTickets:v.length,employee:l.value}),[{id:"this-week",label:"–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ",count:l.value.thisWeekCount??0,tickets:b,employeeId:l.value.id},{id:"other-week",label:"–ù–∞ –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ",count:l.value.otherWeekCount??0,tickets:v,employeeId:l.value.id}]}),g=j(()=>(x.value||[]).length>0);async function u(b){const v=b.filter(P=>P.id!==null&&P.id!==void 0).map(P=>P.id);if(v.length===0)return b;try{const P=await st.getEmployeesByIds(v),V=new Map;return P.forEach(te=>{V.set(te.id,te.name)}),b.map(te=>te.id&&V.has(te.id)?{...te,name:V.get(te.id)}:te)}catch(P){return console.error("[ResponsibleModal] Error enriching names:",P),b}}Te([()=>a.value,()=>B.value],async([b,v])=>{if(!(b!=="employees"||e.value!==0)){if(!v||v.length===0){x.value=[];return}X.value=!0;try{x.value=await u(v)}catch(P){console.error("[ResponsibleModal] Error loading employee names:",P),x.value=v}finally{X.value=!1}}},{immediate:!0}),Te(()=>t.responsible,async b=>{if(!(e.value!==0||n.value||a.value!=="categories")){if(!b||b.length===0){D.value=[];return}X.value=!0;try{D.value=await u(b)}catch(v){console.error("[ResponsibleModal] Error loading employee names:",v),D.value=b}finally{X.value=!1}}},{immediate:!1});const h=j(()=>(D.value||[]).length>0);function E(b){a.value!==b&&(a.value=b,e.value=0,n.value=null,l.value=null,d.value=null,c.value=[],f.value=null,D.value=[],x.value=[])}async function W(b){if(!(!b||b.count===0)){n.value=b,e.value=1,X.value=!0;try{D.value=await u(b.responsible)}catch(v){console.error("[ResponsibleModal] Error loading employee names:",v),D.value=b.responsible}finally{X.value=!1}}}async function I(b,v=null){var P,V;!b||!b.id||b.totalCount===0||(v&&v.currentTarget&&(v.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{v.currentTarget&&(v.currentTarget.style.transform="")},150)),console.log("[ResponsibleModal] Employee selected from list:",{id:b.id,name:b.name,thisWeekCount:b.thisWeekCount,otherWeekCount:b.otherWeekCount,thisWeekTickets:((P=b.thisWeekTickets)==null?void 0:P.length)||0,otherWeekTickets:((V=b.otherWeekTickets)==null?void 0:V.length)||0,employee:b}),l.value={...b,thisWeekTickets:b.thisWeekTickets||[],otherWeekTickets:b.otherWeekTickets||[]},e.value=1)}async function $(b){var P;if(!b||b.count===0)return;d.value=b,e.value=2;const v=b.tickets||[];console.log("[ResponsibleModal] Gradation clicked:",{id:b.id,label:b.label,count:b.count,ticketsInGradation:v.length,selectedEmployee:(P=l.value)==null?void 0:P.id}),v.length>0?(console.log("[ResponsibleModal] Loading tickets from gradation:",v.length),await z(v)):(console.log("[ResponsibleModal] Tickets not in gradation, loading from API"),await U(b))}async function z(b){y.value=!0,f.value=null;try{try{const{prepareTicketsForDisplay:v}=await He(async()=>{const{prepareTicketsForDisplay:P}=await import("./ticketListUtils-M5rAkasm.js").then(V=>V.t);return{prepareTicketsForDisplay:P}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);c.value=await v(b,null,null)}catch(v){console.error("[ResponsibleModal] Error preparing tickets:",v),c.value=b}c.value.length===0&&(f.value=null)}catch(v){f.value=v.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[ResponsibleModal] Error loading tickets:",v),c.value=[]}finally{y.value=!1}}async function U(b){y.value=!0,f.value=null;try{if(!t.weekStartUtc||!t.weekEndUtc||!l.value)throw new Error("–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏ –∏–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫");const v=await We({product:"1C",weekStartUtc:t.weekStartUtc,weekEndUtc:t.weekEndUtc,includeTickets:!0}),P=b.id==="this-week"?v.data.responsibleCreatedThisWeek:v.data.responsibleCreatedOtherWeek,V=P==null?void 0:P.find(i=>i.id===l.value.id),te=(V==null?void 0:V.tickets)||[];try{const{prepareTicketsForDisplay:i}=await He(async()=>{const{prepareTicketsForDisplay:o}=await import("./ticketListUtils-M5rAkasm.js").then(T=>T.t);return{prepareTicketsForDisplay:o}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);c.value=await i(te,null,null)}catch(i){console.error("[ResponsibleModal] Error preparing tickets:",i),c.value=te}c.value.length===0&&(f.value=null)}catch(v){f.value=v.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[ResponsibleModal] Error loading tickets from API:",v),c.value=[]}finally{y.value=!1}}async function O(b,v=null){!b||!b.id||b.count===0||(v&&v.currentTarget&&(v.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{v.currentTarget&&(v.currentTarget.style.transform="")},150)),l.value=b,e.value=2,await F(b.id))}async function F(b){var v;y.value=!0,f.value=null;try{let P=[];if(n.value&&n.value.responsible){const V=n.value.responsible.find(te=>te.id===b);P=(V==null?void 0:V.tickets)||[]}if(P.length===0&&t.weekStartUtc&&t.weekEndUtc){const V=await We({product:"1C",weekStartUtc:t.weekStartUtc,weekEndUtc:t.weekEndUtc,includeTickets:!0}),te=((v=n.value)==null?void 0:v.id)==="created-this-week"?V.data.responsibleCreatedThisWeek:V.data.responsibleCreatedOtherWeek,i=te==null?void 0:te.find(o=>o.id===b);P=(i==null?void 0:i.tickets)||[]}try{const{prepareTicketsForDisplay:V}=await He(async()=>{const{prepareTicketsForDisplay:te}=await import("./ticketListUtils-M5rAkasm.js").then(i=>i.t);return{prepareTicketsForDisplay:te}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);c.value=await V(P,null,null)}catch(V){console.error("[ResponsibleModal] Error preparing tickets:",V),c.value=P}c.value.length===0&&(f.value=null)}catch(P){f.value=P.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[ResponsibleModal] Error loading tickets:",P),c.value=[]}finally{y.value=!1}}function H(){e.value===2?(e.value=1,a.value==="categories"?l.value=null:d.value=null,c.value=[],f.value=null):e.value===1&&(e.value=0,a.value==="categories"?(n.value=null,D.value=[]):l.value=null)}function R(b){const v=nt(b.id);window.open(v,"_blank")}function q(){a.value==="employees"&&d.value?z(d.value.tickets):a.value==="categories"&&l.value&&F(l.value.id)}return Te(()=>t.isVisible,b=>{b||(e.value=0,a.value="categories",n.value=null,l.value=null,d.value=null,c.value=[],f.value=null,D.value=[],x.value=[])}),(b,v)=>s.isVisible?(m(),_("div",An,[r("div",Dn,[e.value===0?(m(),_("div",En,[r("button",{class:ne(["modal__tab",{"modal__tab--active":a.value==="categories"}]),onClick:v[0]||(v[0]=P=>E("categories"))}," –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ",2),r("button",{class:ne(["modal__tab",{"modal__tab--active":a.value==="employees"}]),onClick:v[1]||(v[1]=P=>E("employees"))}," –ü–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º ",2)])):Q("",!0),re(ue,{name:"level",mode:"out-in"},{default:oe(()=>{var P,V,te,i;return[a.value==="categories"&&e.value===0?(m(),_("div",Bn,[r("header",Nn,[r("h3",Un,[v[12]||(v[12]=ve(" –ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),s.weekNumber?(m(),_("span",Sn," ¬∑ –ù–µ–¥–µ–ª—è "+C(s.weekNumber),1)):Q("",!0)]),r("button",{class:"modal__close",onClick:v[2]||(v[2]=o=>b.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",In,[r("ul",Mn,[(m(!0),_(ae,null,se(K.value,o=>(m(),_("li",{key:o.id,class:ne(["categories-list__item",{"categories-list__item--clickable":o.count>0}]),onClick:T=>W(o)},[r("div",Rn,[r("div",Pn,[o.id==="created-this-week"?(m(),_("span",xn,"‚úì")):(m(),_("span",Ln,"‚Üª"))]),r("div",Gn,[r("div",Fn,C(o.label),1),r("div",Hn,C(o.count)+" —Ç–∏–∫–µ—Ç–æ–≤",1)]),o.count>0?(m(),_("span",Vn,"‚Üí")):Q("",!0)])],10,On))),128))])]),r("footer",Yn,[r("button",{class:"btn",onClick:v[3]||(v[3]=o=>b.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value==="categories"&&e.value===1?(m(),_("div",zn,[r("header",jn,[r("button",{class:"btn-back",onClick:H,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),v[13]||(v[13]=r("h3",{class:"modal__title"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("button",{class:"modal__close",onClick:v[4]||(v[4]=o=>b.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",qn,[re(ue,{name:"loading",mode:"out-in"},{default:oe(()=>[X.value?(m(),_("div",Zn,[...v[14]||(v[14]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–º—ë–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤...",-1)])])):h.value?(m(),_("ul",Jn,[(m(!0),_(ae,null,se(D.value,o=>(m(),_("li",{key:o.id||o.name,class:ne(["responsible-list__item",{"responsible-list__item--clickable":o.id&&o.count>0}]),onClick:T=>O(o,T),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"},[r("span",Qn,C(o.name||"–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω"),1),r("span",el,C(o.count??0)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),o.id&&o.count>0?(m(),_("span",tl,"‚Üí")):Q("",!0)],10,Kn))),128))])):(m(),_("p",Xn,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º"))]),_:1})]),r("footer",rl,[r("button",{class:"btn",onClick:v[5]||(v[5]=o=>b.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value==="categories"&&e.value===2?(m(),_("div",al,[r("header",sl,[r("button",{class:"btn-back",onClick:H,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",ol,"–¢–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: "+C(((P=l.value)==null?void 0:P.name)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:v[6]||(v[6]=o=>b.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",nl,[re(ue,{name:"loading",mode:"out-in"},{default:oe(()=>[y.value?(m(),_("div",ll,[...v[15]||(v[15]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):f.value?(m(),_("div",il,[v[16]||(v[16]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),v[17]||(v[17]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",cl,C(f.value),1),r("button",{class:"btn btn-retry",onClick:q},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):c.value.length===0?(m(),_("div",dl,[...v[18]||(v[18]=[r("div",{class:"empty-state-icon"},"üìã",-1),r("p",{class:"empty-state-message"},"–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é",-1)])])):(m(),_("div",ul,[re(Ke,{name:"ticket",tag:"div",class:"tickets-list"},{default:oe(()=>[(m(!0),_(ae,null,se(c.value,(o,T)=>(m(),ke(Qe,{key:o.id,ticket:o,draggable:!1,style:$e({"--ticket-index":T}),onClick:R},null,8,["ticket","style"]))),128))]),_:1})]))]),_:1})])])):a.value==="employees"&&e.value===0?(m(),_("div",vl,[r("header",kl,[r("h3",hl,[v[19]||(v[19]=ve(" –ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),s.weekNumber?(m(),_("span",yl," ¬∑ –ù–µ–¥–µ–ª—è "+C(s.weekNumber),1)):Q("",!0)]),r("button",{class:"modal__close",onClick:v[7]||(v[7]=o=>b.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",ml,[re(ue,{name:"loading",mode:"out-in"},{default:oe(()=>[X.value?(m(),_("div",pl,[...v[20]||(v[20]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–º—ë–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤...",-1)])])):g.value?(m(),_("ul",gl,[(m(!0),_(ae,null,se(x.value,o=>(m(),_("li",{key:o.id||o.name,class:ne(["responsible-list__item",{"responsible-list__item--clickable":o.id&&o.totalCount>0}]),onClick:T=>I(o,T),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≥—Ä–∞–¥–∞—Ü–∏–∏ —Ç–∏–∫–µ—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"},[r("span",bl,C(o.name||"–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω"),1),r("span",wl,C(o.totalCount??0)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),o.id&&o.totalCount>0?(m(),_("span",Cl,"‚Üí")):Q("",!0)],10,_l))),128))])):(m(),_("p",fl,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º"))]),_:1})]),r("footer",Tl,[r("button",{class:"btn",onClick:v[8]||(v[8]=o=>b.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value==="employees"&&e.value===1?(m(),_("div",$l,[r("header",Wl,[r("button",{class:"btn-back",onClick:H,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",Al,"–¢–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: "+C(((V=l.value)==null?void 0:V.name)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:v[9]||(v[9]=o=>b.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Dl,[r("ul",El,[(m(!0),_(ae,null,se(A.value,o=>(m(),_("li",{key:o.id,class:ne(["categories-list__item",{"categories-list__item--clickable":o.count>0}]),onClick:T=>$(o)},[r("div",Nl,[r("div",Ul,[o.id==="this-week"?(m(),_("span",Sl,"‚úì")):(m(),_("span",Il,"‚Üª"))]),r("div",Ml,[r("div",Ol,C(o.label),1),r("div",Rl,C(o.count)+" —Ç–∏–∫–µ—Ç–æ–≤",1)]),o.count>0?(m(),_("span",Pl,"‚Üí")):Q("",!0)])],10,Bl))),128))])]),r("footer",xl,[r("button",{class:"btn",onClick:v[10]||(v[10]=o=>b.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value==="employees"&&e.value===2?(m(),_("div",Ll,[r("header",Gl,[r("button",{class:"btn-back",onClick:H,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",Fl," –¢–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: "+C(((te=l.value)==null?void 0:te.name)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")+" ("+C(((i=d.value)==null?void 0:i.label)||"")+") ",1),r("button",{class:"modal__close",onClick:v[11]||(v[11]=o=>b.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Hl,[re(ue,{name:"loading",mode:"out-in"},{default:oe(()=>{var o;return[y.value?(m(),_("div",Vl,[...v[21]||(v[21]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):f.value?(m(),_("div",Yl,[v[22]||(v[22]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),v[23]||(v[23]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",zl,C(f.value),1),r("button",{class:"btn btn-retry",onClick:q},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):c.value.length===0?(m(),_("div",jl,[v[24]||(v[24]=r("div",{class:"empty-state-icon"},"üìã",-1)),r("p",ql,C(a.value==="employees"?`–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${((o=d.value)==null?void 0:o.label)||""}"`:"–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é"),1)])):(m(),_("div",Zl,[re(Ke,{name:"ticket",tag:"div",class:"tickets-list"},{default:oe(()=>[(m(!0),_(ae,null,se(c.value,(T,N)=>(m(),ke(Qe,{key:T.id,ticket:T,draggable:!1,style:$e({"--ticket-index":N}),onClick:R},null,8,["ticket","style"]))),128))]),_:1})]))]}),_:1})])])):Q("",!0)]}),_:1})])])):Q("",!0)}},Jl=we(Xl,[["__scopeId","data-v-3b229bb4"]]),Kl={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true"},Ql={class:"modal"},ei={key:"level-1",class:"level-1"},ti={class:"modal__header"},ri={class:"modal__title"},ai={key:0},si={class:"modal__body"},oi={key:"loading",class:"loading-names"},ni={key:"empty",class:"modal__empty"},li={key:"list",class:"stages-list"},ii=["onClick"],ci={class:"stages-list__name"},di={class:"stages-list__count"},ui={key:0,class:"stages-list__arrow"},vi={class:"modal__footer"},ki={key:"level-2",class:"level-2"},hi={class:"modal__header"},yi={class:"modal__title"},mi={class:"modal__body"},pi={key:"loading",class:"loading-state"},fi={key:"error",class:"error-state"},gi={class:"error-message"},_i={key:"empty",class:"empty-state"},bi={class:"empty-state-message"},wi={key:"tickets",class:"tickets-list-container"},Ci={__name:"StagesModal",props:{isVisible:{type:Boolean,default:!1},weekNumber:{type:Number,default:null},weekStartUtc:{type:String,default:null},weekEndUtc:{type:String,default:null}},emits:["close"],setup(s,{emit:t}){const e=s,a=Z(1),n=Z(null),l=Z([]),d=Z(!1),c=Z(!1),y=Z(null),f=Z([]),D=j(()=>f.value.length>0&&f.value.some(u=>u.count>0));async function x(){if(!e.weekStartUtc||!e.weekEndUtc){f.value=[];return}c.value=!0,y.value=null;try{const u=await We({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeNewTicketsByStages:!0});f.value=u.data.newTicketsByStages||[]}catch(u){y.value=u.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞–¥–∏–π",console.error("[StagesModal] Error loading stages:",u),f.value=[]}finally{c.value=!1}}async function X(u,h=null){!u||u.count===0||(h&&h.currentTarget&&(h.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{h.currentTarget&&(h.currentTarget.style.transform="")},150)),n.value=u,a.value=2,await K(u.stageId))}async function K(u){var h;d.value=!0,y.value=null;try{if(!e.weekStartUtc||!e.weekEndUtc)throw new Error("–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏");const W=(h=(await We({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeNewTicketsByStages:!0,includeTickets:!0})).data.newTicketsByStages)==null?void 0:h.find($=>$.stageId===u),I=(W==null?void 0:W.tickets)||[];try{const{prepareTicketsForDisplay:$}=await He(async()=>{const{prepareTicketsForDisplay:z}=await import("./ticketListUtils-M5rAkasm.js").then(U=>U.t);return{prepareTicketsForDisplay:z}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);l.value=await $(I,null,null)}catch($){console.error("[StagesModal] Error preparing tickets:",$),l.value=I}l.value.length===0&&(y.value=null)}catch(E){y.value=E.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[StagesModal] Error loading tickets:",E),l.value=[]}finally{d.value=!1}}function B(){a.value=1,n.value=null,l.value=[],y.value=null}function A(u){const h=nt(u.id);window.open(h,"_blank")}function g(){n.value&&K(n.value.stageId)}return Te(()=>e.isVisible,u=>{u?x():(a.value=1,n.value=null,l.value=[],y.value=null,f.value=[])}),Te([()=>e.weekStartUtc,()=>e.weekEndUtc],()=>{e.isVisible&&x()}),(u,h)=>s.isVisible?(m(),_("div",Kl,[r("div",Ql,[re(ue,{name:"level",mode:"out-in"},{default:oe(()=>{var E;return[a.value===1?(m(),_("div",ei,[r("header",ti,[r("h3",ri,[h[3]||(h[3]=ve(" –ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),s.weekNumber?(m(),_("span",ai," ¬∑ –ù–µ–¥–µ–ª—è "+C(s.weekNumber),1)):Q("",!0)]),r("button",{class:"modal__close",onClick:h[0]||(h[0]=W=>u.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",si,[re(ue,{name:"loading",mode:"out-in"},{default:oe(()=>[c.value?(m(),_("div",oi,[...h[4]||(h[4]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞–¥–∏–π...",-1)])])):D.value?(m(),_("ul",li,[(m(!0),_(ae,null,se(f.value,W=>(m(),_("li",{key:W.stageId,class:ne(["stages-list__item",{"stages-list__item--clickable":W.count>0}]),style:$e({"--stage-color":W.color}),onClick:I=>X(W,I),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å—Ç–∞–¥–∏–∏"},[r("span",{class:"stages-list__color",style:$e({backgroundColor:W.color})},null,4),r("span",ci,C(W.stageName),1),r("span",di,C(W.count)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),W.count>0?(m(),_("span",ui,"‚Üí")):Q("",!0)],14,ii))),128))])):(m(),_("p",ni," –ù–µ—Ç –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é "))]),_:1})]),r("footer",vi,[r("button",{class:"btn",onClick:h[1]||(h[1]=W=>u.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value===2?(m(),_("div",ki,[r("header",hi,[r("button",{class:"btn-back",onClick:B,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",yi," –¢–∏–∫–µ—Ç—ã —Å—Ç–∞–¥–∏–∏: "+C(((E=n.value)==null?void 0:E.stageName)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:h[2]||(h[2]=W=>u.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",mi,[re(ue,{name:"loading",mode:"out-in"},{default:oe(()=>{var W;return[d.value?(m(),_("div",pi,[...h[5]||(h[5]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):y.value?(m(),_("div",fi,[h[6]||(h[6]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),h[7]||(h[7]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",gi,C(y.value),1),r("button",{class:"btn btn-retry",onClick:g},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):l.value.length===0?(m(),_("div",_i,[h[8]||(h[8]=r("div",{class:"empty-state-icon"},"üìã",-1)),r("p",bi," –ù–∞ —Å—Ç–∞–¥–∏–∏ ¬´"+C((W=n.value)==null?void 0:W.stageName)+"¬ª –Ω–µ—Ç –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é ",1)])):(m(),_("div",wi,[re(Ke,{name:"ticket",tag:"div",class:"tickets-list"},{default:oe(()=>[(m(!0),_(ae,null,se(l.value,(I,$)=>(m(),ke(Qe,{key:I.id,ticket:I,draggable:!1,style:$e({"--ticket-index":$}),onClick:A},null,8,["ticket","style"]))),128))]),_:1})]))]}),_:1})])])):Q("",!0)]}),_:1})])])):Q("",!0)}},Ti=we(Ci,[["__scopeId","data-v-4af0cfce"]]),$i={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true"},Wi={class:"modal"},Ai={key:"level-1",class:"level-1"},Di={class:"modal__header"},Ei={class:"modal__title"},Bi={key:0},Ni={class:"modal__body"},Ui={key:"loading",class:"loading-names"},Si={key:"empty",class:"modal__empty"},Ii={key:"list",class:"duration-list"},Mi=["onClick"],Oi={class:"duration-list__name"},Ri={class:"duration-list__count"},Pi={key:0,class:"duration-list__arrow"},xi={class:"modal__footer"},Li={key:"level-2",class:"level-2"},Gi={class:"modal__header"},Fi={class:"modal__title"},Hi={class:"modal__body"},Vi={key:"loading",class:"loading-state"},Yi={key:"error",class:"error-state"},zi={class:"error-message"},ji={key:"empty",class:"empty-state"},qi={class:"empty-state-message"},Zi={key:"tickets",class:"tickets-list-container"},Xi={__name:"CarryoverDurationModal",props:{isVisible:{type:Boolean,default:!1},weekNumber:{type:Number,default:null},weekStartUtc:{type:String,default:null},weekEndUtc:{type:String,default:null}},emits:["close"],setup(s,{emit:t}){const e=s,a=Z(1),n=Z(null),l=Z([]),d=Z(!1),c=Z(!1),y=Z(null),f=Z([]),D=j(()=>f.value.length>0&&f.value.some(u=>u.count>0));async function x(){if(!e.weekStartUtc||!e.weekEndUtc){f.value=[];return}c.value=!0,y.value=null;try{const u=await We({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!0});f.value=u.data.carryoverTicketsByDuration||[]}catch(u){y.value=u.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π",console.error("[CarryoverDurationModal] Error loading categories:",u),f.value=[]}finally{c.value=!1}}async function X(u,h=null){!u||u.count===0||(h&&h.currentTarget&&(h.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{h.currentTarget&&(h.currentTarget.style.transform="")},150)),n.value=u,a.value=2,await K(u.durationCategory))}async function K(u){var h;d.value=!0,y.value=null;try{if(!e.weekStartUtc||!e.weekEndUtc)throw new Error("–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏");const W=(h=(await We({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!0,includeTickets:!0})).data.carryoverTicketsByDuration)==null?void 0:h.find($=>$.durationCategory===u),I=(W==null?void 0:W.tickets)||[];try{const{prepareTicketsForDisplay:$}=await He(async()=>{const{prepareTicketsForDisplay:z}=await import("./ticketListUtils-M5rAkasm.js").then(U=>U.t);return{prepareTicketsForDisplay:z}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);l.value=await $(I,null,null)}catch($){console.error("[CarryoverDurationModal] Error preparing tickets:",$),l.value=I}l.value.length===0&&(y.value=null)}catch(E){y.value=E.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[CarryoverDurationModal] Error loading tickets:",E),l.value=[]}finally{d.value=!1}}function B(){a.value=1,n.value=null,l.value=[],y.value=null}function A(u){const h=nt(u.id);window.open(h,"_blank")}function g(){n.value&&K(n.value.durationCategory)}return Te(()=>e.isVisible,u=>{u?x():(a.value=1,n.value=null,l.value=[],y.value=null,f.value=[])}),Te([()=>e.weekStartUtc,()=>e.weekEndUtc],()=>{e.isVisible&&x()}),(u,h)=>s.isVisible?(m(),_("div",$i,[r("div",Wi,[re(ue,{name:"level",mode:"out-in"},{default:oe(()=>{var E;return[a.value===1?(m(),_("div",Ai,[r("header",Di,[r("h3",Ei,[h[3]||(h[3]=ve(" –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã –ø–æ —Å—Ä–æ–∫–∞–º",-1)),s.weekNumber?(m(),_("span",Bi," ¬∑ –ù–µ–¥–µ–ª—è "+C(s.weekNumber),1)):Q("",!0)]),r("button",{class:"modal__close",onClick:h[0]||(h[0]=W=>u.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Ni,[re(ue,{name:"loading",mode:"out-in"},{default:oe(()=>[c.value?(m(),_("div",Ui,[...h[4]||(h[4]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...",-1)])])):D.value?(m(),_("ul",Ii,[(m(!0),_(ae,null,se(f.value,W=>(m(),_("li",{key:W.durationCategory,class:ne(["duration-list__item",{"duration-list__item--clickable":W.count>0}]),style:$e({"--duration-color":W.color}),onClick:I=>X(W,I),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"},[r("span",{class:"duration-list__color",style:$e({backgroundColor:W.color})},null,4),r("span",Oi,C(W.durationLabel),1),r("span",Ri,C(W.count)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),W.count>0?(m(),_("span",Pi,"‚Üí")):Q("",!0)],14,Mi))),128))])):(m(),_("p",Si," –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é "))]),_:1})]),r("footer",xi,[r("button",{class:"btn",onClick:h[1]||(h[1]=W=>u.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value===2?(m(),_("div",Li,[r("header",Gi,[r("button",{class:"btn-back",onClick:B,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",Fi," –¢–∏–∫–µ—Ç—ã: "+C(((E=n.value)==null?void 0:E.durationLabel)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:h[2]||(h[2]=W=>u.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Hi,[re(ue,{name:"loading",mode:"out-in"},{default:oe(()=>{var W;return[d.value?(m(),_("div",Vi,[...h[5]||(h[5]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):y.value?(m(),_("div",Yi,[h[6]||(h[6]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),h[7]||(h[7]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",zi,C(y.value),1),r("button",{class:"btn btn-retry",onClick:g},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):l.value.length===0?(m(),_("div",ji,[h[8]||(h[8]=r("div",{class:"empty-state-icon"},"üìã",-1)),r("p",qi," –í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ¬´"+C((W=n.value)==null?void 0:W.durationLabel)+"¬ª –Ω–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ ",1)])):(m(),_("div",Zi,[re(Ke,{name:"ticket",tag:"div",class:"tickets-list"},{default:oe(()=>[(m(!0),_(ae,null,se(l.value,(I,$)=>(m(),ke(Qe,{key:I.id,ticket:I,draggable:!1,style:$e({"--ticket-index":$}),onClick:A},null,8,["ticket","style"]))),128))]),_:1})]))]}),_:1})])])):Q("",!0)]}),_:1})])])):Q("",!0)}},Ji=we(Xi,[["__scopeId","data-v-c26f06c2"]]),Ki={class:"ac-dashboard"},Qi={key:"preloader",class:"chart-preloader"},ec={class:"preloader-content"},tc={class:"preloader-message"},rc={key:"content"},ac={key:1,class:"weeks-dashboard"},sc={class:"dashboard-header"},oc={class:"header-content"},nc={class:"breadcrumbs-row"},lc=["aria-label","aria-disabled","data-fallback","disabled"],ic={class:"breadcrumbs","aria-label":"–ù–∞–≤–∏–≥–∞—Ü–∏—è"},cc={class:"dashboard-layout"},dc={class:"filters-container"},uc={class:"chart-container"},vc={__name:"GraphAdmissionClosureDashboard",setup(s){const t=Dt(),e=Z(!1),a=Z(null),n=Z(null),l=Z({newTickets:0,closedTickets:0,series:{new:[0],closed:[0]},stages:[],responsible:[]}),d=Z(!1),c=Z(!1),y=Z(!1),f=Z(!0),D=Z(null),x=Z(!1),X=j(()=>typeof window>"u"?!1:window.history.length>1),K=j(()=>X.value?"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É":"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"),B={name:"dashboard-sector-1c"};function A(i){var o;if((o=i==null?void 0:i.preventDefault)==null||o.call(i),!x.value){x.value=!0;try{if(X.value){t.back();return}console.warn("GraphAdmissionClosureDashboard: fallback navigation to dashboard-sector-1c"),t.push(B)}finally{x.value=!1}}}const g=Z({stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}}),u=Z("weeks"),h=j(()=>{const i=g.value.customDateRange.startDate||g.value.customDateRange.endDate,o=g.value.employees.length===1&&g.value.employees.includes("all");return i||!o});async function E(){if(console.log("[DEBUG] loadData called"),console.log("[DEBUG] periodMode:",u.value),console.log("[DEBUG] isLoading before:",e.value),u.value!=="weeks"){console.log("[DEBUG] loadData: periodMode is not weeks, returning and resetting isLoading"),e.value=!1;return}console.log("[DEBUG] Setting isLoading to true"),e.value=!0,a.value=null;const i=new Promise(o=>setTimeout(o,300));try{console.log("[DEBUG] Starting API call");const o=te(),T=o.weekStartUtc,N=o.weekEndUtc;console.log("[DEBUG] Week bounds:",{weekStartUtc:T,weekEndUtc:N});const[G,S]=await Promise.all([i,We({product:"1C",periodMode:"weeks",weekStartUtc:T,weekEndUtc:N,includeTickets:!0})]);console.log("[DEBUG] API call successful, result:",S);const{meta:Y,data:ee,carryoverDebug:p}=S;n.value=Y,l.value=ee,console.log("[DEBUG] Data set, meta:",Y,"data keys:",Object.keys(ee)),p&&(console.log("[CARRYOVER-DEBUG] ========================================"),console.log("[CARRYOVER-DEBUG] Total:",p.total),console.log("[CARRYOVER-DEBUG] ThisWeek:",p.thisWeek),console.log("[CARRYOVER-DEBUG] PreviousWeek:",p.previousWeek),console.log("[CARRYOVER-DEBUG] Older:",p.older),console.log("[CARRYOVER-DEBUG] Sum:",p.sum,"(expected:",p.total,")"),console.log("[CARRYOVER-DEBUG] Series:",p.series),console.log("[CARRYOVER-DEBUG] CurrentWeekData:",p.currentWeekData),console.log("[CARRYOVER-DEBUG] WeeksData:",p.weeksData),console.log("[CARRYOVER-DEBUG] Full object:",p),console.log("[CARRYOVER-DEBUG] ========================================"))}catch(o){console.error("[DEBUG] API call failed:",o),a.value=o instanceof Error?o:new Error("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"),console.error("[GraphAdmissionClosureDashboard] loadData error:",o)}finally{console.log("[DEBUG] Finally block: setting isLoading to false"),e.value=!1,console.log("[DEBUG] isLoading after:",e.value)}}function W(i){g.value.stages=i}function I(i){g.value.employees=i}function $(i){g.value.dateRange=i}function z(i){g.value.customDateRange=i}function U(i){if(!["weeks","months"].includes(i)){console.warn("[GraphAdmissionClosureDashboard] Invalid periodMode:",i);return}i!==u.value&&(u.value=i,E())}function O(i){const{mode:o}=i.detail;["weeks","months"].includes(o)&&U(o)}function F(){g.value={stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}},H()}function H(){E()}function R(i){["weeks","months"].includes(i)&&(u.value=i)}function q(){console.log("[DEBUG] handleCloseModal called"),console.log("[DEBUG] showPeriodModeInfo before:",f.value),console.log("[DEBUG] isLoading before:",e.value),console.log("[DEBUG] periodMode:",u.value),f.value=!1,e.value=!0,console.log("[DEBUG] showPeriodModeInfo after:",f.value),console.log("[DEBUG] isLoading after:",e.value),bt(()=>{console.log("[DEBUG] handleCloseModal: calling handleStartLoading in nextTick"),b()})}function b(){console.log("[DEBUG] handleStartLoading called"),console.log("[DEBUG] periodMode before check:",u.value),console.log("[DEBUG] showPeriodModeInfo:",f.value),console.log("[DEBUG] isLoading:",e.value),(!u.value||!["weeks","months"].includes(u.value))&&(console.warn('[GraphAdmissionClosureDashboard] Period mode not set, using default "weeks"'),u.value="weeks"),console.log("[GraphAdmissionClosureDashboard] Starting loading, periodMode:",u.value),bt(()=>{console.log("[DEBUG] nextTick callback, periodMode:",u.value),console.log("[DEBUG] isLoading in nextTick:",e.value),u.value==="weeks"?(console.log("[GraphAdmissionClosureDashboard] Loading data for weeks mode"),E()):u.value==="months"&&(console.log("[GraphAdmissionClosureDashboard] Months mode - data will be loaded by GraphAdmissionClosureMonthsDashboard"),e.value=!1,console.log("[DEBUG] Reset parent isLoading to false for months mode"))})}function v(i=null){var o,T,N;i?D.value=i:D.value={weekNumber:((o=n.value)==null?void 0:o.weekNumber)||null,weekStartUtc:((T=n.value)==null?void 0:T.weekStartUtc)||null,weekEndUtc:((N=n.value)==null?void 0:N.weekEndUtc)||null},c.value=!0}function P(i=null){var o,T,N;i?D.value=i:D.value={weekNumber:((o=n.value)==null?void 0:o.weekNumber)||null,weekStartUtc:((T=n.value)==null?void 0:T.weekStartUtc)||null,weekEndUtc:((N=n.value)==null?void 0:N.weekEndUtc)||null},d.value=!0}function V(i=null){var o,T,N;i?D.value=i:D.value={weekNumber:((o=n.value)==null?void 0:o.weekNumber)||null,weekStartUtc:((T=n.value)==null?void 0:T.weekStartUtc)||null,weekEndUtc:((N=n.value)==null?void 0:N.weekEndUtc)||null},y.value=!0}ot(()=>{try{const i="graph-admission-closure-period-mode-info-shown";localStorage.getItem(i)&&localStorage.removeItem(i);const o="graph-admission-closure-period-mode";localStorage.getItem(o)&&localStorage.removeItem(o)}catch(i){console.warn("[GraphAdmissionClosureDashboard] Failed to clean localStorage:",i)}window.addEventListener("period-mode-change",O)}),Wt(()=>{window.removeEventListener("period-mode-change",O)});function te(){const i=new Date,o=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())),T=o.getUTCDay(),N=o.getUTCDate()-T+(T===0?-6:1),G=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),N,0,0,0)),S=new Date(G);return S.setUTCDate(S.getUTCDate()+6),S.setUTCHours(23,59,59,999),{weekStartUtc:G.toISOString(),weekEndUtc:S.toISOString()}}return(i,o)=>{var N,G,S,Y,ee,p,k,L,M,J,ce,he,ye,me,pe,fe,ge,_e;const T=Et("router-link");return m(),_("div",Ki,[re(ue,{name:"fade",mode:"out-in"},{default:oe(()=>[e.value?(m(),_("div",Qi,[r("div",ec,[o[3]||(o[3]=r("div",{class:"preloader-spinner"},[r("div",{class:"spinner-ring"}),r("div",{class:"spinner-ring"}),r("div",{class:"spinner-ring"})],-1)),o[4]||(o[4]=r("h3",{class:"preloader-title"},"–ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞",-1)),r("p",tc," –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ "+C(u.value==="weeks"?"4 –Ω–µ–¥–µ–ª–∏":"3 –º–µ—Å—è—Ü–∞")+"... ",1),o[5]||(o[5]=r("div",{class:"preloader-dots"},[r("span",{class:"dot"}),r("span",{class:"dot"}),r("span",{class:"dot"})],-1))])])):!f.value&&!e.value?(m(),_("div",rc,[u.value==="months"?(m(),ke(Wn,{key:0})):(m(),_("div",ac,[r("div",sc,[r("div",oc,[r("div",nc,[r("button",{class:"btn-back-link",type:"button",onClick:A,"aria-label":K.value,"aria-disabled":!X.value,"data-fallback":!X.value,disabled:x.value,title:"–ù–∞–∑–∞–¥"}," ‚Üê ",8,lc),r("nav",ic,[re(T,{to:{name:"dashboard-sector-1c"},class:"breadcrumb-link"},{default:oe(()=>[...o[6]||(o[6]=[ve(" –î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–° ",-1)])]),_:1}),o[8]||(o[8]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),re(T,{to:{name:"dashboard-graph-state"},class:"breadcrumb-link"},{default:oe(()=>[...o[7]||(o[7]=[ve(" –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è ",-1)])]),_:1}),o[9]||(o[9]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),o[10]||(o[10]=r("span",{class:"breadcrumb-current"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π",-1))])]),o[11]||(o[11]=r("h1",{class:"dashboard-title"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),o[12]||(o[12]=r("p",{class:"dashboard-subtitle"}," –î–æ—Å—Ç—É–ø—ã –∏ —Ñ–∏–ª—å—Ç—Ä—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã ¬´–ì—Ä–∞—Ñ–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è¬ª, —Å–µ–ª–µ–∫—Ç–æ—Ä —ç—Ç–∞–ø–æ–≤ —Å–∫—Ä—ã—Ç. ",-1))])]),r("div",cc,[r("div",dc,[re(Nt,{stages:g.value.stages,employees:g.value.employees,dateRange:g.value.dateRange,customDateRange:g.value.customDateRange,hasActiveFilters:h.value,hideStages:!0,weekPickerMode:!1,showPeriodMode:!0,"period-mode":u.value,"onUpdate:stages":W,"onUpdate:employees":I,"onUpdate:dateRange":$,"onUpdate:customDateRange":z,"onUpdate:periodMode":U,onReset:F,onApply:H},null,8,["stages","employees","dateRange","customDateRange","hasActiveFilters","period-mode"])]),r("div",uc,[a.value?(m(),ke(Bt,{key:0,type:"error",title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",message:a.value.message},null,8,["message"])):(m(),ke(Os,{key:1,meta:n.value,data:l.value,onOpenResponsible:P,onOpenStages:v,onOpenCarryover:V},null,8,["meta","data"]))])])]))])):Q("",!0)]),_:1}),re(Jl,{"is-visible":d.value,responsible:l.value.responsible||[],"closed-tickets-created-this-week":l.value.closedTicketsCreatedThisWeek??0,"closed-tickets-created-other-week":l.value.closedTicketsCreatedOtherWeek??0,"responsible-created-this-week":l.value.responsibleCreatedThisWeek||[],"responsible-created-other-week":l.value.responsibleCreatedOtherWeek||[],"week-number":((N=D.value)==null?void 0:N.weekNumber)||((G=n.value)==null?void 0:G.weekNumber)||null,"week-start-utc":((S=D.value)==null?void 0:S.weekStartUtc)||((Y=n.value)==null?void 0:Y.weekStartUtc)||null,"week-end-utc":((ee=D.value)==null?void 0:ee.weekEndUtc)||((p=n.value)==null?void 0:p.weekEndUtc)||null,onClose:o[0]||(o[0]=be=>{d.value=!1,D.value.value=null})},null,8,["is-visible","responsible","closed-tickets-created-this-week","closed-tickets-created-other-week","responsible-created-this-week","responsible-created-other-week","week-number","week-start-utc","week-end-utc"]),re(Ti,{"is-visible":c.value,"week-number":((k=D.value)==null?void 0:k.weekNumber)||((L=n.value)==null?void 0:L.weekNumber)||null,"week-start-utc":((M=D.value)==null?void 0:M.weekStartUtc)||((J=n.value)==null?void 0:J.weekStartUtc)||null,"week-end-utc":((ce=D.value)==null?void 0:ce.weekEndUtc)||((he=n.value)==null?void 0:he.weekEndUtc)||null,onClose:o[1]||(o[1]=be=>{c.value=!1,D.value.value=null})},null,8,["is-visible","week-number","week-start-utc","week-end-utc"]),re(Ji,{"is-visible":y.value,"week-number":((ye=D.value)==null?void 0:ye.weekNumber)||((me=n.value)==null?void 0:me.weekNumber)||null,"week-start-utc":((pe=D.value)==null?void 0:pe.weekStartUtc)||((fe=n.value)==null?void 0:fe.weekStartUtc)||null,"week-end-utc":((ge=D.value)==null?void 0:ge.weekEndUtc)||((_e=n.value)==null?void 0:_e.weekEndUtc)||null,onClose:o[2]||(o[2]=be=>{y.value=!1,D.value.value=null})},null,8,["is-visible","week-number","week-start-utc","week-end-utc"]),f.value?(m(),ke(ur,{key:0,"is-visible":f.value,"current-mode":u.value,onClose:q,onSelectMode:R},null,8,["is-visible","current-mode"])):Q("",!0)])}}},gc=we(vc,[["__scopeId","data-v-de18647a"]]);export{gc as default};
