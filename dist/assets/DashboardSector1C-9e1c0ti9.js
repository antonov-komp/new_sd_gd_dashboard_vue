var M=Object.defineProperty;var G=(c,e,t)=>e in c?M(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var Y=(c,e,t)=>G(c,typeof e!="symbol"?e+"":e,t);import{_ as B,c as u,a as r,b as w,t as I,n as N,o as y,F as P,r as U,d as A,e as O,f as _,g as R,w as z,T as j,h as H,i as q,j as $}from"./main-BeV2EhLC.js";const Z={name:"TicketCard",props:{ticket:{type:Object,required:!0},draggable:{type:Boolean,default:!0}},emits:["click","drag-start","drag-end"],setup(c,{emit:e}){return{getPriorityLabel:n=>({high:"Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹",medium:"Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹",low:"ÐÐ¸Ð·ÐºÐ¸Ð¹"})[n]||n,getStatusLabel:n=>({in_progress:"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",new:"ÐÐ¾Ð²Ñ‹Ð¹",done:"Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾",pending:"ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ"})[n]||n,handleDragStart:n=>{n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("application/json",JSON.stringify(c.ticket)),n.dataTransfer.setDragImage(n.target,0,0),e("drag-start",c.ticket)},handleDragEnd:()=>{e("drag-end")}}}},V=["draggable"],x={class:"ticket-header"},F={class:"ticket-id"},W={class:"ticket-title"},J={class:"ticket-meta"},K={class:"ticket-status"},Q={key:0,class:"ticket-description"};function ee(c,e,t,s,a,d){return y(),u("div",{class:N(["ticket-card",{"priority-high":t.ticket.priority==="high","priority-medium":t.ticket.priority==="medium","priority-low":t.ticket.priority==="low"}]),draggable:t.draggable,onClick:e[0]||(e[0]=n=>c.$emit("click",t.ticket)),onDragstart:e[1]||(e[1]=(...n)=>s.handleDragStart&&s.handleDragStart(...n)),onDragend:e[2]||(e[2]=(...n)=>s.handleDragEnd&&s.handleDragEnd(...n))},[r("div",x,[e[3]||(e[3]=r("span",{class:"ticket-icon"},"ðŸŽ«",-1)),r("span",F,"#"+I(t.ticket.id),1)]),r("div",W,I(t.ticket.title),1),r("div",J,[r("span",{class:N(["ticket-priority",`priority-${t.ticket.priority}`])},I(s.getPriorityLabel(t.ticket.priority)),3),r("span",K,I(s.getStatusLabel(t.ticket.status)),1)]),t.ticket.description?(y(),u("div",Q,I(t.ticket.description),1)):w("",!0)],42,V)}const L=B(Z,[["render",ee],["__scopeId","data-v-5f8b7916"]]),te={name:"ZeroPoint",components:{TicketCard:L},props:{tickets:{type:Array,default:()=>[]},stageId:{type:String,required:!0}},emits:["ticket-dragged","ticket-assigned","ticket-clicked"],setup(c,{emit:e}){return{handleTicketDragStart:s=>{e("ticket-dragged",s)}}}},se={class:"zero-point"},ae={class:"zero-point-header"},ie={class:"tickets-count"},oe={class:"zero-point-tickets"},ne={key:0,class:"empty-state"};function re(c,e,t,s,a,d){const n=A("TicketCard");return y(),u("div",se,[r("div",ae,[e[0]||(e[0]=r("span",{class:"zero-point-icon"},"ðŸ“¥",-1)),e[1]||(e[1]=r("h3",null,"[0] ÐÑƒÐ»ÐµÐ²Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ°",-1)),r("span",ie,"("+I(t.tickets.length)+")",1)]),e[3]||(e[3]=r("div",{class:"zero-point-description"},[r("p",null,"Ð’Ñ…Ð¾Ð´ÑÑ‰Ð¸Ðµ Ñ‚Ð¸ÐºÐµÑ‚Ñ‹"),r("p",{class:"hint"},"ÐŸÐµÑ€ÐµÑ‚Ð°Ñ‰Ð¸Ñ‚Ðµ Ñ‚Ð¸ÐºÐµÑ‚ Ð½Ð° ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°")],-1)),r("div",oe,[(y(!0),u(P,null,U(t.tickets,i=>(y(),O(n,{key:i.id,ticket:i,draggable:!0,onDragStart:o=>s.handleTicketDragStart(i),onClick:o=>c.$emit("ticket-clicked",i)},null,8,["ticket","onDragStart","onClick"]))),128)),t.tickets.length===0?(y(),u("div",ne,[...e[2]||(e[2]=[r("p",null,"ÐÐµÑ‚ Ð²Ñ…Ð¾Ð´ÑÑ‰Ð¸Ñ… Ñ‚Ð¸ÐºÐµÑ‚Ð¾Ð²",-1)])])):w("",!0)])])}const ce=B(te,[["render",re],["__scopeId","data-v-417bccd2"]]),de={name:"EmployeeColumn",components:{TicketCard:L},props:{employee:{type:Object,required:!0},stageId:{type:String,required:!0}},emits:["ticket-clicked","ticket-dropped"],setup(c,{emit:e}){const t=_(!1),s=g=>{g.preventDefault(),g.dataTransfer.dropEffect="move",t.value=!0},a=g=>{const p=g.currentTarget.getBoundingClientRect(),T=g.clientX,C=g.clientY;(T<p.left||T>p.right||C<p.top||C>p.bottom)&&(t.value=!1)},d=async g=>{g.preventDefault(),t.value=!1;const p=g.dataTransfer.getData("application/json");if(p)try{const T=JSON.parse(p);n(T,c.employee.id,c.stageId)?e("ticket-dropped",T,c.employee.id):typeof BX<"u"&&BX.UI&&BX.UI.Notification&&BX.UI.Notification.Center.notify({content:"ÐÐµÐ»ÑŒÐ·Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ñ‚Ð¸ÐºÐµÑ‚ ÑÑŽÐ´Ð°",autoHideDelay:3e3})}catch(T){console.error("Error parsing ticket data:",T)}},n=(g,p,T)=>!(g.assigneeId===p&&g.stageId===T);return{isDropZoneActive:t,handleDragOver:s,handleDragLeave:a,handleDrop:d,handleTicketDragStart:g=>{},handleAddTicket:()=>{console.log("Add ticket for employee:",c.employee.id)}}}},le={class:"employee-header"},ge={class:"employee-info"},ye={class:"employee-details"},ue={class:"employee-name"},me={key:0,class:"employee-position"},pe={class:"tickets-count"},fe={class:"tickets-list"},Te={key:0,class:"empty-state"};function he(c,e,t,s,a,d){var i;const n=A("TicketCard");return y(),u("div",{class:N(["employee-column",{"drop-zone-active":s.isDropZoneActive}]),onDragover:e[1]||(e[1]=H((...o)=>s.handleDragOver&&s.handleDragOver(...o),["prevent"])),onDragleave:e[2]||(e[2]=(...o)=>s.handleDragLeave&&s.handleDragLeave(...o)),onDrop:e[3]||(e[3]=(...o)=>s.handleDrop&&s.handleDrop(...o))},[r("div",le,[r("div",ge,[e[4]||(e[4]=r("span",{class:"employee-icon"},"ðŸ‘¤",-1)),r("div",ye,[r("div",ue,I(t.employee.name),1),t.employee.position?(y(),u("div",me,I(t.employee.position),1)):w("",!0)])]),r("div",pe," ðŸ“Š Ð¢Ð¸ÐºÐµÑ‚Ð¾Ð²: "+I(((i=t.employee.tickets)==null?void 0:i.length)||0),1)]),r("div",fe,[R(j,{name:"ticket",tag:"div"},{default:z(()=>[(y(!0),u(P,null,U(t.employee.tickets,o=>(y(),O(n,{key:o.id,ticket:o,draggable:!0,onClick:g=>c.$emit("ticket-clicked",o),onDragStart:s.handleTicketDragStart},null,8,["ticket","onClick","onDragStart"]))),128))]),_:1}),!t.employee.tickets||t.employee.tickets.length===0?(y(),u("div",Te,[e[5]||(e[5]=r("p",null,"ÐÐµÑ‚ Ñ‚Ð¸ÐºÐµÑ‚Ð¾Ð²",-1)),r("button",{class:"add-ticket-btn",onClick:e[0]||(e[0]=(...o)=>s.handleAddTicket&&s.handleAddTicket(...o))}," + Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ð¸ÐºÐµÑ‚ ")])):w("",!0)])],34)}const Ie=B(de,[["render",he],["__scopeId","data-v-1b8f823d"]]),ke={name:"DashboardStage",components:{ZeroPoint:ce,EmployeeColumn:Ie},props:{stage:{type:Object,required:!0},zeroPointTickets:{type:Array,default:()=>[]}},emits:["ticket-moved","ticket-assigned","ticket-clicked"],setup(c,{emit:e}){const t=_(!1);return{isDragging:t,handleTicketDragged:i=>{t.value=!0},handleTicketAssigned:(i,o)=>{e("ticket-assigned",i,o)},handleTicketDropped:(i,o)=>{e("ticket-moved",i,o,c.stage.id),t.value=!1},handleTicketClicked:i=>{console.log("Ticket clicked:",i),e("ticket-clicked",i)}}}},_e={class:"stage-header"},De={class:"stage-content"},Ee={class:"employees-container"};function Se(c,e,t,s,a,d){const n=A("ZeroPoint"),i=A("EmployeeColumn");return y(),u("div",{class:"dashboard-stage",style:q({borderLeftColor:t.stage.color})},[r("div",_e,[r("h2",null,I(t.stage.name),1)]),r("div",De,[R(n,{tickets:t.zeroPointTickets,"stage-id":t.stage.id,onTicketDragged:s.handleTicketDragged,onTicketAssigned:s.handleTicketAssigned,onTicketClicked:s.handleTicketClicked},null,8,["tickets","stage-id","onTicketDragged","onTicketAssigned","onTicketClicked"]),r("div",Ee,[(y(!0),u(P,null,U(t.stage.employees,o=>(y(),O(i,{key:o.id,employee:o,"stage-id":t.stage.id,onTicketClicked:s.handleTicketClicked,onTicketDropped:s.handleTicketDropped},null,8,["employee","stage-id","onTicketClicked","onTicketDropped"]))),128))])])],4)}const ve=B(ke,[["render",Se],["__scopeId","data-v-20011aa0"]]);class S{static getApiUrl(){const e=window.location.pathname;return e.substring(0,e.lastIndexOf("/"))+"/api/bitrix24.php"}static async call(e,t={}){try{const s=await fetch(this.getApiUrl(),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({method:e,params:t})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();if(a.error)throw new Error(a.error_description||a.error);return a}catch(s){throw console.error("Bitrix24 API error:",s),s}}static async getProfile(){return this.call("profile",{})}static async getLeads(e={},t=["ID","NAME","EMAIL","PHONE"],s={ID:"DESC"}){return(await this.call("crm.lead.list",{filter:e,select:t,order:s})).result||[]}}class v{static async getSectorData(){try{const e=await this.getAllTickets();console.log("Total tickets loaded:",e.length);const t=this.extractUniqueEmployeeIds(e);console.log("Unique employee IDs:",t);const s=await this.getEmployeesByIds(t);return console.log("Loaded employees:",s.length),{stages:this.groupTicketsByStages(e,s),employees:s,zeroPointTickets:this.getZeroPointTickets(e)}}catch(e){throw console.error("Error getting sector data:",e),e}}static async getAllTickets(){const e=["DT140_12:UC_0VHWE2","DT140_12:PREPARATION","DT140_12:CLIENT"],t=[];for(const s of e){console.log(`Loading tickets for stage: ${s}`);const a=await this.getTicketsByStage(s);t.push(...a),console.log(`Loaded ${a.length} tickets for stage ${s}`)}return t}static async getTicketsByStage(e){const t=[];let s=0;const a=50;let d=!0;for(;d;)try{const i=await S.call("crm.item.list",{entityTypeId:this.ENTITY_TYPE_ID,filter:{stageId:e},select:["*"],order:{id:"DESC"},start:s,useOriginalUfNames:"Y"});let o=[];i&&i.result&&(Array.isArray(i.result)?o=i.result:i.result.items&&Array.isArray(i.result.items)?o=i.result.items:i.result.data&&Array.isArray(i.result.data)&&(o=i.result.data)),o.length>0?(t.push(...o),s+=o.length,d=o.length===a):d=!1}catch(i){console.error(`Error loading tickets batch for stage ${e} (start: ${s}):`,i),d=!1}t.length>0&&(console.log("Sample ticket structure (full JSON):",JSON.stringify(t[0],null,2)),console.log("Sample ticket keys:",Object.keys(t[0])),console.log("Sample ticket assignedById variants:",{assignedById:t[0].assignedById,assignedByIdId:t[0].assignedByIdId,ASSIGNED_BY_ID:t[0].ASSIGNED_BY_ID}));const n=t.filter(i=>{const o=i.UF_CRM_7_TYPE_PRODUCT||i.uf_crm_7_type_product||i.ufCrm7TypeProduct||i.UF_CRM_7_TYPE_PRODUCT||i.uf_crm_7_type_product;return Array.isArray(o)?o.includes(this.SECTOR_TAG):typeof o=="object"&&o!==null?o.value===this.SECTOR_TAG||o===this.SECTOR_TAG:o===this.SECTOR_TAG});return console.log(`Filtered ${n.length} tickets from ${t.length} for stage ${e} (sector tag: ${this.SECTOR_TAG})`),n}static extractUniqueEmployeeIds(e){if(!Array.isArray(e))return[];const t=new Set;return e.forEach(s=>{const a=s.assignedById||s.assignedByIdId||s.ASSIGNED_BY_ID||s.assignedById||s.assignedById&&typeof s.assignedById=="object"&&(s.assignedById.id||s.assignedById.ID)||s.assignedById&&typeof s.assignedById=="object"&&s.assignedById.value;if(a){const d=parseInt(a);d&&!isNaN(d)&&d>0&&t.add(d)}}),e.length>0&&(console.log("Sample ticket for employee extraction:",e[0]),console.log("Sample ticket assignedById variants:",{assignedById:e[0].assignedById,assignedByIdId:e[0].assignedByIdId,ASSIGNED_BY_ID:e[0].ASSIGNED_BY_ID}),console.log("Extracted employee IDs:",Array.from(t))),Array.from(t)}static async getEmployeesByIds(e){if(!Array.isArray(e)||e.length===0)return[];try{const t=await S.call("user.get",{filter:{ID:e}});let s=[];return t&&t.result&&(Array.isArray(t.result)?s=t.result:console.warn("Unexpected user.get result format:",t)),s.map(a=>({id:parseInt(a.ID||a.id||0),name:`${a.NAME||a.name||""} ${a.LAST_NAME||a.lastName||""}`.trim()||a.EMAIL||a.email||"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ð¹",position:a.WORK_POSITION||a.workPosition||"Ð¡Ð¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ðº",email:a.EMAIL||a.email||"",tickets:[]}))}catch(t){return console.error("Error getting employees by IDs:",t),[]}}static groupTicketsByStages(e,t){Array.isArray(e)||(console.warn("Tickets is not an array:",e),e=[]),Array.isArray(t)||(console.warn("Employees is not an array:",t),t=[]);const s=[{id:"formed",name:"Ð¡Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ Ð¾Ð±Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ",color:"#007bff",employees:t.map(a=>({...a,tickets:[]}))},{id:"review",name:"Ð Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€ÐµÐ½Ð¸Ðµ Ð¢Ð—",color:"#ffc107",employees:t.map(a=>({...a,tickets:[]}))},{id:"execution",name:"Ð˜ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ",color:"#28a745",employees:t.map(a=>({...a,tickets:[]}))}];return e.forEach(a=>{const d=this.mapStageId(a.stageId||a.STAGE_ID||""),n=s.find(i=>i.id===d);if(n){const i=a.assignedById||a.ASSIGNED_BY_ID||null,o=i?parseInt(i):null;if(o){let g=n.employees.find(p=>p.id===o);g||(g={id:o,name:`Ð¡Ð¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ðº #${o}`,position:"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾",email:"",tickets:[]},n.employees.push(g)),g.tickets.push(this.mapTicket(a))}}}),s}static mapStageId(e){return{"DT140_12:UC_0VHWE2":"formed","DT140_12:PREPARATION":"review","DT140_12:CLIENT":"execution"}[e]||"formed"}static mapStageIdToBitrix(e){return{formed:"DT140_12:UC_0VHWE2",review:"DT140_12:PREPARATION",execution:"DT140_12:CLIENT"}[e]||"DT140_12:UC_0VHWE2"}static mapTicket(e){const t=parseInt(e.id||e.ID||0),s=e.title||e.TITLE||"Ð‘ÐµÐ· Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ",a=e.stageId||e.STAGE_ID||"",d=e.assignedById||e.ASSIGNED_BY_ID||null,n=e.createdTime||e.CREATED_DATE||e.CREATED_TIME||"",i=e.updatedTime||e.MODIFY_DATE||e.UPDATED_TIME||"";return{id:t,title:s,priority:this.mapPriority(e.priority||e.PRIORITY),status:this.mapStatus(a),assigneeId:d?parseInt(d):null,stageId:this.mapStageId(a),createdAt:n,modifiedAt:i,amount:e.opportunity||e.OPPORTUNITY||0,currency:e.currencyId||e.CURRENCY_ID||"RUB",description:e.comments||e.COMMENTS||""}}static mapPriority(e){return{3:"high",2:"medium",1:"low"}[e]||"medium"}static mapPriorityToBitrix(e){return{high:"3",medium:"2",low:"1"}[e]||"2"}static mapStatus(e){return"in_progress"}static getZeroPointTickets(e){const t={formed:[],review:[],execution:[]};return Array.isArray(e)?(e.filter(s=>!(s.assignedById||s.ASSIGNED_BY_ID)).forEach(s=>{const a=this.mapStageId(s.stageId||s.STAGE_ID||"");t[a]&&t[a].push(this.mapTicket(s))}),t):(console.warn("Tickets is not an array in getZeroPointTickets:",e),t)}static async assignTicket(e,t,s){try{const a=this.mapStageIdToBitrix(s);return(await S.call("crm.item.update",{entityTypeId:this.ENTITY_TYPE_ID,id:e,fields:{assignedById:t,stageId:a}})).result===!0}catch(a){throw console.error("Error assigning ticket:",a),a}}static async createTicket(e){try{const t=await S.call("crm.item.add",{entityTypeId:this.ENTITY_TYPE_ID,fields:{title:e.title,assignedById:e.employeeId,stageId:this.mapStageIdToBitrix(e.stageId)}});return t.result?parseInt(t.result):0}catch(t){throw console.error("Error creating ticket:",t),t}}static async getTicket(e){try{const t=await S.call("crm.item.get",{entityTypeId:this.ENTITY_TYPE_ID,id:e});return this.mapTicket(t.result)}catch(t){throw console.error("Error getting ticket:",t),t}}static async addComment(e,t){try{return(await S.call("crm.timeline.comment.add",{fields:{entityId:e,entityType:"DYNAMIC_"+this.ENTITY_TYPE_ID,comment:t}})).result!==void 0}catch(s){throw console.error("Error adding comment:",s),s}}}Y(v,"ENTITY_TYPE_ID",140),Y(v,"SECTOR_TAG","1C");const Ae={name:"DashboardSector1C",components:{DashboardStage:ve},setup(){const c=_(!0),e=_(null),t=_([{id:"formed",name:"Ð¡Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ Ð¾Ð±Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ",color:"#007bff",employees:[]},{id:"review",name:"Ð Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€ÐµÐ½Ð¸Ðµ Ð¢Ð—",color:"#ffc107",employees:[]},{id:"execution",name:"Ð˜ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ",color:"#28a745",employees:[]}]),s=_({formed:[],review:[],execution:[]}),a=_([]),d=_(null),n=async()=>{c.value=!0,e.value=null;try{const l=await v.getSectorData();t.value=l.stages,s.value=l.zeroPointTickets,a.value=l.employees}catch(l){e.value=l.message,console.error("Error loading sector data:",l),typeof BX<"u"&&BX.UI&&BX.UI.Notification&&BX.UI.Notification.Center.notify({content:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð°ÑˆÐ±Ð¾Ñ€Ð´Ð°",autoHideDelay:5e3})}finally{c.value=!1}},i=l=>{d.value=l},o=async(l,m,k)=>{try{await v.assignTicket(l.id,m,k),g(l,m,k),typeof BX<"u"&&BX.UI&&BX.UI.Notification&&BX.UI.Notification.Center.notify({content:"Ð¢Ð¸ÐºÐµÑ‚ Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰Ñ‘Ð½",autoHideDelay:3e3})}catch(D){console.error("Error moving ticket:",D),typeof BX<"u"&&BX.UI&&BX.UI.Notification&&BX.UI.Notification.Center.notify({content:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰ÐµÐ½Ð¸Ñ Ñ‚Ð¸ÐºÐµÑ‚Ð°",autoHideDelay:5e3})}finally{d.value=null}},g=(l,m,k)=>{const D=t.value.find(f=>f.employees.some(h=>h.tickets.some(b=>b.id===l.id)));if(D){const f=D.employees.find(h=>h.tickets.some(b=>b.id===l.id));f&&(f.tickets=f.tickets.filter(h=>h.id!==l.id))}const E=t.value.find(f=>f.id===k);if(E){const f=E.employees.find(h=>h.id===m);if(f){const h={...l,assigneeId:m,stageId:k};f.tickets.push(h)}}Object.keys(s.value).forEach(f=>{s.value[f]=s.value[f].filter(h=>h.id!==l.id)})},p=async(l,m)=>{await o(l,m,l.stageId)},T=async(l,m)=>{await o(l,l.assigneeId,m)},C=async l=>{try{const m=await v.createTicket(l);await n(),typeof BX<"u"&&BX.UI&&BX.UI.Notification&&BX.UI.Notification.Center.notify({content:"Ð¢Ð¸ÐºÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð½",autoHideDelay:3e3})}catch(m){console.error("Error creating ticket:",m),typeof BX<"u"&&BX.UI&&BX.UI.Notification&&BX.UI.Notification.Center.notify({content:"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ñ‚Ð¸ÐºÐµÑ‚Ð°",autoHideDelay:5e3})}},X=(l,m)=>{const k=t.value.find(E=>E.id===m);if(!k)return[];const D=k.employees.find(E=>E.id===l);return D?D.tickets||[]:[]};return $(()=>{n()}),{isLoading:c,error:e,stages:t,zeroPointTickets:s,employees:a,draggedTicket:d,loadSectorData:n,handleTicketDragStart:i,handleTicketDrop:o,assignTicketToEmployee:p,moveTicketToStage:T,createTicket:C,getEmployeeTickets:X}}},Be={key:0,class:"loading-state"},Ce={key:1,class:"error-state"},we={key:2,class:"dashboard-content"},Ne={class:"stages-container"};function Pe(c,e,t,s,a,d){const n=A("DashboardStage");return y(),u("div",{class:N(["dashboard-sector-1c",{"is-dragging":s.draggedTicket}])},[e[1]||(e[1]=r("div",{class:"dashboard-header"},[r("h1",null,"Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´ - Ð¡ÐµÐºÑ‚Ð¾Ñ€ 1Ð¡")],-1)),s.isLoading?(y(),u("div",Be,[...e[0]||(e[0]=[r("p",null,"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…...",-1)])])):s.error?(y(),u("div",Ce,[r("p",null,"ÐžÑˆÐ¸Ð±ÐºÐ°: "+I(s.error),1)])):(y(),u("div",we,[r("div",Ne,[(y(!0),u(P,null,U(s.stages,i=>(y(),O(n,{key:i.id,stage:i,"zero-point-tickets":s.zeroPointTickets[i.id]||[],onTicketMoved:s.handleTicketDrop,onTicketAssigned:s.assignTicketToEmployee},null,8,["stage","zero-point-tickets","onTicketMoved","onTicketAssigned"]))),128))])]))],2)}const be=B(Ae,[["render",Pe],["__scopeId","data-v-b6ce8859"]]);export{be as default};
