const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ticketListUtils-C7v68cJO.js","assets/priority-config-C2fG-d-C.js","assets/main-B5cssHjJ.js","assets/main-hkNOQW78.css","assets/priority-config-Bxxce_5E.css","assets/ticket-mapper-C5RJSqml.js"])))=>i.map(i=>d[i]);
var ht=Object.defineProperty;var vt=(a,t,e)=>t in a?ht(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var We=(a,t,e)=>vt(a,typeof t!="symbol"?t+"":t,e);import{_ as ae,g as B,G as oe,m as Se,H as Je,f as se,o as f,j as L,k as Z,a as b,d as H,b as r,y as te,n as K,B as ee,I as kt,c as P,J as U,K as Ke,t as M,F as q,e as X,L as $e,M as yt,N as _e,O as J,P as mt,Q as Qe,R as me,S as ft,U as pt,V as gt,W as _t,X as bt,Y as wt,Z as Tt,$ as Ct,x as $t,l as ne,z as et,r as tt,a0 as st,T as De,a1 as fe,a2 as je}from"./main-B5cssHjJ.js";import{F as at}from"./FiltersPanel-BbmqCHBj.js";import{L as ue,D as Dt,B as Et}from"./index-HBxQaWOg.js";import{B as ce,g as ze,a as Wt,b as qe,D as Mt,T as Ee,c as Be}from"./priority-config-C2fG-d-C.js";const It={key:0,class:"modal-overlay"},At={class:"modal-container",role:"dialog","aria-labelledby":"modal-title","aria-modal":"true"},St={class:"modal-body"},Bt={class:"mode-description"},Ut={__name:"PeriodModeInfoModal",props:{isVisible:{type:Boolean,required:!0},currentMode:{type:String,default:"weeks",validator:a=>["weeks","months"].includes(a)}},emits:["close","start-loading","select-mode"],setup(a,{emit:t}){const e=a,s=t,o=B(e.currentMode);function n(y){if(!["weeks","months"].includes(y)){console.warn("[PeriodModeInfoModal] Invalid mode:",y);return}o.value=y,console.log("[DEBUG Modal] handleModeSelect: mode =",y),console.log("[DEBUG Modal] Emitting select-mode event"),s("select-mode",y),console.log("[DEBUG Modal] Emitting close event"),s("close"),console.log("[DEBUG Modal] Scheduling start-loading event in 100ms"),setTimeout(()=>{console.log("[DEBUG Modal] Emitting start-loading event"),s("start-loading")},100)}function d(){console.log("[DEBUG Modal] handleClose called, selectedMode =",o.value),console.log("[DEBUG Modal] Emitting select-mode event with",o.value),s("select-mode",o.value),console.log("[DEBUG Modal] Emitting close event"),s("close")}function c(y){y.key==="Escape"&&e.isVisible&&d()}return oe(()=>e.currentMode,y=>{["weeks","months"].includes(y)&&(o.value=y)}),Se(()=>{e.isVisible&&document.addEventListener("keydown",c)}),Je(()=>{document.removeEventListener("keydown",c)}),oe(()=>e.isVisible,y=>{y?(document.addEventListener("keydown",c),o.value=e.currentMode):document.removeEventListener("keydown",c)}),(y,m)=>(f(),se(kt,{to:"body"},[L(ee,{name:"modal-fade"},{default:Z(()=>[a.isVisible?(f(),b("div",It,[r("div",At,[r("div",{class:"modal-header"},[m[2]||(m[2]=r("h2",{id:"modal-title",class:"modal-title"},[r("span",{class:"modal-icon"},"‚ÑπÔ∏è"),te(" –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è ")],-1)),r("button",{class:"modal-close-btn",onClick:d,"aria-label":"–ó–∞–∫—Ä—ã—Ç—å",type:"button"}," √ó ")]),r("div",St,[m[5]||(m[5]=r("p",{class:"modal-description"}," –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π: ",-1)),r("div",Bt,[r("button",{class:K(["mode-item mode-item--clickable",{"mode-item--selected":o.value==="weeks"}]),onClick:m[0]||(m[0]=E=>n("weeks")),type:"button"},[...m[3]||(m[3]=[r("div",{class:"mode-header"},[r("span",{class:"mode-icon"},"üìÖ"),r("h3",{class:"mode-title"},"4 –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–µ–¥–µ–ª–∏")],-1),r("p",{class:"mode-text"}," –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 –Ω–µ–¥–µ–ª–∏ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –Ω–µ–¥–µ–ª—è–º. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–∏–Ω–∞–º–∏–∫–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏—è —Ç–∏–∫–µ—Ç–æ–≤. ",-1)])],2),r("button",{class:K(["mode-item mode-item--clickable",{"mode-item--selected":o.value==="months"}]),onClick:m[1]||(m[1]=E=>n("months")),type:"button"},[...m[4]||(m[4]=[r("div",{class:"mode-header"},[r("span",{class:"mode-icon"},"üìä"),r("h3",{class:"mode-title"},"3 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –º–µ—Å—è—Ü–∞")],-1),r("p",{class:"mode-text"}," –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –Ω–µ–¥–µ–ª—è–º –≤–Ω—É—Ç—Ä–∏ –º–µ—Å—è—Ü–µ–≤. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤—ã—è–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–æ–≤. ",-1)])],2)])])])])):H("",!0)]),_:1})]))}},Nt=ae(Ut,[["__scopeId","data-v-4a42a9a6"]]),xt={class:"ac-chart"},Rt={class:"ac-chart__header"},Ot={class:"ac-chart__subtitle"},Pt={class:"ac-chart__controls"},Lt={class:"chart-type-selector"},Gt=["onClick"],Ft={class:"chart-type-icon"},Vt={class:"chart-type-label"},Ht={class:"ac-chart__summary"},Yt={class:"summary-card__value"},jt={class:"summary-card__value-main"},zt={class:"summary-card__breakdown"},qt={class:"breakdown-item breakdown-item--this-week"},Xt={class:"breakdown-item__value"},Zt={class:"breakdown-item breakdown-item--other-week"},Jt={class:"breakdown-item__value"},Kt={class:"summary-card__value-main"},Qt={class:"summary-card__breakdown"},es={class:"breakdown-item breakdown-item--this-week"},ts={class:"breakdown-item__value"},ss={class:"breakdown-item breakdown-item--other-week"},as={class:"breakdown-item__value"},rs={class:"summary-card summary-card--stages"},os={class:"summary-card__tags"},ns={key:0,class:"stage-tag stage-tag--empty"},ls={class:"ac-chart__body"},is={key:0,class:"split-charts-container"},ds={class:"chart-wrapper chart-wrapper--left"},cs={class:"chart-canvas-wrapper"},us={class:"chart-wrapper chart-wrapper--right"},hs={class:"chart-canvas-wrapper"},vs={__name:"GraphAdmissionClosureChart",props:{meta:{type:Object,default:()=>({weekNumber:null,weekStartUtc:null,weekEndUtc:null})},data:{type:Object,default:()=>({newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedOtherWeek:0,series:{new:[0],closed:[0],closedCreatedThisWeek:[0],closedCreatedOtherWeek:[0],carryover:[0],carryoverCreatedThisWeek:[0],carryoverCreatedOtherWeek:[0]},stages:[],responsible:[]})}},emits:["open-responsible","open-stages","open-carryover"],setup(a,{emit:t}){const e=a,s=t,o=[{value:"line",label:"–õ–∏–Ω–µ–π–Ω—ã–π",icon:"üìà"},{value:"bar",label:"–°—Ç–æ–ª–±—á–∞—Ç—ã–π",icon:"üìä"},{value:"doughnut",label:"–ö—Ä—É–≥–æ–≤–∞—è",icon:"üç©"}],n=B("line");P(()=>{var l;return((l=e.meta)==null?void 0:l.weekNumber)??"‚Äî"});const d=()=>{var u,T;const l=((u=e.meta)==null?void 0:u.weeks)||[];return l.length>0?l.map(A=>`–ù–µ–¥–µ–ª—è ${A.weekNumber}`):[(T=e.meta)!=null&&T.weekNumber?`–ù–µ–¥–µ–ª—è ${e.meta.weekNumber}`:"–ù–µ–¥–µ–ª—è"]};function c(l,u,T,A=.3,h=0){if(!u)return((F,Y)=>{const w=parseInt(F.slice(1,3),16),i=parseInt(F.slice(3,5),16),g=parseInt(F.slice(5,7),16);return`rgba(${w}, ${i}, ${g}, ${Y})`})(T,A);const D=(G,F)=>{const Y=parseInt(G.slice(1,3),16),w=parseInt(G.slice(3,5),16),i=parseInt(G.slice(5,7),16);return`rgba(${Y}, ${w}, ${i}, ${F})`},x=l.createLinearGradient(0,u.bottom,0,u.top);return x.addColorStop(0,D(T,A)),x.addColorStop(1,D(T,h)),x}const y=P(()=>{var D,x,G,F;const l=d(),u=Array.isArray((D=e.data.series)==null?void 0:D.new)&&e.data.series.new.length>0?e.data.series.new:[e.data.newTickets??0],T=Array.isArray((x=e.data.series)==null?void 0:x.closed)&&e.data.series.closed.length>0?e.data.series.closed:[e.data.closedTickets??0],A=Array.isArray((G=e.data.series)==null?void 0:G.closedCreatedThisWeek)&&e.data.series.closedCreatedThisWeek.length>0?e.data.series.closedCreatedThisWeek:[e.data.closedTicketsCreatedThisWeek??0],h=Array.isArray((F=e.data.series)==null?void 0:F.closedCreatedOtherWeek)&&e.data.series.closedCreatedOtherWeek.length>0?e.data.series.closedCreatedOtherWeek:[e.data.closedTicketsCreatedOtherWeek??0];return{labels:l,datasets:[{label:"–ù–æ–≤—ã–µ",data:u,backgroundColor:Y=>{const w=Y.chart,{ctx:i,chartArea:g}=w;return c(i,g,U.primary)},borderColor:U.primary,borderWidth:3,tension:.4,fill:!0,pointRadius:0,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointBackgroundColor:U.primary},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (–≤—Å–µ)",data:T,backgroundColor:Y=>{const w=Y.chart,{ctx:i,chartArea:g}=w;return c(i,g,U.success)},borderColor:U.success,borderWidth:3,tension:.4,fill:!0,pointRadius:0,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointBackgroundColor:U.success},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:A,backgroundColor:U.successLight,borderColor:U.successLight,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:0,pointHoverRadius:4,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointBackgroundColor:U.successLight},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:h,backgroundColor:U.warning,borderColor:U.warning,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:0,pointHoverRadius:4,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointBackgroundColor:U.warning}]}}),m=P(()=>{var h,D,x;const l=d(),u=Array.isArray((h=e.data.series)==null?void 0:h.carryover)&&e.data.series.carryover.length>0?e.data.series.carryover:[e.data.carryoverTickets??0],T=Array.isArray((D=e.data.series)==null?void 0:D.carryoverCreatedThisWeek)&&e.data.series.carryoverCreatedThisWeek.length>0?e.data.series.carryoverCreatedThisWeek:[e.data.carryoverTicketsCreatedThisWeek??0],A=Array.isArray((x=e.data.series)==null?void 0:x.carryoverCreatedOtherWeek)&&e.data.series.carryoverCreatedOtherWeek.length>0?e.data.series.carryoverCreatedOtherWeek:[e.data.carryoverTicketsCreatedOtherWeek??0];return{labels:l,datasets:[{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (–≤—Å–µ)",data:u,backgroundColor:G=>{const F=G.chart,{ctx:Y,chartArea:w}=F;return c(Y,w,U.carryover)},borderColor:U.carryover,borderWidth:3,tension:.4,fill:!0,pointRadius:0,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointBackgroundColor:U.carryover},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:T,backgroundColor:U.carryoverLight,borderColor:U.carryoverLight,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:0,pointHoverRadius:4,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointBackgroundColor:U.carryoverLight},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:A,backgroundColor:U.carryoverDark,borderColor:U.carryoverDark,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:0,pointHoverRadius:4,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointBackgroundColor:U.carryoverDark}]}}),E=P(()=>{var Y,w,i,g,S,O,V,W,j;const l=((Y=e.meta)==null?void 0:Y.weeks)||[],u=l.length>0?l.map(z=>`–ù–µ–¥–µ–ª—è ${z.weekNumber}`):[(w=e.meta)!=null&&w.weekNumber?`–ù–µ–¥–µ–ª—è ${e.meta.weekNumber}`:"–ù–µ–¥–µ–ª—è"],T=Array.isArray((i=e.data.series)==null?void 0:i.new)&&e.data.series.new.length>0?e.data.series.new:[e.data.newTickets??0],A=Array.isArray((g=e.data.series)==null?void 0:g.closed)&&e.data.series.closed.length>0?e.data.series.closed:[e.data.closedTickets??0],h=Array.isArray((S=e.data.series)==null?void 0:S.closedCreatedThisWeek)&&e.data.series.closedCreatedThisWeek.length>0?e.data.series.closedCreatedThisWeek:[e.data.closedTicketsCreatedThisWeek??0],D=Array.isArray((O=e.data.series)==null?void 0:O.closedCreatedOtherWeek)&&e.data.series.closedCreatedOtherWeek.length>0?e.data.series.closedCreatedOtherWeek:[e.data.closedTicketsCreatedOtherWeek??0],x=Array.isArray((V=e.data.series)==null?void 0:V.carryover)&&e.data.series.carryover.length>0?e.data.series.carryover:[e.data.carryoverTickets??0],G=Array.isArray((W=e.data.series)==null?void 0:W.carryoverCreatedThisWeek)&&e.data.series.carryoverCreatedThisWeek.length>0?e.data.series.carryoverCreatedThisWeek:[e.data.carryoverTicketsCreatedThisWeek??0],F=Array.isArray((j=e.data.series)==null?void 0:j.carryoverCreatedOtherWeek)&&e.data.series.carryoverCreatedOtherWeek.length>0?e.data.series.carryoverCreatedOtherWeek:[e.data.carryoverTicketsCreatedOtherWeek??0];return{labels:u,datasets:[{label:"–ù–æ–≤—ã–µ",data:T,backgroundColor:U.primary,borderColor:U.primary,tension:.3,fill:!1},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (–≤—Å–µ)",data:A,backgroundColor:U.success,borderColor:U.success,tension:.3,fill:!1},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:h,backgroundColor:U.successLight,borderColor:U.successLight,tension:.3,fill:!1,borderDash:[5,5]},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:D,backgroundColor:U.warning,borderColor:U.warning,tension:.3,fill:!1,borderDash:[5,5]},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (–≤—Å–µ)",data:x,backgroundColor:U.carryover,borderColor:U.carryover,tension:.3,fill:!1},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:G,backgroundColor:U.carryoverLight,borderColor:U.carryoverLight,tension:.3,fill:!1,borderDash:[5,5]},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:F,backgroundColor:U.carryoverDark,borderColor:U.carryoverDark,tension:.3,fill:!1,borderDash:[5,5]}]}}),I=P(()=>({labels:["–ù–æ–≤—ã–µ","–ó–∞–∫—Ä—ã—Ç—ã–µ","–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ"],datasets:[{data:[e.data.newTickets??0,e.data.closedTickets??0,e.data.carryoverTickets??0],backgroundColor:[U.primary,U.success,U.carryover],borderWidth:1}]})),R=P(()=>{switch(n.value){case"line":return ue;case"bar":return Et;case"doughnut":return Dt;default:return ue}}),N=P(()=>n.value==="doughnut"?I.value:E.value),$=l=>{if(!l)return"‚Äî";try{return new Date(l).toLocaleDateString("ru-RU",{day:"2-digit",month:"short"})}catch{return l}};function v(l){return l==null||isNaN(l)?"0":l>=1e3?l.toLocaleString("ru-RU"):l.toString()}function _(l){const u=l%10,T=l%100;return T>=11&&T<=14?"—Ç–∏–∫–µ—Ç–æ–≤":u===1?"—Ç–∏–∫–µ—Ç":u>=2&&u<=4?"—Ç–∏–∫–µ—Ç–∞":"—Ç–∏–∫–µ—Ç–æ–≤"}const p=P(()=>({responsive:!0,maintainAspectRatio:!1,resizeDelay:0,animation:{duration:800,easing:"easeOutQuart"},interaction:{intersect:!1,mode:"index"},plugins:{tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 0.98)",titleColor:"#111827",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,padding:16,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},displayColors:!0,boxPadding:6,usePointStyle:!0,animation:{duration:300,easing:"easeOutQuart"},callbacks:{title:l=>{var x,G,F,Y,w,i;if(!l||l.length===0)return"";const u=(x=l[0])==null?void 0:x.dataIndex,T=((G=e.meta)==null?void 0:G.weeks)||[];if(T.length>0&&u!==void 0&&T[u]){const g=T[u];return`–ù–µ–¥–µ–ª—è ${g.weekNumber} (${$(g.weekStartUtc)} ‚Äî ${$(g.weekEndUtc)})`}const A=(F=e.meta)==null?void 0:F.weekNumber,h=(Y=e.meta)==null?void 0:Y.weekStartUtc,D=(w=e.meta)==null?void 0:w.weekEndUtc;return A&&h&&D?`–ù–µ–¥–µ–ª—è ${A} (${$(h)} ‚Äî ${$(D)})`:((i=l[0])==null?void 0:i.label)||""},label:l=>{const u=l.parsed.y,T=l.dataset.label||"";if(u==null||isNaN(u))return`${T}: 0 —Ç–∏–∫–µ—Ç–æ–≤`;const A=v(u),h=_(u);return`${T}: ${A} ${h}`}}},legend:{position:"bottom",labels:{font:{size:13,weight:"500"},padding:12,boxWidth:18,boxHeight:12,usePointStyle:!0,pointStyle:"circle",generateLabels:l=>Ke.defaults.plugins.legend.labels.generateLabels(l).map((T,A)=>{const h=l.data.datasets[A],D=l.getDatasetMeta(A),x=h.borderDash&&Array.isArray(h.borderDash)&&h.borderDash.length>0||h.borderWidth===2||h.fill===!1;return D.hidden?(T.fontColor="#9ca3af",T.textDecoration="line-through",T.opacity=.5):x?T.fontColor="#6b7280":T.fontColor="#111827",T})},onClick:(l,u)=>{const T=u.datasetIndex;if(T==null){console.warn("[Legend] Invalid datasetIndex:",T);return}const A=l.chart;if(!A){console.warn("[Legend] Chart not found");return}const h=A.getDatasetMeta(T);if(!h){console.warn("[Legend] Dataset meta not found for index:",T);return}h.hidden=!h.hidden,A.update("active")},onHover:(l,u)=>{l.native&&l.native.target&&(l.native.target.style.cursor="pointer")},onLeave:(l,u)=>{l.native&&l.native.target&&(l.native.target.style.cursor="default")}}},scales:n.value==="doughnut"?{}:{y:{beginAtZero:!0,ticks:{precision:0,font:{size:14},padding:10,color:"#374151",callback:l=>l==null||isNaN(l)?"0":v(l)},title:{display:!1},grid:{color:l=>{if(!l||!l.tick||l.tick.value===void 0)return"#e5e7eb";const u=l.tick.value;return isNaN(u)||!isFinite(u)?"#e5e7eb":u===0||u%5===0?"#d1d5db":"#e5e7eb"},lineWidth:l=>{if(!l||!l.tick||l.tick.value===void 0)return 1;const u=l.tick.value;return isNaN(u)||!isFinite(u)?1:u===0||u%5===0?1.5:1}}},x:{ticks:{maxRotation:45,minRotation:45,font:{size:14},padding:10,color:"#374151"},title:{display:!1},grid:{color:"#e5e7eb",lineWidth:1}}}})),k=P(()=>{var l,u,T,A;if((l=e.data)!=null&&l.series){const h=e.data.series,D=Math.max((Array.isArray(h.new)?h.new.length:0)-1,(Array.isArray(h.closed)?h.closed.length:0)-1,(Array.isArray(h.carryover)?h.carryover.length:0)-1,-1);if(D>=0){const x={newTickets:Array.isArray(h.new)&&h.new[D]!==void 0?h.new[D]:0,closedTickets:Array.isArray(h.closed)&&h.closed[D]!==void 0?h.closed[D]:0,closedTicketsCreatedThisWeek:Array.isArray(h.closedCreatedThisWeek)&&h.closedCreatedThisWeek[D]!==void 0?h.closedCreatedThisWeek[D]:0,closedTicketsCreatedOtherWeek:Array.isArray(h.closedCreatedOtherWeek)&&h.closedCreatedOtherWeek[D]!==void 0?h.closedCreatedOtherWeek[D]:0,carryoverTickets:Array.isArray(h.carryover)&&h.carryover[D]!==void 0?h.carryover[D]:0,carryoverTicketsCreatedThisWeek:Array.isArray(h.carryoverCreatedThisWeek)&&h.carryoverCreatedThisWeek[D]!==void 0?h.carryoverCreatedThisWeek[D]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(h.carryoverCreatedOtherWeek)&&h.carryoverCreatedOtherWeek[D]!==void 0?h.carryoverCreatedOtherWeek[D]:0};if(x.newTickets>0||x.closedTickets>0||x.carryoverTickets>0)return x}}if((u=e.data)!=null&&u.currentWeek&&typeof e.data.currentWeek=="object"){const h=e.data.currentWeek;if((h.newTickets??0)>0||(h.closedTickets??0)>0||(h.carryoverTickets??0)>0)return h}if((T=e.data)!=null&&T.weeksData&&Array.isArray(e.data.weeksData)&&e.data.weeksData.length>0){const h=e.data.weeksData[e.data.weeksData.length-1];if((h.newTickets??0)>0||(h.closedTickets??0)>0||(h.carryoverTickets??0)>0)return h}if((A=e.data)!=null&&A.series){const h=e.data.series,D=Math.max((Array.isArray(h.new)?h.new.length:0)-1,(Array.isArray(h.closed)?h.closed.length:0)-1,(Array.isArray(h.carryover)?h.carryover.length:0)-1,-1);if(D>=0)return{newTickets:Array.isArray(h.new)&&h.new[D]!==void 0?h.new[D]:0,closedTickets:Array.isArray(h.closed)&&h.closed[D]!==void 0?h.closed[D]:0,closedTicketsCreatedThisWeek:Array.isArray(h.closedCreatedThisWeek)&&h.closedCreatedThisWeek[D]!==void 0?h.closedCreatedThisWeek[D]:0,closedTicketsCreatedOtherWeek:Array.isArray(h.closedCreatedOtherWeek)&&h.closedCreatedOtherWeek[D]!==void 0?h.closedCreatedOtherWeek[D]:0,carryoverTickets:Array.isArray(h.carryover)&&h.carryover[D]!==void 0?h.carryover[D]:0,carryoverTicketsCreatedThisWeek:Array.isArray(h.carryoverCreatedThisWeek)&&h.carryoverCreatedThisWeek[D]!==void 0?h.carryoverCreatedThisWeek[D]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(h.carryoverCreatedOtherWeek)&&h.carryoverCreatedOtherWeek[D]!==void 0?h.carryoverCreatedOtherWeek[D]:0}}return e.data||{}}),C=l=>{var D;const u=k.value,T=(u==null?void 0:u.newTickets)??0,A=(u==null?void 0:u.closedTickets)??0,h=(u==null?void 0:u.carryoverTickets)??0;l==="new"&&T>0?s("open-stages"):l==="closed"&&A>0?(((D=e.data)==null?void 0:D.responsible)||[]).length>0&&s("open-responsible"):l==="carryover"&&h>0&&s("open-carryover")};return(l,u)=>{var T,A,h,D,x,G,F,Y,w,i,g,S,O,V,W,j;return f(),b("div",xt,[r("header",Rt,[r("div",null,[u[3]||(u[3]=r("h2",{class:"ac-chart__title"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),r("p",Ot," –ù–µ–¥–µ–ª—è "+M(((A=(T=a.meta)==null?void 0:T.currentWeek)==null?void 0:A.weekNumber)??((h=a.meta)==null?void 0:h.weekNumber)??"‚Äî")+" ¬∑ "+M((((x=(D=a.meta)==null?void 0:D.currentWeek)==null?void 0:x.weekStartUtc)??((G=a.meta)==null?void 0:G.weekStartUtc))||"‚Äî")+" ‚Äî "+M((((Y=(F=a.meta)==null?void 0:F.currentWeek)==null?void 0:Y.weekEndUtc)??((w=a.meta)==null?void 0:w.weekEndUtc))||"‚Äî")+" (UTC) ",1)]),r("div",Pt,[r("div",Lt,[(f(),b(q,null,X(o,z=>r("button",{key:z.value,class:K(["chart-type-btn",{active:n.value===z.value}]),onClick:de=>n.value=z.value},[r("span",Ft,M(z.icon),1),r("span",Vt,M(z.label),1)],10,Gt)),64))])])]),r("section",Ht,[r("div",{class:"summary-card summary-card--new",onClick:u[0]||(u[0]=z=>C("new"))},[u[4]||(u[4]=r("div",{class:"summary-card__label"},"–ù–æ–≤—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",Yt,M(((i=k.value)==null?void 0:i.newTickets)??0),1)]),r("div",{class:"summary-card summary-card--closed-breakdown",onClick:u[1]||(u[1]=z=>C("closed"))},[u[9]||(u[9]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",jt,M(((g=k.value)==null?void 0:g.closedTickets)??0),1),r("div",zt,[r("div",qt,[u[5]||(u[5]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",Xt,M(((S=k.value)==null?void 0:S.closedTicketsCreatedThisWeek)??0),1),u[6]||(u[6]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))]),r("div",Zt,[u[7]||(u[7]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",Jt,M(((O=k.value)==null?void 0:O.closedTicketsCreatedOtherWeek)??0),1),u[8]||(u[8]=r("span",{class:"breakdown-item__label"},"–¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))])])]),r("div",{class:"summary-card summary-card--carryover-breakdown",onClick:u[2]||(u[2]=z=>C("carryover"))},[u[14]||(u[14]=r("div",{class:"summary-card__label"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ",-1)),r("div",Kt,M(((V=k.value)==null?void 0:V.carryoverTickets)??0),1),r("div",Qt,[r("div",es,[u[10]||(u[10]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",ts,M(((W=k.value)==null?void 0:W.carryoverTicketsCreatedThisWeek)??0),1),u[11]||(u[11]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–∏",-1))]),r("div",ss,[u[12]||(u[12]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",as,M(((j=k.value)==null?void 0:j.carryoverTicketsCreatedOtherWeek)??0),1),u[13]||(u[13]=r("span",{class:"breakdown-item__label"},"–ø—Ä–µ–¥—ã–¥—É—â–∏—Ö",-1))])])]),r("div",rs,[u[15]||(u[15]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),r("div",os,[(f(!0),b(q,null,X(a.data.stages||[],z=>(f(),b("span",{key:z.stageId,class:"stage-tag"},M(z.stageName||z.stageId)+" ‚Äî "+M(z.count),1))),128)),!a.data.stages||a.data.stages.length===0?(f(),b("span",ns," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):H("",!0)])])]),r("div",ls,[n.value==="line"?(f(),b("div",is,[r("div",ds,[u[16]||(u[16]=r("h3",{class:"chart-subtitle"},"–ù–æ–≤—ã–µ –∏ –ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã",-1)),r("div",cs,[L($e(ue),{data:y.value,options:p.value},null,8,["data","options"])])]),r("div",us,[u[17]||(u[17]=r("h3",{class:"chart-subtitle"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã",-1)),r("div",hs,[L($e(ue),{data:m.value,options:p.value},null,8,["data","options"])])])])):(f(),se(yt(R.value),{key:1,data:N.value,options:p.value},null,8,["data","options"]))])])}}},ks=ae(vs,[["__scopeId","data-v-b9d17a07"]]),ys={class:"summary-cards-months"},ms={class:"summary-card summary-card--new"},fs={class:"card-content"},ps={class:"card-main-value"},gs=["title"],_s={class:"card-month-breakdown"},bs={class:"month-name"},ws={class:"month-value"},Ts={key:0,class:"month-item month-item--empty"},Cs={class:"summary-card summary-card--closed"},$s={class:"card-content"},Ds={class:"card-main-value"},Es=["title"],Ws={class:"card-month-breakdown-hierarchical"},Ms={class:"month-header"},Is={class:"month-name"},As={class:"month-value"},Ss={class:"month-breakdown"},Bs={class:"breakdown-item breakdown-this-week"},Us={class:"breakdown-value"},Ns={class:"breakdown-item breakdown-other-week"},xs={class:"breakdown-value"},Rs={key:0,class:"month-item-hierarchical month-item--empty"},Os={class:"summary-card summary-card--carryover"},Ps={class:"card-content"},Ls={class:"card-main-value"},Gs=["title"],Fs={class:"card-month-breakdown"},Vs={class:"month-name"},Hs={class:"month-value"},Ys={key:0,class:"month-item month-item--empty"},js={class:"summary-card summary-card--stages"},zs={class:"card-content"},qs={class:"stages-list"},Xs={class:"stage-icon"},Zs={class:"stage-name"},Js={class:"stage-value"},Ks={key:0,class:"stage-item stage-item--empty"},Qs={__name:"SummaryCardsMonths",props:{data:{type:Object,required:!0,default:()=>({newTickets:0,newTicketsByMonth:[],closedTickets:0,closedTicketsByMonth:[],carryoverTickets:0,carryoverTicketsByMonth:[],stages:[]})}},setup(a){const t=a;function e(v){return v==null||isNaN(v)?"0":v>=1e6?(v/1e6).toFixed(1)+"M":v>=1e3?v.toLocaleString("ru-RU"):v.toString()}function s(v){return v==null||isNaN(v)?"":`${v>=0?"+":""}${v.toFixed(1)}%`}function o(v,_){if(typeof v!="number"||isNaN(v)||_==null||typeof _!="number"||isNaN(_)||_===0)return null;if(v===_)return 0;const p=(v-_)/_*100;return!isFinite(p)||isNaN(p)?null:p}const n=P(()=>{var v;return((v=t.data)==null?void 0:v.newTickets)||0}),d=P(()=>e(n.value)),c=P(()=>{var v;return((v=t.data)==null?void 0:v.newTicketsByMonth)||[]}),y=P(()=>{var v;return((v=t.data)==null?void 0:v.closedTicketsByMonth)||[]}),m=P(()=>{var v;return((v=t.data)==null?void 0:v.carryoverTicketsByMonth)||[]}),E=P(()=>{var p,k,C,l;const v=typeof((p=t.data)==null?void 0:p.newTickets)=="number"?t.data.newTickets:parseInt((k=t.data)==null?void 0:k.newTickets)||0,_=(l=(C=t.data)==null?void 0:C.previousPeriodData)==null?void 0:l.newTickets;return o(v,_)}),I=P(()=>{var p,k,C,l;const v=typeof((p=t.data)==null?void 0:p.closedTickets)=="number"?t.data.closedTickets:parseInt((k=t.data)==null?void 0:k.closedTickets)||0,_=(l=(C=t.data)==null?void 0:C.previousPeriodData)==null?void 0:l.closedTickets;return o(v,_)}),R=P(()=>{var p,k,C,l;const v=typeof((p=t.data)==null?void 0:p.carryoverTickets)=="number"?t.data.carryoverTickets:parseInt((k=t.data)==null?void 0:k.carryoverTickets)||0,_=(l=(C=t.data)==null?void 0:C.previousPeriodData)==null?void 0:l.carryoverTickets;return o(v,_)});function N(v){return{"DT140_12:SUCCESS":"stage-success","DT140_12:FAIL":"stage-fail","DT140_12:UC_0GBU8Z":"stage-other"}[v]||""}function $(v){return{"DT140_12:SUCCESS":"‚úì","DT140_12:FAIL":"‚úó","DT140_12:UC_0GBU8Z":"‚ö†"}[v]||"‚Ä¢"}return(v,_)=>(f(),b("div",ys,[r("div",ms,[_[0]||(_[0]=r("h3",{class:"card-title"},"–ù–æ–≤—ã–µ –∑–∞ –ø–µ—Ä–∏–æ–¥",-1)),r("div",fs,[r("div",ps,[te(M(d.value)+" ",1),E.value!==null?(f(),b("span",{key:0,class:K(["percentage-badge",E.value>=0?"positive":"negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞: ${s(E.value)}`},M(s(E.value)),11,gs)):H("",!0)]),r("div",_s,[(f(!0),b(q,null,X(c.value,p=>(f(),b("div",{key:`new-${p.month}`,class:"month-item"},[r("span",bs,M(p.monthName)+":",1),r("span",ws,M(e(p.count)),1)]))),128)),c.value.length===0?(f(),b("div",Ts," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):H("",!0)])])]),r("div",Cs,[_[5]||(_[5]=r("h3",{class:"card-title"},"–ó–∞–∫—Ä—ã—Ç—ã–µ –≤—Å–µ–≥–æ",-1)),r("div",$s,[r("div",Ds,[te(M(e(a.data.closedTickets||0))+" ",1),I.value!==null?(f(),b("span",{key:0,class:K(["percentage-badge",I.value>=0?"positive":"negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞: ${s(I.value)}`},M(s(I.value)),11,Es)):H("",!0)]),r("div",Ws,[(f(!0),b(q,null,X(y.value,p=>(f(),b("div",{key:`closed-${p.month}`,class:"month-item-hierarchical"},[r("div",Ms,[r("span",Is,M(p.monthName)+":",1),r("span",As,M(e(p.count||0)),1)]),r("div",Ss,[r("div",Bs,[_[1]||(_[1]=r("span",{class:"breakdown-icon"},"‚úì",-1)),_[2]||(_[2]=r("span",{class:"breakdown-label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π:",-1)),r("span",Us,M(e(p.closedCreatedThisWeek||0)),1)]),r("div",Ns,[_[3]||(_[3]=r("span",{class:"breakdown-icon"},"‚Üª",-1)),_[4]||(_[4]=r("span",{class:"breakdown-label"},"–¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π:",-1)),r("span",xs,M(e(p.closedCreatedOtherWeek||0)),1)])])]))),128)),y.value.length===0?(f(),b("div",Rs," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):H("",!0)])])]),r("div",Os,[_[6]||(_[6]=r("h3",{class:"card-title"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ –≤—Å–µ–≥–æ",-1)),r("div",Ps,[r("div",Ls,[te(M(e(a.data.carryoverTickets||0))+" ",1),R.value!==null?(f(),b("span",{key:0,class:K(["percentage-badge",R.value>=0?"positive":"negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞: ${s(R.value)}`},M(s(R.value)),11,Gs)):H("",!0)]),r("div",Fs,[(f(!0),b(q,null,X(m.value,p=>(f(),b("div",{key:`carryover-${p.month}`,class:"month-item"},[r("span",Vs,M(p.monthName)+":",1),r("span",Hs,M(e(p.count||0)),1)]))),128)),m.value.length===0?(f(),b("div",Ys," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):H("",!0)])])]),r("div",js,[_[8]||(_[8]=r("h3",{class:"card-title"},"–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),r("div",zs,[r("div",qs,[(f(!0),b(q,null,X(a.data.stages||[],p=>(f(),b("div",{key:p.stageId,class:K(["stage-item",N(p.stageId)])},[r("span",Xs,M($(p.stageId)),1),r("span",Zs,M(p.stageName||p.stageId)+":",1),r("span",Js,M(e(p.count||0)),1)],2))),128)),!a.data.stages||a.data.stages.length===0?(f(),b("div",Ks,[..._[7]||(_[7]=[r("span",{class:"stage-name"},"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö",-1)])])):H("",!0)])])])]))}},ea=ae(Qs,[["__scopeId","data-v-9afc9533"]]);/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Xe=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var a=window.screen;if(a)return(a.deviceXDPI||1)/(a.logicalXDPI||1)}return 1}(),pe={toTextLines:function(a){var t=[],e;for(a=[].concat(a);a.length;)e=a.pop(),typeof e=="string"?t.unshift.apply(t,e.split(`
`)):Array.isArray(e)?a.push.apply(a,e):me(a)||t.unshift(""+e);return t},textSize:function(a,t,e){var s=[].concat(t),o=s.length,n=a.font,d=0,c;for(a.font=e.string,c=0;c<o;++c)d=Math.max(a.measureText(s[c]).width,d);return a.font=n,{height:o*e.lineHeight,width:d}},bound:function(a,t,e){return Math.max(a,Math.min(t,e))},arrayDiff:function(a,t){var e=a.slice(),s=[],o,n,d,c;for(o=0,d=t.length;o<d;++o)c=t[o],n=e.indexOf(c),n===-1?s.push([c,1]):e.splice(n,1);for(o=0,d=e.length;o<d;++o)s.push([e[o],-1]);return s},rasterize:function(a){return Math.round(a*Xe)/Xe}};function Me(a,t){var e=t.x,s=t.y;if(e===null)return{x:0,y:-1};if(s===null)return{x:1,y:0};var o=a.x-e,n=a.y-s,d=Math.sqrt(o*o+n*n);return{x:d?o/d:0,y:d?n/d:-1}}function ta(a,t,e,s,o){switch(o){case"center":e=s=0;break;case"bottom":e=0,s=1;break;case"right":e=1,s=0;break;case"left":e=-1,s=0;break;case"top":e=0,s=-1;break;case"start":e=-e,s=-s;break;case"end":break;default:o*=Math.PI/180,e=Math.cos(o),s=Math.sin(o);break}return{x:a,y:t,vx:e,vy:s}}var sa=0,rt=1,ot=2,nt=4,lt=8;function be(a,t,e){var s=sa;return a<e.left?s|=rt:a>e.right&&(s|=ot),t<e.top?s|=lt:t>e.bottom&&(s|=nt),s}function aa(a,t){for(var e=a.x0,s=a.y0,o=a.x1,n=a.y1,d=be(e,s,t),c=be(o,n,t),y,m,E;!(!(d|c)||d&c);)y=d||c,y&lt?(m=e+(o-e)*(t.top-s)/(n-s),E=t.top):y&nt?(m=e+(o-e)*(t.bottom-s)/(n-s),E=t.bottom):y&ot?(E=s+(n-s)*(t.right-e)/(o-e),m=t.right):y&rt&&(E=s+(n-s)*(t.left-e)/(o-e),m=t.left),y===d?(e=m,s=E,d=be(e,s,t)):(o=m,n=E,c=be(o,n,t));return{x0:e,x1:o,y0:s,y1:n}}function we(a,t){var e=t.anchor,s=a,o,n;return t.clamp&&(s=aa(s,t.area)),e==="start"?(o=s.x0,n=s.y0):e==="end"?(o=s.x1,n=s.y1):(o=(s.x0+s.x1)/2,n=(s.y0+s.y1)/2),ta(o,n,a.vx,a.vy,t.align)}var Te={arc:function(a,t){var e=(a.startAngle+a.endAngle)/2,s=Math.cos(e),o=Math.sin(e),n=a.innerRadius,d=a.outerRadius;return we({x0:a.x+s*n,y0:a.y+o*n,x1:a.x+s*d,y1:a.y+o*d,vx:s,vy:o},t)},point:function(a,t){var e=Me(a,t.origin),s=e.x*a.options.radius,o=e.y*a.options.radius;return we({x0:a.x-s,y0:a.y-o,x1:a.x+s,y1:a.y+o,vx:e.x,vy:e.y},t)},bar:function(a,t){var e=Me(a,t.origin),s=a.x,o=a.y,n=0,d=0;return a.horizontal?(s=Math.min(a.x,a.base),n=Math.abs(a.base-a.x)):(o=Math.min(a.y,a.base),d=Math.abs(a.base-a.y)),we({x0:s,y0:o+d,x1:s+n,y1:o,vx:e.x,vy:e.y},t)},fallback:function(a,t){var e=Me(a,t.origin);return we({x0:a.x,y0:a.y,x1:a.x+(a.width||0),y1:a.y+(a.height||0),vx:e.x,vy:e.y},t)}},re=pe.rasterize;function ra(a){var t=a.borderWidth||0,e=a.padding,s=a.size.height,o=a.size.width,n=-o/2,d=-s/2;return{frame:{x:n-e.left-t,y:d-e.top-t,w:o+e.width+t*2,h:s+e.height+t*2},text:{x:n,y:d,w:o,h:s}}}function oa(a,t){var e=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!e)return null;if(e.xCenter!==void 0&&e.yCenter!==void 0)return{x:e.xCenter,y:e.yCenter};var s=e.getBasePixel();return a.horizontal?{x:s,y:null}:{x:null,y:s}}function na(a){return a instanceof _t?Te.arc:a instanceof bt?Te.point:a instanceof wt?Te.bar:Te.fallback}function la(a,t,e,s,o,n){var d=Math.PI/2;if(n){var c=Math.min(n,o/2,s/2),y=t+c,m=e+c,E=t+s-c,I=e+o-c;a.moveTo(t,m),y<E&&m<I?(a.arc(y,m,c,-Math.PI,-d),a.arc(E,m,c,-d,0),a.arc(E,I,c,0,d),a.arc(y,I,c,d,Math.PI)):y<E?(a.moveTo(y,e),a.arc(E,m,c,-d,d),a.arc(y,m,c,d,Math.PI+d)):m<I?(a.arc(y,m,c,-Math.PI,0),a.arc(y,I,c,0,Math.PI)):a.arc(y,m,c,-Math.PI,Math.PI),a.closePath(),a.moveTo(t,e)}else a.rect(t,e,s,o)}function ia(a,t,e){var s=e.backgroundColor,o=e.borderColor,n=e.borderWidth;!s&&(!o||!n)||(a.beginPath(),la(a,re(t.x)+n/2,re(t.y)+n/2,re(t.w)-n,re(t.h)-n,e.borderRadius),a.closePath(),s&&(a.fillStyle=s,a.fill()),o&&n&&(a.strokeStyle=o,a.lineWidth=n,a.lineJoin="miter",a.stroke()))}function da(a,t,e){var s=e.lineHeight,o=a.w,n=a.x,d=a.y+s/2;return t==="center"?n+=o/2:(t==="end"||t==="right")&&(n+=o),{h:s,w:o,x:n,y:d}}function ca(a,t,e){var s=a.shadowBlur,o=e.stroked,n=re(e.x),d=re(e.y),c=re(e.w);o&&a.strokeText(t,n,d,c),e.filled&&(s&&o&&(a.shadowBlur=0),a.fillText(t,n,d,c),s&&o&&(a.shadowBlur=s))}function ua(a,t,e,s){var o=s.textAlign,n=s.color,d=!!n,c=s.font,y=t.length,m=s.textStrokeColor,E=s.textStrokeWidth,I=m&&E,R;if(!(!y||!d&&!I))for(e=da(e,o,c),a.font=c.string,a.textAlign=o,a.textBaseline="middle",a.shadowBlur=s.textShadowBlur,a.shadowColor=s.textShadowColor,d&&(a.fillStyle=n),I&&(a.lineJoin="round",a.lineWidth=E,a.strokeStyle=m),R=0,y=t.length;R<y;++R)ca(a,t[R],{stroked:I,filled:d,w:e.w,x:e.x,y:e.y+e.h*R})}var it=function(a,t,e,s){var o=this;o._config=a,o._index=s,o._model=null,o._rects=null,o._ctx=t,o._el=e};_e(it.prototype,{_modelize:function(a,t,e,s){var o=this,n=o._index,d=ft(J([e.font,{}],s,n)),c=J([e.color,pt.color],s,n);return{align:J([e.align,"center"],s,n),anchor:J([e.anchor,"center"],s,n),area:s.chart.chartArea,backgroundColor:J([e.backgroundColor,null],s,n),borderColor:J([e.borderColor,null],s,n),borderRadius:J([e.borderRadius,0],s,n),borderWidth:J([e.borderWidth,0],s,n),clamp:J([e.clamp,!1],s,n),clip:J([e.clip,!1],s,n),color:c,display:a,font:d,lines:t,offset:J([e.offset,4],s,n),opacity:J([e.opacity,1],s,n),origin:oa(o._el,s),padding:gt(J([e.padding,4],s,n)),positioner:na(o._el),rotation:J([e.rotation,0],s,n)*(Math.PI/180),size:pe.textSize(o._ctx,t,d),textAlign:J([e.textAlign,"start"],s,n),textShadowBlur:J([e.textShadowBlur,0],s,n),textShadowColor:J([e.textShadowColor,c],s,n),textStrokeColor:J([e.textStrokeColor,c],s,n),textStrokeWidth:J([e.textStrokeWidth,0],s,n)}},update:function(a){var t=this,e=null,s=null,o=t._index,n=t._config,d,c,y,m=J([n.display,!0],a,o);m&&(d=a.dataset.data[o],c=mt(Qe(n.formatter,[d,a]),d),y=me(c)?[]:pe.toTextLines(c),y.length&&(e=t._modelize(m,y,n,a),s=ra(e))),t._model=e,t._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(a,t){var e=this,s=a.ctx,o=e._model,n=e._rects,d;this.visible()&&(s.save(),o.clip&&(d=o.area,s.beginPath(),s.rect(d.left,d.top,d.right-d.left,d.bottom-d.top),s.clip()),s.globalAlpha=pe.bound(0,o.opacity,1),s.translate(re(t.x),re(t.y)),s.rotate(o.rotation),ia(s,n.frame,o),ua(s,o.lines,n.text,o),s.restore())}});var ha=Number.MIN_SAFE_INTEGER||-9007199254740991,va=Number.MAX_SAFE_INTEGER||9007199254740991;function ye(a,t,e){var s=Math.cos(e),o=Math.sin(e),n=t.x,d=t.y;return{x:n+s*(a.x-n)-o*(a.y-d),y:d+o*(a.x-n)+s*(a.y-d)}}function Ze(a,t){var e=va,s=ha,o=t.origin,n,d,c,y,m;for(n=0;n<a.length;++n)d=a[n],c=d.x-o.x,y=d.y-o.y,m=t.vx*c+t.vy*y,e=Math.min(e,m),s=Math.max(s,m);return{min:e,max:s}}function Ce(a,t){var e=t.x-a.x,s=t.y-a.y,o=Math.sqrt(e*e+s*s);return{vx:(t.x-a.x)/o,vy:(t.y-a.y)/o,origin:a,ln:o}}var dt=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};_e(dt.prototype,{center:function(){var a=this._rect;return{x:a.x+a.w/2,y:a.y+a.h/2}},update:function(a,t,e){this._rotation=e,this._rect={x:t.x+a.x,y:t.y+a.y,w:t.w,h:t.h}},contains:function(a){var t=this,e=1,s=t._rect;return a=ye(a,t.center(),-t._rotation),!(a.x<s.x-e||a.y<s.y-e||a.x>s.x+s.w+e*2||a.y>s.y+s.h+e*2)},intersects:function(a){var t=this._points(),e=a._points(),s=[Ce(t[0],t[1]),Ce(t[0],t[3])],o,n,d;for(this._rotation!==a._rotation&&s.push(Ce(e[0],e[1]),Ce(e[0],e[3])),o=0;o<s.length;++o)if(n=Ze(t,s[o]),d=Ze(e,s[o]),n.max<d.min||d.max<n.min)return!1;return!0},_points:function(){var a=this,t=a._rect,e=a._rotation,s=a.center();return[ye({x:t.x,y:t.y},s,e),ye({x:t.x+t.w,y:t.y},s,e),ye({x:t.x+t.w,y:t.y+t.h},s,e),ye({x:t.x,y:t.y+t.h},s,e)]}});function ct(a,t,e){var s=t.positioner(a,t),o=s.vx,n=s.vy;if(!o&&!n)return{x:s.x,y:s.y};var d=e.w,c=e.h,y=t.rotation,m=Math.abs(d/2*Math.cos(y))+Math.abs(c/2*Math.sin(y)),E=Math.abs(d/2*Math.sin(y))+Math.abs(c/2*Math.cos(y)),I=1/Math.max(Math.abs(o),Math.abs(n));return m*=o*I,E*=n*I,m+=t.offset*o,E+=t.offset*n,{x:s.x+m,y:s.y+E}}function ka(a,t){var e,s,o,n;for(e=a.length-1;e>=0;--e)for(o=a[e].$layout,s=e-1;s>=0&&o._visible;--s)n=a[s].$layout,n._visible&&o._box.intersects(n._box)&&t(o,n);return a}function ya(a){var t,e,s,o,n,d,c;for(t=0,e=a.length;t<e;++t)s=a[t],o=s.$layout,o._visible&&(c=new Proxy(s._el,{get:(y,m)=>y.getProps([m],!0)[m]}),n=s.geometry(),d=ct(c,s.model(),n),o._box.update(d,n,s.rotation()));return ka(a,function(y,m){var E=y._hidable,I=m._hidable;E&&I||I?m._visible=!1:E&&(y._visible=!1)})}var ge={prepare:function(a){var t=[],e,s,o,n,d;for(e=0,o=a.length;e<o;++e)for(s=0,n=a[e].length;s<n;++s)d=a[e][s],t.push(d),d.$layout={_box:new dt,_hidable:!1,_visible:!0,_set:e,_idx:d._index};return t.sort(function(c,y){var m=c.$layout,E=y.$layout;return m._idx===E._idx?E._set-m._set:E._idx-m._idx}),this.update(t),t},update:function(a){var t=!1,e,s,o,n,d;for(e=0,s=a.length;e<s;++e)o=a[e],n=o.model(),d=o.$layout,d._hidable=n&&n.display==="auto",d._visible=o.visible(),t|=d._hidable;t&&ya(a)},lookup:function(a,t){var e,s;for(e=a.length-1;e>=0;--e)if(s=a[e].$layout,s&&s._visible&&s._box.contains(t))return a[e];return null},draw:function(a,t){var e,s,o,n,d,c;for(e=0,s=t.length;e<s;++e)o=t[e],n=o.$layout,n._visible&&(d=o.geometry(),c=ct(o._el,o.model(),d),n._box.update(c,d,o.rotation()),o.draw(a,c))}},ma=function(a){if(me(a))return null;var t=a,e,s,o;if(Tt(a))if(!me(a.label))t=a.label;else if(!me(a.r))t=a.r;else for(t="",e=Object.keys(a),o=0,s=e.length;o<s;++o)t+=(o!==0?", ":"")+e[o]+": "+a[e[o]];return""+t},fa={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:ma,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Q="$datalabels",ut="$default";function pa(a,t){var e=a.datalabels,s={},o=[],n,d;return e===!1?null:(e===!0&&(e={}),t=_e({},[t,e]),n=t.labels||{},d=Object.keys(n),delete t.labels,d.length?d.forEach(function(c){n[c]&&o.push(_e({},[t,n[c],{_key:c}]))}):o.push(t),s=o.reduce(function(c,y){return Ct(y.listeners||{},function(m,E){c[E]=c[E]||{},c[E][y._key||ut]=m}),delete y.listeners,c},{}),{labels:o,listeners:s})}function Ie(a,t,e,s){if(t){var o=e.$context,n=e.$groups,d;t[n._set]&&(d=t[n._set][n._key],d&&Qe(d,[o,s])===!0&&(a[Q]._dirty=!0,e.update(o)))}}function ga(a,t,e,s,o){var n,d;!e&&!s||(e?s?e!==s&&(d=n=!0):d=!0:n=!0,d&&Ie(a,t.leave,e,o),n&&Ie(a,t.enter,s,o))}function _a(a,t){var e=a[Q],s=e._listeners,o,n;if(!(!s.enter&&!s.leave)){if(t.type==="mousemove")n=ge.lookup(e._labels,t);else if(t.type!=="mouseout")return;o=e._hovered,e._hovered=n,ga(a,s,o,n,t)}}function ba(a,t){var e=a[Q],s=e._listeners.click,o=s&&ge.lookup(e._labels,t);o&&Ie(a,s,o,t)}var wa={id:"datalabels",defaults:fa,beforeInit:function(a){a[Q]={_actives:[]}},beforeUpdate:function(a){var t=a[Q];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(a,t,e){var s=t.index,o=a[Q],n=o._datasets[s]=[],d=a.isDatasetVisible(s),c=a.data.datasets[s],y=pa(c,e),m=t.meta.data||[],E=a.ctx,I,R,N,$,v,_,p,k;for(E.save(),I=0,N=m.length;I<N;++I)if(p=m[I],p[Q]=[],d&&p&&a.getDataVisibility(I)&&!p.skip)for(R=0,$=y.labels.length;R<$;++R)v=y.labels[R],_=v._key,k=new it(v,E,p,I),k.$groups={_set:s,_key:_||ut},k.$context={active:!1,chart:a,dataIndex:I,dataset:c,datasetIndex:s},k.update(k.$context),p[Q].push(k),n.push(k);E.restore(),_e(o._listeners,y.listeners,{merger:function(C,l,u){l[C]=l[C]||{},l[C][t.index]=u[C],o._listened=!0}})},afterUpdate:function(a){a[Q]._labels=ge.prepare(a[Q]._datasets)},afterDatasetsDraw:function(a){ge.draw(a,a[Q]._labels)},beforeEvent:function(a,t){if(a[Q]._listened){var e=t.event;switch(e.type){case"mousemove":case"mouseout":_a(a,e);break;case"click":ba(a,e);break}}},afterEvent:function(a){var t=a[Q],e=t._actives,s=t._actives=a.getActiveElements(),o=pe.arrayDiff(e,s),n,d,c,y,m,E,I;for(n=0,d=o.length;n<d;++n)if(m=o[n],m[1])for(I=m[0].element[Q]||[],c=0,y=I.length;c<y;++c)E=I[c],E.$context.active=m[1]===1,E.update(E.$context);(t._dirty||o.length)&&(ge.update(t._labels),a.render()),delete t._dirty}};const Ta={class:"line-chart-months"},Ca={class:"chart-section"},$a={class:"chart-title"},Da={key:0,class:"chart-period"},Ea={class:"chart-container"},Wa={class:"chart-summary"},Ma={class:"summary-numbers"},Ia={class:"summary-row"},Aa={class:"summary-values"},Sa={class:"summary-row"},Ba={class:"summary-values"},Ua={class:"summary-analysis"},Na={class:"chart-section"},xa={class:"chart-title"},Ra={key:0,class:"chart-period"},Oa={class:"chart-container"},Pa={class:"chart-analysis"},La={class:"analysis-content"},Ga={class:"chart-table-section"},Fa={class:"chart-table-wrapper"},Va={class:"data-table"},Ha={class:"data-row data-row--new"},Ya={class:"data-row data-row--closed"},ja={class:"data-row data-row--carryover"},za={__name:"LineChartMonths",props:{data:{type:Object,required:!0,default:()=>({newTicketsByMonth:[],closedTicketsByMonth:[],carryoverTicketsByMonth:[]})},meta:{type:Object,default:()=>({months:[]})}},setup(a){Ke.register(wa);const t=a;function e($){return $==null||isNaN($)?"0":$>=1e3?$.toLocaleString("ru-RU"):$.toString()}const s=P(()=>{var v,_,p;const $=new Set;return(v=t.data.newTicketsByMonth)==null||v.forEach(k=>{k.weeks&&Array.isArray(k.weeks)&&k.weeks.forEach(C=>{C&&C.weekNumber&&$.add(C.weekNumber)})}),(_=t.data.closedTicketsByMonth)==null||_.forEach(k=>{k.weeks&&Array.isArray(k.weeks)&&k.weeks.forEach(C=>{C&&C.weekNumber&&$.add(C.weekNumber)})}),(p=t.data.carryoverTicketsByMonth)==null||p.forEach(k=>{k.weeks&&Array.isArray(k.weeks)&&k.weeks.forEach(C=>{C&&C.weekNumber&&$.add(C.weekNumber)})}),Array.from($).sort((k,C)=>k-C)}),o=P(()=>{const $=t.data.newTicketsByMonth||[],v=$.map(k=>k.monthName||`–ú–µ—Å—è—Ü ${k.month}`),_=$.map(k=>k.count||0),p=(t.data.closedTicketsByMonth||[]).map(k=>k.count||0);return{labels:v,datasets:[{label:"–ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã",data:_,borderColor:U.primary,backgroundColor:"rgba(0, 123, 255, 0.1)",tension:.4,fill:!1,datalabels:{anchor:"end",align:"top",offset:4,color:U.primary}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã",data:p,borderColor:U.success,backgroundColor:"rgba(40, 167, 69, 0.1)",tension:.4,fill:!1,datalabels:{anchor:"start",align:"top",offset:4,color:U.success}}]}}),n=P(()=>{const $=t.data.carryoverTicketsByMonth||[],v=$.map(p=>p.monthName||`–ú–µ—Å—è—Ü ${p.month}`),_=$.map(p=>p.count||0);return{labels:v,datasets:[{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã",data:_,borderColor:U.carryover,backgroundColor:"rgba(255, 152, 0, 0.1)",tension:.4,fill:!1,datalabels:{anchor:"end",align:"top",offset:4,color:U.carryover}}]}}),d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:14,weight:"500"},padding:16,boxWidth:20,boxHeight:12}},tooltip:{enabled:!0,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},padding:12},datalabels:{anchor:"end",align:"top",formatter:($,v)=>$==null||isNaN($)?"":$.toString(),color:"#333",font:{size:12,weight:"bold"},padding:{top:4,bottom:4},display:function($){const v=$.dataset.data[$.dataIndex];return v!=null&&!isNaN(v)&&isFinite(v)},backgroundColor:"rgba(255, 255, 255, 0.8)",borderColor:"#333",borderWidth:1,borderRadius:4,padding:4}},scales:{y:{beginAtZero:!0,ticks:{precision:0,font:{size:14},padding:10},grid:{lineWidth:1.5}},x:{ticks:{maxRotation:0,minRotation:0,font:{size:14},padding:10},grid:{lineWidth:1.5}}}};function c($){if(!$||$.length===0)return null;const v=$[0],_=$[$.length-1];if(!v||!_)return null;const p=v.monthName||`–ú–µ—Å—è—Ü ${v.month}`,k=_.monthName||`–ú–µ—Å—è—Ü ${_.month}`,C=v.year||new Date().getFullYear();return`${p} ‚Äî ${k} ${C}`}const y=P(()=>{var $;return c((($=t.data)==null?void 0:$.newTicketsByMonth)||[])}),m=P(()=>{var $;return c((($=t.data)==null?void 0:$.carryoverTicketsByMonth)||[])}),E=P(()=>{var k,C;const $=((k=t.data)==null?void 0:k.newTicketsByMonth)||[],v=((C=t.data)==null?void 0:C.closedTicketsByMonth)||[];if($.length===0)return{new:"‚Äî",closed:"‚Äî"};const _=$.map(l=>`${e(l.count||0)} (${l.monthName||l.month})`).join(" ‚Üí "),p=v.map(l=>`${e(l.count||0)} (${l.monthName||l.month})`).join(" ‚Üí ");return{new:_,closed:p}}),I=P(()=>{var p,k;const $=((p=t.data)==null?void 0:p.newTicketsByMonth)||[],v=((k=t.data)==null?void 0:k.closedTicketsByMonth)||[];if($.length<2)return["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"];const _=[];if($.length>=2){const C=$[0],l=$[1],u=$[2];if(l&&C&&typeof C.count=="number"&&typeof l.count=="number")if(C.count>0){const T=(l.count-C.count)/C.count*100;if(isFinite(T)&&!isNaN(T)){const A=T>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ",h=Math.abs(T);_.push(`–ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã: ${A} –Ω–∞ ${h.toFixed(1)}% –≤ ${l.monthName||l.month}`)}}else C.count===0&&l.count>0&&_.push(`–ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã: –ø–æ—è–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ (${l.count}) –≤ ${l.monthName||l.month}`);if(u&&l&&typeof l.count=="number"&&typeof u.count=="number")if(l.count>0){const T=(u.count-l.count)/l.count*100;if(isFinite(T)&&!isNaN(T)){const A=T>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ",h=Math.abs(T);_.push(`–ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã: ${A} –Ω–∞ ${h.toFixed(1)}% –≤ ${u.monthName||u.month}`)}}else l.count===0&&u.count>0&&_.push(`–ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã: –ø–æ—è–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ (${u.count}) –≤ ${u.monthName||u.month}`)}if(v.length>=2){const C=v[0],l=v[1],u=v[2];if(l&&C&&typeof C.count=="number"&&typeof l.count=="number")if(C.count>0){const T=(l.count-C.count)/C.count*100;if(isFinite(T)&&!isNaN(T)){const A=T>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ",h=Math.abs(T);_.push(`–ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã: ${A} –Ω–∞ ${h.toFixed(1)}% –≤ ${l.monthName||l.month}`)}}else C.count===0&&l.count>0&&_.push(`–ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã: –ø–æ—è–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π (${l.count}) –≤ ${l.monthName||l.month}`);if(u&&l&&typeof l.count=="number"&&typeof u.count=="number")if(l.count>0){const T=(u.count-l.count)/l.count*100;if(isFinite(T)&&!isNaN(T)){const A=T>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ",h=Math.abs(T);_.push(`–ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã: ${A} –Ω–∞ ${h.toFixed(1)}% –≤ ${u.monthName||u.month}`)}}else l.count===0&&u.count>0&&_.push(`–ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã: –ø–æ—è–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π (${u.count}) –≤ ${u.monthName||u.month}`)}if($.length>=3&&v.length>=3){const C=$[0].count||0,l=$[$.length-1].count||0,u=v[0].count||0,T=v[v.length-1].count||0;if(C>0&&u>0){const A=(l-C)/C*100,h=(T-u)/u*100;isFinite(A)&&isFinite(h)&&_.push(`–û–±—â–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥: –Ω–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã ${A>=0?"–≤—ã—Ä–æ—Å–ª–∏":"—Å–Ω–∏–∑–∏–ª–∏—Å—å"} –Ω–∞ ${Math.abs(A).toFixed(1)}%, –∑–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã ${h>=0?"–≤—ã—Ä–æ—Å–ª–∏":"—Å–Ω–∏–∑–∏–ª–∏—Å—å"} –Ω–∞ ${Math.abs(h).toFixed(1)}%`)}}return _.length>0?_:["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"]}),R=P(()=>{var p;const $=((p=t.data)==null?void 0:p.carryoverTicketsByMonth)||[];if($.length===0)return["–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"];const v=[],_=$.filter(k=>k&&typeof k.count=="number").map(k=>`${e(k.count||0)} (${k.monthName||k.month||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"})`).join(" ‚Üí ");if(_&&v.push(`–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã: ${_}`),$.length>=2){const k=$[0],C=$[1],l=$[2];if(C&&k&&typeof k.count=="number"&&typeof C.count=="number")if(k.count>0){const u=(C.count-k.count)/k.count*100;if(isFinite(u)&&!isNaN(u)){const T=u>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ",A=Math.abs(u);v.push(`–î–∏–Ω–∞–º–∏–∫–∞: ${T} –Ω–∞ ${A.toFixed(1)}% –≤ ${C.monthName||C.month}`)}}else k.count===0&&C.count>0&&v.push(`–î–∏–Ω–∞–º–∏–∫–∞: –ø–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ (${C.count}) –≤ ${C.monthName||C.month}`);if(l&&C&&typeof C.count=="number"&&typeof l.count=="number")if(C.count>0){const u=(l.count-C.count)/C.count*100;if(isFinite(u)&&!isNaN(u)){const T=u>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ",A=Math.abs(u);v.push(`${T} –Ω–∞ ${A.toFixed(1)}% –≤ ${l.monthName||l.month}`)}}else C.count===0&&l.count>0&&v.push(`–ø–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ (${l.count}) –≤ ${l.monthName||l.month}`)}if($.length>=3){const k=$[0],C=$[$.length-1];if(k&&C&&typeof k.count=="number"&&typeof C.count=="number"){const l=k.count||0,u=C.count||0;if(l>0){const T=(u-l)/l*100;isFinite(T)&&!isNaN(T)&&(Math.abs(T)<1?v.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è: —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–µ–Ω–µ–µ 1%)"):T>5?v.push(`–¢–µ–Ω–¥–µ–Ω—Ü–∏—è: —Ä–æ—Å—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥ –Ω–∞ ${T.toFixed(1)}%`):T<-5?v.push(`–¢–µ–Ω–¥–µ–Ω—Ü–∏—è: —Å–Ω–∏–∂–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥ –Ω–∞ ${Math.abs(T).toFixed(1)}%`):v.push(`–¢–µ–Ω–¥–µ–Ω—Ü–∏—è: –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ (${T>=0?"+":""}${T.toFixed(1)}%)`))}else l===0&&u>0?v.push(`–¢–µ–Ω–¥–µ–Ω—Ü–∏—è: –ø–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–æ–Ω—Ü–µ –ø–µ—Ä–∏–æ–¥–∞ (${u})`):l>0&&u===0&&v.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è: –ø–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–æ–Ω—Ü–µ –ø–µ—Ä–∏–æ–¥–∞")}}return v.length>0?v:["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"]});function N($,v){let _=[];switch($){case"new":_=t.data.newTicketsByMonth||[];break;case"closed":_=t.data.closedTicketsByMonth||[];break;case"carryover":_=t.data.carryoverTicketsByMonth||[];break;default:return"-"}for(const p of _){if(!p.weeks||!Array.isArray(p.weeks))continue;const k=p.weeks.find(C=>C&&C.weekNumber===v);if(k){const C=k.count||0;return C>0?e(C):"-"}}return"-"}return($,v)=>(f(),b("div",Ta,[r("div",Ca,[r("h3",$a,[v[0]||(v[0]=te(" –ù–æ–≤—ã–µ –∏ –ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã ",-1)),y.value?(f(),b("span",Da,"("+M(y.value)+")",1)):H("",!0)]),r("div",Ea,[L($e(ue),{data:o.value,options:d},null,8,["data"])]),r("div",Wa,[v[3]||(v[3]=r("h4",{class:"summary-title"},"–°–≤–æ–¥–Ω—ã–π –∏—Ç–æ–≥",-1)),r("div",Ma,[r("div",Ia,[v[1]||(v[1]=r("span",{class:"summary-label"},"–ù–æ–≤—ã–µ:",-1)),r("span",Aa,M(E.value.new),1)]),r("div",Sa,[v[2]||(v[2]=r("span",{class:"summary-label"},"–ó–∞–∫—Ä—ã—Ç—ã–µ:",-1)),r("span",Ba,M(E.value.closed),1)])]),r("div",Ua,[(f(!0),b(q,null,X(I.value,(_,p)=>(f(),b("p",{key:p},M(_),1))),128))])])]),r("div",Na,[r("h3",xa,[v[4]||(v[4]=te(" –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã ",-1)),m.value?(f(),b("span",Ra,"("+M(m.value)+")",1)):H("",!0)]),r("div",Oa,[L($e(ue),{data:n.value,options:d},null,8,["data"])]),r("div",Pa,[v[5]||(v[5]=r("h4",{class:"analysis-title"},"–ê–Ω–∞–ª–∏–∑",-1)),r("div",La,[(f(!0),b(q,null,X(R.value,(_,p)=>(f(),b("p",{key:p},M(_),1))),128))])])]),r("div",Ga,[v[10]||(v[10]=r("h3",{class:"chart-title"},"–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –Ω–µ–¥–µ–ª—è–º",-1)),r("div",Fa,[r("table",Va,[r("thead",null,[r("tr",null,[v[6]||(v[6]=r("th",{class:"month-header-cell"},"–ú–µ—Å—è—Ü",-1)),(f(!0),b(q,null,X(s.value,_=>(f(),b("th",{key:`week-${_}`,class:"week-header-cell"}," –ù–µ–¥–µ–ª—è "+M(_),1))),128))])]),r("tbody",null,[r("tr",Ha,[v[7]||(v[7]=r("td",{class:"data-type-cell"},"–ù–æ–≤—ã–µ",-1)),(f(!0),b(q,null,X(s.value,_=>(f(),b("td",{key:`new-${_}`,class:"week-data-cell"},M(N("new",_)),1))),128))]),r("tr",Ya,[v[8]||(v[8]=r("td",{class:"data-type-cell"},"–ó–∞–∫—Ä—ã—Ç—ã–µ",-1)),(f(!0),b(q,null,X(s.value,_=>(f(),b("td",{key:`closed-${_}`,class:"week-data-cell"},M(N("closed",_)),1))),128))]),r("tr",ja,[v[9]||(v[9]=r("td",{class:"data-type-cell"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ",-1)),(f(!0),b(q,null,X(s.value,_=>(f(),b("td",{key:`carryover-${_}`,class:"week-data-cell"},M(N("carryover",_)),1))),128))])])])])])]))}},qa=ae(za,[["__scopeId","data-v-90fe99d8"]]),Xa={class:"months-preloader"},Za={class:"preloader-content"},Ja={class:"progress-container"},Ka={class:"progress-bar"},Qa={class:"progress-text"},er={class:"preloader-message"},tr={class:"stages-list"},sr={class:"stage-icon"},ar={class:"stage-text"},rr={__name:"MonthsModePreloader",props:{progress:{type:Number,required:!0,validator:a=>a>=0&&a<=100},currentStage:{type:String,default:""}},setup(a){const t=a,e=[{label:"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",threshold:10},{label:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –æ–∫—Ç—è–±—Ä—å...",threshold:40},{label:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –Ω–æ—è–±—Ä—å...",threshold:70},{label:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –¥–µ–∫–∞–±—Ä—å...",threshold:90},{label:"–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö...",threshold:95},{label:"–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤...",threshold:100}];function s(n){return t.progress>=e[n].threshold}function o(n){const d=e[n].threshold,c=n>0?e[n-1].threshold:0;return t.progress>=c&&t.progress<d}return(n,d)=>(f(),b("div",Xa,[r("div",Za,[d[0]||(d[0]=$t('<div class="preloader-spinner" data-v-23ab71eb><div class="spinner-ring" data-v-23ab71eb></div><div class="spinner-ring" data-v-23ab71eb></div><div class="spinner-ring" data-v-23ab71eb></div></div><h3 class="preloader-title" data-v-23ab71eb>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ 3 –º–µ—Å—è—Ü–∞</h3>',2)),r("div",Ja,[r("div",Ka,[r("div",{class:"progress-fill",style:ne({width:`${a.progress}%`})},null,4)]),r("div",Qa,M(Math.round(a.progress))+"%",1)]),r("p",er,M(a.currentStage),1),r("div",tr,[(f(),b(q,null,X(e,(c,y)=>r("div",{key:y,class:K(["stage-item",{"stage-completed":s(y),"stage-current":o(y)}])},[r("span",sr,M(s(y)?"‚úì":o(y)?"‚Üí":"‚óã"),1),r("span",ar,M(c.label),1)],2)),64))])])]))}},or=ae(rr,[["__scopeId","data-v-23ab71eb"]]),nr="/api/graph-1c-admission-closure.php";function lr(a){var s,o,n,d,c,y,m,E,I,R,N,$,v,_,p,k,C,l,u,T,A,h,D,x,G,F,Y,w,i,g,S,O,V,W,j,z,de,he,ve,ke,le,Ue,Ne,xe,Re,Oe,Pe,Le,Ge,Fe,Ve,He,Ye;if(!a)return{meta:null,data:{currentWeek:{newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedOtherWeek:0},newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,series:{new:[0],closed:[0],closedCreatedThisWeek:[0],closedCreatedOtherWeek:[0],carryover:[0],carryoverCreatedThisWeek:[0],carryoverCreatedOtherWeek:[0]},weeksData:[],stages:[],responsible:[],responsibleCreatedThisWeek:[],responsibleCreatedOtherWeek:[]}};const t=a.data||a.result||a,e=t.meta||a.meta||null;return{meta:{...e,currentWeek:(e==null?void 0:e.currentWeek)||(e?{weekNumber:e.weekNumber,weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc}:null),weeks:(e==null?void 0:e.weeks)||[]},data:{currentWeek:((s=t.data)==null?void 0:s.currentWeek)||(t.data?{newTickets:t.data.newTickets??0,closedTickets:t.data.closedTickets??0,closedTicketsCreatedThisWeek:t.data.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:t.data.closedTicketsCreatedOtherWeek??0,carryoverTickets:t.data.carryoverTickets??0,carryoverTicketsCreatedThisWeek:t.data.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:t.data.carryoverTicketsCreatedOtherWeek??0}:{newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedOtherWeek:0}),newTickets:((n=(o=t.data)==null?void 0:o.currentWeek)==null?void 0:n.newTickets)??((d=t.data)==null?void 0:d.newTickets)??t.newTickets??0,closedTickets:((y=(c=t.data)==null?void 0:c.currentWeek)==null?void 0:y.closedTickets)??((m=t.data)==null?void 0:m.closedTickets)??t.closedTickets??0,closedTicketsCreatedThisWeek:((I=(E=t.data)==null?void 0:E.currentWeek)==null?void 0:I.closedTicketsCreatedThisWeek)??((R=t.data)==null?void 0:R.closedTicketsCreatedThisWeek)??t.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:(($=(N=t.data)==null?void 0:N.currentWeek)==null?void 0:$.closedTicketsCreatedOtherWeek)??((v=t.data)==null?void 0:v.closedTicketsCreatedOtherWeek)??t.closedTicketsCreatedOtherWeek??0,carryoverTickets:((p=(_=t.data)==null?void 0:_.currentWeek)==null?void 0:p.carryoverTickets)??((k=t.data)==null?void 0:k.carryoverTickets)??t.carryoverTickets??0,carryoverTicketsCreatedThisWeek:((l=(C=t.data)==null?void 0:C.currentWeek)==null?void 0:l.carryoverTicketsCreatedThisWeek)??((u=t.data)==null?void 0:u.carryoverTicketsCreatedThisWeek)??t.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:((A=(T=t.data)==null?void 0:T.currentWeek)==null?void 0:A.carryoverTicketsCreatedOtherWeek)??((h=t.data)==null?void 0:h.carryoverTicketsCreatedOtherWeek)??t.carryoverTicketsCreatedOtherWeek??0,series:{new:((x=(D=t.data)==null?void 0:D.series)==null?void 0:x.new)??((G=t.series)==null?void 0:G.new)??[0],closed:((Y=(F=t.data)==null?void 0:F.series)==null?void 0:Y.closed)??((w=t.series)==null?void 0:w.closed)??[0],closedCreatedThisWeek:((g=(i=t.data)==null?void 0:i.series)==null?void 0:g.closedCreatedThisWeek)??((S=t.series)==null?void 0:S.closedCreatedThisWeek)??[0],closedCreatedOtherWeek:((V=(O=t.data)==null?void 0:O.series)==null?void 0:V.closedCreatedOtherWeek)??((W=t.series)==null?void 0:W.closedCreatedOtherWeek)??[0],carryover:((z=(j=t.data)==null?void 0:j.series)==null?void 0:z.carryover)??((de=t.series)==null?void 0:de.carryover)??[0],carryoverCreatedThisWeek:((ve=(he=t.data)==null?void 0:he.series)==null?void 0:ve.carryoverCreatedThisWeek)??((ke=t.series)==null?void 0:ke.carryoverCreatedThisWeek)??[0],carryoverCreatedOtherWeek:((Ue=(le=t.data)==null?void 0:le.series)==null?void 0:Ue.carryoverCreatedOtherWeek)??((Ne=t.series)==null?void 0:Ne.carryoverCreatedOtherWeek)??[0]},weeksData:((xe=t.data)==null?void 0:xe.weeksData)??t.weeksData??[],stages:((Re=t.data)==null?void 0:Re.stages)??t.stages??[],responsible:((Oe=t.data)==null?void 0:Oe.responsible)??t.responsible??[],responsibleCreatedThisWeek:((Pe=t.data)==null?void 0:Pe.responsibleCreatedThisWeek)??t.responsibleCreatedThisWeek??[],responsibleCreatedOtherWeek:((Le=t.data)==null?void 0:Le.responsibleCreatedOtherWeek)??t.responsibleCreatedOtherWeek??[],newTicketsByStages:((Ge=t.data)==null?void 0:Ge.newTicketsByStages)??t.newTicketsByStages??null,carryoverTicketsByDuration:((Fe=t.data)==null?void 0:Fe.carryoverTicketsByDuration)??t.carryoverTicketsByDuration??null,newTicketsByMonth:((Ve=t.data)==null?void 0:Ve.newTicketsByMonth)??t.newTicketsByMonth??[],closedTicketsByMonth:((He=t.data)==null?void 0:He.closedTicketsByMonth)??t.closedTicketsByMonth??[],carryoverTicketsByMonth:((Ye=t.data)==null?void 0:Ye.carryoverTicketsByMonth)??t.carryoverTicketsByMonth??[]}}}async function ie(a={}){const{endpoint:t=nr,product:e="1C",weekStartUtc:s=null,weekEndUtc:o=null,periodMode:n="weeks",useCache:d=!0,forceRefresh:c=!1,includeTickets:y=!1,includeNewTicketsByStages:m=!1,includeCarryoverTickets:E=!0,includeCarryoverTicketsByDuration:I=!1}=a,N=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({product:e,weekStartUtc:s,weekEndUtc:o,periodMode:n,useCache:d,forceRefresh:c,includeTickets:y,includeNewTicketsByStages:m,includeCarryoverTickets:E,includeCarryoverTicketsByDuration:I})});if(!N.ok)throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ (${N.status})`);const $=await N.json();if(($==null?void 0:$.success)===!1)throw new Error($.message||"–ë—ç–∫–µ–Ω–¥ –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É");return lr($)}const ir={class:"ac-dashboard-months"},dr={key:"content"},cr={class:"dashboard-header"},ur={class:"header-content"},hr={class:"breadcrumbs-row"},vr=["aria-label","aria-disabled","data-fallback","disabled"],kr={class:"breadcrumbs","aria-label":"–ù–∞–≤–∏–≥–∞—Ü–∏—è"},yr={class:"dashboard-layout"},mr={class:"filters-container"},fr={class:"chart-container"},pr={__name:"GraphAdmissionClosureMonthsDashboard",setup(a){const t=et(),e=B(!0),s=B(0),o=B("–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."),n=B(null),d=B(null),c=B({newTickets:0,closedTickets:0,carryoverTickets:0,newTicketsByMonth:[],closedTicketsByMonth:[],carryoverTicketsByMonth:[]}),y=B(!1),m=P(()=>typeof window>"u"?!1:window.history.length>1),E=P(()=>m.value?"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É":"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"),I={name:"dashboard-sector-1c"};function R(h){var D;if((D=h==null?void 0:h.preventDefault)==null||D.call(h),!y.value){y.value=!0;try{if(m.value){t.back();return}console.warn("GraphAdmissionClosureMonthsDashboard: fallback navigation to dashboard-sector-1c"),t.push(I)}finally{y.value=!1}}}const N=B({stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}}),$=P(()=>{const h=N.value.customDateRange.startDate||N.value.customDateRange.endDate,D=N.value.employees.length===1&&N.value.employees.includes("all");return h||!D});async function v(h,D,x=500){const G=s.value,F=10,Y=(h-G)/F,w=x/F;for(let i=0;i<F;i++)await new Promise(g=>setTimeout(g,w)),s.value=Math.min(G+Y*(i+1),h);s.value=h,o.value=D}async function _(){console.log("[DEBUG MonthsDashboard] loadData called"),console.log("[DEBUG MonthsDashboard] isLoading before:",e.value),e.value=!0,n.value=null,s.value=0,o.value="–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",console.log("[DEBUG MonthsDashboard] isLoading set to true");try{console.log("[DEBUG MonthsDashboard] Starting API call"),await v(10,"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",300),await v(40,"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –æ–∫—Ç—è–±—Ä—å...",800),await v(70,"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –Ω–æ—è–±—Ä—å...",800),await v(90,"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –¥–µ–∫–∞–±—Ä—å...",800),await v(95,"–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö...",400);const h=await ie({product:"1C",periodMode:"months",includeTickets:!0});await v(100,"–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤...",300),console.log("[DEBUG MonthsDashboard] API call successful, result:",h);const{meta:D,data:x}=h;d.value=D,c.value=x,console.log("[DEBUG MonthsDashboard] Data set, meta:",D,"data keys:",Object.keys(x)),await new Promise(G=>setTimeout(G,200))}catch(h){console.error("[DEBUG MonthsDashboard] API call failed:",h),n.value=h instanceof Error?h:new Error("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"),console.error("[GraphAdmissionClosureMonthsDashboard] loadData error:",h),s.value=100}finally{console.log("[DEBUG MonthsDashboard] Finally block: setting isLoading to false"),e.value=!1,console.log("[DEBUG MonthsDashboard] isLoading after:",e.value)}}function p(h){N.value.stages=h}function k(h){N.value.employees=h}function C(h){N.value.dateRange=h}function l(h){N.value.customDateRange=h}function u(){N.value={stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}},T()}function T(){_()}function A(h){if(!["weeks","months"].includes(h)){console.warn("[GraphAdmissionClosureMonthsDashboard] Invalid periodMode:",h);return}h==="weeks"&&window.dispatchEvent(new CustomEvent("period-mode-change",{detail:{mode:h}}))}return Se(()=>{console.log("[DEBUG MonthsDashboard] onMounted called"),console.log("[DEBUG MonthsDashboard] isLoading before loadData:",e.value),_()}),(h,D)=>{const x=tt("router-link");return f(),b("div",ir,[L(ee,{name:"fade",mode:"out-in"},{default:Z(()=>[e.value?(f(),se(or,{key:"preloader",progress:s.value,"current-stage":o.value},null,8,["progress","current-stage"])):(f(),b("div",dr,[r("div",cr,[r("div",ur,[r("div",hr,[r("button",{class:"btn-back-link",type:"button",onClick:R,"aria-label":E.value,"aria-disabled":!m.value,"data-fallback":!m.value,disabled:y.value,title:"–ù–∞–∑–∞–¥"}," ‚Üê ",8,vr),r("nav",kr,[L(x,{to:{name:"dashboard-sector-1c"},class:"breadcrumb-link"},{default:Z(()=>[...D[0]||(D[0]=[te(" –î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–° ",-1)])]),_:1}),D[2]||(D[2]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),L(x,{to:{name:"dashboard-graph-state"},class:"breadcrumb-link"},{default:Z(()=>[...D[1]||(D[1]=[te(" –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è ",-1)])]),_:1}),D[3]||(D[3]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),D[4]||(D[4]=r("span",{class:"breadcrumb-current"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π",-1))])]),D[5]||(D[5]=r("h1",{class:"dashboard-title"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),D[6]||(D[6]=r("p",{class:"dashboard-subtitle"}," –î–æ—Å—Ç—É–ø—ã –∏ —Ñ–∏–ª—å—Ç—Ä—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã ¬´–ì—Ä–∞—Ñ–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è¬ª, —Å–µ–ª–µ–∫—Ç–æ—Ä —ç—Ç–∞–ø–æ–≤ —Å–∫—Ä—ã—Ç. ",-1))])]),r("div",yr,[r("div",mr,[L(at,{stages:N.value.stages,employees:N.value.employees,dateRange:N.value.dateRange,customDateRange:N.value.customDateRange,hasActiveFilters:$.value,hideStages:!0,weekPickerMode:!1,showPeriodMode:!0,"period-mode":"months","onUpdate:stages":p,"onUpdate:employees":k,"onUpdate:dateRange":C,"onUpdate:customDateRange":l,"onUpdate:periodMode":A,onReset:u,onApply:T},null,8,["stages","employees","dateRange","customDateRange","hasActiveFilters"])]),r("div",fr,[n.value?(f(),se(st,{key:0,type:"error",title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",message:n.value.message},null,8,["message"])):(f(),b(q,{key:1},[L(ea,{data:c.value},null,8,["data"]),L(qa,{data:c.value,meta:d.value},null,8,["data","meta"])],64))])])]))]),_:1})])}}},gr=ae(pr,[["__scopeId","data-v-e7421cc0"]]);class Ae{static async getSectorData(){try{const t=await this.getAllTickets();console.log("Total tickets loaded:",t.length);const e=this.extractUniqueEmployeeIds(t);console.log("Unique employee IDs:",e);const s=await this.getEmployeesByIds(e);return console.log("Loaded employees:",s.length),{stages:this.groupTicketsByStages(t,s),employees:s,zeroPointTickets:this.getZeroPointTickets(t)}}catch(t){throw console.error("Error getting sector data:",t),t}}static async getAllTickets(){const t=["DT140_12:UC_0VHWE2","DT140_12:PREPARATION","DT140_12:CLIENT"],e=[];for(const s of t){console.log(`Loading tickets for stage: ${s}`);const o=await this.getTicketsByStage(s);e.push(...o),console.log(`Loaded ${o.length} tickets for stage ${s}`)}return e}static async getTicketsByStage(t){const e=[];let s=0;const o=50;let n=!0;for(;n;)try{const c=await ce.call("crm.item.list",{entityTypeId:this.ENTITY_TYPE_ID,filter:{stageId:t},select:["*"],order:{id:"DESC"},start:s,useOriginalUfNames:"Y"});let y=[];c&&c.result&&(Array.isArray(c.result)?y=c.result:c.result.items&&Array.isArray(c.result.items)?y=c.result.items:c.result.data&&Array.isArray(c.result.data)&&(y=c.result.data)),y.length>0?(e.push(...y),s+=y.length,n=y.length===o):n=!1}catch(c){console.error(`Error loading tickets batch for stage ${t} (start: ${s}):`,c),n=!1}e.length>0&&(console.log("Sample ticket structure (full JSON):",JSON.stringify(e[0],null,2)),console.log("Sample ticket keys:",Object.keys(e[0])),console.log("Sample ticket assignedById variants:",{assignedById:e[0].assignedById,assignedByIdId:e[0].assignedByIdId,ASSIGNED_BY_ID:e[0].ASSIGNED_BY_ID}));const d=e.filter(c=>{const y=c.UF_CRM_7_TYPE_PRODUCT||c.uf_crm_7_type_product||c.ufCrm7TypeProduct||c.UF_CRM_7_TYPE_PRODUCT||c.uf_crm_7_type_product;return Array.isArray(y)?y.includes(this.SECTOR_TAG):typeof y=="object"&&y!==null?y.value===this.SECTOR_TAG||y===this.SECTOR_TAG:y===this.SECTOR_TAG});return console.log(`Filtered ${d.length} tickets from ${e.length} for stage ${t} (sector tag: ${this.SECTOR_TAG})`),d}static extractUniqueEmployeeIds(t){if(!Array.isArray(t))return[];const e=new Set;return t.forEach(s=>{const o=s.assignedById||s.assignedByIdId||s.ASSIGNED_BY_ID||s.assignedById||s.assignedById&&typeof s.assignedById=="object"&&(s.assignedById.id||s.assignedById.ID)||s.assignedById&&typeof s.assignedById=="object"&&s.assignedById.value;if(o){const n=parseInt(o);n&&!isNaN(n)&&n>0&&e.add(n)}}),t.length>0&&(console.log("Sample ticket for employee extraction:",t[0]),console.log("Sample ticket assignedById variants:",{assignedById:t[0].assignedById,assignedByIdId:t[0].assignedByIdId,ASSIGNED_BY_ID:t[0].ASSIGNED_BY_ID}),console.log("Extracted employee IDs:",Array.from(e))),Array.from(e)}static async getEmployeesByIds(t){if(!Array.isArray(t)||t.length===0)return[];try{const e=await ce.call("user.get",{filter:{ID:t}});let s=[];return e&&e.result&&(Array.isArray(e.result)?s=e.result:console.warn("Unexpected user.get result format:",e)),s.map(o=>({id:parseInt(o.ID||o.id||0),name:`${o.NAME||o.name||""} ${o.LAST_NAME||o.lastName||""}`.trim()||o.EMAIL||o.email||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π",position:o.WORK_POSITION||o.workPosition||"–°–æ—Ç—Ä—É–¥–Ω–∏–∫",email:o.EMAIL||o.email||"",tickets:[]}))}catch(e){return console.error("Error getting employees by IDs:",e),[]}}static groupTicketsByStages(t,e){Array.isArray(t)||(console.warn("Tickets is not an array:",t),t=[]),Array.isArray(e)||(console.warn("Employees is not an array:",e),e=[]);const s=[{id:"formed",name:"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ",color:"#007bff",employees:e.map(o=>({...o,tickets:[]}))},{id:"review",name:"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó",color:"#ffc107",employees:e.map(o=>({...o,tickets:[]}))},{id:"execution",name:"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ",color:"#28a745",employees:e.map(o=>({...o,tickets:[]}))}];return t.forEach(o=>{const n=this.mapStageId(o.stageId||o.STAGE_ID||""),d=s.find(c=>c.id===n);if(d){const c=o.assignedById||o.ASSIGNED_BY_ID||null,y=c?parseInt(c):null;if(y){let m=d.employees.find(E=>E.id===y);m||(m={id:y,name:`–°–æ—Ç—Ä—É–¥–Ω–∏–∫ #${y}`,position:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ",email:"",tickets:[]},d.employees.push(m)),m.tickets.push(this.mapTicket(o))}}}),s}static mapStageId(t){return{"DT140_12:UC_0VHWE2":"formed","DT140_12:PREPARATION":"review","DT140_12:CLIENT":"execution"}[t]||"formed"}static mapStageIdToBitrix(t){return{formed:"DT140_12:UC_0VHWE2",review:"DT140_12:PREPARATION",execution:"DT140_12:CLIENT"}[t]||"DT140_12:UC_0VHWE2"}static mapTicket(t){const e=parseInt(t.id||t.ID||0),s=t.title||t.TITLE||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è",o=t.stageId||t.STAGE_ID||"",n=t.assignedById||t.ASSIGNED_BY_ID||null,d=t.createdTime||t.CREATED_DATE||t.CREATED_TIME||"",c=t.updatedTime||t.MODIFY_DATE||t.UPDATED_TIME||"",y=t.UF_CRM_7_UF_PRIORITY||t.uf_crm_7_uf_priority||t.ufCrm7UfPriority||t.UF_CRM_7_UF_PRIORITY||t.uf_crm_7_uf_priority||t.priority||t.PRIORITY||null,m=ze(y),E=Wt(m);return{id:e,title:s,priorityId:m.id,priorityLabel:m.label,priorityColors:E,priority:m.id,priorityBitrixValue:m.bitrixValue||null,status:this.mapStatus(o),assigneeId:n?parseInt(n):null,stageId:this.mapStageId(o),createdAt:d,modifiedAt:c,amount:t.opportunity||t.OPPORTUNITY||0,currency:t.currencyId||t.CURRENCY_ID||"RUB",description:t.comments||t.COMMENTS||""}}static mapPriority(t){return ze(t).id}static mapPriorityToBitrix(t){if(t&&typeof t=="object")return t.bitrixValue||null;const e=qe(t);if(e&&e.bitrixValue)return e.bitrixValue;const s={3:"3",2:"2",1:"1",high:"3",medium:"2",low:"1"};return s[t]?s[t]:qe(Mt).bitrixValue}static mapStatus(t){return"in_progress"}static getZeroPointTickets(t){const e={formed:[],review:[],execution:[]};return Array.isArray(t)?(t.filter(s=>!(s.assignedById||s.ASSIGNED_BY_ID)).forEach(s=>{const o=this.mapStageId(s.stageId||s.STAGE_ID||"");e[o]&&e[o].push(this.mapTicket(s))}),e):(console.warn("Tickets is not an array in getZeroPointTickets:",t),e)}static async assignTicket(t,e,s){try{const o=this.mapStageIdToBitrix(s);return(await ce.call("crm.item.update",{entityTypeId:this.ENTITY_TYPE_ID,id:t,fields:{assignedById:e,stageId:o}})).result===!0}catch(o){throw console.error("Error assigning ticket:",o),o}}static async createTicket(t){try{const e=await ce.call("crm.item.add",{entityTypeId:this.ENTITY_TYPE_ID,fields:{title:t.title,assignedById:t.employeeId,stageId:this.mapStageIdToBitrix(t.stageId)}});return e.result?parseInt(e.result):0}catch(e){throw console.error("Error creating ticket:",e),e}}static async getTicket(t){try{const e=await ce.call("crm.item.get",{entityTypeId:this.ENTITY_TYPE_ID,id:t});return this.mapTicket(e.result)}catch(e){throw console.error("Error getting ticket:",e),e}}static async addComment(t,e){try{return(await ce.call("crm.timeline.comment.add",{fields:{entityId:t,entityType:"DYNAMIC_"+this.ENTITY_TYPE_ID,comment:e}})).result!==void 0}catch(s){throw console.error("Error adding comment:",s),s}}}We(Ae,"ENTITY_TYPE_ID",140),We(Ae,"SECTOR_TAG","1C");const _r={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true"},br={class:"modal"},wr={key:0,class:"modal__tabs"},Tr={key:"level-0-categories",class:"level-0"},Cr={class:"modal__header"},$r={class:"modal__title"},Dr={key:0},Er={class:"modal__body"},Wr={class:"categories-list"},Mr=["onClick"],Ir={class:"category-item"},Ar={class:"category-item__icon"},Sr={key:0},Br={key:1},Ur={class:"category-item__content"},Nr={class:"category-item__label"},xr={class:"category-item__count"},Rr={key:0,class:"category-item__arrow"},Or={class:"modal__footer"},Pr={key:"level-1-categories",class:"level-1"},Lr={class:"modal__header"},Gr={class:"modal__body"},Fr={key:"loading",class:"loading-names"},Vr={key:"empty",class:"modal__empty"},Hr={key:"list",class:"responsible-list"},Yr=["onClick"],jr={class:"responsible-list__name"},zr={class:"responsible-list__count"},qr={key:0,class:"responsible-list__arrow"},Xr={class:"modal__footer"},Zr={key:"level-2-categories",class:"level-2"},Jr={class:"modal__header"},Kr={class:"modal__title"},Qr={class:"modal__body"},eo={key:"loading",class:"loading-state"},to={key:"error",class:"error-state"},so={class:"error-message"},ao={key:"empty",class:"empty-state"},ro={key:"tickets",class:"tickets-list-container"},oo={key:"level-0-employees",class:"level-0"},no={class:"modal__header"},lo={class:"modal__title"},io={key:0},co={class:"modal__body"},uo={key:"loading",class:"loading-names"},ho={key:"empty",class:"modal__empty"},vo={key:"list",class:"responsible-list"},ko=["onClick"],yo={class:"responsible-list__name"},mo={class:"responsible-list__count"},fo={key:0,class:"responsible-list__arrow"},po={class:"modal__footer"},go={key:"level-1-employees",class:"level-1"},_o={class:"modal__header"},bo={class:"modal__title"},wo={class:"modal__body"},To={class:"categories-list"},Co=["onClick"],$o={class:"category-item"},Do={class:"category-item__icon"},Eo={key:0},Wo={key:1},Mo={class:"category-item__content"},Io={class:"category-item__label"},Ao={class:"category-item__count"},So={key:0,class:"category-item__arrow"},Bo={class:"modal__footer"},Uo={key:"level-2-employees",class:"level-2"},No={class:"modal__header"},xo={class:"modal__title"},Ro={class:"modal__body"},Oo={key:"loading",class:"loading-state"},Po={key:"error",class:"error-state"},Lo={class:"error-message"},Go={key:"empty",class:"empty-state"},Fo={class:"empty-state-message"},Vo={key:"tickets",class:"tickets-list-container"},Ho={__name:"ResponsibleModal",props:{isVisible:{type:Boolean,default:!1},responsible:{type:Array,default:()=>[]},closedTicketsCreatedThisWeek:{type:Number,default:0},closedTicketsCreatedOtherWeek:{type:Number,default:0},responsibleCreatedThisWeek:{type:Array,default:()=>[]},responsibleCreatedOtherWeek:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},weekStartUtc:{type:String,default:null},weekEndUtc:{type:String,default:null}},setup(a){const t=a,e=B(0),s=B("categories"),o=B(null),n=B(null),d=B(null),c=B([]),y=B(!1),m=B(null),E=B([]),I=B([]),R=B(!1),N=P(()=>[{id:"created-this-week",label:"–¢–∏–∫–µ—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª—å—é –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª—å—é",count:t.closedTicketsCreatedThisWeek??0,responsible:t.responsibleCreatedThisWeek??[]},{id:"created-other-week",label:"–¢–∏–∫–µ—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª—å—é –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ",count:t.closedTicketsCreatedOtherWeek??0,responsible:t.responsibleCreatedOtherWeek??[]}]),$=P(()=>{const w=new Map;return(t.responsibleCreatedThisWeek||[]).forEach(i=>{const g=i.id??"unassigned";w.has(g)||w.set(g,{id:i.id,name:i.name,thisWeekCount:0,otherWeekCount:0,totalCount:0,thisWeekTickets:[],otherWeekTickets:[]});const S=w.get(g);S.thisWeekCount=i.count??0,S.thisWeekTickets=i.tickets||[],S.totalCount+=S.thisWeekCount}),(t.responsibleCreatedOtherWeek||[]).forEach(i=>{const g=i.id??"unassigned";w.has(g)||w.set(g,{id:i.id,name:i.name,thisWeekCount:0,otherWeekCount:0,totalCount:0,thisWeekTickets:[],otherWeekTickets:[]});const S=w.get(g);S.otherWeekCount=i.count??0,S.otherWeekTickets=i.tickets||[],S.totalCount+=S.otherWeekCount}),Array.from(w.values())}),v=P(()=>{if(!n.value)return[];const w=n.value.thisWeekTickets||[],i=n.value.otherWeekTickets||[];return console.log("[ResponsibleModal] Computing gradations for employee:",{id:n.value.id,name:n.value.name,thisWeekCount:n.value.thisWeekCount,otherWeekCount:n.value.otherWeekCount,thisWeekTickets:w.length,otherWeekTickets:i.length,employee:n.value}),[{id:"this-week",label:"–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ",count:n.value.thisWeekCount??0,tickets:w,employeeId:n.value.id},{id:"other-week",label:"–ù–∞ –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ",count:n.value.otherWeekCount??0,tickets:i,employeeId:n.value.id}]}),_=P(()=>(I.value||[]).length>0);async function p(w){const i=w.filter(g=>g.id!==null&&g.id!==void 0).map(g=>g.id);if(i.length===0)return w;try{const g=await Ae.getEmployeesByIds(i),S=new Map;return g.forEach(O=>{S.set(O.id,O.name)}),w.map(O=>O.id&&S.has(O.id)?{...O,name:S.get(O.id)}:O)}catch(g){return console.error("[ResponsibleModal] Error enriching names:",g),w}}oe([()=>s.value,()=>$.value],async([w,i])=>{if(!(w!=="employees"||e.value!==0)){if(!i||i.length===0){I.value=[];return}R.value=!0;try{I.value=await p(i)}catch(g){console.error("[ResponsibleModal] Error loading employee names:",g),I.value=i}finally{R.value=!1}}},{immediate:!0}),oe(()=>t.responsible,async w=>{if(!(e.value!==0||o.value||s.value!=="categories")){if(!w||w.length===0){E.value=[];return}R.value=!0;try{E.value=await p(w)}catch(i){console.error("[ResponsibleModal] Error loading employee names:",i),E.value=w}finally{R.value=!1}}},{immediate:!1});const k=P(()=>(E.value||[]).length>0);function C(w){s.value!==w&&(s.value=w,e.value=0,o.value=null,n.value=null,d.value=null,c.value=[],m.value=null,E.value=[],I.value=[])}async function l(w){if(!(!w||w.count===0)){o.value=w,e.value=1,R.value=!0;try{E.value=await p(w.responsible)}catch(i){console.error("[ResponsibleModal] Error loading employee names:",i),E.value=w.responsible}finally{R.value=!1}}}async function u(w,i=null){var g,S;!w||!w.id||w.totalCount===0||(i&&i.currentTarget&&(i.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{i.currentTarget&&(i.currentTarget.style.transform="")},150)),console.log("[ResponsibleModal] Employee selected from list:",{id:w.id,name:w.name,thisWeekCount:w.thisWeekCount,otherWeekCount:w.otherWeekCount,thisWeekTickets:((g=w.thisWeekTickets)==null?void 0:g.length)||0,otherWeekTickets:((S=w.otherWeekTickets)==null?void 0:S.length)||0,employee:w}),n.value={...w,thisWeekTickets:w.thisWeekTickets||[],otherWeekTickets:w.otherWeekTickets||[]},e.value=1)}async function T(w){var g;if(!w||w.count===0)return;d.value=w,e.value=2;const i=w.tickets||[];console.log("[ResponsibleModal] Gradation clicked:",{id:w.id,label:w.label,count:w.count,ticketsInGradation:i.length,selectedEmployee:(g=n.value)==null?void 0:g.id}),i.length>0?(console.log("[ResponsibleModal] Loading tickets from gradation:",i.length),await A(i)):(console.log("[ResponsibleModal] Tickets not in gradation, loading from API"),await h(w))}async function A(w){y.value=!0,m.value=null;try{try{const{prepareTicketsForDisplay:i}=await fe(async()=>{const{prepareTicketsForDisplay:g}=await import("./ticketListUtils-C7v68cJO.js").then(S=>S.t);return{prepareTicketsForDisplay:g}},__vite__mapDeps([0,1,2,3,4,5]));c.value=await i(w,null,null)}catch(i){console.error("[ResponsibleModal] Error preparing tickets:",i),c.value=w}c.value.length===0&&(m.value=null)}catch(i){m.value=i.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[ResponsibleModal] Error loading tickets:",i),c.value=[]}finally{y.value=!1}}async function h(w){y.value=!0,m.value=null;try{if(!t.weekStartUtc||!t.weekEndUtc||!n.value)throw new Error("–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏ –∏–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫");const i=await ie({product:"1C",weekStartUtc:t.weekStartUtc,weekEndUtc:t.weekEndUtc,includeTickets:!0}),g=w.id==="this-week"?i.data.responsibleCreatedThisWeek:i.data.responsibleCreatedOtherWeek,S=g==null?void 0:g.find(V=>V.id===n.value.id),O=(S==null?void 0:S.tickets)||[];try{const{prepareTicketsForDisplay:V}=await fe(async()=>{const{prepareTicketsForDisplay:W}=await import("./ticketListUtils-C7v68cJO.js").then(j=>j.t);return{prepareTicketsForDisplay:W}},__vite__mapDeps([0,1,2,3,4,5]));c.value=await V(O,null,null)}catch(V){console.error("[ResponsibleModal] Error preparing tickets:",V),c.value=O}c.value.length===0&&(m.value=null)}catch(i){m.value=i.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[ResponsibleModal] Error loading tickets from API:",i),c.value=[]}finally{y.value=!1}}async function D(w,i=null){!w||!w.id||w.count===0||(i&&i.currentTarget&&(i.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{i.currentTarget&&(i.currentTarget.style.transform="")},150)),n.value=w,e.value=2,await x(w.id))}async function x(w){var i;y.value=!0,m.value=null;try{let g=[];if(o.value&&o.value.responsible){const S=o.value.responsible.find(O=>O.id===w);g=(S==null?void 0:S.tickets)||[]}if(g.length===0&&t.weekStartUtc&&t.weekEndUtc){const S=await ie({product:"1C",weekStartUtc:t.weekStartUtc,weekEndUtc:t.weekEndUtc,includeTickets:!0}),O=((i=o.value)==null?void 0:i.id)==="created-this-week"?S.data.responsibleCreatedThisWeek:S.data.responsibleCreatedOtherWeek,V=O==null?void 0:O.find(W=>W.id===w);g=(V==null?void 0:V.tickets)||[]}try{const{prepareTicketsForDisplay:S}=await fe(async()=>{const{prepareTicketsForDisplay:O}=await import("./ticketListUtils-C7v68cJO.js").then(V=>V.t);return{prepareTicketsForDisplay:O}},__vite__mapDeps([0,1,2,3,4,5]));c.value=await S(g,null,null)}catch(S){console.error("[ResponsibleModal] Error preparing tickets:",S),c.value=g}c.value.length===0&&(m.value=null)}catch(g){m.value=g.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[ResponsibleModal] Error loading tickets:",g),c.value=[]}finally{y.value=!1}}function G(){e.value===2?(e.value=1,s.value==="categories"?n.value=null:d.value=null,c.value=[],m.value=null):e.value===1&&(e.value=0,s.value==="categories"?(o.value=null,E.value=[]):n.value=null)}function F(w){const i=Be(w.id);window.open(i,"_blank")}function Y(){s.value==="employees"&&d.value?A(d.value.tickets):s.value==="categories"&&n.value&&x(n.value.id)}return oe(()=>t.isVisible,w=>{w||(e.value=0,s.value="categories",o.value=null,n.value=null,d.value=null,c.value=[],m.value=null,E.value=[],I.value=[])}),(w,i)=>a.isVisible?(f(),b("div",_r,[r("div",br,[e.value===0?(f(),b("div",wr,[r("button",{class:K(["modal__tab",{"modal__tab--active":s.value==="categories"}]),onClick:i[0]||(i[0]=g=>C("categories"))}," –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ",2),r("button",{class:K(["modal__tab",{"modal__tab--active":s.value==="employees"}]),onClick:i[1]||(i[1]=g=>C("employees"))}," –ü–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º ",2)])):H("",!0),L(ee,{name:"level",mode:"out-in"},{default:Z(()=>{var g,S,O,V;return[s.value==="categories"&&e.value===0?(f(),b("div",Tr,[r("header",Cr,[r("h3",$r,[i[12]||(i[12]=te(" –ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),a.weekNumber?(f(),b("span",Dr," ¬∑ –ù–µ–¥–µ–ª—è "+M(a.weekNumber),1)):H("",!0)]),r("button",{class:"modal__close",onClick:i[2]||(i[2]=W=>w.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Er,[r("ul",Wr,[(f(!0),b(q,null,X(N.value,W=>(f(),b("li",{key:W.id,class:K(["categories-list__item",{"categories-list__item--clickable":W.count>0}]),onClick:j=>l(W)},[r("div",Ir,[r("div",Ar,[W.id==="created-this-week"?(f(),b("span",Sr,"‚úì")):(f(),b("span",Br,"‚Üª"))]),r("div",Ur,[r("div",Nr,M(W.label),1),r("div",xr,M(W.count)+" —Ç–∏–∫–µ—Ç–æ–≤",1)]),W.count>0?(f(),b("span",Rr,"‚Üí")):H("",!0)])],10,Mr))),128))])]),r("footer",Or,[r("button",{class:"btn",onClick:i[3]||(i[3]=W=>w.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):s.value==="categories"&&e.value===1?(f(),b("div",Pr,[r("header",Lr,[r("button",{class:"btn-back",onClick:G,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),i[13]||(i[13]=r("h3",{class:"modal__title"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("button",{class:"modal__close",onClick:i[4]||(i[4]=W=>w.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Gr,[L(ee,{name:"loading",mode:"out-in"},{default:Z(()=>[R.value?(f(),b("div",Fr,[...i[14]||(i[14]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–º—ë–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤...",-1)])])):k.value?(f(),b("ul",Hr,[(f(!0),b(q,null,X(E.value,W=>(f(),b("li",{key:W.id||W.name,class:K(["responsible-list__item",{"responsible-list__item--clickable":W.id&&W.count>0}]),onClick:j=>D(W,j),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"},[r("span",jr,M(W.name||"–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω"),1),r("span",zr,M(W.count??0)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),W.id&&W.count>0?(f(),b("span",qr,"‚Üí")):H("",!0)],10,Yr))),128))])):(f(),b("p",Vr,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º"))]),_:1})]),r("footer",Xr,[r("button",{class:"btn",onClick:i[5]||(i[5]=W=>w.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):s.value==="categories"&&e.value===2?(f(),b("div",Zr,[r("header",Jr,[r("button",{class:"btn-back",onClick:G,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",Kr,"–¢–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: "+M(((g=n.value)==null?void 0:g.name)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:i[6]||(i[6]=W=>w.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Qr,[L(ee,{name:"loading",mode:"out-in"},{default:Z(()=>[y.value?(f(),b("div",eo,[...i[15]||(i[15]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):m.value?(f(),b("div",to,[i[16]||(i[16]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),i[17]||(i[17]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",so,M(m.value),1),r("button",{class:"btn btn-retry",onClick:Y},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):c.value.length===0?(f(),b("div",ao,[...i[18]||(i[18]=[r("div",{class:"empty-state-icon"},"üìã",-1),r("p",{class:"empty-state-message"},"–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é",-1)])])):(f(),b("div",ro,[L(De,{name:"ticket",tag:"div",class:"tickets-list"},{default:Z(()=>[(f(!0),b(q,null,X(c.value,(W,j)=>(f(),se(Ee,{key:W.id,ticket:W,draggable:!1,style:ne({"--ticket-index":j}),onClick:F},null,8,["ticket","style"]))),128))]),_:1})]))]),_:1})])])):s.value==="employees"&&e.value===0?(f(),b("div",oo,[r("header",no,[r("h3",lo,[i[19]||(i[19]=te(" –ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),a.weekNumber?(f(),b("span",io," ¬∑ –ù–µ–¥–µ–ª—è "+M(a.weekNumber),1)):H("",!0)]),r("button",{class:"modal__close",onClick:i[7]||(i[7]=W=>w.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",co,[L(ee,{name:"loading",mode:"out-in"},{default:Z(()=>[R.value?(f(),b("div",uo,[...i[20]||(i[20]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–º—ë–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤...",-1)])])):_.value?(f(),b("ul",vo,[(f(!0),b(q,null,X(I.value,W=>(f(),b("li",{key:W.id||W.name,class:K(["responsible-list__item",{"responsible-list__item--clickable":W.id&&W.totalCount>0}]),onClick:j=>u(W,j),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≥—Ä–∞–¥–∞—Ü–∏–∏ —Ç–∏–∫–µ—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"},[r("span",yo,M(W.name||"–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω"),1),r("span",mo,M(W.totalCount??0)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),W.id&&W.totalCount>0?(f(),b("span",fo,"‚Üí")):H("",!0)],10,ko))),128))])):(f(),b("p",ho,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º"))]),_:1})]),r("footer",po,[r("button",{class:"btn",onClick:i[8]||(i[8]=W=>w.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):s.value==="employees"&&e.value===1?(f(),b("div",go,[r("header",_o,[r("button",{class:"btn-back",onClick:G,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",bo,"–¢–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: "+M(((S=n.value)==null?void 0:S.name)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:i[9]||(i[9]=W=>w.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",wo,[r("ul",To,[(f(!0),b(q,null,X(v.value,W=>(f(),b("li",{key:W.id,class:K(["categories-list__item",{"categories-list__item--clickable":W.count>0}]),onClick:j=>T(W)},[r("div",$o,[r("div",Do,[W.id==="this-week"?(f(),b("span",Eo,"‚úì")):(f(),b("span",Wo,"‚Üª"))]),r("div",Mo,[r("div",Io,M(W.label),1),r("div",Ao,M(W.count)+" —Ç–∏–∫–µ—Ç–æ–≤",1)]),W.count>0?(f(),b("span",So,"‚Üí")):H("",!0)])],10,Co))),128))])]),r("footer",Bo,[r("button",{class:"btn",onClick:i[10]||(i[10]=W=>w.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):s.value==="employees"&&e.value===2?(f(),b("div",Uo,[r("header",No,[r("button",{class:"btn-back",onClick:G,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",xo," –¢–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: "+M(((O=n.value)==null?void 0:O.name)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")+" ("+M(((V=d.value)==null?void 0:V.label)||"")+") ",1),r("button",{class:"modal__close",onClick:i[11]||(i[11]=W=>w.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Ro,[L(ee,{name:"loading",mode:"out-in"},{default:Z(()=>{var W;return[y.value?(f(),b("div",Oo,[...i[21]||(i[21]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):m.value?(f(),b("div",Po,[i[22]||(i[22]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),i[23]||(i[23]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",Lo,M(m.value),1),r("button",{class:"btn btn-retry",onClick:Y},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):c.value.length===0?(f(),b("div",Go,[i[24]||(i[24]=r("div",{class:"empty-state-icon"},"üìã",-1)),r("p",Fo,M(s.value==="employees"?`–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${((W=d.value)==null?void 0:W.label)||""}"`:"–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é"),1)])):(f(),b("div",Vo,[L(De,{name:"ticket",tag:"div",class:"tickets-list"},{default:Z(()=>[(f(!0),b(q,null,X(c.value,(j,z)=>(f(),se(Ee,{key:j.id,ticket:j,draggable:!1,style:ne({"--ticket-index":z}),onClick:F},null,8,["ticket","style"]))),128))]),_:1})]))]}),_:1})])])):H("",!0)]}),_:1})])])):H("",!0)}},Yo=ae(Ho,[["__scopeId","data-v-3b229bb4"]]),jo={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true"},zo={class:"modal"},qo={key:"level-1",class:"level-1"},Xo={class:"modal__header"},Zo={class:"modal__title"},Jo={key:0},Ko={class:"modal__body"},Qo={key:"loading",class:"loading-names"},en={key:"empty",class:"modal__empty"},tn={key:"list",class:"stages-list"},sn=["onClick"],an={class:"stages-list__name"},rn={class:"stages-list__count"},on={key:0,class:"stages-list__arrow"},nn={class:"modal__footer"},ln={key:"level-2",class:"level-2"},dn={class:"modal__header"},cn={class:"modal__title"},un={class:"modal__body"},hn={key:"loading",class:"loading-state"},vn={key:"error",class:"error-state"},kn={class:"error-message"},yn={key:"empty",class:"empty-state"},mn={class:"empty-state-message"},fn={key:"tickets",class:"tickets-list-container"},pn={__name:"StagesModal",props:{isVisible:{type:Boolean,default:!1},weekNumber:{type:Number,default:null},weekStartUtc:{type:String,default:null},weekEndUtc:{type:String,default:null}},emits:["close"],setup(a,{emit:t}){const e=a,s=B(1),o=B(null),n=B([]),d=B(!1),c=B(!1),y=B(null),m=B([]),E=P(()=>m.value.length>0&&m.value.some(p=>p.count>0));async function I(){if(!e.weekStartUtc||!e.weekEndUtc){m.value=[];return}c.value=!0,y.value=null;try{const p=await ie({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeNewTicketsByStages:!0});m.value=p.data.newTicketsByStages||[]}catch(p){y.value=p.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞–¥–∏–π",console.error("[StagesModal] Error loading stages:",p),m.value=[]}finally{c.value=!1}}async function R(p,k=null){!p||p.count===0||(k&&k.currentTarget&&(k.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{k.currentTarget&&(k.currentTarget.style.transform="")},150)),o.value=p,s.value=2,await N(p.stageId))}async function N(p){var k;d.value=!0,y.value=null;try{if(!e.weekStartUtc||!e.weekEndUtc)throw new Error("–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏");const l=(k=(await ie({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeNewTicketsByStages:!0,includeTickets:!0})).data.newTicketsByStages)==null?void 0:k.find(T=>T.stageId===p),u=(l==null?void 0:l.tickets)||[];try{const{prepareTicketsForDisplay:T}=await fe(async()=>{const{prepareTicketsForDisplay:A}=await import("./ticketListUtils-C7v68cJO.js").then(h=>h.t);return{prepareTicketsForDisplay:A}},__vite__mapDeps([0,1,2,3,4,5]));n.value=await T(u,null,null)}catch(T){console.error("[StagesModal] Error preparing tickets:",T),n.value=u}n.value.length===0&&(y.value=null)}catch(C){y.value=C.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[StagesModal] Error loading tickets:",C),n.value=[]}finally{d.value=!1}}function $(){s.value=1,o.value=null,n.value=[],y.value=null}function v(p){const k=Be(p.id);window.open(k,"_blank")}function _(){o.value&&N(o.value.stageId)}return oe(()=>e.isVisible,p=>{p?I():(s.value=1,o.value=null,n.value=[],y.value=null,m.value=[])}),oe([()=>e.weekStartUtc,()=>e.weekEndUtc],()=>{e.isVisible&&I()}),(p,k)=>a.isVisible?(f(),b("div",jo,[r("div",zo,[L(ee,{name:"level",mode:"out-in"},{default:Z(()=>{var C;return[s.value===1?(f(),b("div",qo,[r("header",Xo,[r("h3",Zo,[k[3]||(k[3]=te(" –ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),a.weekNumber?(f(),b("span",Jo," ¬∑ –ù–µ–¥–µ–ª—è "+M(a.weekNumber),1)):H("",!0)]),r("button",{class:"modal__close",onClick:k[0]||(k[0]=l=>p.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Ko,[L(ee,{name:"loading",mode:"out-in"},{default:Z(()=>[c.value?(f(),b("div",Qo,[...k[4]||(k[4]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞–¥–∏–π...",-1)])])):E.value?(f(),b("ul",tn,[(f(!0),b(q,null,X(m.value,l=>(f(),b("li",{key:l.stageId,class:K(["stages-list__item",{"stages-list__item--clickable":l.count>0}]),style:ne({"--stage-color":l.color}),onClick:u=>R(l,u),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å—Ç–∞–¥–∏–∏"},[r("span",{class:"stages-list__color",style:ne({backgroundColor:l.color})},null,4),r("span",an,M(l.stageName),1),r("span",rn,M(l.count)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),l.count>0?(f(),b("span",on,"‚Üí")):H("",!0)],14,sn))),128))])):(f(),b("p",en," –ù–µ—Ç –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é "))]),_:1})]),r("footer",nn,[r("button",{class:"btn",onClick:k[1]||(k[1]=l=>p.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):s.value===2?(f(),b("div",ln,[r("header",dn,[r("button",{class:"btn-back",onClick:$,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",cn," –¢–∏–∫–µ—Ç—ã —Å—Ç–∞–¥–∏–∏: "+M(((C=o.value)==null?void 0:C.stageName)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:k[2]||(k[2]=l=>p.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",un,[L(ee,{name:"loading",mode:"out-in"},{default:Z(()=>{var l;return[d.value?(f(),b("div",hn,[...k[5]||(k[5]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):y.value?(f(),b("div",vn,[k[6]||(k[6]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),k[7]||(k[7]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",kn,M(y.value),1),r("button",{class:"btn btn-retry",onClick:_},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):n.value.length===0?(f(),b("div",yn,[k[8]||(k[8]=r("div",{class:"empty-state-icon"},"üìã",-1)),r("p",mn," –ù–∞ —Å—Ç–∞–¥–∏–∏ ¬´"+M((l=o.value)==null?void 0:l.stageName)+"¬ª –Ω–µ—Ç –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é ",1)])):(f(),b("div",fn,[L(De,{name:"ticket",tag:"div",class:"tickets-list"},{default:Z(()=>[(f(!0),b(q,null,X(n.value,(u,T)=>(f(),se(Ee,{key:u.id,ticket:u,draggable:!1,style:ne({"--ticket-index":T}),onClick:v},null,8,["ticket","style"]))),128))]),_:1})]))]}),_:1})])])):H("",!0)]}),_:1})])])):H("",!0)}},gn=ae(pn,[["__scopeId","data-v-4af0cfce"]]),_n={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true"},bn={class:"modal"},wn={key:"level-1",class:"level-1"},Tn={class:"modal__header"},Cn={class:"modal__title"},$n={key:0},Dn={class:"modal__body"},En={key:"loading",class:"loading-names"},Wn={key:"empty",class:"modal__empty"},Mn={key:"list",class:"duration-list"},In=["onClick"],An={class:"duration-list__name"},Sn={class:"duration-list__count"},Bn={key:0,class:"duration-list__arrow"},Un={class:"modal__footer"},Nn={key:"level-2",class:"level-2"},xn={class:"modal__header"},Rn={class:"modal__title"},On={class:"modal__body"},Pn={key:"loading",class:"loading-state"},Ln={key:"error",class:"error-state"},Gn={class:"error-message"},Fn={key:"empty",class:"empty-state"},Vn={class:"empty-state-message"},Hn={key:"tickets",class:"tickets-list-container"},Yn={__name:"CarryoverDurationModal",props:{isVisible:{type:Boolean,default:!1},weekNumber:{type:Number,default:null},weekStartUtc:{type:String,default:null},weekEndUtc:{type:String,default:null}},emits:["close"],setup(a,{emit:t}){const e=a,s=B(1),o=B(null),n=B([]),d=B(!1),c=B(!1),y=B(null),m=B([]),E=P(()=>m.value.length>0&&m.value.some(p=>p.count>0));async function I(){if(!e.weekStartUtc||!e.weekEndUtc){m.value=[];return}c.value=!0,y.value=null;try{const p=await ie({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!0});m.value=p.data.carryoverTicketsByDuration||[]}catch(p){y.value=p.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π",console.error("[CarryoverDurationModal] Error loading categories:",p),m.value=[]}finally{c.value=!1}}async function R(p,k=null){!p||p.count===0||(k&&k.currentTarget&&(k.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{k.currentTarget&&(k.currentTarget.style.transform="")},150)),o.value=p,s.value=2,await N(p.durationCategory))}async function N(p){var k;d.value=!0,y.value=null;try{if(!e.weekStartUtc||!e.weekEndUtc)throw new Error("–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏");const l=(k=(await ie({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!0,includeTickets:!0})).data.carryoverTicketsByDuration)==null?void 0:k.find(T=>T.durationCategory===p),u=(l==null?void 0:l.tickets)||[];try{const{prepareTicketsForDisplay:T}=await fe(async()=>{const{prepareTicketsForDisplay:A}=await import("./ticketListUtils-C7v68cJO.js").then(h=>h.t);return{prepareTicketsForDisplay:A}},__vite__mapDeps([0,1,2,3,4,5]));n.value=await T(u,null,null)}catch(T){console.error("[CarryoverDurationModal] Error preparing tickets:",T),n.value=u}n.value.length===0&&(y.value=null)}catch(C){y.value=C.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[CarryoverDurationModal] Error loading tickets:",C),n.value=[]}finally{d.value=!1}}function $(){s.value=1,o.value=null,n.value=[],y.value=null}function v(p){const k=Be(p.id);window.open(k,"_blank")}function _(){o.value&&N(o.value.durationCategory)}return oe(()=>e.isVisible,p=>{p?I():(s.value=1,o.value=null,n.value=[],y.value=null,m.value=[])}),oe([()=>e.weekStartUtc,()=>e.weekEndUtc],()=>{e.isVisible&&I()}),(p,k)=>a.isVisible?(f(),b("div",_n,[r("div",bn,[L(ee,{name:"level",mode:"out-in"},{default:Z(()=>{var C;return[s.value===1?(f(),b("div",wn,[r("header",Tn,[r("h3",Cn,[k[3]||(k[3]=te(" –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã –ø–æ —Å—Ä–æ–∫–∞–º",-1)),a.weekNumber?(f(),b("span",$n," ¬∑ –ù–µ–¥–µ–ª—è "+M(a.weekNumber),1)):H("",!0)]),r("button",{class:"modal__close",onClick:k[0]||(k[0]=l=>p.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Dn,[L(ee,{name:"loading",mode:"out-in"},{default:Z(()=>[c.value?(f(),b("div",En,[...k[4]||(k[4]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...",-1)])])):E.value?(f(),b("ul",Mn,[(f(!0),b(q,null,X(m.value,l=>(f(),b("li",{key:l.durationCategory,class:K(["duration-list__item",{"duration-list__item--clickable":l.count>0}]),style:ne({"--duration-color":l.color}),onClick:u=>R(l,u),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"},[r("span",{class:"duration-list__color",style:ne({backgroundColor:l.color})},null,4),r("span",An,M(l.durationLabel),1),r("span",Sn,M(l.count)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),l.count>0?(f(),b("span",Bn,"‚Üí")):H("",!0)],14,In))),128))])):(f(),b("p",Wn," –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é "))]),_:1})]),r("footer",Un,[r("button",{class:"btn",onClick:k[1]||(k[1]=l=>p.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):s.value===2?(f(),b("div",Nn,[r("header",xn,[r("button",{class:"btn-back",onClick:$,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",Rn," –¢–∏–∫–µ—Ç—ã: "+M(((C=o.value)==null?void 0:C.durationLabel)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:k[2]||(k[2]=l=>p.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",On,[L(ee,{name:"loading",mode:"out-in"},{default:Z(()=>{var l;return[d.value?(f(),b("div",Pn,[...k[5]||(k[5]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):y.value?(f(),b("div",Ln,[k[6]||(k[6]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),k[7]||(k[7]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",Gn,M(y.value),1),r("button",{class:"btn btn-retry",onClick:_},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):n.value.length===0?(f(),b("div",Fn,[k[8]||(k[8]=r("div",{class:"empty-state-icon"},"üìã",-1)),r("p",Vn," –í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ¬´"+M((l=o.value)==null?void 0:l.durationLabel)+"¬ª –Ω–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ ",1)])):(f(),b("div",Hn,[L(De,{name:"ticket",tag:"div",class:"tickets-list"},{default:Z(()=>[(f(!0),b(q,null,X(n.value,(u,T)=>(f(),se(Ee,{key:u.id,ticket:u,draggable:!1,style:ne({"--ticket-index":T}),onClick:v},null,8,["ticket","style"]))),128))]),_:1})]))]}),_:1})])])):H("",!0)]}),_:1})])])):H("",!0)}},jn=ae(Yn,[["__scopeId","data-v-c26f06c2"]]),zn={class:"ac-dashboard"},qn={key:"preloader",class:"chart-preloader"},Xn={class:"preloader-content"},Zn={class:"preloader-message"},Jn={key:"content"},Kn={key:1,class:"weeks-dashboard"},Qn={class:"dashboard-header"},el={class:"header-content"},tl={class:"breadcrumbs-row"},sl=["aria-label","aria-disabled","data-fallback","disabled"],al={class:"breadcrumbs","aria-label":"–ù–∞–≤–∏–≥–∞—Ü–∏—è"},rl={class:"dashboard-layout"},ol={class:"filters-container"},nl={class:"chart-container"},ll={__name:"GraphAdmissionClosureDashboard",setup(a){const t=et(),e=B(!1),s=B(null),o=B(null),n=B({newTickets:0,closedTickets:0,series:{new:[0],closed:[0]},stages:[],responsible:[]}),d=B(!1),c=B(!1),y=B(!1),m=B(!0),E=B(!1),I=P(()=>typeof window>"u"?!1:window.history.length>1),R=P(()=>I.value?"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É":"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"),N={name:"dashboard-sector-1c"};function $(i){var g;if((g=i==null?void 0:i.preventDefault)==null||g.call(i),!E.value){E.value=!0;try{if(I.value){t.back();return}console.warn("GraphAdmissionClosureDashboard: fallback navigation to dashboard-sector-1c"),t.push(N)}finally{E.value=!1}}}const v=B({stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}}),_=B("weeks"),p=P(()=>{const i=v.value.customDateRange.startDate||v.value.customDateRange.endDate,g=v.value.employees.length===1&&v.value.employees.includes("all");return i||!g});async function k(){if(console.log("[DEBUG] loadData called"),console.log("[DEBUG] periodMode:",_.value),console.log("[DEBUG] isLoading before:",e.value),_.value!=="weeks"){console.log("[DEBUG] loadData: periodMode is not weeks, returning and resetting isLoading"),e.value=!1;return}console.log("[DEBUG] Setting isLoading to true"),e.value=!0,s.value=null;const i=new Promise(g=>setTimeout(g,300));try{console.log("[DEBUG] Starting API call");const g=w(),S=g.weekStartUtc,O=g.weekEndUtc;console.log("[DEBUG] Week bounds:",{weekStartUtc:S,weekEndUtc:O});const[V,W]=await Promise.all([i,ie({product:"1C",periodMode:"weeks",weekStartUtc:S,weekEndUtc:O,includeTickets:!0})]);console.log("[DEBUG] API call successful, result:",W);const{meta:j,data:z}=W;o.value=j,n.value=z,console.log("[DEBUG] Data set, meta:",j,"data keys:",Object.keys(z))}catch(g){console.error("[DEBUG] API call failed:",g),s.value=g instanceof Error?g:new Error("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"),console.error("[GraphAdmissionClosureDashboard] loadData error:",g)}finally{console.log("[DEBUG] Finally block: setting isLoading to false"),e.value=!1,console.log("[DEBUG] isLoading after:",e.value)}}function C(i){v.value.stages=i}function l(i){v.value.employees=i}function u(i){v.value.dateRange=i}function T(i){v.value.customDateRange=i}function A(i){if(!["weeks","months"].includes(i)){console.warn("[GraphAdmissionClosureDashboard] Invalid periodMode:",i);return}i!==_.value&&(_.value=i,k())}function h(i){const{mode:g}=i.detail;["weeks","months"].includes(g)&&A(g)}function D(){v.value={stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}},x()}function x(){k()}function G(i){["weeks","months"].includes(i)&&(_.value=i)}function F(){console.log("[DEBUG] handleCloseModal called"),console.log("[DEBUG] showPeriodModeInfo before:",m.value),console.log("[DEBUG] isLoading before:",e.value),console.log("[DEBUG] periodMode:",_.value),m.value=!1,e.value=!0,console.log("[DEBUG] showPeriodModeInfo after:",m.value),console.log("[DEBUG] isLoading after:",e.value),je(()=>{console.log("[DEBUG] handleCloseModal: calling handleStartLoading in nextTick"),Y()})}function Y(){console.log("[DEBUG] handleStartLoading called"),console.log("[DEBUG] periodMode before check:",_.value),console.log("[DEBUG] showPeriodModeInfo:",m.value),console.log("[DEBUG] isLoading:",e.value),(!_.value||!["weeks","months"].includes(_.value))&&(console.warn('[GraphAdmissionClosureDashboard] Period mode not set, using default "weeks"'),_.value="weeks"),console.log("[GraphAdmissionClosureDashboard] Starting loading, periodMode:",_.value),je(()=>{console.log("[DEBUG] nextTick callback, periodMode:",_.value),console.log("[DEBUG] isLoading in nextTick:",e.value),_.value==="weeks"?(console.log("[GraphAdmissionClosureDashboard] Loading data for weeks mode"),k()):_.value==="months"&&(console.log("[GraphAdmissionClosureDashboard] Months mode - data will be loaded by GraphAdmissionClosureMonthsDashboard"),e.value=!1,console.log("[DEBUG] Reset parent isLoading to false for months mode"))})}Se(()=>{try{const i="graph-admission-closure-period-mode-info-shown";localStorage.getItem(i)&&localStorage.removeItem(i);const g="graph-admission-closure-period-mode";localStorage.getItem(g)&&localStorage.removeItem(g)}catch(i){console.warn("[GraphAdmissionClosureDashboard] Failed to clean localStorage:",i)}window.addEventListener("period-mode-change",h)}),Je(()=>{window.removeEventListener("period-mode-change",h)});function w(){const i=new Date,g=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())),S=g.getUTCDay(),O=g.getUTCDate()-S+(S===0?-6:1),V=new Date(Date.UTC(g.getUTCFullYear(),g.getUTCMonth(),O,0,0,0)),W=new Date(V);return W.setUTCDate(W.getUTCDate()+6),W.setUTCHours(23,59,59,999),{weekStartUtc:V.toISOString(),weekEndUtc:W.toISOString()}}return(i,g)=>{var O,V,W,j,z,de,he,ve,ke;const S=tt("router-link");return f(),b("div",zn,[L(ee,{name:"fade",mode:"out-in"},{default:Z(()=>[e.value?(f(),b("div",qn,[r("div",Xn,[g[6]||(g[6]=r("div",{class:"preloader-spinner"},[r("div",{class:"spinner-ring"}),r("div",{class:"spinner-ring"}),r("div",{class:"spinner-ring"})],-1)),g[7]||(g[7]=r("h3",{class:"preloader-title"},"–ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞",-1)),r("p",Zn," –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ "+M(_.value==="weeks"?"4 –Ω–µ–¥–µ–ª–∏":"3 –º–µ—Å—è—Ü–∞")+"... ",1),g[8]||(g[8]=r("div",{class:"preloader-dots"},[r("span",{class:"dot"}),r("span",{class:"dot"}),r("span",{class:"dot"})],-1))])])):!m.value&&!e.value?(f(),b("div",Jn,[_.value==="months"?(f(),se(gr,{key:0})):(f(),b("div",Kn,[r("div",Qn,[r("div",el,[r("div",tl,[r("button",{class:"btn-back-link",type:"button",onClick:$,"aria-label":R.value,"aria-disabled":!I.value,"data-fallback":!I.value,disabled:E.value,title:"–ù–∞–∑–∞–¥"}," ‚Üê ",8,sl),r("nav",al,[L(S,{to:{name:"dashboard-sector-1c"},class:"breadcrumb-link"},{default:Z(()=>[...g[9]||(g[9]=[te(" –î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–° ",-1)])]),_:1}),g[11]||(g[11]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),L(S,{to:{name:"dashboard-graph-state"},class:"breadcrumb-link"},{default:Z(()=>[...g[10]||(g[10]=[te(" –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è ",-1)])]),_:1}),g[12]||(g[12]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),g[13]||(g[13]=r("span",{class:"breadcrumb-current"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π",-1))])]),g[14]||(g[14]=r("h1",{class:"dashboard-title"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),g[15]||(g[15]=r("p",{class:"dashboard-subtitle"}," –î–æ—Å—Ç—É–ø—ã –∏ —Ñ–∏–ª—å—Ç—Ä—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã ¬´–ì—Ä–∞—Ñ–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è¬ª, —Å–µ–ª–µ–∫—Ç–æ—Ä —ç—Ç–∞–ø–æ–≤ —Å–∫—Ä—ã—Ç. ",-1))])]),r("div",rl,[r("div",ol,[L(at,{stages:v.value.stages,employees:v.value.employees,dateRange:v.value.dateRange,customDateRange:v.value.customDateRange,hasActiveFilters:p.value,hideStages:!0,weekPickerMode:!1,showPeriodMode:!0,"period-mode":_.value,"onUpdate:stages":C,"onUpdate:employees":l,"onUpdate:dateRange":u,"onUpdate:customDateRange":T,"onUpdate:periodMode":A,onReset:D,onApply:x},null,8,["stages","employees","dateRange","customDateRange","hasActiveFilters","period-mode"])]),r("div",nl,[s.value?(f(),se(st,{key:0,type:"error",title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",message:s.value.message},null,8,["message"])):(f(),se(ks,{key:1,meta:o.value,data:n.value,onOpenResponsible:g[0]||(g[0]=le=>d.value=!0),onOpenStages:g[1]||(g[1]=le=>c.value=!0),onOpenCarryover:g[2]||(g[2]=le=>y.value=!0)},null,8,["meta","data"]))])])]))])):H("",!0)]),_:1}),L(Yo,{"is-visible":d.value,responsible:n.value.responsible||[],"closed-tickets-created-this-week":n.value.closedTicketsCreatedThisWeek??0,"closed-tickets-created-other-week":n.value.closedTicketsCreatedOtherWeek??0,"responsible-created-this-week":n.value.responsibleCreatedThisWeek||[],"responsible-created-other-week":n.value.responsibleCreatedOtherWeek||[],"week-number":((O=o.value)==null?void 0:O.weekNumber)||null,"week-start-utc":((V=o.value)==null?void 0:V.weekStartUtc)||null,"week-end-utc":((W=o.value)==null?void 0:W.weekEndUtc)||null,onClose:g[3]||(g[3]=le=>d.value=!1)},null,8,["is-visible","responsible","closed-tickets-created-this-week","closed-tickets-created-other-week","responsible-created-this-week","responsible-created-other-week","week-number","week-start-utc","week-end-utc"]),L(gn,{"is-visible":c.value,"week-number":((j=o.value)==null?void 0:j.weekNumber)||null,"week-start-utc":((z=o.value)==null?void 0:z.weekStartUtc)||null,"week-end-utc":((de=o.value)==null?void 0:de.weekEndUtc)||null,onClose:g[4]||(g[4]=le=>c.value=!1)},null,8,["is-visible","week-number","week-start-utc","week-end-utc"]),L(jn,{"is-visible":y.value,"week-number":((he=o.value)==null?void 0:he.weekNumber)||null,"week-start-utc":((ve=o.value)==null?void 0:ve.weekStartUtc)||null,"week-end-utc":((ke=o.value)==null?void 0:ke.weekEndUtc)||null,onClose:g[5]||(g[5]=le=>y.value=!1)},null,8,["is-visible","week-number","week-start-utc","week-end-utc"]),m.value?(f(),se(Nt,{key:0,"is-visible":m.value,"current-mode":_.value,onClose:F,onSelectMode:G},null,8,["is-visible","current-mode"])):H("",!0)])}}},vl=ae(ll,[["__scopeId","data-v-6c4434cd"]]);export{vl as default};
