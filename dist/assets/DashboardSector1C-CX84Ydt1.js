import{_ as L,r as C,c as b,a as l,b as h,d as s,t as c,n as x,o as r,w as H,s as G,e as I,F as E,f as A,g as B,u as oe,h as fe,i as he,j as z,k as N,l as M,T as F,m as se,p as K,v as _e,q as ve,x as ye,y as ne,z as ie,A as re,B as Z,C as Te,D as be,E as pe}from"./main-CHZA51T1.js";import{g as Se,L as ae,a as P,b as j,T as De,D as W,n as Ce,C as X,c as Ee,i as Ae}from"./index-CkabKxnM.js";const D={TODAY:"today",YESTERDAY:"yesterday",THIS_WEEK:"this_week",LAST_WEEK:"last_week",MORE_THAN_TWO_WEEKS:"more_than_two_weeks",UP_TO_ONE_MONTH:"up_to_one_month",MORE_THAN_TWO_MONTHS:"more_than_two_months",MORE_THAN_HALF_YEAR:"more_than_half_year",MORE_THAN_YEAR:"more_than_year"},Oe={[D.TODAY]:{label:"–°–ï–ì–û–î–ù–Ø",color:"#28a745",backgroundColor:"#d4edda",textColor:"#155724"},[D.YESTERDAY]:{label:"–í–ß–ï–†–ê",color:"#20c997",backgroundColor:"#d1f2eb",textColor:"#0c5460"},[D.THIS_WEEK]:{label:"–ù–ê –≠–¢–û–ô –ù–ï–î–ï–õ–ï",color:"#17a2b8",backgroundColor:"#d1ecf1",textColor:"#0c5460"},[D.LAST_WEEK]:{label:"–ù–ê –ü–†–û–®–õ–û–ô –ù–ï–î–ï–õ–ï",color:"#ffc107",backgroundColor:"#fff3cd",textColor:"#856404"},[D.MORE_THAN_TWO_WEEKS]:{label:"–ë–û–õ–ï–ï –î–í–£–• –ù–ï–î–ï–õ–¨",color:"#fd7e14",backgroundColor:"#ffe5d0",textColor:"#7d3f00"},[D.UP_TO_ONE_MONTH]:{label:"–î–û 1 –ú–ï–°–Ø–¶–ê",color:"#dc3545",backgroundColor:"#f8d7da",textColor:"#721c24"},[D.MORE_THAN_TWO_MONTHS]:{label:"–ë–û–õ–ï–ï 2 –ú–ï–°–Ø–¶–ï–í",color:"#6c757d",backgroundColor:"#e2e3e5",textColor:"#383d41"},[D.MORE_THAN_HALF_YEAR]:{label:"–ë–û–õ–ï–ï –ü–û–õ–£–ì–û–î–ê",color:"#6c757d",backgroundColor:"#d6d8db",textColor:"#212529"},[D.MORE_THAN_YEAR]:{label:"–ë–û–õ–ï–ï –ì–û–î–ê",color:"#343a40",backgroundColor:"#c6c8ca",textColor:"#000000"}};function Q(o){if(!o)return null;const t=String(o).trim();if(t.length===0)return null;try{const n=new Date(t);return isNaN(n.getTime())?(console.warn("Invalid date format:",o),null):n}catch(n){return console.error("Error parsing date:",o,n),null}}function Y(o){if(!o)return"";let t;if(o instanceof Date?t=o:t=new Date(o),isNaN(t.getTime()))return"";const n=t.getDate(),e=t.getMonth()+1,d=t.getFullYear(),_=String(n).padStart(2,"0"),i=String(e).padStart(2,"0"),a=String(d);return`${_}.${i}.${a}`}function Ne(o,t=new Date){if(!o)return"";const n=o instanceof Date?o:new Date(o),e=t instanceof Date?t:new Date(t);if(isNaN(n.getTime())||isNaN(e.getTime()))return Y(n);const d=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate())-d,a=Math.floor(i/(1e3*60*60*24));return a===0?"–°–µ–≥–æ–¥–Ω—è":Y(n)}function Ie(o,t=new Date){if(!o)return D.MORE_THAN_YEAR;const n=o instanceof Date?o:new Date(o),e=t instanceof Date?t:new Date(t);if(isNaN(n.getTime())||isNaN(e.getTime()))return D.MORE_THAN_YEAR;const d=new Date(n.getFullYear(),n.getMonth(),n.getDate()),_=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=_-d;if(i<0)return D.TODAY;const a=Math.floor(i/(1e3*60*60*24)),k=Math.floor(a/7),g=Math.floor(a/30),v=Math.floor(a/365);if(a===0)return D.TODAY;if(a===1)return D.YESTERDAY;const m=new Date(_),u=_.getDay(),f=u===0?6:u-1;if(m.setDate(_.getDate()-f),m.setHours(0,0,0,0),d>=m&&a<7)return D.THIS_WEEK;const T=new Date(m);return T.setDate(m.getDate()-7),d>=T&&d<m?D.LAST_WEEK:k>=2&&g<1?D.MORE_THAN_TWO_WEEKS:g>=1&&g<2?D.UP_TO_ONE_MONTH:g>=2&&g<6?D.MORE_THAN_TWO_MONTHS:g>=6&&v<1?D.MORE_THAN_HALF_YEAR:D.MORE_THAN_YEAR}const we={name:"TicketCard",props:{ticket:{type:Object,required:!0},draggable:{type:Boolean,default:!0}},emits:["click","drag-start","drag-end"],setup(o,{emit:t}){const n=C(!1),e=b(()=>!1),d={color:"#ced4da",backgroundColor:"#f1f3f5",textColor:"#6c757d"},_={color:"#ced4da",backgroundColor:"#f8f9fa",textColor:"#6c757d"},i={color:"#dee2e6",backgroundColor:"#f8f9fa",textColor:"#6c757d"},a=b(()=>({label:o.ticket.priorityLabel||"–ù–µ —É–∫–∞–∑–∞–Ω–æ",colors:o.ticket.priorityColors||d})),k=b(()=>a.value.label||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"),g=b(()=>({color:a.value.colors.textColor||d.textColor,backgroundColor:a.value.colors.backgroundColor||d.backgroundColor,borderColor:a.value.colors.color||d.color})),v=b(()=>({borderLeftColor:a.value.colors.color||d.color})),m=b(()=>{const p=o.ticket.service||{};return{label:p.label||o.ticket.serviceLabel||"–ù–µ —É–∫–∞–∑–∞–Ω–æ",colors:p.colors||o.ticket.serviceColors||_}}),u=b(()=>m.value.label||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"),f=b(()=>({color:m.value.colors.textColor||_.textColor,backgroundColor:m.value.colors.backgroundColor||_.backgroundColor,borderColor:m.value.colors.color||_.color})),T=b(()=>{const p=o.ticket.actionStr||o.ticket.ufActionStr||null;if(!p)return null;const U=String(p).trim();return U.length>0?U:null}),y=b(()=>({color:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.color})),S=b(()=>{if(!o.ticket.createdAt)return"";const p=Q(o.ticket.createdAt);return p?Ne(p):""}),R=b(()=>{if(!o.ticket.createdAt)return null;const p=Q(o.ticket.createdAt);return Ie(p)}),O=b(()=>{const p=R.value;return p&&Oe[p]||null}),ke=b(()=>{const p=O.value;return p?{color:p.textColor,backgroundColor:p.backgroundColor,borderColor:p.color,border:`1px solid ${p.color}`}:{}});return{handleDragStart:p=>{e.value&&(p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("application/json",JSON.stringify(o.ticket)),p.dataTransfer.setDragImage(p.target,0,0),n.value=!0,t("drag-start",o.ticket))},handleDragEnd:()=>{e.value&&(n.value=!1,t("drag-end"))},handleCardClick:p=>{if(n.value)return;const U=Se(o.ticket.id);window.open(U,"_blank"),t("click",o.ticket)},isDragEnabled:e,priorityChipStyle:g,displayPriorityLabel:k,priorityBorderStyle:v,displayServiceLabel:u,serviceChipStyle:f,actionStrValue:T,actionChipStyle:y,formattedCreatedDate:S,dateAccentCategory:R,dateAccentConfig:O,dateAccentStyle:ke}}},Le=["draggable"],Re={key:0,class:"ticket-department"},xe={class:"ticket-header"},Be={class:"ticket-id"},Pe={class:"ticket-title"},Me={class:"ticket-meta"},Ue={key:1,class:"ticket-action"},He={key:2,class:"ticket-description"},je={class:"ticket-date-label"},ze={class:"ticket-date-value"};function Fe(o,t,n,e,d,_){var i;return r(),l("div",{class:"ticket-card",draggable:e.isDragEnabled,style:x(e.priorityBorderStyle),onClick:t[0]||(t[0]=(...a)=>e.handleCardClick&&e.handleCardClick(...a)),onDragstart:t[1]||(t[1]=(...a)=>e.handleDragStart&&e.handleDragStart(...a)),onDragend:t[2]||(t[2]=(...a)=>e.handleDragEnd&&e.handleDragEnd(...a))},[n.ticket.departmentHead?(r(),l("div",Re,c(n.ticket.departmentHead),1)):h("",!0),s("div",xe,[t[3]||(t[3]=s("span",{class:"ticket-icon"},"üé´",-1)),s("span",Be,"#"+c(n.ticket.id),1)]),s("div",Pe,c(n.ticket.ufSubject||n.ticket.title||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"),1),s("div",Me,[s("span",{class:"ticket-priority",style:x(e.priorityChipStyle)},c(e.displayPriorityLabel),5),s("span",{class:"ticket-service",style:x(e.serviceChipStyle)},c(e.displayServiceLabel),5)]),e.actionStrValue?(r(),l("div",Ue,[s("span",{class:"ticket-action-chip",style:x(e.actionChipStyle)},c(e.actionStrValue),5)])):h("",!0),n.ticket.description?(r(),l("div",He,c(n.ticket.description),1)):h("",!0),e.formattedCreatedDate?(r(),l("div",{key:3,class:"ticket-created-date",style:x(e.dateAccentStyle)},[s("span",je,c(((i=e.dateAccentConfig)==null?void 0:i.label)||""),1),s("span",ze,c(e.formattedCreatedDate),1)],4)):h("",!0)],44,Le)}const le=L(we,[["render",Fe],["__scopeId","data-v-9cda001c"]]),We={name:"ZeroPoint",components:{TicketCard:le},props:{tickets:{type:Array,required:!0,default:()=>[]},stageId:{type:String,required:!0}},emits:{"ticket-dragged":o=>typeof o=="object"&&o!==null,"ticket-assigned":o=>typeof o=="object"&&o!==null,"ticket-clicked":o=>typeof o=="object"&&o!==null},setup(o,{emit:t}){return{hasTickets:b(()=>Array.isArray(o.tickets)&&o.tickets.length>0),handleTicketDragStart:d=>{t("ticket-dragged",d)}}}},Ye={class:"zero-point"},Ve={key:0,class:"empty-state"};function qe(o,t,n,e,d,_){const i=I("TicketCard");return r(),l("div",Ye,[t[3]||(t[3]=s("div",{class:"zero-point-header"},[s("h3",null,"–ù—É–ª–µ–≤–∞—è —Ç–æ—á–∫–∞")],-1)),H([n.tickets.length,n.tickets.map(a=>a.id).join(",")],()=>(r(),l("div",{class:"zero-point-tickets"},[(r(!0),l(E,null,A(n.tickets,a=>(r(),B(i,{key:a.id,ticket:a,draggable:!0,onDragStart:k=>e.handleTicketDragStart(a),onClick:k=>o.$emit("ticket-clicked",a)},null,8,["ticket","onDragStart","onClick"]))),128))])),t,0),t[1]||(G(-1,!0),(t[1]=e.hasTickets?h("",!0):(r(),l("div",Ve,[...t[2]||(t[2]=[s("p",null,"–ù–µ—Ç –Ω–µ—Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –≤ —Å—Ç–∞–¥–∏–∏",-1)])]))).cacheIndex=1,G(1),t[1])])}const Je=L(We,[["render",qe],["__scopeId","data-v-c5370e55"]]);function Ge(o){return typeof o=="number"&&o>0&&!isNaN(o)}function ce(o){return typeof o=="number"&&o>0&&!isNaN(o)}function de(o){return typeof o=="string"&&["formed","review","execution"].includes(o)}function Ke(o){return!o||typeof o!="object"?!1:Ge(o.id)&&typeof o.title=="string"&&o.title.trim().length>0}function ge(o,t,n){return!(!Ke(o)||!ce(t)||!de(n)||o.assigneeId===t&&o.stageId===n)}function Ze(o){const t=[];return!o||typeof o!="object"?(t.push("–î–∞–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–æ–º"),{valid:!1,errors:t}):((!o.title||typeof o.title!="string"||o.title.trim().length===0)&&t.push("–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"),o.stageId&&!de(o.stageId)&&t.push("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID —Å—Ç–∞–¥–∏–∏"),o.employeeId&&!ce(o.employeeId)&&t.push("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"),{valid:t.length===0,errors:t})}function Xe(o){const t=oe(),n=C(!1);return{isDropZoneActive:n,handleDragStart:(k,g)=>{k.dataTransfer.effectAllowed="move",k.dataTransfer.setData("application/json",JSON.stringify(g)),k.dataTransfer.setDragImage(k.target,0,0)},handleDragOver:k=>{k.preventDefault(),k.dataTransfer.dropEffect="move",n.value=!0},handleDragLeave:k=>{const g=k.currentTarget.getBoundingClientRect(),v=k.clientX,m=k.clientY;(v<g.left||v>g.right||m<g.top||m>g.bottom)&&(n.value=!1)},handleDrop:async(k,g,v)=>{k.preventDefault(),n.value=!1;const m=k.dataTransfer.getData("application/json");if(m)try{const u=JSON.parse(m);if(!ge(u,g,v)){t.warning("–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ç–∏–∫–µ—Ç —Å—é–¥–∞");return}o&&typeof o=="function"&&await o(u,g,v)}catch(u){ae.error("Error parsing ticket data","useDragAndDrop",u),t.error("–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–∞")}},handleDragEnd:k=>{n.value=!1}}}function ue(o=null){var g,v;const t=fe(),n=((g=t==null?void 0:t.type)==null?void 0:g.name)||((v=t==null?void 0:t.type)==null?void 0:v.__name)||null,e=o||n||"Unknown",d=(m,u,f=null)=>{ae.log(m,u,e,f)};return{error:(m,u=null)=>{d("ERROR",m,u)},warn:(m,u=null)=>{d("WARN",m,u)},info:(m,u=null)=>{d("INFO",m,u)},debug:(m,u=null)=>{d("DEBUG",m,u)},log:d,context:e}}const Qe={name:"EmployeeColumn",components:{TicketCard:le},props:{employee:{type:Object,required:!0},stageId:{type:String,required:!0}},emits:["ticket-clicked","ticket-dropped"],setup(o,{emit:t}){ue("EmployeeColumn");const e=Xe(async(v,m,u)=>{t("ticket-dropped",v,m)}),d=b(()=>o.employee.isFromSector1C?Array.isArray(o.employee.tickets)?o.employee.tickets:[]:Array.isArray(o.employee.ticketsInsideSector)?o.employee.ticketsInsideSector:[]),_=b(()=>o.employee.isFromSector1C?[]:Array.isArray(o.employee.ticketsOutsideSector)?o.employee.ticketsOutsideSector:Array.isArray(o.employee.tickets)?o.employee.tickets:[]),i=b(()=>o.employee.isFromSector1C?Array.isArray(o.employee.tickets)?o.employee.tickets:[]:[]),a=b(()=>d.value.length+_.value.length),k=v=>{e.handleDrop(v,o.employee.id,o.stageId)},g=v=>{};return{isDropZoneActive:e.isDropZoneActive,handleDragOver:e.handleDragOver,handleDragLeave:e.handleDragLeave,handleDrop:k,ticketsInsideSector:d,ticketsOutsideSector:_,ticketsToDisplay:i,totalTicketsCount:a,handleTicketDragStart:g}}},$e={class:"employee-header"},et={class:"employee-info"},tt={class:"employee-details"},ot={class:"employee-name"},st={key:0,class:"employee-position"},nt={class:"tickets-count"},it={class:"tickets-list"},rt={class:"section-header"},at={class:"section-count"},lt={key:2,class:"empty-state"};function ct(o,t,n,e,d,_){const i=I("TicketCard");return r(),l("div",{class:z(["employee-column",{"drop-zone-active":e.isDropZoneActive}]),onDragover:t[3]||(t[3]=he((...a)=>e.handleDragOver&&e.handleDragOver(...a),["prevent"])),onDragleave:t[4]||(t[4]=(...a)=>e.handleDragLeave&&e.handleDragLeave(...a)),onDrop:t[5]||(t[5]=(...a)=>e.handleDrop&&e.handleDrop(...a))},[s("div",$e,[s("div",et,[t[6]||(t[6]=s("span",{class:"employee-icon"},"üë§",-1)),s("div",tt,[s("div",ot,c(n.employee.name),1),n.employee.position?(r(),l("div",st,c(n.employee.position),1)):h("",!0)])]),s("div",nt," üìä –¢–∏–∫–µ—Ç–æ–≤: "+c(e.totalTicketsCount),1)]),s("div",it,[n.employee.isFromSector1C?H([e.ticketsToDisplay.length,e.ticketsToDisplay.map(a=>a.id).join(",")],()=>(r(),l("div",{key:0},[N(F,{name:"ticket",tag:"div"},{default:M(()=>[(r(!0),l(E,null,A(e.ticketsToDisplay,a=>(r(),B(i,{key:a.id,ticket:a,draggable:!0,onClick:k=>o.$emit("ticket-clicked",a),onDragStart:e.handleTicketDragStart},null,8,["ticket","onClick","onDragStart"]))),128))]),_:1})])),t,0):(r(),l(E,{key:1},[e.ticketsInsideSector.length>0?H([e.ticketsInsideSector.length,e.ticketsInsideSector.map(a=>a.id).join(",")],()=>(r(),l("div",{key:0,class:"tickets-section tickets-inside-sector"},[N(F,{name:"ticket",tag:"div"},{default:M(()=>[(r(!0),l(E,null,A(e.ticketsInsideSector,a=>(r(),B(i,{key:a.id,ticket:a,draggable:!0,onClick:k=>o.$emit("ticket-clicked",a),onDragStart:e.handleTicketDragStart},null,8,["ticket","onClick","onDragStart"]))),128))]),_:1})])),t,1):h("",!0),e.ticketsOutsideSector.length>0?H([e.ticketsOutsideSector.length,e.ticketsOutsideSector.map(a=>a.id).join(",")],()=>(r(),l("div",{key:1,class:"tickets-section tickets-outside-sector"},[s("div",rt,[t[7]||(t[7]=s("span",{class:"section-badge"},"–í–Ω–µ —Å–µ–∫—Ç–æ—Ä–∞",-1)),s("span",at,c(e.ticketsOutsideSector.length),1)]),N(F,{name:"ticket",tag:"div"},{default:M(()=>[(r(!0),l(E,null,A(e.ticketsOutsideSector,a=>(r(),B(i,{key:a.id,ticket:a,draggable:!0,class:"ticket-outside-sector",onClick:k=>o.$emit("ticket-clicked",a),onDragStart:e.handleTicketDragStart},null,8,["ticket","onClick","onDragStart"]))),128))]),_:1})])),t,2):h("",!0)],64)),e.totalTicketsCount===0?(r(),l("div",lt,[...t[8]||(t[8]=[s("p",null,"–ù–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤",-1)])])):h("",!0)])],34)}const dt=L(Qe,[["render",ct],["__scopeId","data-v-cdec5b5c"]]),gt={name:"DashboardStage",components:{ZeroPoint:Je,EmployeeColumn:dt},props:{stage:{type:Object,required:!0},zeroPointTickets:{type:Array,default:()=>[]}},emits:["ticket-moved","ticket-assigned","ticket-clicked"],setup(o,{emit:t}){const n=ue("DashboardStage"),e=C(!1),d=b(()=>{const u=Array.isArray(o.zeroPointTickets)?o.zeroPointTickets.length:0,f=Array.isArray(o.stage.employees)?o.stage.employees.reduce((T,y)=>Array.isArray(y.ticketsInsideSector)?T+y.ticketsInsideSector.length:y.isFromSector1C&&Array.isArray(y.tickets)?T+y.tickets.length:T,0):0;return u+f}),_=b(()=>Array.isArray(o.stage.employees)?o.stage.employees.reduce((u,f)=>Array.isArray(f.ticketsOutsideSector)?u+f.ticketsOutsideSector.length:!f.isFromSector1C&&Array.isArray(f.tickets)?u+f.tickets.length:u,0):0),i=b(()=>d.value+_.value),a=b(()=>{var y;const u=((y=o.stage)==null?void 0:y.name)||"–°—Ç–∞–¥–∏—è",f=d.value,T=_.value;return T===0?`${u} (${f})`:`${u} (${f} / ${T})`});return{isDragging:e,ticketsCountInsideSector:d,ticketsCountOutsideSector:_,totalTicketsCount:i,stageNameWithCount:a,handleTicketDragged:u=>{e.value=!0},handleTicketAssigned:(u,f)=>{t("ticket-assigned",u,f)},handleTicketDropped:(u,f)=>{t("ticket-moved",u,f,o.stage.id),e.value=!1},handleTicketClicked:u=>{n.debug("Ticket clicked",u),t("ticket-clicked",u)}}}},ut={class:"stage-header"},mt={class:"stage-content"},kt={class:"employees-container"};function ft(o,t,n,e,d,_){const i=I("ZeroPoint"),a=I("EmployeeColumn");return r(),l("div",{class:"dashboard-stage",style:x({borderLeftColor:n.stage.color})},[s("div",ut,[s("h2",null,c(e.stageNameWithCount),1)]),s("div",mt,[N(i,{tickets:n.zeroPointTickets,"stage-id":n.stage.id,onTicketDragged:e.handleTicketDragged,onTicketAssigned:e.handleTicketAssigned,onTicketClicked:e.handleTicketClicked},null,8,["tickets","stage-id","onTicketDragged","onTicketAssigned","onTicketClicked"]),s("div",kt,[(r(!0),l(E,null,A(n.stage.employees,k=>(r(),B(a,{key:k.id,employee:k,"stage-id":n.stage.id,onTicketClicked:e.handleTicketClicked,onTicketDropped:e.handleTicketDropped},null,8,["employee","stage-id","onTicketClicked","onTicketDropped"]))),128))])])],4)}const ht=L(gt,[["render",ft],["__scopeId","data-v-c6fbde76"]]),V={cache_check:{title:"–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞",description:"–ü–æ–∏—Å–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö..."},cache_hit:{title:"–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã",description:"–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞..."},loading_tickets:{title:"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤",description:"–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Bitrix24..."},filtering:{title:"–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–∏–∫–µ—Ç–æ–≤",description:"–û—Ç–±–æ—Ä —Ç–∏–∫–µ—Ç–æ–≤ —Å–µ–∫—Ç–æ—Ä–∞ 1–°..."},extracting_employees:{title:"–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",description:"–ê–Ω–∞–ª–∏–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤..."},loading_employees:{title:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",description:"–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö..."},grouping:{title:"–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö",description:"–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ —ç—Ç–∞–ø–∞–º..."},caching:{title:"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à",description:"–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–≥—Ä—É–∑–æ–∫..."},complete:{title:"–ì–æ—Ç–æ–≤–æ!",description:"–î–∞—à–±–æ—Ä–¥ –∑–∞–≥—Ä—É–∂–µ–Ω"},error:{title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",description:"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"}},_t={loading_tickets:{title:"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤",description:"–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Bitrix24..."},filtering:{title:"–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–∏–∫–µ—Ç–æ–≤",description:"–û—Ç–±–æ—Ä —Ç–∏–∫–µ—Ç–æ–≤ —Å–µ–∫—Ç–æ—Ä–∞ 1–°..."},extracting_employees:{title:"–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",description:"–ê–Ω–∞–ª–∏–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤..."},loading_employees:{title:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",description:"–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö..."},grouping:{title:"–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö",description:"–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ —ç—Ç–∞–ø–∞–º..."},caching:{title:"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à",description:"–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–≥—Ä—É–∑–æ–∫..."},cache_check:{title:"–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞",description:"–ü–æ–∏—Å–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö..."},cache_hit:{title:"–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã",description:"–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞..."},complete:{title:"–ì–æ—Ç–æ–≤–æ!",description:"–î–∞—à–±–æ—Ä–¥ –∑–∞–≥—Ä—É–∂–µ–Ω"},error:{title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",description:"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"}},vt={name:"LoadingPreloader",props:{currentStep:{type:String,default:null},progress:{type:Number,default:0},stepDetails:{type:Object,default:()=>({})},error:{type:String,default:null}},emits:["retry"],setup(o,{emit:t}){const n=b(()=>{var m;const{currentStep:g,stepDetails:v}=o;return v!=null&&v.description?{title:g?((m=V[g])==null?void 0:m.title)||g:"–ó–∞–≥—Ä—É–∑–∫–∞...",description:v.description}:g?V[g]?V[g]:_t[g]||{title:"–ó–∞–≥—Ä—É–∑–∫–∞...",description:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ..."}:{title:"–ó–∞–≥—Ä—É–∑–∫–∞...",description:"–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è..."}}),e=b(()=>n.value.title),d=b(()=>n.value.description),_=b(()=>o.stepDetails),i=b(()=>{const g=o.progress;return g==null||isNaN(g)?0:Math.round(Math.max(0,Math.min(100,g)))});return{stepTitle:e,stepDescription:d,details:_,displayProgress:i,getStageDisplayName:g=>g?{"DT140_12:UC_0VHWE2":"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ","DT140_12:PREPARATION":"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó","DT140_12:CLIENT":"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ","–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ":"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ","–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó":"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó",–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ:"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ"}[g]||g:"",handleRetry:()=>{t("retry")}}}},yt={class:"preloader-backdrop"},Tt={class:"preloader-container"},bt={class:"preloader-content-scrollable"},pt={key:0,class:"spinner-container"},St={class:"preloader-content"},Dt={class:"step-title"},Ct={key:0,class:"step-description"},Et={key:1,class:"progress-container"},At={class:"progress-bar"},Ot={class:"progress-text"},Nt={key:2,class:"step-details"},It={key:0,class:"detail-description"},wt={key:1,class:"detail-item"},Lt={class:"detail-value"},Rt={key:0,class:"detail-total"},xt={key:2,class:"detail-item"},Bt={class:"detail-value"},Pt={key:0,class:"detail-total"},Mt={key:3,class:"detail-item"},Ut={class:"detail-value"},Ht={key:0,class:"detail-total"},jt={key:4,class:"detail-item"},zt={class:"detail-value"},Ft={key:5,class:"detail-warning"},Wt={key:0,class:"error-container"},Yt={class:"error-content"},Vt={class:"error-message"};function qt(o,t,n,e,d,_){return r(),l("div",{class:z(["loading-preloader",{"has-error":n.error}])},[s("div",yt,[s("div",Tt,[s("div",bt,[n.error?h("",!0):(r(),l("div",pt,[...t[1]||(t[1]=[s("div",{class:"spinner"},null,-1)])])),s("div",St,[s("h3",Dt,c(e.stepTitle),1),e.stepDescription?(r(),l("p",Ct,c(e.stepDescription),1)):h("",!0),n.error?h("",!0):(r(),l("div",Et,[s("div",At,[s("div",{class:"progress-fill",style:x({width:e.displayProgress+"%"})},null,4)]),s("span",Ot,c(e.displayProgress)+"%",1)])),n.error?h("",!0):(r(),l("div",Nt,[e.details.description?(r(),l("div",It,c(e.details.description),1)):h("",!0),e.details.count!==void 0?(r(),l("div",wt,[t[2]||(t[2]=s("span",{class:"detail-label"},"–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ç–∏–∫–µ—Ç–æ–≤:",-1)),s("span",Lt,c(e.details.count),1),e.details.total!==void 0?(r(),l("span",Rt," –∏–∑ "+c(e.details.total),1)):h("",!0)])):h("",!0),e.details.filteredTickets!==void 0?(r(),l("div",xt,[t[3]||(t[3]=s("span",{class:"detail-label"},"–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ —Ç–∏–∫–µ—Ç–æ–≤:",-1)),s("span",Bt,c(e.details.filteredTickets),1),e.details.totalTickets!==void 0?(r(),l("span",Pt," –∏–∑ "+c(e.details.totalTickets),1)):h("",!0)])):h("",!0),e.details.stage?(r(),l("div",Mt,[t[4]||(t[4]=s("span",{class:"detail-label"},"–°—Ç–∞–¥–∏—è:",-1)),s("span",Ut,c(e.getStageDisplayName(e.details.stage)),1),e.details.stageIndex&&e.details.totalStages?(r(),l("span",Ht," ("+c(e.details.stageIndex)+"/"+c(e.details.totalStages)+") ",1)):h("",!0)])):h("",!0),e.details.employeeCount!==void 0?(r(),l("div",jt,[t[5]||(t[5]=s("span",{class:"detail-label"},"–°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:",-1)),s("span",zt,c(e.details.employeeCount),1)])):h("",!0),e.details.warning?(r(),l("div",Ft,[s("span",null,"‚ö†Ô∏è "+c(e.details.warning),1)])):h("",!0)]))])])])]),n.error?(r(),l("div",Wt,[s("div",Yt,[t[6]||(t[6]=s("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),s("p",Vt,c(n.error),1),s("button",{onClick:t[0]||(t[0]=(...i)=>e.handleRetry&&e.handleRetry(...i)),class:"retry-button"}," –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É ")])])):h("",!0)],2)}const Jt=L(vt,[["render",qt],["__scopeId","data-v-d129ff19"]]),Gt={name:"LoggerControl",props:{showControl:{type:Boolean,default:!1}},setup(){const o=C(!1),t=C("ERROR"),n=C(!0),e=k=>({NONE:"–û—Ç–∫–ª—é—á–µ–Ω–æ",ERROR:"–¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏",WARN:"–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏",INFO:"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏",DEBUG:"–í—Å–µ –ª–æ–≥–∏ (–æ—Ç–ª–∞–¥–∫–∞)"})[k]||k;return se(()=>{const k=P.getLevel();t.value=k,o.value=k!=="NONE"}),{enabled:o,level:t,isExpanded:n,getLevelDescription:e,handleToggle:()=>{o.value?(t.value==="NONE"&&(t.value="ERROR"),P.setLevel(t.value)):(P.setLevel("NONE"),t.value="NONE")},handleLevelChange:()=>{o.value&&P.setLevel(t.value)},resetToDefault:()=>{const k="ERROR";t.value=k,o.value=!0,P.setLevel(k)},toggleVisibility:()=>{n.value=!n.value}}}},Kt={key:0,class:"logger-control"},Zt={class:"logger-control-header"},Xt=["aria-label"],Qt={key:0,class:"logger-control-content"},$t={class:"logger-control-section"},eo={class:"logger-control-label"},to={key:0,class:"logger-control-section"},oo={class:"logger-control-label"},so={key:1,class:"logger-control-info"},no={class:"logger-control-info-text"},io={key:2,class:"logger-control-section"};function ro(o,t,n,e,d,_){return n.showControl?(r(),l("div",Kt,[s("div",Zt,[t[6]||(t[6]=s("h3",{class:"logger-control-title"},"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º",-1)),s("button",{class:"logger-control-toggle",onClick:t[0]||(t[0]=(...i)=>e.toggleVisibility&&e.toggleVisibility(...i)),"aria-label":e.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"},c(e.isExpanded?"‚ñº":"‚ñ∂"),9,Xt)]),e.isExpanded?(r(),l("div",Qt,[s("div",$t,[s("label",eo,[K(s("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=i=>e.enabled=i),onChange:t[2]||(t[2]=(...i)=>e.handleToggle&&e.handleToggle(...i)),class:"logger-control-checkbox"},null,544),[[_e,e.enabled]]),t[7]||(t[7]=s("span",{class:"logger-control-label-text"},"–í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ",-1))])]),e.enabled?(r(),l("div",to,[s("label",oo,[t[9]||(t[9]=s("span",{class:"logger-control-label-text"},"–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:",-1)),K(s("select",{"onUpdate:modelValue":t[3]||(t[3]=i=>e.level=i),onChange:t[4]||(t[4]=(...i)=>e.handleLevelChange&&e.handleLevelChange(...i)),class:"logger-control-select"},[...t[8]||(t[8]=[ye('<option value="NONE" data-v-ed57067c>–û—Ç–∫–ª—é—á–µ–Ω–æ</option><option value="ERROR" data-v-ed57067c>–¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏</option><option value="WARN" data-v-ed57067c>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏</option><option value="INFO" data-v-ed57067c>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏</option><option value="DEBUG" data-v-ed57067c>–í—Å–µ –ª–æ–≥–∏ (–æ—Ç–ª–∞–¥–∫–∞)</option>',5)])],544),[[ve,e.level]])])])):h("",!0),e.enabled?(r(),l("div",so,[s("span",no,[t[10]||(t[10]=ne(" –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: ",-1)),s("strong",null,c(e.getLevelDescription(e.level)),1)])])):h("",!0),e.enabled?(r(),l("div",io,[s("button",{onClick:t[5]||(t[5]=(...i)=>e.resetToDefault&&e.resetToDefault(...i)),class:"logger-control-reset-btn",title:"–°–±—Ä–æ—Å–∏—Ç—å –∫ –∑–Ω–∞—á–µ–Ω–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é"}," –°–±—Ä–æ—Å–∏—Ç—å –∫ —É–º–æ–ª—á–∞–Ω–∏—é ")])):h("",!0)])):h("",!0)])):h("",!0)}const ao=L(Gt,[["render",ro],["__scopeId","data-v-ed57067c"]]);function lo(){const o=ie(),t=re();return{goBack:(i="/")=>{window.history.length>1?o.back():o.push(i)},goTo:(i,a={})=>{o.push({path:i,...a})},goHome:(i={})=>{o.push({path:"/",...i})},isCurrentRoute:i=>t.path===i,router:o,route:t}}const co={name:"BackButton",props:{variant:{type:String,default:"header",validator:o=>["header","floating"].includes(o)},text:{type:String,default:"–ù–ê–ó–ê–î"},to:{type:String,default:null},showIcon:{type:Boolean,default:!0},ariaLabel:{type:String,default:"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é"},title:{type:String,default:"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é"}},setup(o){const{goBack:t,goHome:n}=lo();return{buttonClasses:b(()=>[o.variant==="header"?"back-button":"floating-back-button"]),handleClick:()=>{o.to?n({path:o.to}):t()}}}},go=["aria-label","title"],uo={key:0,class:"back-button-icon"},mo={key:1,class:"back-button-text"};function ko(o,t,n,e,d,_){return r(),l("button",{class:z(e.buttonClasses),onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i)),"aria-label":n.ariaLabel,title:n.title},[n.showIcon?(r(),l("span",uo,"‚Üê")):h("",!0),n.variant==="header"?(r(),l("span",mo,c(n.text),1)):h("",!0)],10,go)}const fo=L(co,[["render",ko],["__scopeId","data-v-d605b6a0"]]),ho={name:"DiagnosticsPanel",props:{isEnabled:{type:Boolean,default:!1},isUserAdmin:{type:Boolean,default:!1}},setup(o){const t=C(!0),n=j(),e=b(()=>!o.isEnabled||!o.isUserAdmin?{ticketsLoading:{stages:{},totalLoaded:0},filtering:{total:0,filtered:0,rejected:[],tagValueExamples:[]},employees:{uniqueIds:[],totalUnique:0,ticketsWithoutAssignedById:[],ticketsWithAssignedById1051:[]},grouping:{distributionByStages:{},ticketsNotInColumn:[],unknownStages:[]},zeroPoint:{byStage:{}}}:n?n.getMetrics():(console.warn("[DiagnosticsPanel] Diagnostics service not available"),{ticketsLoading:{stages:{},totalLoaded:0},filtering:{total:0,filtered:0,rejected:[],tagValueExamples:[]},employees:{uniqueIds:[],totalUnique:0,ticketsWithoutAssignedById:[],ticketsWithAssignedById1051:[]},grouping:{distributionByStages:{},ticketsNotInColumn:[],unknownStages:[]},zeroPoint:{byStage:{}}})),d=b(()=>!o.isEnabled||!o.isUserAdmin||!n?{withoutAssignedById:[],withAssignedById1051:[],withoutSectorTag:[],notInColumn:[],unknownStage:[]}:n.getProblematicTickets()),_=b(()=>{const g=d.value;return g.withoutAssignedById.length===0&&g.withAssignedById1051.length===0&&g.withoutSectorTag.length===0&&g.notInColumn.length===0&&g.unknownStage.length===0});return{isExpanded:t,metrics:e,problematicTickets:d,hasNoProblems:_,toggleExpanded:()=>{t.value=!t.value},downloadJSON:()=>{if(!n)return;const g=n.exportToJSON(),v=new Blob([g],{type:"application/json"}),m=URL.createObjectURL(v),u=document.createElement("a");u.href=m,u.download=`dashboard-diagnostics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(m)},getStageName:g=>De.getStageName(g)||g}}},_o={key:0,class:"diagnostics-panel"},vo={class:"diagnostics-header"},yo={class:"header-actions"},To=["title"],bo={key:0,class:"diagnostics-content"},po={class:"diagnostics-section"},So={class:"metrics-grid"},Do={class:"metric-card"},Co={class:"metric-value"},Eo={class:"metric-label"},Ao={class:"metric-value"},Oo={class:"metric-detail"},No={class:"diagnostics-section"},Io={class:"metrics-grid"},wo={class:"metric-card"},Lo={class:"metric-value"},Ro={class:"metric-card",style:{"border-left-color":"#28a745"}},xo={class:"metric-value"},Bo={class:"metric-card",style:{"border-left-color":"#dc3545"}},Po={class:"metric-value"},Mo={key:0,class:"metric-detail"},Uo={key:0,class:"warning-box"},Ho={key:1,class:"examples-box"},jo={class:"example-type"},zo={key:0,class:"normalized"},Fo={class:"diagnostics-section"},Wo={class:"metrics-grid"},Yo={class:"metric-card"},Vo={class:"metric-value"},qo={class:"metric-card"},Jo={class:"metric-value"},Go={class:"metric-card"},Ko={class:"metric-value"},Zo={class:"diagnostics-section"},Xo={class:"metrics-grid"},Qo={class:"metric-card"},$o={class:"metric-value"},es={class:"metric-card",style:{"border-left-color":"#28a745"}},ts={class:"metric-value"},os={class:"metric-card",style:{"border-left-color":"#ffc107"}},ss={class:"metric-value"},ns={key:0,class:"employees-list"},is={class:"diagnostics-section"},rs={class:"metrics-grid"},as={class:"metric-label"},ls={class:"metric-value"},cs={class:"diagnostics-section problematic-tickets"},ds={key:0,class:"problem-group"},gs={class:"tickets-list"},us={class:"ticket-id"},ms={class:"ticket-title"},ks={class:"ticket-stage"},fs={key:0,class:"more-items"},hs={key:1,class:"problem-group"},_s={class:"tickets-list"},vs={class:"ticket-id"},ys={class:"ticket-title"},Ts={class:"ticket-stage"},bs={key:0,class:"more-items"},ps={key:2,class:"problem-group"},Ss={class:"tickets-list"},Ds={class:"ticket-id"},Cs={class:"ticket-title"},Es={class:"ticket-stage"},As={key:0,class:"more-items"},Os={key:3,class:"problem-group"},Ns={class:"tickets-list"},Is={class:"ticket-id"},ws={class:"ticket-title"},Ls={class:"ticket-stage"},Rs={key:0,class:"more-items"},xs={key:4,class:"problem-group"},Bs={class:"tickets-list"},Ps={class:"ticket-id"},Ms={class:"ticket-title"},Us={class:"ticket-stage"},Hs={key:0,class:"more-items"},js={key:5,class:"no-problems"};function zs(o,t,n,e,d,_){return n.isEnabled&&n.isUserAdmin?(r(),l("div",_o,[s("div",vo,[t[2]||(t[2]=s("h2",null,"üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞",-1)),s("div",yo,[s("button",{onClick:t[0]||(t[0]=(...i)=>e.downloadJSON&&e.downloadJSON(...i)),class:"btn-download",title:"–°–∫–∞—á–∞—Ç—å JSON"}," üì• –°–∫–∞—á–∞—Ç—å JSON "),s("button",{onClick:t[1]||(t[1]=(...i)=>e.toggleExpanded&&e.toggleExpanded(...i)),class:"btn-toggle",title:e.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"},c(e.isExpanded?"‚ñº":"‚ñ∂"),9,To)])]),e.isExpanded?(r(),l("div",bo,[s("section",po,[t[4]||(t[4]=s("h3",null,"üìä –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤",-1)),s("div",So,[s("div",Do,[t[3]||(t[3]=s("div",{class:"metric-label"},"–í—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ",-1)),s("div",Co,c(e.metrics.ticketsLoading.totalLoaded),1)]),(r(!0),l(E,null,A(e.metrics.ticketsLoading.stages,(i,a)=>(r(),l("div",{key:a,class:"metric-card"},[s("div",Eo,c(e.getStageName(a)),1),s("div",Ao,c(i.total),1),s("div",Oo,"–ë–∞—Ç—á–µ–π: "+c(i.batches.length),1)]))),128))])]),s("section",No,[t[10]||(t[10]=s("h3",null,"üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ç–æ—Ä—É 1–°",-1)),s("div",Io,[s("div",wo,[t[5]||(t[5]=s("div",{class:"metric-label"},"–í—Å–µ–≥–æ —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–æ",-1)),s("div",Lo,c(e.metrics.filtering.total),1)]),s("div",Ro,[t[6]||(t[6]=s("div",{class:"metric-label"},"–ü—Ä–æ—à–ª–æ —Ñ–∏–ª—å—Ç—Ä (—Ç–µ–≥ 1–°)",-1)),s("div",xo,c(e.metrics.filtering.filtered),1)]),s("div",Bo,[t[7]||(t[7]=s("div",{class:"metric-label"},"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ (–Ω–µ—Ç —Ç–µ–≥–∞ 1–°)",-1)),s("div",Po,c(e.metrics.filtering.rejected.length),1),e.metrics.filtering.total>0?(r(),l("div",Mo,c(Math.round(e.metrics.filtering.rejected.length/e.metrics.filtering.total*100))+"% –æ—Ç –≤—Å–µ—Ö ",1)):h("",!0)])]),e.metrics.filtering.rejected.length>0?(r(),l("div",Uo,[t[8]||(t[8]=s("strong",null,"‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:",-1)),ne(" "+c(e.metrics.filtering.rejected.length)+" —Ç–∏–∫–µ—Ç–æ–≤ –Ω–µ –∏–º–µ—é—Ç —Ç–µ–≥–∞ —Å–µ–∫—Ç–æ—Ä–∞ 1–° (UF_CRM_7_TYPE_PRODUCT = '1C') –∏ –ø–æ—ç—Ç–æ–º—É –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –¥–∞—à–±–æ—Ä–¥–µ. –≠—Ç–∏ —Ç–∏–∫–µ—Ç—ã –µ—Å—Ç—å –≤ Bitrix24, –Ω–æ –Ω–µ –ø–æ–ø–∞–ª–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. ",1)])):h("",!0),e.metrics.filtering.tagValueExamples.length>0?(r(),l("div",Ho,[t[9]||(t[9]=s("h4",null,"–ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π UF_CRM_7_TYPE_PRODUCT:",-1)),s("ul",null,[(r(!0),l(E,null,A(e.metrics.filtering.tagValueExamples.slice(0,10),(i,a)=>(r(),l("li",{key:a},[s("code",null,c(JSON.stringify(i.value)),1),s("span",jo,"("+c(i.type)+c(i.isArray?", –º–∞—Å—Å–∏–≤":"")+")",1),i.normalized&&i.normalized.length?(r(),l("span",zo," ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–æ: "+c(i.normalized.join(", ")),1)):h("",!0)]))),128))])])):h("",!0)]),s("section",Fo,[t[14]||(t[14]=s("h3",null,"üë• –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏",-1)),s("div",Wo,[s("div",Yo,[t[11]||(t[11]=s("div",{class:"metric-label"},"–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID",-1)),s("div",Vo,c(e.metrics.employees.totalUnique),1)]),s("div",qo,[t[12]||(t[12]=s("div",{class:"metric-label"},"–ë–µ–∑ assignedById",-1)),s("div",Jo,c(e.metrics.employees.ticketsWithoutAssignedById.length),1)]),s("div",Go,[t[13]||(t[13]=s("div",{class:"metric-label"},"–° assignedById=1051",-1)),s("div",Ko,c(e.metrics.employees.ticketsWithAssignedById1051.length),1)])])]),s("section",Zo,[t[18]||(t[18]=s("h3",null,"üì¶ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),(r(!0),l(E,null,A(e.metrics.grouping.distributionByStages,(i,a)=>(r(),l("div",{key:a,class:"stage-distribution"},[s("h4",null,c(e.getStageName(a)),1),s("div",Xo,[s("div",Qo,[t[15]||(t[15]=s("div",{class:"metric-label"},"–í—Å–µ–≥–æ —Ç–∏–∫–µ—Ç–æ–≤ –≤ —Å—Ç–∞–¥–∏–∏",-1)),s("div",$o,c(i.total||0),1)]),s("div",es,[t[16]||(t[16]=s("div",{class:"metric-label"},"–í–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),s("div",ts,c(i.insideSector||0),1)]),s("div",os,[t[17]||(t[17]=s("div",{class:"metric-label"},"–í–Ω–µ —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),s("div",ss,c(i.outsideSector||0),1)])]),Object.keys(i.employees||{}).length>0?(r(),l("div",ns,[(r(!0),l(E,null,A(i.employees,(k,g)=>(r(),l("div",{key:g,class:"employee-item"}," –°–æ—Ç—Ä—É–¥–Ω–∏–∫ #"+c(g)+": "+c(k)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1))),128))])):h("",!0)]))),128))]),s("section",is,[t[19]||(t[19]=s("h3",null,"üéØ –ù—É–ª–µ–≤–∞—è —Ç–æ—á–∫–∞",-1)),s("div",rs,[(r(!0),l(E,null,A(e.metrics.zeroPoint.byStage,(i,a)=>(r(),l("div",{key:a,class:"metric-card"},[s("div",as,c(e.getStageName(a)),1),s("div",ls,c(i),1)]))),128))])]),s("section",cs,[t[20]||(t[20]=s("h3",null,"‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã",-1)),e.problematicTickets.withoutAssignedById.length>0?(r(),l("div",ds,[s("h4",null,"–ë–µ–∑ assignedById ("+c(e.problematicTickets.withoutAssignedById.length)+")",1),s("div",gs,[(r(!0),l(E,null,A(e.problematicTickets.withoutAssignedById.slice(0,10),i=>(r(),l("div",{key:i.id,class:"ticket-item"},[s("span",us,"#"+c(i.id),1),s("span",ms,c(i.title),1),s("span",ks,c(e.getStageName(i.stageId)),1)]))),128)),e.problematicTickets.withoutAssignedById.length>10?(r(),l("div",fs," ... –∏ –µ—â—ë "+c(e.problematicTickets.withoutAssignedById.length-10),1)):h("",!0)])])):h("",!0),e.problematicTickets.withAssignedById1051.length>0?(r(),l("div",hs,[s("h4",null,"–° assignedById=1051 ("+c(e.problematicTickets.withAssignedById1051.length)+")",1),s("div",_s,[(r(!0),l(E,null,A(e.problematicTickets.withAssignedById1051.slice(0,10),i=>(r(),l("div",{key:i.id,class:"ticket-item"},[s("span",vs,"#"+c(i.id),1),s("span",ys,c(i.title),1),s("span",Ts,c(e.getStageName(i.stageId)),1)]))),128)),e.problematicTickets.withAssignedById1051.length>10?(r(),l("div",bs," ... –∏ –µ—â—ë "+c(e.problematicTickets.withAssignedById1051.length-10),1)):h("",!0)])])):h("",!0),e.problematicTickets.withoutSectorTag.length>0?(r(),l("div",ps,[s("h4",null,"–ë–µ–∑/–Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–µ–≥ —Å–µ–∫—Ç–æ—Ä–∞ ("+c(e.problematicTickets.withoutSectorTag.length)+")",1),s("div",Ss,[(r(!0),l(E,null,A(e.problematicTickets.withoutSectorTag.slice(0,10),i=>(r(),l("div",{key:i.id||i.ID,class:"ticket-item"},[s("span",Ds,"#"+c(i.id||i.ID),1),s("span",Cs,c(i.title||i.TITLE||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"),1),s("span",Es,c(e.getStageName(i.stageId||i.STAGE_ID)),1)]))),128)),e.problematicTickets.withoutSectorTag.length>10?(r(),l("div",As," ... –∏ –µ—â—ë "+c(e.problematicTickets.withoutSectorTag.length-10),1)):h("",!0)])])):h("",!0),e.problematicTickets.notInColumn.length>0?(r(),l("div",Os,[s("h4",null,"–ù–µ –ø–æ–ø–∞–ª–∏ –≤ –∫–æ–ª–æ–Ω–∫—É ("+c(e.problematicTickets.notInColumn.length)+")",1),s("div",Ns,[(r(!0),l(E,null,A(e.problematicTickets.notInColumn.slice(0,10),i=>(r(),l("div",{key:i.id,class:"ticket-item"},[s("span",Is,"#"+c(i.id),1),s("span",ws,c(i.title),1),s("span",Ls,c(e.getStageName(i.stageId)),1)]))),128)),e.problematicTickets.notInColumn.length>10?(r(),l("div",Rs," ... –∏ –µ—â—ë "+c(e.problematicTickets.notInColumn.length-10),1)):h("",!0)])])):h("",!0),e.problematicTickets.unknownStage.length>0?(r(),l("div",xs,[s("h4",null,"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç–∞–¥–∏—è ("+c(e.problematicTickets.unknownStage.length)+")",1),s("div",Bs,[(r(!0),l(E,null,A(e.problematicTickets.unknownStage.slice(0,10),i=>(r(),l("div",{key:i.id,class:"ticket-item"},[s("span",Ps,"#"+c(i.id),1),s("span",Ms,c(i.title),1),s("span",Us,"–°—Ç–∞–¥–∏—è: "+c(i.stageId),1)]))),128)),e.problematicTickets.unknownStage.length>10?(r(),l("div",Hs," ... –∏ –µ—â—ë "+c(e.problematicTickets.unknownStage.length-10),1)):h("",!0)])])):h("",!0),e.hasNoProblems?(r(),l("div",js," ‚úÖ –ü—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ ")):h("",!0)])])):h("",!0)])):h("",!0)}const Fs=L(ho,[["render",zs],["__scopeId","data-v-74a5e138"]]);function Ws(){const o=C(!1),t=C(null),n=C([{id:"formed",name:"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ",color:"#007bff",employees:[]},{id:"review",name:"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó",color:"#ffc107",employees:[]},{id:"execution",name:"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ",color:"#28a745",employees:[]}]),e=C({formed:[],review:[],execution:[]}),d=C([]),_=C(null);return{isLoading:o,error:t,stages:n,zeroPointTickets:e,employees:d,draggedTicket:_,updateState:v=>{v.stages&&(n.value=v.stages),v.employees&&(d.value=v.employees),v.zeroPointTickets&&(e.value=v.zeroPointTickets)},resetState:()=>{o.value=!1,t.value=null,n.value=[{id:"formed",name:"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ",color:"#007bff",employees:[]},{id:"review",name:"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó",color:"#ffc107",employees:[]},{id:"execution",name:"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ",color:"#28a745",employees:[]}],e.value={formed:[],review:[],execution:[]},d.value=[],_.value=null},updateLocalStateAfterMove:(v,m,u)=>{const f=n.value.find(y=>y.employees.some(S=>S.tickets.some(R=>R.id===v.id)));if(f){const y=f.employees.find(S=>S.tickets.some(R=>R.id===v.id));y&&(y.tickets=y.tickets.filter(S=>S.id!==v.id))}const T=n.value.find(y=>y.id===u);if(T){const y=T.employees.find(S=>S.id===m);if(y){const S={...v,assigneeId:m,stageId:u};y.tickets.push(S)}}Object.keys(e.value).forEach(y=>{e.value[y]=e.value[y].filter(S=>S.id!==v.id)})},getEmployeeTickets:(v,m)=>{const u=n.value.find(T=>T.id===m);if(!u)return[];const f=u.employees.find(T=>T.id===v);return f?f.tickets||[]:[]}}}function Ys(){const o=C(null),t=C(0),n=C(null),e=C(null),d=C({}),_=(u,f={})=>{o.value=u,d.value=f},i=u=>{const f=typeof u=="number"&&!isNaN(u)?u:0;t.value=Math.min(100,Math.max(0,f))},a=u=>{n.value=u,e.value=null},k=u=>{e.value=u},g=()=>{e.value=null},v=()=>{o.value=null,t.value=0,n.value=null,e.value=null,d.value={}},m=b(()=>n.value||e.value);return{currentStep:o,progress:t,error:n,temporaryError:e,displayError:m,stepDetails:d,updateStep:_,updateProgress:i,setError:a,setTemporaryError:k,clearTemporaryError:g,reset:v}}const w={fadeOutDuration:400,fadeInDuration:400,delayBetween:150,readyDisplayTime:800,fadeOutEasing:"ease-out",fadeInEasing:"ease-in",fadeOutTransform:"scale(0.95)",fadeInTransform:"translateY(10px)"},$={fadeInDuration:400,fadeInEasing:"ease-in"};function me(o,t,n="opacity, transform"){return`${n} ${o}ms ${t}`}function Vs(){return me(w.fadeOutDuration,w.fadeOutEasing)}function qs(){return me($.fadeInDuration,$.fadeInEasing)}function Js(){const o=C(!1),t=C(null),n=i=>{o.value=!0,t.value=Date.now(),i&&i()},e=i=>{o.value=!1,t.value=null,i&&i()},d=(i,a,k=w)=>{n(()=>{i&&i(),setTimeout(()=>{a&&a()},k.delayBetween),setTimeout(()=>{e()},k.fadeOutDuration)})},_=b(()=>t.value?Date.now()-t.value:0);return{isTransitioning:b(()=>o.value),startTransition:n,endTransition:e,executeTransition:d,transitionDuration:_}}function Gs(o,t=""){if(Logger.error(`API Error ${t?`(${t})`:""}`,"ErrorHandler",o),o.message){if(o.message.includes("HTTP error"))return"–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.";if(o.message.includes("timeout"))return"–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.";if(o.message.includes("403")||o.message.includes("401"))return"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.";if(o.message.includes("500"))return"–û—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É."}return o.message||"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"}function Ks(o,t="",n={}){const e={message:o.message,stack:o.stack,context:t,...n,timestamp:new Date().toISOString()};Logger.error("Error logged","ErrorHandler",e)}function q(o,t="",n=null){const e=Gs(o,t);Ks(o,t),n&&typeof n=="function"?n(e,"error"):typeof BX<"u"&&BX.UI&&BX.UI.Notification&&BX.UI.Notification.Center.notify({content:e,autoHideDelay:5e3})}function Zs(o){const t=oe(),n=Ys(),{isTransitioning:e,executeTransition:d}=Js();function _(f,T){const y=Ce(f);y.step&&T.updateStep(y.step,y.details||{}),y.progress!==void 0&&y.progress!==null&&(T.updateProgress(y.progress),T.clearTemporaryError())}const i=async(f=!0)=>{o.isLoading.value=!0,o.error.value=null,n.reset(),n.updateStep("cache_check",{description:"–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö..."}),n.updateProgress(0);try{const T=await W.getSectorData(f,y=>{_(y,n)});o.updateState(T)}catch(T){o.error.value=T.message,n.setError(T.message),q(T,"loading sector data",t.error)}finally{if(o.error.value)o.isLoading.value=!1;else{n.updateStep("complete",{description:"–î–∞—à–±–æ—Ä–¥ –∑–∞–≥—Ä—É–∂–µ–Ω"}),n.updateProgress(100);const T=w.readyDisplayTime||800;setTimeout(()=>{d(()=>{},()=>{o.isLoading.value=!1},w),setTimeout(()=>{n.reset()},w.fadeOutDuration)},T)}}},a=async(f,T,y)=>{if(!ge(f,T,y))return t.warning("–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ç–∏–∫–µ—Ç —Å—é–¥–∞"),!1;try{const S=await W.assignTicket(f.id,T,y);return S&&(o.updateLocalStateAfterMove(f,T,y),t.success("–¢–∏–∫–µ—Ç –ø–µ—Ä–µ–º–µ—â—ë–Ω")),S}catch(S){return q(S,"assigning ticket",t.error),!1}finally{o.draggedTicket.value=null}};return{loadSectorData:i,assignTicket:a,moveTicketToStage:async(f,T)=>await a(f,f.assigneeId,T),assignTicketToEmployee:async(f,T)=>await a(f,T,f.stageId),createTicket:async f=>{const T=Ze(f);if(!T.valid){const y=T.errors.join(", ");return t.error(y),0}try{const y=await W.createTicket(f);return y>0&&(await i(!1),t.success("–¢–∏–∫–µ—Ç —Å–æ–∑–¥–∞–Ω")),y}catch(y){return q(y,"creating ticket",t.error),0}},handleTicketDragStart:f=>{o.draggedTicket.value=f},handleTicketDrop:async(f,T,y)=>{await a(f,T,y)},loadingProgress:n,isTransitioning:e}}const J={name:"DashboardSector1C",components:{DashboardStage:ht,LoadingPreloader:Jt,LoggerControl:ao,BackButton:fo,DiagnosticsPanel:Fs},setup(){const o=ie(),t=re(),n=Ws(),e=Zs(n),d=C(null),_=b(()=>d.value?be(d.value):!1),i=b(()=>Ae(t,d.value)),a=()=>{o.push({name:"dashboard-sector-1c",query:{...t.query,diagnostics:"true"}}),typeof localStorage<"u"&&localStorage.setItem("dashboard-sector-1c-diagnostics","true");const O=j();O&&O.reset(),e.loadSectorData(!1)},k=()=>{X.invalidateTicketsCache(),X.invalidateEmployeesCache(),Ee();const O=j();O&&O.reset(),e.loadSectorData(!1)};se(async()=>{try{d.value=await Te.getCurrentUser()}catch(O){console.error("Error getting current user:",O),d.value=null}if(i.value){const O=j();O&&O.reset()}e.loadSectorData()});const g=Vs(),v=qs(),m=`${w.delayBetween}ms`,u=w.fadeOutTransform,f=w.fadeInTransform,T=()=>{e.loadSectorData(!1)},y=()=>{o.push({name:"dashboard-graph-state"})},S=e.loadingProgress,R=b(()=>typeof localStorage<"u"?localStorage.getItem("dashboard-sector-1c-show-logger-control")==="true":!1);return{isLoading:n.isLoading,error:n.error,stages:n.stages,zeroPointTickets:n.zeroPointTickets,employees:n.employees,draggedTicket:n.draggedTicket,currentStep:S.currentStep,progress:S.progress,stepDetails:S.stepDetails,loadingProgress:S,loadSectorData:e.loadSectorData,handleTicketDragStart:e.handleTicketDragStart,handleTicketDrop:e.handleTicketDrop,assignTicketToEmployee:e.assignTicketToEmployee,moveTicketToStage:e.moveTicketToStage,createTicket:e.createTicket,getEmployeeTickets:n.getEmployeeTickets,showLoggerControl:R,handleRetry:T,isTransitioning:e.isTransitioning,preloaderFadeOutTransition:g,dashboardFadeInTransition:v,transitionDelay:m,preloaderFadeOutTransform:u,dashboardFadeInTransform:f,navigateToGraphState:y,isDiagnosticsEnabled:i,enableDiagnostics:a,clearCache:k,isUserAdmin:_}}},ee=()=>{pe(o=>({d45fb0ae:o.preloaderFadeOutTransition,v9b81d2d0:o.preloaderFadeOutTransform,v50dfa152:o.dashboardFadeInTransition,v16bbb8d6:o.transitionDelay,v6df543cf:o.dashboardFadeInTransform}))},te=J.setup;J.setup=te?(o,t)=>(ee(),te(o,t)):ee;const Xs={class:"dashboard-header"},Qs={class:"header-actions"},$s={key:0,class:"dashboard-content"},en={class:"stages-container"};function tn(o,t,n,e,d,_){const i=I("BackButton"),a=I("LoadingPreloader"),k=I("DashboardStage"),g=I("LoggerControl"),v=I("DiagnosticsPanel");return r(),l("div",{class:z(["dashboard-sector-1c",{"is-dragging":e.draggedTicket}])},[s("div",Xs,[N(i,{variant:"header"}),t[6]||(t[6]=s("h1",null,"–î–∞—à–±–æ—Ä–¥ - –°–µ–∫—Ç–æ—Ä 1–°",-1)),s("div",Qs,[e.isDiagnosticsEnabled&&e.isUserAdmin?(r(),l("button",{key:0,onClick:t[0]||(t[0]=(...m)=>e.clearCache&&e.clearCache(...m)),class:"btn-clear-cache",title:"–°–±—Ä–æ—Å–∏—Ç—å –∫–µ—à —Å–µ–∫—Ç–æ—Ä–∞ –∏ —Ç–∏–∫–µ—Ç–æ–≤"},[...t[3]||(t[3]=[s("span",{class:"icon"},"‚ôªÔ∏è",-1),s("span",null,"–°–±—Ä–æ—Å–∏—Ç—å –∫–µ—à",-1)])])):h("",!0),!e.isDiagnosticsEnabled&&e.isUserAdmin?(r(),l("button",{key:1,onClick:t[1]||(t[1]=(...m)=>e.enableDiagnostics&&e.enableDiagnostics(...m)),class:"btn-enable-diagnostics",title:"–í–∫–ª—é—á–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º"},[...t[4]||(t[4]=[s("span",{class:"icon"},"üîç",-1),s("span",null,"–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞",-1)])])):h("",!0),s("button",{onClick:t[2]||(t[2]=(...m)=>e.navigateToGraphState&&e.navigateToGraphState(...m)),class:"btn-navigate-graph-state",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ –≥—Ä–∞—Ñ–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞"},[...t[5]||(t[5]=[s("span",{class:"icon"},"üìä",-1),s("span",null,"–ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è",-1)])])])]),N(Z,{name:"preloader-fade"},{default:M(()=>[e.isLoading||e.error||e.currentStep?(r(),B(a,{key:0,"current-step":e.currentStep,progress:e.progress,"step-details":e.stepDetails,error:e.error||null,onRetry:e.handleRetry},null,8,["current-step","progress","step-details","error","onRetry"])):h("",!0)]),_:1}),N(Z,{name:"dashboard-fade"},{default:M(()=>[!e.isLoading&&!e.error&&!e.currentStep?(r(),l("div",$s,[s("div",en,[(r(!0),l(E,null,A(e.stages,m=>(r(),B(k,{key:m.id,stage:m,"zero-point-tickets":e.zeroPointTickets[m.id]||[],onTicketMoved:e.handleTicketDrop,onTicketAssigned:e.assignTicketToEmployee},null,8,["stage","zero-point-tickets","onTicketMoved","onTicketAssigned"]))),128))])])):h("",!0)]),_:1}),N(i,{variant:"floating"}),N(g,{"show-control":e.showLoggerControl},null,8,["show-control"]),N(v,{"is-enabled":e.isDiagnosticsEnabled,"is-user-admin":e.isUserAdmin},null,8,["is-enabled","is-user-admin"])],2)}const ln=L(J,[["render",tn],["__scopeId","data-v-760e168a"]]);export{ln as default};
