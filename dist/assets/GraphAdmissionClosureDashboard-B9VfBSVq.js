const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./main-Cjj_t2Vs.js","./main-BHtrLvUz.css","./ticketListUtils-DMEuQ5ZR.js","./priority-config-BNVltkld.js","./priority-config-Bxxce_5E.css","./ticket-mapper-xbRAnG1U.js"])))=>i.map(i=>d[i]);
var Gt=Object.defineProperty;var Ft=(o,t,e)=>t in o?Gt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var et=(o,t,e)=>Ft(o,typeof t!="symbol"?t+"":t,e);import{_ as Se,g as J,G as Ee,m as ot,H as At,f as $e,o as g,j as de,k as me,a as w,d as ne,b as r,y as Te,n as pe,B as Ce,I as Ht,J as Ye,K as fe,L as Vt,M as $t,N as He,O as Kt,P as Yt,Q as jt,R as zt,S as qt,U as Zt,V as Xt,W as Jt,X as rt,c as X,Y as T,t as W,F as ke,e as ve,Z as Xe,$ as Qt,x as er,l as Ne,a0 as tr,a1 as Me,z as St,r as Dt,a2 as Et,a3 as Re,T as Je,a4 as _t}from"./main-Cjj_t2Vs.js";import{F as Nt}from"./FiltersPanel-DmrlitR0.js";import{L as Pe,D as rr,B as ar}from"./index-VPS4L7qv.js";import{g as wt,a as sr,b as Ct,D as or,T as Qe,c as nt}from"./priority-config-BNVltkld.js";const nr={key:0,class:"modal-overlay"},lr={class:"modal-container",role:"dialog","aria-labelledby":"modal-title","aria-modal":"true"},ir={class:"modal-body"},cr={class:"mode-description"},dr={__name:"PeriodModeInfoModal",props:{isVisible:{type:Boolean,required:!0},currentMode:{type:String,default:"weeks",validator:o=>["weeks","months"].includes(o)}},emits:["close","start-loading","select-mode"],setup(o,{emit:t}){const e=o,a=t,s=J(e.currentMode);function l(m){if(!["weeks","months"].includes(m)){console.warn("[PeriodModeInfoModal] Invalid mode:",m);return}s.value=m,console.log("[DEBUG Modal] handleModeSelect: mode =",m),console.log("[DEBUG Modal] Emitting select-mode event"),a("select-mode",m),console.log("[DEBUG Modal] Emitting close event"),a("close"),console.log("[DEBUG Modal] Scheduling start-loading event in 100ms"),setTimeout(()=>{console.log("[DEBUG Modal] Emitting start-loading event"),a("start-loading")},100)}function k(){console.log("[DEBUG Modal] handleClose called, selectedMode =",s.value),console.log("[DEBUG Modal] Emitting select-mode event with",s.value),a("select-mode",s.value),console.log("[DEBUG Modal] Emitting close event"),a("close")}function d(m){m.key==="Escape"&&e.isVisible&&k()}return Ee(()=>e.currentMode,m=>{["weeks","months"].includes(m)&&(s.value=m)}),ot(()=>{e.isVisible&&document.addEventListener("keydown",d)}),At(()=>{document.removeEventListener("keydown",d)}),Ee(()=>e.isVisible,m=>{m?(document.addEventListener("keydown",d),s.value=e.currentMode):document.removeEventListener("keydown",d)}),(m,p)=>(g(),$e(Ht,{to:"body"},[de(Ce,{name:"modal-fade"},{default:me(()=>[o.isVisible?(g(),w("div",nr,[r("div",lr,[r("div",{class:"modal-header"},[p[2]||(p[2]=r("h2",{id:"modal-title",class:"modal-title"},[r("span",{class:"modal-icon"},"‚ÑπÔ∏è"),Te(" –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è ")],-1)),r("button",{class:"modal-close-btn",onClick:k,"aria-label":"–ó–∞–∫—Ä—ã—Ç—å",type:"button"}," √ó ")]),r("div",ir,[p[5]||(p[5]=r("p",{class:"modal-description"}," –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π: ",-1)),r("div",cr,[r("button",{class:pe(["mode-item mode-item--clickable",{"mode-item--selected":s.value==="weeks"}]),onClick:p[0]||(p[0]=S=>l("weeks")),type:"button"},[...p[3]||(p[3]=[r("div",{class:"mode-header"},[r("span",{class:"mode-icon"},"üìÖ"),r("h3",{class:"mode-title"},"4 –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–µ–¥–µ–ª–∏")],-1),r("p",{class:"mode-text"}," –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 –Ω–µ–¥–µ–ª–∏ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –Ω–µ–¥–µ–ª—è–º. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–∏–Ω–∞–º–∏–∫–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏—è —Ç–∏–∫–µ—Ç–æ–≤. ",-1)])],2),r("button",{class:pe(["mode-item mode-item--clickable",{"mode-item--selected":s.value==="months"}]),onClick:p[1]||(p[1]=S=>l("months")),type:"button"},[...p[4]||(p[4]=[r("div",{class:"mode-header"},[r("span",{class:"mode-icon"},"üìä"),r("h3",{class:"mode-title"},"3 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –º–µ—Å—è—Ü–∞")],-1),r("p",{class:"mode-text"}," –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –Ω–µ–¥–µ–ª—è–º –≤–Ω—É—Ç—Ä–∏ –º–µ—Å—è—Ü–µ–≤. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤—ã—è–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–æ–≤. ",-1)])],2)])])])])):ne("",!0)]),_:1})]))}},ur=Se(dr,[["__scopeId","data-v-4a42a9a6"]]);/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Tt=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var o=window.screen;if(o)return(o.deviceXDPI||1)/(o.logicalXDPI||1)}return 1}(),Ve={toTextLines:function(o){var t=[],e;for(o=[].concat(o);o.length;)e=o.pop(),typeof e=="string"?t.unshift.apply(t,e.split(`
`)):Array.isArray(e)?o.push.apply(o,e):He(o)||t.unshift(""+e);return t},textSize:function(o,t,e){var a=[].concat(t),s=a.length,l=o.font,k=0,d;for(o.font=e.string,d=0;d<s;++d)k=Math.max(o.measureText(a[d]).width,k);return o.font=l,{height:s*e.lineHeight,width:k}},bound:function(o,t,e){return Math.max(o,Math.min(t,e))},arrayDiff:function(o,t){var e=o.slice(),a=[],s,l,k,d;for(s=0,k=t.length;s<k;++s)d=t[s],l=e.indexOf(d),l===-1?a.push([d,1]):e.splice(l,1);for(s=0,k=e.length;s<k;++s)a.push([e[s],-1]);return a},rasterize:function(o){return Math.round(o*Tt)/Tt}};function tt(o,t){var e=t.x,a=t.y;if(e===null)return{x:0,y:-1};if(a===null)return{x:1,y:0};var s=o.x-e,l=o.y-a,k=Math.sqrt(s*s+l*l);return{x:k?s/k:0,y:k?l/k:-1}}function kr(o,t,e,a,s){switch(s){case"center":e=a=0;break;case"bottom":e=0,a=1;break;case"right":e=1,a=0;break;case"left":e=-1,a=0;break;case"top":e=0,a=-1;break;case"start":e=-e,a=-a;break;case"end":break;default:s*=Math.PI/180,e=Math.cos(s),a=Math.sin(s);break}return{x:o,y:t,vx:e,vy:a}}var vr=0,Bt=1,Ot=2,Ut=4,It=8;function je(o,t,e){var a=vr;return o<e.left?a|=Bt:o>e.right&&(a|=Ot),t<e.top?a|=It:t>e.bottom&&(a|=Ut),a}function hr(o,t){for(var e=o.x0,a=o.y0,s=o.x1,l=o.y1,k=je(e,a,t),d=je(s,l,t),m,p,S;!(!(k|d)||k&d);)m=k||d,m&It?(p=e+(s-e)*(t.top-a)/(l-a),S=t.top):m&Ut?(p=e+(s-e)*(t.bottom-a)/(l-a),S=t.bottom):m&Ot?(S=a+(l-a)*(t.right-e)/(s-e),p=t.right):m&Bt&&(S=a+(l-a)*(t.left-e)/(s-e),p=t.left),m===k?(e=p,a=S,k=je(e,a,t)):(s=p,l=S,d=je(s,l,t));return{x0:e,x1:s,y0:a,y1:l}}function ze(o,t){var e=t.anchor,a=o,s,l;return t.clamp&&(a=hr(a,t.area)),e==="start"?(s=a.x0,l=a.y0):e==="end"?(s=a.x1,l=a.y1):(s=(a.x0+a.x1)/2,l=(a.y0+a.y1)/2),kr(s,l,o.vx,o.vy,t.align)}var qe={arc:function(o,t){var e=(o.startAngle+o.endAngle)/2,a=Math.cos(e),s=Math.sin(e),l=o.innerRadius,k=o.outerRadius;return ze({x0:o.x+a*l,y0:o.y+s*l,x1:o.x+a*k,y1:o.y+s*k,vx:a,vy:s},t)},point:function(o,t){var e=tt(o,t.origin),a=e.x*o.options.radius,s=e.y*o.options.radius;return ze({x0:o.x-a,y0:o.y-s,x1:o.x+a,y1:o.y+s,vx:e.x,vy:e.y},t)},bar:function(o,t){var e=tt(o,t.origin),a=o.x,s=o.y,l=0,k=0;return o.horizontal?(a=Math.min(o.x,o.base),l=Math.abs(o.base-o.x)):(s=Math.min(o.y,o.base),k=Math.abs(o.base-o.y)),ze({x0:a,y0:s+k,x1:a+l,y1:s,vx:e.x,vy:e.y},t)},fallback:function(o,t){var e=tt(o,t.origin);return ze({x0:o.x,y0:o.y,x1:o.x+(o.width||0),y1:o.y+(o.height||0),vx:e.x,vy:e.y},t)}},De=Ve.rasterize;function yr(o){var t=o.borderWidth||0,e=o.padding,a=o.size.height,s=o.size.width,l=-s/2,k=-a/2;return{frame:{x:l-e.left-t,y:k-e.top-t,w:s+e.width+t*2,h:a+e.height+t*2},text:{x:l,y:k,w:s,h:a}}}function mr(o,t){var e=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!e)return null;if(e.xCenter!==void 0&&e.yCenter!==void 0)return{x:e.xCenter,y:e.yCenter};var a=e.getBasePixel();return o.horizontal?{x:a,y:null}:{x:null,y:a}}function pr(o){return o instanceof zt?qe.arc:o instanceof qt?qe.point:o instanceof Zt?qe.bar:qe.fallback}function gr(o,t,e,a,s,l){var k=Math.PI/2;if(l){var d=Math.min(l,s/2,a/2),m=t+d,p=e+d,S=t+a-d,L=e+s-d;o.moveTo(t,p),m<S&&p<L?(o.arc(m,p,d,-Math.PI,-k),o.arc(S,p,d,-k,0),o.arc(S,L,d,0,k),o.arc(m,L,d,k,Math.PI)):m<S?(o.moveTo(m,e),o.arc(S,p,d,-k,k),o.arc(m,p,d,k,Math.PI+k)):p<L?(o.arc(m,p,d,-Math.PI,0),o.arc(m,L,d,0,Math.PI)):o.arc(m,p,d,-Math.PI,Math.PI),o.closePath(),o.moveTo(t,e)}else o.rect(t,e,a,s)}function fr(o,t,e){var a=e.backgroundColor,s=e.borderColor,l=e.borderWidth;!a&&(!s||!l)||(o.beginPath(),gr(o,De(t.x)+l/2,De(t.y)+l/2,De(t.w)-l,De(t.h)-l,e.borderRadius),o.closePath(),a&&(o.fillStyle=a,o.fill()),s&&l&&(o.strokeStyle=s,o.lineWidth=l,o.lineJoin="miter",o.stroke()))}function br(o,t,e){var a=e.lineHeight,s=o.w,l=o.x,k=o.y+a/2;return t==="center"?l+=s/2:(t==="end"||t==="right")&&(l+=s),{h:a,w:s,x:l,y:k}}function _r(o,t,e){var a=o.shadowBlur,s=e.stroked,l=De(e.x),k=De(e.y),d=De(e.w);s&&o.strokeText(t,l,k,d),e.filled&&(a&&s&&(o.shadowBlur=0),o.fillText(t,l,k,d),a&&s&&(o.shadowBlur=a))}function wr(o,t,e,a){var s=a.textAlign,l=a.color,k=!!l,d=a.font,m=t.length,p=a.textStrokeColor,S=a.textStrokeWidth,L=p&&S,ae;if(!(!m||!k&&!L))for(e=br(e,s,d),o.font=d.string,o.textAlign=s,o.textBaseline="middle",o.shadowBlur=a.textShadowBlur,o.shadowColor=a.textShadowColor,k&&(o.fillStyle=l),L&&(o.lineJoin="round",o.lineWidth=S,o.strokeStyle=p),ae=0,m=t.length;ae<m;++ae)_r(o,t[ae],{stroked:L,filled:k,w:e.w,x:e.x,y:e.y+e.h*ae})}var Mt=function(o,t,e,a){var s=this;s._config=o,s._index=a,s._model=null,s._rects=null,s._ctx=t,s._el=e};Ye(Mt.prototype,{_modelize:function(o,t,e,a){var s=this,l=s._index,k=Kt(fe([e.font,{}],a,l)),d=fe([e.color,Yt.color],a,l);return{align:fe([e.align,"center"],a,l),anchor:fe([e.anchor,"center"],a,l),area:a.chart.chartArea,backgroundColor:fe([e.backgroundColor,null],a,l),borderColor:fe([e.borderColor,null],a,l),borderRadius:fe([e.borderRadius,0],a,l),borderWidth:fe([e.borderWidth,0],a,l),clamp:fe([e.clamp,!1],a,l),clip:fe([e.clip,!1],a,l),color:d,display:o,font:k,lines:t,offset:fe([e.offset,4],a,l),opacity:fe([e.opacity,1],a,l),origin:mr(s._el,a),padding:jt(fe([e.padding,4],a,l)),positioner:pr(s._el),rotation:fe([e.rotation,0],a,l)*(Math.PI/180),size:Ve.textSize(s._ctx,t,k),textAlign:fe([e.textAlign,"start"],a,l),textShadowBlur:fe([e.textShadowBlur,0],a,l),textShadowColor:fe([e.textShadowColor,d],a,l),textStrokeColor:fe([e.textStrokeColor,d],a,l),textStrokeWidth:fe([e.textStrokeWidth,0],a,l)}},update:function(o){var t=this,e=null,a=null,s=t._index,l=t._config,k,d,m,p=fe([l.display,!0],o,s);p&&(k=o.dataset.data[s],d=Vt($t(l.formatter,[k,o]),k),m=He(d)?[]:Ve.toTextLines(d),m.length&&(e=t._modelize(p,m,l,o),a=yr(e))),t._model=e,t._rects=a},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(o,t){var e=this,a=o.ctx,s=e._model,l=e._rects,k;this.visible()&&(a.save(),s.clip&&(k=s.area,a.beginPath(),a.rect(k.left,k.top,k.right-k.left,k.bottom-k.top),a.clip()),a.globalAlpha=Ve.bound(0,s.opacity,1),a.translate(De(t.x),De(t.y)),a.rotate(s.rotation),fr(a,l.frame,s),wr(a,s.lines,l.text,s),a.restore())}});var Cr=Number.MIN_SAFE_INTEGER||-9007199254740991,Tr=Number.MAX_SAFE_INTEGER||9007199254740991;function Fe(o,t,e){var a=Math.cos(e),s=Math.sin(e),l=t.x,k=t.y;return{x:l+a*(o.x-l)-s*(o.y-k),y:k+s*(o.x-l)+a*(o.y-k)}}function Wt(o,t){var e=Tr,a=Cr,s=t.origin,l,k,d,m,p;for(l=0;l<o.length;++l)k=o[l],d=k.x-s.x,m=k.y-s.y,p=t.vx*d+t.vy*m,e=Math.min(e,p),a=Math.max(a,p);return{min:e,max:a}}function Ze(o,t){var e=t.x-o.x,a=t.y-o.y,s=Math.sqrt(e*e+a*a);return{vx:(t.x-o.x)/s,vy:(t.y-o.y)/s,origin:o,ln:s}}var Rt=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Ye(Rt.prototype,{center:function(){var o=this._rect;return{x:o.x+o.w/2,y:o.y+o.h/2}},update:function(o,t,e){this._rotation=e,this._rect={x:t.x+o.x,y:t.y+o.y,w:t.w,h:t.h}},contains:function(o){var t=this,e=1,a=t._rect;return o=Fe(o,t.center(),-t._rotation),!(o.x<a.x-e||o.y<a.y-e||o.x>a.x+a.w+e*2||o.y>a.y+a.h+e*2)},intersects:function(o){var t=this._points(),e=o._points(),a=[Ze(t[0],t[1]),Ze(t[0],t[3])],s,l,k;for(this._rotation!==o._rotation&&a.push(Ze(e[0],e[1]),Ze(e[0],e[3])),s=0;s<a.length;++s)if(l=Wt(t,a[s]),k=Wt(e,a[s]),l.max<k.min||k.max<l.min)return!1;return!0},_points:function(){var o=this,t=o._rect,e=o._rotation,a=o.center();return[Fe({x:t.x,y:t.y},a,e),Fe({x:t.x+t.w,y:t.y},a,e),Fe({x:t.x+t.w,y:t.y+t.h},a,e),Fe({x:t.x,y:t.y+t.h},a,e)]}});function Pt(o,t,e){var a=t.positioner(o,t),s=a.vx,l=a.vy;if(!s&&!l)return{x:a.x,y:a.y};var k=e.w,d=e.h,m=t.rotation,p=Math.abs(k/2*Math.cos(m))+Math.abs(d/2*Math.sin(m)),S=Math.abs(k/2*Math.sin(m))+Math.abs(d/2*Math.cos(m)),L=1/Math.max(Math.abs(s),Math.abs(l));return p*=s*L,S*=l*L,p+=t.offset*s,S+=t.offset*l,{x:a.x+p,y:a.y+S}}function Wr(o,t){var e,a,s,l;for(e=o.length-1;e>=0;--e)for(s=o[e].$layout,a=e-1;a>=0&&s._visible;--a)l=o[a].$layout,l._visible&&s._box.intersects(l._box)&&t(s,l);return o}function Ar(o){var t,e,a,s,l,k,d;for(t=0,e=o.length;t<e;++t)a=o[t],s=a.$layout,s._visible&&(d=new Proxy(a._el,{get:(m,p)=>m.getProps([p],!0)[p]}),l=a.geometry(),k=Pt(d,a.model(),l),s._box.update(k,l,a.rotation()));return Wr(o,function(m,p){var S=m._hidable,L=p._hidable;S&&L||L?p._visible=!1:S&&(m._visible=!1)})}var Ke={prepare:function(o){var t=[],e,a,s,l,k;for(e=0,s=o.length;e<s;++e)for(a=0,l=o[e].length;a<l;++a)k=o[e][a],t.push(k),k.$layout={_box:new Rt,_hidable:!1,_visible:!0,_set:e,_idx:k._index};return t.sort(function(d,m){var p=d.$layout,S=m.$layout;return p._idx===S._idx?S._set-p._set:S._idx-p._idx}),this.update(t),t},update:function(o){var t=!1,e,a,s,l,k;for(e=0,a=o.length;e<a;++e)s=o[e],l=s.model(),k=s.$layout,k._hidable=l&&l.display==="auto",k._visible=s.visible(),t|=k._hidable;t&&Ar(o)},lookup:function(o,t){var e,a;for(e=o.length-1;e>=0;--e)if(a=o[e].$layout,a&&a._visible&&a._box.contains(t))return o[e];return null},draw:function(o,t){var e,a,s,l,k,d;for(e=0,a=t.length;e<a;++e)s=t[e],l=s.$layout,l._visible&&(k=s.geometry(),d=Pt(s._el,s.model(),k),l._box.update(d,k,s.rotation()),s.draw(o,d))}},$r=function(o){if(He(o))return null;var t=o,e,a,s;if(Xt(o))if(!He(o.label))t=o.label;else if(!He(o.r))t=o.r;else for(t="",e=Object.keys(o),s=0,a=e.length;s<a;++s)t+=(s!==0?", ":"")+e[s]+": "+o[e[s]];return""+t},Sr={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:$r,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},we="$datalabels",xt="$default";function Dr(o,t){var e=o.datalabels,a={},s=[],l,k;return e===!1?null:(e===!0&&(e={}),t=Ye({},[t,e]),l=t.labels||{},k=Object.keys(l),delete t.labels,k.length?k.forEach(function(d){l[d]&&s.push(Ye({},[t,l[d],{_key:d}]))}):s.push(t),a=s.reduce(function(d,m){return Jt(m.listeners||{},function(p,S){d[S]=d[S]||{},d[S][m._key||xt]=p}),delete m.listeners,d},{}),{labels:s,listeners:a})}function at(o,t,e,a){if(t){var s=e.$context,l=e.$groups,k;t[l._set]&&(k=t[l._set][l._key],k&&$t(k,[s,a])===!0&&(o[we]._dirty=!0,e.update(s)))}}function Er(o,t,e,a,s){var l,k;!e&&!a||(e?a?e!==a&&(k=l=!0):k=!0:l=!0,k&&at(o,t.leave,e,s),l&&at(o,t.enter,a,s))}function Nr(o,t){var e=o[we],a=e._listeners,s,l;if(!(!a.enter&&!a.leave)){if(t.type==="mousemove")l=Ke.lookup(e._labels,t);else if(t.type!=="mouseout")return;s=e._hovered,e._hovered=l,Er(o,a,s,l,t)}}function Br(o,t){var e=o[we],a=e._listeners.click,s=a&&Ke.lookup(e._labels,t);s&&at(o,a,s,t)}var Lt={id:"datalabels",defaults:Sr,beforeInit:function(o){o[we]={_actives:[]}},beforeUpdate:function(o){var t=o[we];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(o,t,e){var a=t.index,s=o[we],l=s._datasets[a]=[],k=o.isDatasetVisible(a),d=o.data.datasets[a],m=Dr(d,e),p=t.meta.data||[],S=o.ctx,L,ae,re,O,N,C,y,c;for(S.save(),L=0,re=p.length;L<re;++L)if(y=p[L],y[we]=[],k&&y&&o.getDataVisibility(L)&&!y.skip)for(ae=0,O=m.labels.length;ae<O;++ae)N=m.labels[ae],C=N._key,c=new Mt(N,S,y,L),c.$groups={_set:a,_key:C||xt},c.$context={active:!1,chart:o,dataIndex:L,dataset:d,datasetIndex:a},c.update(c.$context),y[we].push(c),l.push(c);S.restore(),Ye(s._listeners,m.listeners,{merger:function(_,$,M){$[_]=$[_]||{},$[_][t.index]=M[_],s._listened=!0}})},afterUpdate:function(o){o[we]._labels=Ke.prepare(o[we]._datasets)},afterDatasetsDraw:function(o){Ke.draw(o,o[we]._labels)},beforeEvent:function(o,t){if(o[we]._listened){var e=t.event;switch(e.type){case"mousemove":case"mouseout":Nr(o,e);break;case"click":Br(o,e);break}}},afterEvent:function(o){var t=o[we],e=t._actives,a=t._actives=o.getActiveElements(),s=Ve.arrayDiff(e,a),l,k,d,m,p,S,L;for(l=0,k=s.length;l<k;++l)if(p=s[l],p[1])for(L=p[0].element[we]||[],d=0,m=L.length;d<m;++d)S=L[d],S.$context.active=p[1]===1,S.update(S.$context);(t._dirty||s.length)&&(Ke.update(t._labels),o.render()),delete t._dirty}};const Or={class:"ac-chart"},Ur={class:"ac-chart__header"},Ir={class:"ac-chart__subtitle"},Mr={class:"ac-chart__controls"},Rr={class:"chart-type-selector"},Pr=["onClick"],xr={class:"chart-type-icon"},Lr={class:"chart-type-label"},Gr={class:"ac-chart__summary"},Fr={class:"summary-week-block summary-week-block--current"},Hr={class:"summary-week-block__title"},Vr={class:"summary-week-block__title-week"},Kr={key:0,class:"summary-week-block__title-dates"},Yr={class:"summary-week-block__cards"},jr={class:"summary-card__value-wrapper"},zr={class:"summary-card__value"},qr=["title"],Zr={class:"percentage-indicator__arrow"},Xr={class:"percentage-indicator__value"},Jr={class:"percentage-indicator__label"},Qr={class:"summary-card__value-wrapper"},ea={class:"summary-card__value-main"},ta=["title"],ra={class:"percentage-indicator__arrow"},aa={class:"percentage-indicator__value"},sa={class:"percentage-indicator__label"},oa={class:"summary-card__breakdown"},na={class:"breakdown-item breakdown-item--this-week"},la={class:"breakdown-item__value"},ia={class:"breakdown-item breakdown-item--other-week"},ca={class:"breakdown-item__value"},da={class:"summary-card__value-wrapper"},ua={class:"summary-card__value-main"},ka=["title"],va={class:"percentage-indicator__arrow"},ha={class:"percentage-indicator__value"},ya={class:"percentage-indicator__label"},ma={class:"summary-card__breakdown"},pa={class:"breakdown-item breakdown-item--this-week"},ga={class:"breakdown-item__value"},fa={class:"breakdown-item breakdown-item--previous-week"},ba={class:"breakdown-item__value"},_a={class:"breakdown-item breakdown-item--older"},wa={class:"breakdown-item__value"},Ca={class:"summary-card summary-card--stages"},Ta={class:"summary-card__tags"},Wa={key:0,class:"stage-tag stage-tag--empty"},Aa={key:0,class:"summary-week-divider"},$a={key:1,class:"summary-week-block summary-week-block--previous"},Sa={class:"summary-week-block__title"},Da={class:"summary-week-block__title-week"},Ea={key:0,class:"summary-week-block__title-dates"},Na={class:"summary-week-block__cards"},Ba={class:"summary-card__value-wrapper"},Oa={class:"summary-card__values-comparison"},Ua={class:"summary-card__value-comparison-item summary-card__value-comparison-item--previous"},Ia={class:"summary-card__value"},Ma={class:"value-label"},Ra={class:"summary-card__value-comparison-item summary-card__value-comparison-item--current"},Pa={class:"summary-card__value summary-card__value--current-week"},xa={class:"value-label"},La=["title"],Ga={class:"percentage-indicator__arrow"},Fa={class:"percentage-indicator__value"},Ha={class:"percentage-indicator__label"},Va={class:"summary-card__value-wrapper"},Ka={class:"summary-card__values-comparison"},Ya={class:"summary-card__value-comparison-item summary-card__value-comparison-item--previous"},ja={class:"summary-card__value-main"},za={class:"value-label"},qa={class:"summary-card__value-comparison-item summary-card__value-comparison-item--current"},Za={class:"summary-card__value-main summary-card__value-main--current-week"},Xa={class:"value-label"},Ja=["title"],Qa={class:"percentage-indicator__arrow"},es={class:"percentage-indicator__value"},ts={class:"percentage-indicator__label"},rs={class:"summary-card__breakdown"},as={class:"breakdown-item breakdown-item--this-week"},ss={class:"breakdown-item__value"},os={class:"breakdown-item breakdown-item--other-week"},ns={class:"breakdown-item__value"},ls={class:"summary-card__value-wrapper"},is={class:"summary-card__values-comparison"},cs={class:"summary-card__value-comparison-item summary-card__value-comparison-item--previous"},ds={class:"summary-card__value-main"},us={class:"value-label"},ks={class:"summary-card__value-comparison-item summary-card__value-comparison-item--current"},vs={class:"summary-card__value-main summary-card__value-main--current-week"},hs={class:"value-label"},ys=["title"],ms={class:"percentage-indicator__arrow"},ps={class:"percentage-indicator__value"},gs={class:"percentage-indicator__label"},fs={class:"summary-card__breakdown"},bs={class:"breakdown-item breakdown-item--this-week"},_s={class:"breakdown-item__value"},ws={class:"breakdown-item breakdown-item--previous-week"},Cs={class:"breakdown-item__value"},Ts={class:"breakdown-item breakdown-item--older"},Ws={class:"breakdown-item__value"},As={class:"summary-card summary-card--stages summary-card--previous"},$s={class:"summary-card__tags"},Ss={key:0,class:"stage-tag stage-tag--empty"},Ds={class:"ac-chart__body"},Es={key:0,class:"split-charts-container"},Ns={class:"chart-wrapper chart-wrapper--left"},Bs={class:"chart-canvas-wrapper"},Os={class:"chart-wrapper chart-wrapper--right"},Us={class:"chart-canvas-wrapper"},Is={__name:"GraphAdmissionClosureChart",props:{meta:{type:Object,default:()=>({weekNumber:null,weekStartUtc:null,weekEndUtc:null})},data:{type:Object,default:()=>({newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedPreviousWeek:0,carryoverTicketsCreatedOlder:0,carryoverTicketsCreatedOtherWeek:0,series:{new:[0],closed:[0],closedCreatedThisWeek:[0],closedCreatedOtherWeek:[0],carryover:[0],carryoverCreatedThisWeek:[0],carryoverCreatedPreviousWeek:[0],carryoverCreatedOlder:[0],carryoverCreatedOtherWeek:[0]},stagesByWeek:[],stages:[],responsible:[]})}},emits:["open-responsible","open-stages","open-carryover"],setup(o,{emit:t}){rt.register(Lt);const e=o,a=t,s=X(()=>{var n;const u=((n=e.meta)==null?void 0:n.weeks)||[];return u.length>=2?u[u.length-2]:null}),l=[{value:"line",label:"–õ–∏–Ω–µ–π–Ω—ã–π",icon:"üìà"},{value:"bar",label:"–°—Ç–æ–ª–±—á–∞—Ç—ã–π",icon:"üìä"},{value:"doughnut",label:"–ö—Ä—É–≥–æ–≤–∞—è",icon:"üç©"}],k=J("line"),d={color:"#111827",font:{size:12,weight:"bold"},backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:u=>{var n;return((n=u==null?void 0:u.dataset)==null?void 0:n.borderColor)||"#111827"},borderWidth:1,borderRadius:4,padding:4,offset:8,formatter:u=>u==null||isNaN(u)?"":y(u),display:u=>{var G,q,F,ee;if(((q=(G=u==null?void 0:u.chart)==null?void 0:G.config)==null?void 0:q.type)!=="line")return!1;const E=(ee=(F=u==null?void 0:u.dataset)==null?void 0:F.data)==null?void 0:ee[u.dataIndex];return E!=null&&!isNaN(E)&&isFinite(E)}};X(()=>{var u;return((u=e.meta)==null?void 0:u.weekNumber)??"‚Äî"});const m=()=>{var n,E;const u=((n=e.meta)==null?void 0:n.weeks)||[];return u.length>0?u.map(G=>`–ù–µ–¥–µ–ª—è ${G.weekNumber}`):[(E=e.meta)!=null&&E.weekNumber?`–ù–µ–¥–µ–ª—è ${e.meta.weekNumber}`:"–ù–µ–¥–µ–ª—è"]};function p(u,n,E,G=.3,q=0){if(!n)return((b,i)=>{const h=parseInt(b.slice(1,3),16),A=parseInt(b.slice(3,5),16),x=parseInt(b.slice(5,7),16);return`rgba(${h}, ${A}, ${x}, ${i})`})(E,G);const F=(le,b)=>{const i=parseInt(le.slice(1,3),16),h=parseInt(le.slice(3,5),16),A=parseInt(le.slice(5,7),16);return`rgba(${i}, ${h}, ${A}, ${b})`},ee=u.createLinearGradient(0,n.bottom,0,n.top);return ee.addColorStop(0,F(E,G)),ee.addColorStop(1,F(E,q)),ee}const S=X(()=>{var F,ee,le,b;const u=m(),n=Array.isArray((F=e.data.series)==null?void 0:F.new)&&e.data.series.new.length>0?e.data.series.new:[e.data.newTickets??0],E=Array.isArray((ee=e.data.series)==null?void 0:ee.closed)&&e.data.series.closed.length>0?e.data.series.closed:[e.data.closedTickets??0],G=Array.isArray((le=e.data.series)==null?void 0:le.closedCreatedThisWeek)&&e.data.series.closedCreatedThisWeek.length>0?e.data.series.closedCreatedThisWeek:[e.data.closedTicketsCreatedThisWeek??0],q=Array.isArray((b=e.data.series)==null?void 0:b.closedCreatedOtherWeek)&&e.data.series.closedCreatedOtherWeek.length>0?e.data.series.closedCreatedOtherWeek:[e.data.closedTicketsCreatedOtherWeek??0];return{labels:u,datasets:[{label:"–ù–æ–≤—ã–µ",data:n,backgroundColor:i=>{const h=i.chart,{ctx:A,chartArea:x}=h;return p(A,x,T.primary)},borderColor:T.primary,borderWidth:3,tension:.4,fill:!0,pointRadius:4,pointBorderWidth:1,pointBorderColor:T.primary,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.primary,pointBackgroundColor:T.primary,datalabels:{...d,anchor:"end",align:"top",offset:10,color:T.primary,borderColor:T.primary}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (–≤—Å–µ)",data:E,backgroundColor:i=>{const h=i.chart,{ctx:A,chartArea:x}=h;return p(A,x,T.success)},borderColor:T.success,borderWidth:3,tension:.4,fill:!0,pointRadius:4,pointBorderWidth:1,pointBorderColor:T.success,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.success,pointBackgroundColor:T.success,datalabels:{...d,anchor:"start",align:"bottom",offset:10,color:T.success,borderColor:T.success}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:G,backgroundColor:T.successLight,borderColor:T.successLight,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:T.successLight,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.successLight,pointBackgroundColor:T.successLight,datalabels:{...d,anchor:"end",align:"bottom",offset:8,color:T.successLight,borderColor:T.successLight}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:q,backgroundColor:T.warning,borderColor:T.warning,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:T.warning,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.warning,pointBackgroundColor:T.warning,datalabels:{...d,anchor:"end",align:"bottom",offset:8,color:T.warning,borderColor:T.warning}}]}}),L=X(()=>{var F,ee,le,b,i;const u=m(),n=Array.isArray((F=e.data.series)==null?void 0:F.carryover)&&e.data.series.carryover.length>0?e.data.series.carryover:[e.data.carryoverTickets??0],E=Array.isArray((ee=e.data.series)==null?void 0:ee.carryoverCreatedThisWeek)&&e.data.series.carryoverCreatedThisWeek.length>0?e.data.series.carryoverCreatedThisWeek:[e.data.carryoverTicketsCreatedThisWeek??0],G=Array.isArray((le=e.data.series)==null?void 0:le.carryoverCreatedPreviousWeek)&&e.data.series.carryoverCreatedPreviousWeek.length>0?e.data.series.carryoverCreatedPreviousWeek:[e.data.carryoverTicketsCreatedPreviousWeek??0],q=Array.isArray((b=e.data.series)==null?void 0:b.carryoverCreatedOlder)&&e.data.series.carryoverCreatedOlder.length>0?e.data.series.carryoverCreatedOlder:[e.data.carryoverTicketsCreatedOlder??0];return Array.isArray((i=e.data.series)==null?void 0:i.carryoverCreatedOtherWeek)&&e.data.series.carryoverCreatedOtherWeek.length>0?e.data.series.carryoverCreatedOtherWeek:e.data.carryoverTicketsCreatedOtherWeek,{labels:u,datasets:[{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (–≤—Å–µ)",data:n,backgroundColor:h=>{const A=h.chart,{ctx:x,chartArea:Y}=A;return p(x,Y,T.carryover)},borderColor:T.carryover,borderWidth:3,tension:.4,fill:!0,pointRadius:4,pointBorderWidth:1,pointBorderColor:T.carryover,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.carryover,pointBackgroundColor:T.carryover,datalabels:{...d,anchor:"end",align:"top",offset:4,color:T.carryover,borderColor:T.carryover}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:E,backgroundColor:T.carryoverLight,borderColor:T.carryoverLight,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:T.carryoverLight,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.carryoverLight,pointBackgroundColor:T.carryoverLight,datalabels:{...d,anchor:"end",align:"top",offset:6,color:T.carryoverLight,borderColor:T.carryoverLight}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–µ–π)",data:G,backgroundColor:T.warning,borderColor:T.warning,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:T.warning,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.warning,pointBackgroundColor:T.warning,datalabels:{...d,anchor:"end",align:"top",offset:6,color:T.warning,borderColor:T.warning}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –Ω–µ–¥–µ–ª—è–º–∏)",data:q,backgroundColor:T.carryoverDark,borderColor:T.carryoverDark,borderWidth:2,tension:.4,borderDash:[8,4],fill:!1,pointRadius:3,pointBorderWidth:1,pointBorderColor:T.carryoverDark,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.carryoverDark,pointBackgroundColor:T.carryoverDark,datalabels:{...d,anchor:"end",align:"top",offset:6,color:T.carryoverDark,borderColor:T.carryoverDark}}]}}),ae=X(()=>{var h,A,x,Y,I,j,B,ie,he,be,se;const u=((h=e.meta)==null?void 0:h.weeks)||[],n=u.length>0?u.map(ye=>`–ù–µ–¥–µ–ª—è ${ye.weekNumber}`):[(A=e.meta)!=null&&A.weekNumber?`–ù–µ–¥–µ–ª—è ${e.meta.weekNumber}`:"–ù–µ–¥–µ–ª—è"],E=Array.isArray((x=e.data.series)==null?void 0:x.new)&&e.data.series.new.length>0?e.data.series.new:[e.data.newTickets??0],G=Array.isArray((Y=e.data.series)==null?void 0:Y.closed)&&e.data.series.closed.length>0?e.data.series.closed:[e.data.closedTickets??0],q=Array.isArray((I=e.data.series)==null?void 0:I.closedCreatedThisWeek)&&e.data.series.closedCreatedThisWeek.length>0?e.data.series.closedCreatedThisWeek:[e.data.closedTicketsCreatedThisWeek??0],F=Array.isArray((j=e.data.series)==null?void 0:j.closedCreatedOtherWeek)&&e.data.series.closedCreatedOtherWeek.length>0?e.data.series.closedCreatedOtherWeek:[e.data.closedTicketsCreatedOtherWeek??0],ee=Array.isArray((B=e.data.series)==null?void 0:B.carryover)&&e.data.series.carryover.length>0?e.data.series.carryover:[e.data.carryoverTickets??0],le=Array.isArray((ie=e.data.series)==null?void 0:ie.carryoverCreatedThisWeek)&&e.data.series.carryoverCreatedThisWeek.length>0?e.data.series.carryoverCreatedThisWeek:[e.data.carryoverTicketsCreatedThisWeek??0],b=Array.isArray((he=e.data.series)==null?void 0:he.carryoverCreatedPreviousWeek)&&e.data.series.carryoverCreatedPreviousWeek.length>0?e.data.series.carryoverCreatedPreviousWeek:[e.data.carryoverTicketsCreatedPreviousWeek??0],i=Array.isArray((be=e.data.series)==null?void 0:be.carryoverCreatedOlder)&&e.data.series.carryoverCreatedOlder.length>0?e.data.series.carryoverCreatedOlder:[e.data.carryoverTicketsCreatedOlder??0];return Array.isArray((se=e.data.series)==null?void 0:se.carryoverCreatedOtherWeek)&&e.data.series.carryoverCreatedOtherWeek.length>0?e.data.series.carryoverCreatedOtherWeek:e.data.carryoverTicketsCreatedOtherWeek,{labels:n,datasets:[{label:"–ù–æ–≤—ã–µ",data:E,backgroundColor:T.primary,borderColor:T.primary,tension:.3,fill:!1,pointRadius:4,pointBorderWidth:1,pointBorderColor:T.primary,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.primary,pointBackgroundColor:T.primary,datalabels:{...d,anchor:"end",align:"top",offset:10,color:T.primary,borderColor:T.primary}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (–≤—Å–µ)",data:G,backgroundColor:T.success,borderColor:T.success,tension:.3,fill:!1,pointRadius:4,pointBorderWidth:1,pointBorderColor:T.success,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.success,pointBackgroundColor:T.success,datalabels:{...d,anchor:"start",align:"bottom",offset:10,color:T.success,borderColor:T.success}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:q,backgroundColor:T.successLight,borderColor:T.successLight,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:T.successLight,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.successLight,pointBackgroundColor:T.successLight,datalabels:{...d,anchor:"end",align:"bottom",offset:8,color:T.successLight,borderColor:T.successLight}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ (—Å–æ–∑–¥–∞–Ω—ã –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:F,backgroundColor:T.warning,borderColor:T.warning,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:T.warning,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.warning,pointBackgroundColor:T.warning,datalabels:{...d,anchor:"end",align:"bottom",offset:8,color:T.warning,borderColor:T.warning}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (–≤—Å–µ)",data:ee,backgroundColor:T.carryover,borderColor:T.carryover,tension:.3,fill:!1,pointRadius:4,pointBorderWidth:1,pointBorderColor:T.carryover,pointHoverRadius:6,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.carryover,pointBackgroundColor:T.carryover,datalabels:{...d,anchor:"end",align:"top",offset:4,color:T.carryover,borderColor:T.carryover}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π)",data:le,backgroundColor:T.carryoverLight,borderColor:T.carryoverLight,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:T.carryoverLight,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.carryoverLight,pointBackgroundColor:T.carryoverLight,datalabels:{...d,anchor:"end",align:"top",offset:6,color:T.carryoverLight,borderColor:T.carryoverLight}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–µ–π)",data:b,backgroundColor:T.warning,borderColor:T.warning,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:T.warning,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.warning,pointBackgroundColor:T.warning,datalabels:{...d,anchor:"end",align:"top",offset:6,color:T.warning,borderColor:T.warning}},{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ (—Å–æ–∑–¥–∞–Ω—ã –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –Ω–µ–¥–µ–ª—è–º–∏)",data:i,backgroundColor:T.carryoverDark,borderColor:T.carryoverDark,tension:.3,fill:!1,borderDash:[5,5],pointRadius:3,pointBorderWidth:1,pointBorderColor:T.carryoverDark,pointHoverRadius:5,pointHoverBorderWidth:2,pointHoverBorderColor:"#ffffff",pointHoverBackgroundColor:T.carryoverDark,pointBackgroundColor:T.carryoverDark,datalabels:{...d,anchor:"end",align:"top",offset:6,color:T.carryoverDark,borderColor:T.carryoverDark}}]}}),re=X(()=>({labels:["–ù–æ–≤—ã–µ","–ó–∞–∫—Ä—ã—Ç—ã–µ","–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ"],datasets:[{data:[e.data.newTickets??0,e.data.closedTickets??0,e.data.carryoverTickets??0],backgroundColor:[T.primary,T.success,T.carryover],borderWidth:1}]})),O=X(()=>{switch(k.value){case"line":return Pe;case"bar":return ar;case"doughnut":return rr;default:return Pe}}),N=X(()=>k.value==="doughnut"?re.value:ae.value),C=u=>{if(!u)return"‚Äî";try{return new Date(u).toLocaleDateString("ru-RU",{day:"2-digit",month:"short"})}catch{return u}};function y(u){return u==null||isNaN(u)?"0":u>=1e3?u.toLocaleString("ru-RU"):u.toString()}function c(u){const n=u%10,E=u%100;return E>=11&&E<=14?"—Ç–∏–∫–µ—Ç–æ–≤":n===1?"—Ç–∏–∫–µ—Ç":n>=2&&n<=4?"—Ç–∏–∫–µ—Ç–∞":"—Ç–∏–∫–µ—Ç–æ–≤"}const _=X(()=>({responsive:!0,maintainAspectRatio:!1,resizeDelay:0,animation:{duration:800,easing:"easeOutQuart"},interaction:{intersect:!1,mode:"index"},plugins:{datalabels:{...d,anchor:"end",align:"top"},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 0.98)",titleColor:"#111827",bodyColor:"#374151",borderColor:"#e5e7eb",borderWidth:1,cornerRadius:8,padding:16,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},displayColors:!0,boxPadding:6,usePointStyle:!0,animation:{duration:300,easing:"easeOutQuart"},callbacks:{title:u=>{var ee,le,b,i,h,A;if(!u||u.length===0)return"";const n=(ee=u[0])==null?void 0:ee.dataIndex,E=((le=e.meta)==null?void 0:le.weeks)||[];if(E.length>0&&n!==void 0&&E[n]){const x=E[n];return`–ù–µ–¥–µ–ª—è ${x.weekNumber} (${C(x.weekStartUtc)} ‚Äî ${C(x.weekEndUtc)})`}const G=(b=e.meta)==null?void 0:b.weekNumber,q=(i=e.meta)==null?void 0:i.weekStartUtc,F=(h=e.meta)==null?void 0:h.weekEndUtc;return G&&q&&F?`–ù–µ–¥–µ–ª—è ${G} (${C(q)} ‚Äî ${C(F)})`:((A=u[0])==null?void 0:A.label)||""},label:u=>{const n=u.parsed.y,E=u.dataset.label||"";if(n==null||isNaN(n))return`${E}: 0 —Ç–∏–∫–µ—Ç–æ–≤`;const G=y(n),q=c(n);return`${E}: ${G} ${q}`}}},legend:{position:"bottom",labels:{font:{size:13,weight:"500"},padding:12,boxWidth:18,boxHeight:12,usePointStyle:!0,pointStyle:"circle",generateLabels:u=>rt.defaults.plugins.legend.labels.generateLabels(u).map((E,G)=>{const q=u.data.datasets[G],F=u.getDatasetMeta(G),ee=q.borderDash&&Array.isArray(q.borderDash)&&q.borderDash.length>0||q.borderWidth===2||q.fill===!1;return F.hidden?(E.fontColor="#9ca3af",E.textDecoration="line-through",E.opacity=.5):ee?E.fontColor="#6b7280":E.fontColor="#111827",E})},onClick:(u,n)=>{const E=n.datasetIndex;if(E==null){console.warn("[Legend] Invalid datasetIndex:",E);return}const G=u.chart;if(!G){console.warn("[Legend] Chart not found");return}const q=G.getDatasetMeta(E);if(!q){console.warn("[Legend] Dataset meta not found for index:",E);return}q.hidden=!q.hidden,G.update("active")},onHover:(u,n)=>{u.native&&u.native.target&&(u.native.target.style.cursor="pointer")},onLeave:(u,n)=>{u.native&&u.native.target&&(u.native.target.style.cursor="default")}}},scales:k.value==="doughnut"?{}:{y:{beginAtZero:!0,ticks:{precision:0,font:{size:14},padding:10,color:"#374151",callback:u=>u==null||isNaN(u)?"0":y(u)},title:{display:!1},grid:{color:u=>{if(!u||!u.tick||u.tick.value===void 0)return"#e5e7eb";const n=u.tick.value;return isNaN(n)||!isFinite(n)?"#e5e7eb":n===0||n%5===0?"#d1d5db":"#e5e7eb"},lineWidth:u=>{if(!u||!u.tick||u.tick.value===void 0)return 1;const n=u.tick.value;return isNaN(n)||!isFinite(n)?1:n===0||n%5===0?1.5:1}}},x:{ticks:{maxRotation:45,minRotation:45,font:{size:14},padding:10,color:"#374151"},title:{display:!1},grid:{color:"#e5e7eb",lineWidth:1}}}})),$=X(()=>{var u,n,E,G,q,F,ee,le;if((u=e.data)!=null&&u.series){const b=e.data.series,i=Math.max((Array.isArray(b.new)?b.new.length:0)-1,(Array.isArray(b.closed)?b.closed.length:0)-1,(Array.isArray(b.closedCreatedThisWeek)?b.closedCreatedThisWeek.length:0)-1,(Array.isArray(b.closedCreatedOtherWeek)?b.closedCreatedOtherWeek.length:0)-1,(Array.isArray(b.carryover)?b.carryover.length:0)-1,(Array.isArray(b.carryoverCreatedThisWeek)?b.carryoverCreatedThisWeek.length:0)-1,(Array.isArray(b.carryoverCreatedPreviousWeek)?b.carryoverCreatedPreviousWeek.length:0)-1,(Array.isArray(b.carryoverCreatedOlder)?b.carryoverCreatedOlder.length:0)-1,(Array.isArray(b.carryoverCreatedOtherWeek)?b.carryoverCreatedOtherWeek.length:0)-1,-1);if(i>=0){const h={newTickets:Array.isArray(b.new)&&b.new[i]!==void 0?b.new[i]:0,closedTickets:Array.isArray(b.closed)&&b.closed[i]!==void 0?b.closed[i]:0,closedTicketsCreatedThisWeek:Array.isArray(b.closedCreatedThisWeek)&&b.closedCreatedThisWeek[i]!==void 0?b.closedCreatedThisWeek[i]:0,closedTicketsCreatedOtherWeek:Array.isArray(b.closedCreatedOtherWeek)&&b.closedCreatedOtherWeek[i]!==void 0?b.closedCreatedOtherWeek[i]:0,carryoverTickets:Array.isArray(b.carryover)&&b.carryover[i]!==void 0?b.carryover[i]:0,carryoverTicketsCreatedThisWeek:Array.isArray(b.carryoverCreatedThisWeek)&&b.carryoverCreatedThisWeek[i]!==void 0?b.carryoverCreatedThisWeek[i]:0,carryoverTicketsCreatedPreviousWeek:Array.isArray(b.carryoverCreatedPreviousWeek)&&b.carryoverCreatedPreviousWeek[i]!==void 0?b.carryoverCreatedPreviousWeek[i]:0,carryoverTicketsCreatedOlder:Array.isArray(b.carryoverCreatedOlder)&&b.carryoverCreatedOlder[i]!==void 0?b.carryoverCreatedOlder[i]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(b.carryoverCreatedOtherWeek)&&b.carryoverCreatedOtherWeek[i]!==void 0?b.carryoverCreatedOtherWeek[i]:0};if(h.carryoverTickets>0&&console.log("[DEBUG currentWeekData]",{total:h.carryoverTickets,thisWeek:h.carryoverTicketsCreatedThisWeek,previousWeek:h.carryoverTicketsCreatedPreviousWeek,older:h.carryoverTicketsCreatedOlder,otherWeek:h.carryoverTicketsCreatedOtherWeek,sum:h.carryoverTicketsCreatedThisWeek+h.carryoverTicketsCreatedPreviousWeek+h.carryoverTicketsCreatedOlder,lastIndex:i,series:{carryoverCreatedPreviousWeek:b.carryoverCreatedPreviousWeek,carryoverCreatedOlder:b.carryoverCreatedOlder,carryoverCreatedPreviousWeekLength:(n=b.carryoverCreatedPreviousWeek)==null?void 0:n.length,carryoverCreatedOlderLength:(E=b.carryoverCreatedOlder)==null?void 0:E.length,carryoverCreatedPreviousWeekLast:(G=b.carryoverCreatedPreviousWeek)==null?void 0:G[i],carryoverCreatedOlderLast:(q=b.carryoverCreatedOlder)==null?void 0:q[i]},currentWeek:e.data.currentWeek,data:{carryoverTicketsCreatedPreviousWeek:e.data.carryoverTicketsCreatedPreviousWeek,carryoverTicketsCreatedOlder:e.data.carryoverTicketsCreatedOlder}}),h.newTickets>0||h.closedTickets>0||h.carryoverTickets>0)return h}}if((F=e.data)!=null&&F.currentWeek&&typeof e.data.currentWeek=="object"){const b=e.data.currentWeek;if((b.newTickets??0)>0||(b.closedTickets??0)>0||(b.carryoverTickets??0)>0)return b}if((ee=e.data)!=null&&ee.weeksData&&Array.isArray(e.data.weeksData)&&e.data.weeksData.length>0){const b=e.data.weeksData[e.data.weeksData.length-1];if((b.newTickets??0)>0||(b.closedTickets??0)>0||(b.carryoverTickets??0)>0)return b}if((le=e.data)!=null&&le.series){const b=e.data.series,i=Math.max((Array.isArray(b.new)?b.new.length:0)-1,(Array.isArray(b.closed)?b.closed.length:0)-1,(Array.isArray(b.carryover)?b.carryover.length:0)-1,-1);if(i>=0)return{newTickets:Array.isArray(b.new)&&b.new[i]!==void 0?b.new[i]:0,closedTickets:Array.isArray(b.closed)&&b.closed[i]!==void 0?b.closed[i]:0,closedTicketsCreatedThisWeek:Array.isArray(b.closedCreatedThisWeek)&&b.closedCreatedThisWeek[i]!==void 0?b.closedCreatedThisWeek[i]:0,closedTicketsCreatedOtherWeek:Array.isArray(b.closedCreatedOtherWeek)&&b.closedCreatedOtherWeek[i]!==void 0?b.closedCreatedOtherWeek[i]:0,carryoverTickets:Array.isArray(b.carryover)&&b.carryover[i]!==void 0?b.carryover[i]:0,carryoverTicketsCreatedThisWeek:Array.isArray(b.carryoverCreatedThisWeek)&&b.carryoverCreatedThisWeek[i]!==void 0?b.carryoverCreatedThisWeek[i]:0,carryoverTicketsCreatedPreviousWeek:Array.isArray(b.carryoverCreatedPreviousWeek)&&b.carryoverCreatedPreviousWeek[i]!==void 0?b.carryoverCreatedPreviousWeek[i]:0,carryoverTicketsCreatedOlder:Array.isArray(b.carryoverCreatedOlder)&&b.carryoverCreatedOlder[i]!==void 0?b.carryoverCreatedOlder[i]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(b.carryoverCreatedOtherWeek)&&b.carryoverCreatedOtherWeek[i]!==void 0?b.carryoverCreatedOtherWeek[i]:0}}return e.data||{}}),M=X(()=>{var n,E,G,q,F,ee,le,b,i,h;const u=((n=e.meta)==null?void 0:n.weeks)||[];return u.length>0?u[u.length-1]:{weekNumber:((G=(E=e.meta)==null?void 0:E.currentWeek)==null?void 0:G.weekNumber)??((q=e.meta)==null?void 0:q.weekNumber)??null,weekStartUtc:((ee=(F=e.meta)==null?void 0:F.currentWeek)==null?void 0:ee.weekStartUtc)??((le=e.meta)==null?void 0:le.weekStartUtc)??null,weekEndUtc:((i=(b=e.meta)==null?void 0:b.currentWeek)==null?void 0:i.weekEndUtc)??((h=e.meta)==null?void 0:h.weekEndUtc)??null}}),D=X(()=>{var u,n,E,G,q,F,ee,le,b;if((u=e.data)!=null&&u.series){const i=e.data.series,h=Math.max((Array.isArray(i.new)?i.new.length:0)-1,(Array.isArray(i.closed)?i.closed.length:0)-1,(Array.isArray(i.closedCreatedThisWeek)?i.closedCreatedThisWeek.length:0)-1,(Array.isArray(i.closedCreatedOtherWeek)?i.closedCreatedOtherWeek.length:0)-1,(Array.isArray(i.carryover)?i.carryover.length:0)-1,(Array.isArray(i.carryoverCreatedThisWeek)?i.carryoverCreatedThisWeek.length:0)-1,(Array.isArray(i.carryoverCreatedPreviousWeek)?i.carryoverCreatedPreviousWeek.length:0)-1,(Array.isArray(i.carryoverCreatedOlder)?i.carryoverCreatedOlder.length:0)-1,(Array.isArray(i.carryoverCreatedOtherWeek)?i.carryoverCreatedOtherWeek.length:0)-1,-1);if(h>=1){const A=h-1,x=(E=(n=e.meta)==null?void 0:n.weeks)==null?void 0:E[A],Y={weekNumber:(x==null?void 0:x.weekNumber)??null,weekStartUtc:(x==null?void 0:x.weekStartUtc)??null,weekEndUtc:(x==null?void 0:x.weekEndUtc)??null,newTickets:Array.isArray(i.new)&&i.new[A]!==void 0?i.new[A]:0,closedTickets:Array.isArray(i.closed)&&i.closed[A]!==void 0?i.closed[A]:0,closedTicketsCreatedThisWeek:Array.isArray(i.closedCreatedThisWeek)&&i.closedCreatedThisWeek[A]!==void 0?i.closedCreatedThisWeek[A]:0,closedTicketsCreatedOtherWeek:Array.isArray(i.closedCreatedOtherWeek)&&i.closedCreatedOtherWeek[A]!==void 0?i.closedCreatedOtherWeek[A]:0,carryoverTickets:Array.isArray(i.carryover)&&i.carryover[A]!==void 0?i.carryover[A]:0,carryoverTicketsCreatedThisWeek:Array.isArray(i.carryoverCreatedThisWeek)&&i.carryoverCreatedThisWeek[A]!==void 0?i.carryoverCreatedThisWeek[A]:0,carryoverTicketsCreatedPreviousWeek:Array.isArray(i.carryoverCreatedPreviousWeek)&&i.carryoverCreatedPreviousWeek[A]!==void 0?i.carryoverCreatedPreviousWeek[A]:0,carryoverTicketsCreatedOlder:Array.isArray(i.carryoverCreatedOlder)&&i.carryoverCreatedOlder[A]!==void 0?i.carryoverCreatedOlder[A]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(i.carryoverCreatedOtherWeek)&&i.carryoverCreatedOtherWeek[A]!==void 0?i.carryoverCreatedOtherWeek[A]:0};if(Y.newTickets>0||Y.closedTickets>0||Y.carryoverTickets>0)return Y}}if((G=e.data)!=null&&G.weeksData&&Array.isArray(e.data.weeksData)&&e.data.weeksData.length>=2){const i=e.data.weeksData.length-2,h=e.data.weeksData[i],A=(F=(q=e.meta)==null?void 0:q.weeks)==null?void 0:F[i];if((h.newTickets??0)>0||(h.closedTickets??0)>0||(h.carryoverTickets??0)>0)return{weekNumber:h.weekNumber??(A==null?void 0:A.weekNumber)??null,weekStartUtc:(A==null?void 0:A.weekStartUtc)??null,weekEndUtc:(A==null?void 0:A.weekEndUtc)??null,newTickets:h.newTickets??0,closedTickets:h.closedTickets??0,closedTicketsCreatedThisWeek:h.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:h.closedTicketsCreatedOtherWeek??0,carryoverTickets:h.carryoverTickets??0,carryoverTicketsCreatedThisWeek:h.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:h.carryoverTicketsCreatedOtherWeek??0}}if((ee=e.data)!=null&&ee.series){const i=e.data.series,h=Math.max((Array.isArray(i.new)?i.new.length:0)-1,(Array.isArray(i.closed)?i.closed.length:0)-1,(Array.isArray(i.carryover)?i.carryover.length:0)-1,-1);if(h>=1){const A=h-1,x=(b=(le=e.meta)==null?void 0:le.weeks)==null?void 0:b[A];return{weekNumber:(x==null?void 0:x.weekNumber)??null,weekStartUtc:(x==null?void 0:x.weekStartUtc)??null,weekEndUtc:(x==null?void 0:x.weekEndUtc)??null,newTickets:Array.isArray(i.new)&&i.new[A]!==void 0?i.new[A]:0,closedTickets:Array.isArray(i.closed)&&i.closed[A]!==void 0?i.closed[A]:0,closedTicketsCreatedThisWeek:Array.isArray(i.closedCreatedThisWeek)&&i.closedCreatedThisWeek[A]!==void 0?i.closedCreatedThisWeek[A]:0,closedTicketsCreatedOtherWeek:Array.isArray(i.closedCreatedOtherWeek)&&i.closedCreatedOtherWeek[A]!==void 0?i.closedCreatedOtherWeek[A]:0,carryoverTickets:Array.isArray(i.carryover)&&i.carryover[A]!==void 0?i.carryover[A]:0,carryoverTicketsCreatedThisWeek:Array.isArray(i.carryoverCreatedThisWeek)&&i.carryoverCreatedThisWeek[A]!==void 0?i.carryoverCreatedThisWeek[A]:0,carryoverTicketsCreatedPreviousWeek:Array.isArray(i.carryoverCreatedPreviousWeek)&&i.carryoverCreatedPreviousWeek[A]!==void 0?i.carryoverCreatedPreviousWeek[A]:0,carryoverTicketsCreatedOlder:Array.isArray(i.carryoverCreatedOlder)&&i.carryoverCreatedOlder[A]!==void 0?i.carryoverCreatedOlder[A]:0,carryoverTicketsCreatedOtherWeek:Array.isArray(i.carryoverCreatedOtherWeek)&&i.carryoverCreatedOtherWeek[A]!==void 0?i.carryoverCreatedOtherWeek[A]:0}}}return null}),V=X(()=>{var n;const u=(n=e.data)==null?void 0:n.stagesByWeek;return Array.isArray(u)?u:null}),U=X(()=>{var n;const u=V.value;if(u&&u.length>0){const E=u.length-1,G=u[E];if(Array.isArray(G))return G}return((n=e.data)==null?void 0:n.stages)??[]}),P=X(()=>{const u=V.value;if(u&&u.length>=2){const n=u.length-2,E=u[n];if(Array.isArray(E))return E}return[]}),K=X(()=>{var u;return(u=D.value)!=null&&u.weekNumber?`–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–µ–¥–µ–ª–∏ ${D.value.weekNumber}`:"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"});function Z(u,n){if(typeof u!="number"||isNaN(u)||n==null||typeof n!="number"||isNaN(n)||n===0)return null;if(u===n)return 0;const E=(u-n)/n*100;return!isFinite(E)||isNaN(E)?null:E}function H(u){return u==null||isNaN(u)?"":`${u>=0?"+":""}${u.toFixed(1)}%`}const Q=X(()=>{var u,n,E;if((u=e.data)!=null&&u.series){const G=e.data.series,q=Math.max((Array.isArray(G.new)?G.new.length:0)-1,(Array.isArray(G.closed)?G.closed.length:0)-1,(Array.isArray(G.carryover)?G.carryover.length:0)-1,-1);if(q>=2){const F=q-2,ee=(E=(n=e.meta)==null?void 0:n.weeks)==null?void 0:E[F];return{weekNumber:(ee==null?void 0:ee.weekNumber)??null,newTickets:Array.isArray(G.new)&&G.new[F]!==void 0?G.new[F]:0,closedTickets:Array.isArray(G.closed)&&G.closed[F]!==void 0?G.closed[F]:0,carryoverTickets:Array.isArray(G.carryover)&&G.carryover[F]!==void 0?G.carryover[F]:0}}}return null}),f=X(()=>{const u=$.value,n=D.value;return!u||!n?{newTickets:null,closedTickets:null,carryoverTickets:null}:{newTickets:Z(u.newTickets??0,n.newTickets??0),closedTickets:Z(u.closedTickets??0,n.closedTickets??0),carryoverTickets:Z(u.carryoverTickets??0,n.carryoverTickets??0)}}),v=X(()=>{const u=D.value,n=Q.value;return!u||!n?{newTickets:null,closedTickets:null,carryoverTickets:null}:{newTickets:Z(u.newTickets??0,n.newTickets??0),closedTickets:Z(u.closedTickets??0,n.closedTickets??0),carryoverTickets:Z(u.carryoverTickets??0,n.carryoverTickets??0)}});function R(u,n){if(!u||!n)return"";try{const E=new Date(u),G=new Date(n),q=E.getUTCDate(),F=E.toLocaleDateString("ru-RU",{month:"short",timeZone:"UTC"}),ee=E.getUTCFullYear(),le=G.getUTCDate(),b=G.toLocaleDateString("ru-RU",{month:"short",timeZone:"UTC"}),i=G.getUTCFullYear();return ee===i&&F===b?`${q} ‚Äî ${le} ${F}`:ee===i?`${q} ${F} ‚Äî ${le} ${b}`:`${q} ${F} ${ee} ‚Äî ${le} ${b} ${i}`}catch(E){return console.error("[formatWeekDates] Error:",E),""}}const z=u=>{const n=$.value,E=(n==null?void 0:n.newTickets)??0,G=(n==null?void 0:n.closedTickets)??0,q=(n==null?void 0:n.carryoverTickets)??0,F=M.value;u==="new"&&E>0?a("open-stages",{weekNumber:F.weekNumber,weekStartUtc:F.weekStartUtc,weekEndUtc:F.weekEndUtc}):u==="closed"&&G>0?a("open-responsible",{weekNumber:F.weekNumber,weekStartUtc:F.weekStartUtc,weekEndUtc:F.weekEndUtc}):u==="carryover"&&q>0&&a("open-carryover",{weekNumber:F.weekNumber,weekStartUtc:F.weekStartUtc,weekEndUtc:F.weekEndUtc})},te=u=>{const n=D.value;if(!n)return;const E=(n==null?void 0:n.newTickets)??0,G=(n==null?void 0:n.closedTickets)??0,q=(n==null?void 0:n.carryoverTickets)??0,F=s.value;F&&(u==="new"&&E>0?a("open-stages",{weekNumber:F.weekNumber,weekStartUtc:F.weekStartUtc,weekEndUtc:F.weekEndUtc}):u==="closed"&&G>0?a("open-responsible",{weekNumber:F.weekNumber,weekStartUtc:F.weekStartUtc,weekEndUtc:F.weekEndUtc}):u==="carryover"&&q>0&&a("open-carryover",{weekNumber:F.weekNumber,weekStartUtc:F.weekStartUtc,weekEndUtc:F.weekEndUtc}))};return(u,n)=>{var E,G,q,F,ee,le,b,i,h,A,x,Y,I,j,B,ie,he,be,se,ye,We,Ae,oe,ce,ue,_e,Oe,Ue,Ie,xe,Le,Ge,lt,it,ct,dt,ut,kt,vt,ht,yt,mt,pt,gt,ft,bt;return g(),w("div",Or,[r("header",Ur,[r("div",null,[n[6]||(n[6]=r("h2",{class:"ac-chart__title"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),r("p",Ir," –ù–µ–¥–µ–ª—è "+W(((G=(E=o.meta)==null?void 0:E.currentWeek)==null?void 0:G.weekNumber)??((q=o.meta)==null?void 0:q.weekNumber)??"‚Äî")+" ¬∑ "+W((((ee=(F=o.meta)==null?void 0:F.currentWeek)==null?void 0:ee.weekStartUtc)??((le=o.meta)==null?void 0:le.weekStartUtc))||"‚Äî")+" ‚Äî "+W((((i=(b=o.meta)==null?void 0:b.currentWeek)==null?void 0:i.weekEndUtc)??((h=o.meta)==null?void 0:h.weekEndUtc))||"‚Äî")+" (UTC) ",1)]),r("div",Mr,[r("div",Rr,[(g(),w(ke,null,ve(l,ge=>r("button",{key:ge.value,class:pe(["chart-type-btn",{active:k.value===ge.value}]),onClick:vc=>k.value=ge.value},[r("span",xr,W(ge.icon),1),r("span",Lr,W(ge.label),1)],10,Pr)),64))])])]),r("section",Gr,[r("div",Fr,[r("h3",Hr,[n[7]||(n[7]=r("span",{class:"summary-week-block__title-text"},"–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è",-1)),r("span",Vr," –ù–µ–¥–µ–ª—è "+W(M.value.weekNumber??"‚Äî"),1),M.value.weekStartUtc?(g(),w("span",Kr,W(R(M.value.weekStartUtc,M.value.weekEndUtc)),1)):ne("",!0)]),r("div",Yr,[r("div",{class:"summary-card summary-card--new",onClick:n[0]||(n[0]=ge=>z("new"))},[n[8]||(n[8]=r("div",{class:"summary-card__label"},"–ù–æ–≤—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",jr,[r("div",zr,W(((A=$.value)==null?void 0:A.newTickets)??0),1),f.value.newTickets!==null?(g(),w("div",{key:0,class:pe(["percentage-indicator",f.value.newTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((x=D.value)==null?void 0:x.weekNumber)??"‚Äî"}): ${H(f.value.newTickets)}`},[r("span",Zr,W(f.value.newTickets>=0?"‚Üë":"‚Üì"),1),r("span",Xr,W(H(f.value.newTickets)),1),r("span",Jr,"–∫ –Ω–µ–¥–µ–ª–µ "+W(((Y=D.value)==null?void 0:Y.weekNumber)??"‚Äî"),1)],10,qr)):ne("",!0)])]),r("div",{class:"summary-card summary-card--closed-breakdown",onClick:n[1]||(n[1]=ge=>z("closed"))},[n[13]||(n[13]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",Qr,[r("div",ea,W(((I=$.value)==null?void 0:I.closedTickets)??0),1),f.value.closedTickets!==null?(g(),w("div",{key:0,class:pe(["percentage-indicator",f.value.closedTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((j=D.value)==null?void 0:j.weekNumber)??"‚Äî"}): ${H(f.value.closedTickets)}`},[r("span",ra,W(f.value.closedTickets>=0?"‚Üë":"‚Üì"),1),r("span",aa,W(H(f.value.closedTickets)),1),r("span",sa,"–∫ –Ω–µ–¥–µ–ª–µ "+W(((B=D.value)==null?void 0:B.weekNumber)??"‚Äî"),1)],10,ta)):ne("",!0)]),r("div",oa,[r("div",na,[n[9]||(n[9]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",la,W(((ie=$.value)==null?void 0:ie.closedTicketsCreatedThisWeek)??0),1),n[10]||(n[10]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))]),r("div",ia,[n[11]||(n[11]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",ca,W(((he=$.value)==null?void 0:he.closedTicketsCreatedOtherWeek)??0),1),n[12]||(n[12]=r("span",{class:"breakdown-item__label"},"–¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))])])]),r("div",{class:"summary-card summary-card--carryover-breakdown",onClick:n[2]||(n[2]=ge=>z("carryover"))},[n[20]||(n[20]=r("div",{class:"summary-card__label"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ",-1)),r("div",da,[r("div",ua,W(((be=$.value)==null?void 0:be.carryoverTickets)??0),1),f.value.carryoverTickets!==null?(g(),w("div",{key:0,class:pe(["percentage-indicator",f.value.carryoverTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((se=D.value)==null?void 0:se.weekNumber)??"‚Äî"}): ${H(f.value.carryoverTickets)}`},[r("span",va,W(f.value.carryoverTickets>=0?"‚Üë":"‚Üì"),1),r("span",ha,W(H(f.value.carryoverTickets)),1),r("span",ya,"–∫ –Ω–µ–¥–µ–ª–µ "+W(((ye=D.value)==null?void 0:ye.weekNumber)??"‚Äî"),1)],10,ka)):ne("",!0)]),r("div",ma,[r("div",pa,[n[14]||(n[14]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",ga,W(((We=$.value)==null?void 0:We.carryoverTicketsCreatedThisWeek)??0),1),n[15]||(n[15]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–∏",-1))]),r("div",fa,[n[16]||(n[16]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",ba,W(((Ae=$.value)==null?void 0:Ae.carryoverTicketsCreatedPreviousWeek)??0),1),n[17]||(n[17]=r("span",{class:"breakdown-item__label"},"–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏",-1))]),r("div",_a,[n[18]||(n[18]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",wa,W(((oe=$.value)==null?void 0:oe.carryoverTicketsCreatedOlder)??0),1),n[19]||(n[19]=r("span",{class:"breakdown-item__label"},"–æ—Å—Ç–∞–ª—å–Ω—ã–µ",-1))])])]),r("div",Ca,[n[21]||(n[21]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),r("div",Ta,[(g(!0),w(ke,null,ve(U.value,ge=>(g(),w("span",{key:ge.stageId,class:"stage-tag"},W(ge.stageName||ge.stageId)+" ‚Äî "+W(ge.count),1))),128)),!U.value||U.value.length===0?(g(),w("span",Wa," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):ne("",!0)])])])]),D.value?(g(),w("div",Aa,[...n[22]||(n[22]=[r("div",{class:"summary-week-divider__line"},null,-1),r("div",{class:"summary-week-divider__label"},"–ü—Ä–µ–¥—ã–¥—É—â–∞—è –Ω–µ–¥–µ–ª—è",-1)])])):ne("",!0),D.value?(g(),w("div",$a,[r("h3",Sa,[n[23]||(n[23]=r("span",{class:"summary-week-block__title-text"},"–ü—Ä–µ–¥—ã–¥—É—â–∞—è –Ω–µ–¥–µ–ª—è",-1)),r("span",Da," –ù–µ–¥–µ–ª—è "+W(D.value.weekNumber??"‚Äî"),1),D.value.weekStartUtc?(g(),w("span",Ea,W(R(D.value.weekStartUtc,D.value.weekEndUtc)),1)):ne("",!0)]),r("div",Na,[r("div",{class:"summary-card summary-card--new summary-card--previous summary-card--clickable",onClick:n[3]||(n[3]=ge=>te("new"))},[n[24]||(n[24]=r("div",{class:"summary-card__label"},"–ù–æ–≤—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",Ba,[r("div",Oa,[r("div",Ua,[r("div",Ia,W(((ce=D.value)==null?void 0:ce.newTickets)??0),1),r("span",Ma,"–ù–µ–¥–µ–ª—è "+W(((ue=D.value)==null?void 0:ue.weekNumber)??"‚Äî"),1)]),r("div",Ra,[r("div",Pa,W(((_e=Q.value)==null?void 0:_e.newTickets)??0),1),r("span",xa,"–ù–µ–¥–µ–ª—è "+W(((Oe=Q.value)==null?void 0:Oe.weekNumber)??"‚Äî"),1)])]),v.value.newTickets!==null?(g(),w("div",{key:0,class:pe(["percentage-indicator",v.value.newTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((Ue=Q.value)==null?void 0:Ue.weekNumber)??"‚Äî"}): ${H(v.value.newTickets)}`},[r("span",Ga,W(v.value.newTickets>=0?"‚Üë":"‚Üì"),1),r("span",Fa,W(H(v.value.newTickets)),1),r("span",Ha,"–∫ –Ω–µ–¥–µ–ª–µ "+W(((Ie=Q.value)==null?void 0:Ie.weekNumber)??"‚Äî"),1)],10,La)):ne("",!0)])]),r("div",{class:"summary-card summary-card--closed-breakdown summary-card--previous summary-card--clickable",onClick:n[4]||(n[4]=ge=>te("closed"))},[n[29]||(n[29]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("div",Va,[r("div",Ka,[r("div",Ya,[r("div",ja,W(((xe=D.value)==null?void 0:xe.closedTickets)??0),1),r("span",za,"–ù–µ–¥–µ–ª—è "+W(((Le=D.value)==null?void 0:Le.weekNumber)??"‚Äî"),1)]),r("div",qa,[r("div",Za,W(((Ge=Q.value)==null?void 0:Ge.closedTickets)??0),1),r("span",Xa,"–ù–µ–¥–µ–ª—è "+W(((lt=Q.value)==null?void 0:lt.weekNumber)??"‚Äî"),1)])]),v.value.closedTickets!==null?(g(),w("div",{key:0,class:pe(["percentage-indicator",v.value.closedTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((it=Q.value)==null?void 0:it.weekNumber)??"‚Äî"}): ${H(v.value.closedTickets)}`},[r("span",Qa,W(v.value.closedTickets>=0?"‚Üë":"‚Üì"),1),r("span",es,W(H(v.value.closedTickets)),1),r("span",ts,"–∫ –Ω–µ–¥–µ–ª–µ "+W(((ct=Q.value)==null?void 0:ct.weekNumber)??"‚Äî"),1)],10,Ja)):ne("",!0)]),r("div",rs,[r("div",as,[n[25]||(n[25]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",ss,W(((dt=D.value)==null?void 0:dt.closedTicketsCreatedThisWeek)??0),1),n[26]||(n[26]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))]),r("div",os,[n[27]||(n[27]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",ns,W(((ut=D.value)==null?void 0:ut.closedTicketsCreatedOtherWeek)??0),1),n[28]||(n[28]=r("span",{class:"breakdown-item__label"},"–¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ–π",-1))])])]),r("div",{class:"summary-card summary-card--carryover-breakdown summary-card--previous summary-card--clickable",onClick:n[5]||(n[5]=ge=>te("carryover"))},[n[36]||(n[36]=r("div",{class:"summary-card__label"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ",-1)),r("div",ls,[r("div",is,[r("div",cs,[r("div",ds,W(((kt=D.value)==null?void 0:kt.carryoverTickets)??0),1),r("span",us,"–ù–µ–¥–µ–ª—è "+W(((vt=D.value)==null?void 0:vt.weekNumber)??"‚Äî"),1)]),r("div",ks,[r("div",vs,W(((ht=Q.value)==null?void 0:ht.carryoverTickets)??0),1),r("span",hs,"–ù–µ–¥–µ–ª—è "+W(((yt=Q.value)==null?void 0:yt.weekNumber)??"‚Äî"),1)])]),v.value.carryoverTickets!==null?(g(),w("div",{key:0,class:pe(["percentage-indicator",v.value.carryoverTickets>=0?"percentage-indicator--positive":"percentage-indicator--negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ù–µ–¥–µ–ª—è ${((mt=Q.value)==null?void 0:mt.weekNumber)??"‚Äî"}): ${H(v.value.carryoverTickets)}`},[r("span",ms,W(v.value.carryoverTickets>=0?"‚Üë":"‚Üì"),1),r("span",ps,W(H(v.value.carryoverTickets)),1),r("span",gs,"–∫ –Ω–µ–¥–µ–ª–µ "+W(((pt=Q.value)==null?void 0:pt.weekNumber)??"‚Äî"),1)],10,ys)):ne("",!0)]),r("div",fs,[r("div",bs,[n[30]||(n[30]=r("span",{class:"breakdown-item__icon"},"‚úì",-1)),r("span",_s,W(((gt=D.value)==null?void 0:gt.carryoverTicketsCreatedThisWeek)??0),1),n[31]||(n[31]=r("span",{class:"breakdown-item__label"},"—ç—Ç–æ–π –Ω–µ–¥–µ–ª–∏",-1))]),r("div",ws,[n[32]||(n[32]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",Cs,W(((ft=D.value)==null?void 0:ft.carryoverTicketsCreatedPreviousWeek)??0),1),n[33]||(n[33]=r("span",{class:"breakdown-item__label"},"–ø—Ä–µ–¥—ã–¥—É—â–µ–π –Ω–µ–¥–µ–ª–∏",-1))]),r("div",Ts,[n[34]||(n[34]=r("span",{class:"breakdown-item__icon"},"‚Üª",-1)),r("span",Ws,W(((bt=D.value)==null?void 0:bt.carryoverTicketsCreatedOlder)??0),1),n[35]||(n[35]=r("span",{class:"breakdown-item__label"},"–æ—Å—Ç–∞–ª—å–Ω—ã–µ",-1))])])]),r("div",As,[n[37]||(n[37]=r("div",{class:"summary-card__label"},"–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),r("div",$s,[(g(!0),w(ke,null,ve(P.value,ge=>(g(),w("span",{key:ge.stageId,class:"stage-tag"},W(ge.stageName||ge.stageId)+" ‚Äî "+W(ge.count),1))),128)),!P.value||P.value.length===0?(g(),w("span",Ss,W(K.value),1)):ne("",!0)])])])])):ne("",!0)]),r("div",Ds,[k.value==="line"?(g(),w("div",Es,[r("div",Ns,[n[38]||(n[38]=r("h3",{class:"chart-subtitle"},"–ù–æ–≤—ã–µ –∏ –ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã",-1)),r("div",Bs,[de(Xe(Pe),{data:S.value,options:_.value},null,8,["data","options"])])]),r("div",Os,[n[39]||(n[39]=r("h3",{class:"chart-subtitle"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã",-1)),r("div",Us,[de(Xe(Pe),{data:L.value,options:_.value},null,8,["data","options"])])])])):(g(),$e(Qt(O.value),{key:1,data:N.value,options:_.value},null,8,["data","options"]))])])}}},Ms=Se(Is,[["__scopeId","data-v-3666e13a"]]),Rs={class:"summary-cards-months"},Ps={class:"summary-card summary-card--new"},xs={class:"card-content"},Ls={class:"card-main-value"},Gs=["title"],Fs={class:"card-month-breakdown"},Hs={class:"month-name"},Vs={class:"month-value"},Ks={key:0,class:"month-item month-item--empty"},Ys={class:"summary-card summary-card--closed"},js={class:"card-content"},zs={class:"card-main-value"},qs=["title"],Zs={class:"card-month-breakdown-hierarchical"},Xs={class:"month-header"},Js={class:"month-name"},Qs={class:"month-value"},eo={class:"month-breakdown"},to={class:"breakdown-item breakdown-this-week"},ro={class:"breakdown-value"},ao={class:"breakdown-item breakdown-other-week"},so={class:"breakdown-value"},oo={key:0,class:"month-item-hierarchical month-item--empty"},no={class:"summary-card summary-card--carryover"},lo={class:"card-content"},io={class:"card-current-value"},co={class:"current-value"},uo=["title"],ko={class:"card-month-breakdown"},vo={class:"month-name"},ho={class:"month-value"},yo={key:0,class:"month-item month-item--empty"},mo={class:"summary-card summary-card--stages"},po={class:"card-content"},go={class:"stages-list"},fo={class:"stage-icon"},bo={class:"stage-name"},_o={class:"stage-value"},wo={key:0,class:"stage-item stage-item--empty"},Co={__name:"SummaryCardsMonths",props:{data:{type:Object,required:!0,default:()=>({newTickets:0,newTicketsByMonth:[],closedTickets:0,closedTicketsByMonth:[],carryoverTickets:0,carryoverTicketsByMonth:[],stages:[]})}},setup(o){const t=o;function e(C){return C==null||isNaN(C)?"0":C>=1e6?(C/1e6).toFixed(1)+"M":C>=1e3?C.toLocaleString("ru-RU"):C.toString()}function a(C){return C==null||isNaN(C)?"":`${C>=0?"+":""}${C.toFixed(1)}%`}function s(C,y){if(typeof C!="number"||isNaN(C)||y==null||typeof y!="number"||isNaN(y)||y===0)return null;if(C===y)return 0;const c=(C-y)/y*100;return!isFinite(c)||isNaN(c)?null:c}const l=X(()=>{var C;return((C=t.data)==null?void 0:C.newTickets)||0}),k=X(()=>e(l.value)),d=X(()=>{var C;return((C=t.data)==null?void 0:C.newTicketsByMonth)||[]}),m=X(()=>{var C;return((C=t.data)==null?void 0:C.closedTicketsByMonth)||[]}),p=X(()=>{var C;return((C=t.data)==null?void 0:C.carryoverTicketsByMonth)||[]}),S=X(()=>{const C=p.value;if(C.length===0)return 0;const y=C[C.length-1];return(y==null?void 0:y.count)||0}),L=X(()=>{var c,_,$,M;const C=typeof((c=t.data)==null?void 0:c.newTickets)=="number"?t.data.newTickets:parseInt((_=t.data)==null?void 0:_.newTickets)||0,y=(M=($=t.data)==null?void 0:$.previousPeriodData)==null?void 0:M.newTickets;return s(C,y)}),ae=X(()=>{var c,_,$,M;const C=typeof((c=t.data)==null?void 0:c.closedTickets)=="number"?t.data.closedTickets:parseInt((_=t.data)==null?void 0:_.closedTickets)||0,y=(M=($=t.data)==null?void 0:$.previousPeriodData)==null?void 0:M.closedTickets;return s(C,y)}),re=X(()=>{var _;const C=S.value,y=p.value,c=y.length>0?((_=y[0])==null?void 0:_.count)||0:null;return s(C,c)});function O(C){return{"DT140_12:SUCCESS":"stage-success","DT140_12:FAIL":"stage-fail","DT140_12:UC_0GBU8Z":"stage-other"}[C]||""}function N(C){return{"DT140_12:SUCCESS":"‚úì","DT140_12:FAIL":"‚úó","DT140_12:UC_0GBU8Z":"‚ö†"}[C]||"‚Ä¢"}return(C,y)=>(g(),w("div",Rs,[r("div",Ps,[y[0]||(y[0]=r("h3",{class:"card-title"},"–ù–æ–≤—ã–µ –∑–∞ –ø–µ—Ä–∏–æ–¥",-1)),r("div",xs,[r("div",Ls,[Te(W(k.value)+" ",1),L.value!==null?(g(),w("span",{key:0,class:pe(["percentage-badge",L.value>=0?"positive":"negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞: ${a(L.value)}`},W(a(L.value)),11,Gs)):ne("",!0)]),r("div",Fs,[(g(!0),w(ke,null,ve(d.value,c=>(g(),w("div",{key:`new-${c.month}`,class:"month-item"},[r("span",Hs,W(c.monthName)+":",1),r("span",Vs,W(e(c.count)),1)]))),128)),d.value.length===0?(g(),w("div",Ks," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):ne("",!0)])])]),r("div",Ys,[y[5]||(y[5]=r("h3",{class:"card-title"},"–ó–∞–∫—Ä—ã—Ç—ã–µ –≤—Å–µ–≥–æ",-1)),r("div",js,[r("div",zs,[Te(W(e(o.data.closedTickets||0))+" ",1),ae.value!==null?(g(),w("span",{key:0,class:pe(["percentage-badge",ae.value>=0?"positive":"negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞: ${a(ae.value)}`},W(a(ae.value)),11,qs)):ne("",!0)]),r("div",Zs,[(g(!0),w(ke,null,ve(m.value,c=>(g(),w("div",{key:`closed-${c.month}`,class:"month-item-hierarchical"},[r("div",Xs,[r("span",Js,W(c.monthName)+":",1),r("span",Qs,W(e(c.count||0)),1)]),r("div",eo,[r("div",to,[y[1]||(y[1]=r("span",{class:"breakdown-icon"},"‚úì",-1)),y[2]||(y[2]=r("span",{class:"breakdown-label"},"—ç—Ç–æ–≥–æ –º–µ—Å—è—Ü–∞:",-1)),r("span",ro,W(e(c.closedCreatedThisWeek||0)),1)]),r("div",ao,[y[3]||(y[3]=r("span",{class:"breakdown-icon"},"‚Üª",-1)),y[4]||(y[4]=r("span",{class:"breakdown-label"},"–¥—Ä—É–≥–æ–≥–æ –º–µ—Å—è—Ü–∞:",-1)),r("span",so,W(e(c.closedCreatedOtherWeek||0)),1)])])]))),128)),m.value.length===0?(g(),w("div",oo," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):ne("",!0)])])]),r("div",no,[y[7]||(y[7]=r("h3",{class:"card-title"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ –≤—Å–µ–≥–æ",-1)),y[8]||(y[8]=r("p",{class:"card-hint"},"–ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã —Å–µ–∫—Ç–æ—Ä–∞ –≤ —Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö —Å—Ç–∞–¥–∏—è—Ö (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)",-1)),r("div",lo,[r("div",io,[y[6]||(y[6]=r("span",{class:"current-label"},"–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:",-1)),r("span",co,[Te(W(e(S.value))+" ",1),re.value!==null?(g(),w("span",{key:0,class:pe(["percentage-badge",re.value>=0?"positive":"negative"]),title:`–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞: ${a(re.value)}`},W(a(re.value)),11,uo)):ne("",!0)])]),r("div",ko,[(g(!0),w(ke,null,ve(p.value,c=>(g(),w("div",{key:`carryover-${c.month}`,class:"month-item"},[r("span",vo,W(c.monthName)+":",1),r("span",ho,W(e(c.count||0)),1)]))),128)),p.value.length===0?(g(),w("div",yo," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö ")):ne("",!0)])])]),r("div",mo,[y[10]||(y[10]=r("h3",{class:"card-title"},"–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),r("div",po,[r("div",go,[(g(!0),w(ke,null,ve(o.data.stages||[],c=>(g(),w("div",{key:c.stageId,class:pe(["stage-item",O(c.stageId)])},[r("span",fo,W(N(c.stageId)),1),r("span",bo,W(c.stageName||c.stageId)+":",1),r("span",_o,W(e(c.count||0)),1)],2))),128)),!o.data.stages||o.data.stages.length===0?(g(),w("div",wo,[...y[9]||(y[9]=[r("span",{class:"stage-name"},"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö",-1)])])):ne("",!0)])])])]))}},To=Se(Co,[["__scopeId","data-v-15d88b90"]]),Wo={class:"line-chart-months"},Ao={class:"chart-section"},$o={class:"chart-title"},So={key:0,class:"chart-period"},Do={class:"chart-wrapper"},Eo={class:"chart-container"},No={class:"chart-summary"},Bo={class:"summary-numbers"},Oo={class:"summary-row"},Uo={class:"summary-values"},Io={class:"summary-row"},Mo={class:"summary-values"},Ro={class:"summary-analysis"},Po=["innerHTML"],xo={class:"chart-section"},Lo={class:"chart-title"},Go={key:0,class:"chart-period"},Fo={class:"chart-wrapper"},Ho={class:"chart-container"},Vo={class:"chart-analysis"},Ko={class:"analysis-content"},Yo=["innerHTML"],jo={class:"chart-table-section"},zo={class:"chart-table-wrapper"},qo={class:"data-table"},Zo={class:"data-row data-row--new"},Xo={class:"data-row data-row--closed"},Jo={class:"data-row data-row--carryover"},Qo={__name:"LineChartMonths",props:{data:{type:Object,required:!0,default:()=>({newTicketsByMonth:[],closedTicketsByMonth:[],carryoverTicketsByMonth:[]})},meta:{type:Object,default:()=>({months:[]})}},setup(o){rt.register(Lt);const t=o;function e(O){return O==null||isNaN(O)?"0":O>=1e3?O.toLocaleString("ru-RU"):O.toString()}const a=X(()=>{var N,C,y;const O=new Set;return(N=t.data.newTicketsByMonth)==null||N.forEach(c=>{c.weeks&&Array.isArray(c.weeks)&&c.weeks.forEach(_=>{_&&_.weekNumber&&O.add(_.weekNumber)})}),(C=t.data.closedTicketsByMonth)==null||C.forEach(c=>{c.weeks&&Array.isArray(c.weeks)&&c.weeks.forEach(_=>{_&&_.weekNumber&&O.add(_.weekNumber)})}),(y=t.data.carryoverTicketsByMonth)==null||y.forEach(c=>{c.weeks&&Array.isArray(c.weeks)&&c.weeks.forEach(_=>{_&&_.weekNumber&&O.add(_.weekNumber)})}),Array.from(O).sort((c,_)=>c-_)}),s=X(()=>{const O=t.data.newTicketsByMonth||[],N=O.map(c=>c.monthName||`–ú–µ—Å—è—Ü ${c.month}`),C=O.map(c=>c.count||0),y=(t.data.closedTicketsByMonth||[]).map(c=>c.count||0);return{labels:N,datasets:[{label:"–ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã",data:C,borderColor:T.primary,backgroundColor:"rgba(0, 123, 255, 0.1)",tension:.4,fill:!1,datalabels:{anchor:"end",align:"top",offset:10,color:T.primary,font:{size:12,weight:"bold"},backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:T.primary,borderWidth:1,borderRadius:4,padding:4}},{label:"–ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã",data:y,borderColor:T.success,backgroundColor:"rgba(40, 167, 69, 0.1)",tension:.4,fill:!1,datalabels:{anchor:"start",align:"bottom",offset:10,color:T.success,font:{size:12,weight:"bold"},backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:T.success,borderWidth:1,borderRadius:4,padding:4}}]}}),l=X(()=>{const O=t.data.carryoverTicketsByMonth||[],N=O.map(y=>y.monthName||`–ú–µ—Å—è—Ü ${y.month}`),C=O.map(y=>y.count||0);return{labels:N,datasets:[{label:"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã",data:C,borderColor:T.carryover,backgroundColor:"rgba(255, 152, 0, 0.1)",tension:.4,fill:!1,datalabels:{anchor:"end",align:"top",offset:4,color:T.carryover}}]}}),k={responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:16,right:0,top:56,bottom:0}},plugins:{legend:{position:"left",labels:{font:{size:14,weight:"500"},padding:16,boxWidth:20,boxHeight:12}},tooltip:{enabled:!0,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},padding:12},datalabels:{anchor:"end",align:"top",formatter:(O,N)=>O==null||isNaN(O)?"":O.toString(),color:"#333",font:{size:12,weight:"bold"},padding:{top:4,bottom:4},display:function(O){const N=O.dataset.data[O.dataIndex];return N!=null&&!isNaN(N)&&isFinite(N)},backgroundColor:"rgba(255, 255, 255, 0.8)",borderColor:"#333",borderWidth:1,borderRadius:4,padding:4}},scales:{y:{beginAtZero:!0,ticks:{precision:0,font:{size:14},padding:10},grid:{lineWidth:1.5}},x:{ticks:{maxRotation:0,minRotation:0,font:{size:14},padding:10},grid:{lineWidth:1.5}}}};function d(O){if(!O||O.length===0)return null;const N=O[0],C=O[O.length-1];if(!N||!C)return null;const y=N.monthName||`–ú–µ—Å—è—Ü ${N.month}`,c=C.monthName||`–ú–µ—Å—è—Ü ${C.month}`,_=N.year||new Date().getFullYear();return`${y} ‚Äî ${c} ${_}`}const m=X(()=>{var O;return d(((O=t.data)==null?void 0:O.newTicketsByMonth)||[])}),p=X(()=>{var O;return d(((O=t.data)==null?void 0:O.carryoverTicketsByMonth)||[])}),S=X(()=>{var c,_;const O=((c=t.data)==null?void 0:c.newTicketsByMonth)||[],N=((_=t.data)==null?void 0:_.closedTicketsByMonth)||[];if(O.length===0)return{new:"‚Äî",closed:"‚Äî"};const C=O.map($=>`${e($.count||0)} (${$.monthName||$.month})`).join(" ‚Üí "),y=N.map($=>`${e($.count||0)} (${$.monthName||$.month})`).join(" ‚Üí ");return{new:C,closed:y}}),L=X(()=>{var _,$;const O=((_=t.data)==null?void 0:_.newTicketsByMonth)||[],N=(($=t.data)==null?void 0:$.closedTicketsByMonth)||[];if(O.length<2)return["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"];const C=[],y=[],c=[];if(O.length>=2){const M=O[0],D=O[1],V=O[2];if(D&&M&&typeof M.count=="number"&&typeof D.count=="number"){const U=M.monthName||M.month,P=D.monthName||D.month,K=e(M.count||0),Z=e(D.count||0);if(M.count>0){const H=(D.count-M.count)/M.count*100;if(isFinite(H)&&!isNaN(H)){const Q=H>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",f=Math.abs(H),v=H>=0?"+":"-",R=H>=0?"#28a745":"#dc3545",z=H>=0?"#28a745":"#dc3545";y.push(`  ‚Ä¢ <span style="color: ${R}; font-weight: 600;">${Q}</span> —Å ${K} (${U}) –¥–æ ${Z} (${P}) ‚Äî <span style="color: ${z}; font-weight: 600;">${v}${f.toFixed(1)}%</span>`)}}else M.count===0&&D.count>0&&y.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${U}) –¥–æ ${Z} (${P})`)}if(V&&D&&typeof D.count=="number"&&typeof V.count=="number"){const U=D.monthName||D.month,P=V.monthName||V.month,K=e(D.count||0),Z=e(V.count||0);if(D.count>0){const H=(V.count-D.count)/D.count*100;if(isFinite(H)&&!isNaN(H))if(Math.abs(H)<.1)y.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${K} (${U}) ‚Üí ${Z} (${P}) ‚Äî 0.0%`);else{const Q=H>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",f=Math.abs(H),v=H>=0?"+":"-",R=H>=0?"#28a745":"#dc3545",z=H>=0?"#28a745":"#dc3545";y.push(`  ‚Ä¢ <span style="color: ${R}; font-weight: 600;">${Q}</span> —Å ${K} (${U}) –¥–æ ${Z} (${P}) ‚Äî <span style="color: ${z}; font-weight: 600;">${v}${f.toFixed(1)}%</span>`)}}else D.count===0&&V.count>0&&y.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${U}) –¥–æ ${Z} (${P})`)}}if(N.length>=2){const M=N[0],D=N[1],V=N[2];if(D&&M&&typeof M.count=="number"&&typeof D.count=="number"){const U=M.monthName||M.month,P=D.monthName||D.month,K=e(M.count||0),Z=e(D.count||0);if(M.count>0){const H=(D.count-M.count)/M.count*100;if(isFinite(H)&&!isNaN(H))if(Math.abs(H)<.1)c.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${K} (${U}) ‚Üí ${Z} (${P}) ‚Äî 0.0%`);else{const Q=H>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",f=Math.abs(H),v=H>=0?"+":"-",R=H>=0?"#28a745":"#dc3545",z=H>=0?"#28a745":"#dc3545";c.push(`  ‚Ä¢ <span style="color: ${R}; font-weight: 600;">${Q}</span> —Å ${K} (${U}) –¥–æ ${Z} (${P}) ‚Äî <span style="color: ${z}; font-weight: 600;">${v}${f.toFixed(1)}%</span>`)}}else M.count===0&&D.count>0&&c.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π: —Å 0 (${U}) –¥–æ ${Z} (${P})`)}if(V&&D&&typeof D.count=="number"&&typeof V.count=="number"){const U=D.monthName||D.month,P=V.monthName||V.month,K=e(D.count||0),Z=e(V.count||0);if(D.count>0){const H=(V.count-D.count)/D.count*100;if(isFinite(H)&&!isNaN(H))if(Math.abs(H)<.1)c.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${K} (${U}) ‚Üí ${Z} (${P}) ‚Äî 0.0%`);else{const Q=H>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",f=Math.abs(H),v=H>=0?"+":"-",R=H>=0?"#28a745":"#dc3545",z=H>=0?"#28a745":"#dc3545";c.push(`  ‚Ä¢ <span style="color: ${R}; font-weight: 600;">${Q}</span> —Å ${K} (${U}) –¥–æ ${Z} (${P}) ‚Äî <span style="color: ${z}; font-weight: 600;">${v}${f.toFixed(1)}%</span>`)}}else D.count===0&&V.count>0&&c.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π: —Å 0 (${U}) –¥–æ ${Z} (${P})`)}}if(y.length>0&&(C.push("–ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã:"),C.push(...y)),c.length>0&&(C.push("–ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã:"),C.push(...c)),O.length>=3&&N.length>=3){const M=O[0],D=O[O.length-1],V=N[0],U=N[N.length-1],P=M.count||0,K=D.count||0,Z=V.count||0,H=U.count||0;if(P>0&&Z>0){const Q=(K-P)/P*100,f=(H-Z)/Z*100;if(isFinite(Q)&&isFinite(f)){const v=M.monthName||M.month,R=D.monthName||D.month,z=V.monthName||V.month,te=U.monthName||U.month,u=Q>=0?"#28a745":"#dc3545",n=Q>=0?"#28a745":"#dc3545",E=f>=0?"#28a745":"#dc3545",G=f>=0?"#28a745":"#dc3545";C.push("–û–±—â–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥:"),C.push(`  ‚Ä¢ –ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã: <span style="color: ${u}; font-weight: 600;">${Q>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ"}</span> —Å ${e(P)} (${v}) –¥–æ ${e(K)} (${R}) ‚Äî <span style="color: ${n}; font-weight: 600;">${Q>=0?"+":"-"}${Math.abs(Q).toFixed(1)}%</span>`),C.push(`  ‚Ä¢ –ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã: <span style="color: ${E}; font-weight: 600;">${f>=0?"—Ä–æ—Å—Ç":"—Å–Ω–∏–∂–µ–Ω–∏–µ"}</span> —Å ${e(Z)} (${z}) –¥–æ ${e(H)} (${te}) ‚Äî <span style="color: ${G}; font-weight: 600;">${f>=0?"+":"-"}${Math.abs(f).toFixed(1)}%</span>`)}}}return C.length>0?C:["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"]}),ae=X(()=>{var c;const O=((c=t.data)==null?void 0:c.carryoverTicketsByMonth)||[];if(O.length===0)return["–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"];const N=[],C=[],y=O.filter(_=>_&&typeof _.count=="number").map(_=>`${e(_.count||0)} (${_.monthName||_.month||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"})`).join(" ‚Üí ");if(y&&N.push(`–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã: ${y}`),O.length>=2){const _=O[0],$=O[1],M=O[2];if($&&_&&typeof _.count=="number"&&typeof $.count=="number"){const D=_.monthName||_.month,V=$.monthName||$.month,U=e(_.count||0),P=e($.count||0);if(_.count>0){const K=($.count-_.count)/_.count*100;if(isFinite(K)&&!isNaN(K))if(Math.abs(K)<.1)C.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${U} (${D}) ‚Üí ${P} (${V}) ‚Äî 0.0%`);else{const Z=K>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",H=Math.abs(K),Q=K>=0?"+":"-",f=K>=0?"#28a745":"#dc3545",v=K>=0?"#28a745":"#dc3545";C.push(`  ‚Ä¢ <span style="color: ${f}; font-weight: 600;">${Z}</span> —Å ${U} (${D}) –¥–æ ${P} (${V}) ‚Äî <span style="color: ${v}; font-weight: 600;">${Q}${H.toFixed(1)}%</span>`)}}else _.count===0&&$.count>0&&C.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${D}) –¥–æ ${P} (${V})`)}if(M&&$&&typeof $.count=="number"&&typeof M.count=="number"){const D=$.monthName||$.month,V=M.monthName||M.month,U=e($.count||0),P=e(M.count||0);if($.count>0){const K=(M.count-$.count)/$.count*100;if(isFinite(K)&&!isNaN(K))if(Math.abs(K)<.1)C.push(`  ‚Ä¢ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: ${U} (${D}) ‚Üí ${P} (${V}) ‚Äî 0.0%`);else{const Z=K>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",H=Math.abs(K),Q=K>=0?"+":"-",f=K>=0?"#28a745":"#dc3545",v=K>=0?"#28a745":"#dc3545";C.push(`  ‚Ä¢ <span style="color: ${f}; font-weight: 600;">${Z}</span> —Å ${U} (${D}) –¥–æ ${P} (${V}) ‚Äî <span style="color: ${v}; font-weight: 600;">${Q}${H.toFixed(1)}%</span>`)}}else $.count===0&&M.count>0&&C.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${D}) –¥–æ ${P} (${V})`)}}if(C.length>0&&(N.push("–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º:"),N.push(...C)),O.length>=3){const _=O[0],$=O[O.length-1];if(_&&$&&typeof _.count=="number"&&typeof $.count=="number"){const M=_.count||0,D=$.count||0,V=_.monthName||_.month,U=$.monthName||$.month,P=e(M),K=e(D);if(M>0){const Z=(D-M)/M*100;if(isFinite(Z)&&!isNaN(Z))if(Math.abs(Z)<1)N.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥:"),N.push(`  ‚Ä¢ –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${P} (${V}) ‚Üí ${K} (${U}) ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–µ–Ω–µ–µ 1%`);else{const H=Z>=0?"–†–æ—Å—Ç":"–°–Ω–∏–∂–µ–Ω–∏–µ",Q=Math.abs(Z),f=Z>=0?"+":"-",v=Z>=0?"#28a745":"#dc3545",R=Z>=0?"#28a745":"#dc3545";N.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥:"),N.push(`  ‚Ä¢ <span style="color: ${v}; font-weight: 600;">${H}</span> —Å ${P} (${V}) –¥–æ ${K} (${U}) ‚Äî <span style="color: ${R}; font-weight: 600;">${f}${Q.toFixed(1)}%</span>`)}}else M===0&&D>0?(N.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥:"),N.push(`  ‚Ä¢ –ü–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤: —Å 0 (${V}) –¥–æ ${K} (${U})`)):M>0&&D===0&&(N.push("–¢–µ–Ω–¥–µ–Ω—Ü–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥:"),N.push(`  ‚Ä¢ –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤: —Å ${P} (${V}) –¥–æ 0 (${U})`))}}return N.length>0?N:["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"]});function re(O,N){let C=[];switch(O){case"new":C=t.data.newTicketsByMonth||[];break;case"closed":C=t.data.closedTicketsByMonth||[];break;case"carryover":C=t.data.carryoverTicketsByMonth||[];break;default:return"-"}for(const y of C){if(!y.weeks||!Array.isArray(y.weeks))continue;const c=y.weeks.find(_=>_&&_.weekNumber===N);if(c){const _=c.count||0;return _>0?e(_):"-"}}return"-"}return(O,N)=>(g(),w("div",Wo,[r("div",Ao,[r("h3",$o,[N[0]||(N[0]=Te(" –ù–æ–≤—ã–µ –∏ –ó–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã ",-1)),m.value?(g(),w("span",So,"("+W(m.value)+")",1)):ne("",!0)]),r("div",Do,[r("div",Eo,[de(Xe(Pe),{data:s.value,options:k},null,8,["data"])]),r("div",No,[N[3]||(N[3]=r("h4",{class:"summary-title"},"–°–≤–æ–¥–Ω—ã–π –∏—Ç–æ–≥",-1)),r("div",Bo,[r("div",Oo,[N[1]||(N[1]=r("span",{class:"summary-label"},"–ù–æ–≤—ã–µ:",-1)),r("span",Uo,W(S.value.new),1)]),r("div",Io,[N[2]||(N[2]=r("span",{class:"summary-label"},"–ó–∞–∫—Ä—ã—Ç—ã–µ:",-1)),r("span",Mo,W(S.value.closed),1)])]),r("div",Ro,[(g(!0),w(ke,null,ve(L.value,(C,y)=>(g(),w("p",{key:y,innerHTML:C},null,8,Po))),128))])])])]),r("div",xo,[r("h3",Lo,[N[4]||(N[4]=Te(" –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã ",-1)),p.value?(g(),w("span",Go,"("+W(p.value)+")",1)):ne("",!0)]),r("div",Fo,[r("div",Ho,[de(Xe(Pe),{data:l.value,options:k},null,8,["data"])]),r("div",Vo,[N[5]||(N[5]=r("h4",{class:"analysis-title"},"–ê–Ω–∞–ª–∏–∑",-1)),r("div",Ko,[(g(!0),w(ke,null,ve(ae.value,(C,y)=>(g(),w("p",{key:y,innerHTML:C},null,8,Yo))),128))])])])]),r("div",jo,[N[10]||(N[10]=r("h3",{class:"chart-title"},"–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –Ω–µ–¥–µ–ª—è–º",-1)),r("div",zo,[r("table",qo,[r("thead",null,[r("tr",null,[N[6]||(N[6]=r("th",{class:"month-header-cell"},"–ú–µ—Å—è—Ü",-1)),(g(!0),w(ke,null,ve(a.value,C=>(g(),w("th",{key:`week-${C}`,class:"week-header-cell"}," –ù–µ–¥–µ–ª—è "+W(C),1))),128))])]),r("tbody",null,[r("tr",Zo,[N[7]||(N[7]=r("td",{class:"data-type-cell"},"–ù–æ–≤—ã–µ",-1)),(g(!0),w(ke,null,ve(a.value,C=>(g(),w("td",{key:`new-${C}`,class:"week-data-cell"},W(re("new",C)),1))),128))]),r("tr",Xo,[N[8]||(N[8]=r("td",{class:"data-type-cell"},"–ó–∞–∫—Ä—ã—Ç—ã–µ",-1)),(g(!0),w(ke,null,ve(a.value,C=>(g(),w("td",{key:`closed-${C}`,class:"week-data-cell"},W(re("closed",C)),1))),128))]),r("tr",Jo,[N[9]||(N[9]=r("td",{class:"data-type-cell"},"–ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ",-1)),(g(!0),w(ke,null,ve(a.value,C=>(g(),w("td",{key:`carryover-${C}`,class:"week-data-cell"},W(re("carryover",C)),1))),128))])])])])])]))}},en=Se(Qo,[["__scopeId","data-v-31a3d565"]]),tn={class:"months-preloader"},rn={class:"preloader-content"},an={class:"progress-container"},sn={class:"progress-bar"},on={class:"progress-text"},nn={class:"preloader-message"},ln={class:"stages-list"},cn={class:"stage-icon"},dn={class:"stage-text"},un={__name:"MonthsModePreloader",props:{progress:{type:Number,required:!0,validator:o=>o>=0&&o<=100},currentStage:{type:String,default:""}},setup(o){const t=o,e=[{label:"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",threshold:5},{label:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 1)...",threshold:35},{label:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 2)...",threshold:65},{label:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 3)...",threshold:85},{label:"–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö...",threshold:90},{label:"–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤...",threshold:100}];function a(l){return t.progress>=e[l].threshold}function s(l){const k=e[l].threshold,d=l>0?e[l-1].threshold:0;return t.progress>=d&&t.progress<k}return(l,k)=>(g(),w("div",tn,[r("div",rn,[k[0]||(k[0]=er('<div class="preloader-spinner" data-v-b571fe67><div class="spinner-ring" data-v-b571fe67></div><div class="spinner-ring" data-v-b571fe67></div><div class="spinner-ring" data-v-b571fe67></div></div><h3 class="preloader-title" data-v-b571fe67>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ 3 –º–µ—Å—è—Ü–∞</h3>',2)),r("div",an,[r("div",sn,[r("div",{class:"progress-fill",style:Ne({width:`${o.progress}%`})},null,4)]),r("div",on,W(Math.round(o.progress))+"%",1)]),r("p",nn,W(o.currentStage),1),r("div",ln,[(g(),w(ke,null,ve(e,(d,m)=>r("div",{key:m,class:pe(["stage-item",{"stage-completed":a(m),"stage-current":s(m)}])},[r("span",cn,W(a(m)?"‚úì":s(m)?"‚Üí":"‚óã"),1),r("span",dn,W(d.label),1)],2)),64))])])]))}},kn=Se(un,[["__scopeId","data-v-b571fe67"]]),vn="/api/graph-1c-admission-closure.php";function hn(o){var a,s,l,k,d,m,p,S,L,ae,re,O,N,C,y,c,_,$,M,D,V,U,P,K,Z,H,Q,f,v,R,z,te,u,n,E,G,q,F,ee,le,b,i,h,A,x,Y,I,j,B,ie,he,be,se,ye,We,Ae,oe,ce,ue,_e,Oe,Ue,Ie,xe,Le,Ge;if(!o)return{meta:null,data:{currentWeek:{newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedOtherWeek:0,carryoverTicketsCreatedPreviousWeek:0,carryoverTicketsCreatedOlder:0},newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,series:{new:[0],closed:[0],closedCreatedThisWeek:[0],closedCreatedOtherWeek:[0],carryover:[0],carryoverCreatedThisWeek:[0],carryoverCreatedOtherWeek:[0],carryoverCreatedPreviousWeek:[0],carryoverCreatedOlder:[0]},weeksData:[],stagesByWeek:[],stages:[],responsible:[],responsibleCreatedThisWeek:[],responsibleCreatedOtherWeek:[]}};const t=o.data||o.result||o,e=t.meta||o.meta||null;return{meta:{...e,currentWeek:(e==null?void 0:e.currentWeek)||(e?{weekNumber:e.weekNumber,weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc}:null),weeks:(e==null?void 0:e.weeks)||[]},data:{currentWeek:((a=t.data)==null?void 0:a.currentWeek)||(t.data?{newTickets:t.data.newTickets??0,closedTickets:t.data.closedTickets??0,closedTicketsCreatedThisWeek:t.data.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:t.data.closedTicketsCreatedOtherWeek??0,carryoverTickets:t.data.carryoverTickets??0,carryoverTicketsCreatedThisWeek:t.data.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:t.data.carryoverTicketsCreatedOtherWeek??0,carryoverTicketsCreatedPreviousWeek:t.data.carryoverTicketsCreatedPreviousWeek??0,carryoverTicketsCreatedOlder:t.data.carryoverTicketsCreatedOlder??0}:{newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedOtherWeek:0,carryoverTicketsCreatedPreviousWeek:0,carryoverTicketsCreatedOlder:0}),newTickets:((l=(s=t.data)==null?void 0:s.currentWeek)==null?void 0:l.newTickets)??((k=t.data)==null?void 0:k.newTickets)??t.newTickets??0,closedTickets:((m=(d=t.data)==null?void 0:d.currentWeek)==null?void 0:m.closedTickets)??((p=t.data)==null?void 0:p.closedTickets)??t.closedTickets??0,closedTicketsCreatedThisWeek:((L=(S=t.data)==null?void 0:S.currentWeek)==null?void 0:L.closedTicketsCreatedThisWeek)??((ae=t.data)==null?void 0:ae.closedTicketsCreatedThisWeek)??t.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:((O=(re=t.data)==null?void 0:re.currentWeek)==null?void 0:O.closedTicketsCreatedOtherWeek)??((N=t.data)==null?void 0:N.closedTicketsCreatedOtherWeek)??t.closedTicketsCreatedOtherWeek??0,carryoverTickets:((y=(C=t.data)==null?void 0:C.currentWeek)==null?void 0:y.carryoverTickets)??((c=t.data)==null?void 0:c.carryoverTickets)??t.carryoverTickets??0,carryoverTicketsCreatedThisWeek:(($=(_=t.data)==null?void 0:_.currentWeek)==null?void 0:$.carryoverTicketsCreatedThisWeek)??((M=t.data)==null?void 0:M.carryoverTicketsCreatedThisWeek)??t.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:((V=(D=t.data)==null?void 0:D.currentWeek)==null?void 0:V.carryoverTicketsCreatedOtherWeek)??((U=t.data)==null?void 0:U.carryoverTicketsCreatedOtherWeek)??t.carryoverTicketsCreatedOtherWeek??0,carryoverTicketsCreatedPreviousWeek:((K=(P=t.data)==null?void 0:P.currentWeek)==null?void 0:K.carryoverTicketsCreatedPreviousWeek)??((Z=t.data)==null?void 0:Z.carryoverTicketsCreatedPreviousWeek)??t.carryoverTicketsCreatedPreviousWeek??0,carryoverTicketsCreatedOlder:((Q=(H=t.data)==null?void 0:H.currentWeek)==null?void 0:Q.carryoverTicketsCreatedOlder)??((f=t.data)==null?void 0:f.carryoverTicketsCreatedOlder)??t.carryoverTicketsCreatedOlder??0,series:{new:((R=(v=t.data)==null?void 0:v.series)==null?void 0:R.new)??((z=t.series)==null?void 0:z.new)??[0],closed:((u=(te=t.data)==null?void 0:te.series)==null?void 0:u.closed)??((n=t.series)==null?void 0:n.closed)??[0],closedCreatedThisWeek:((G=(E=t.data)==null?void 0:E.series)==null?void 0:G.closedCreatedThisWeek)??((q=t.series)==null?void 0:q.closedCreatedThisWeek)??[0],closedCreatedOtherWeek:((ee=(F=t.data)==null?void 0:F.series)==null?void 0:ee.closedCreatedOtherWeek)??((le=t.series)==null?void 0:le.closedCreatedOtherWeek)??[0],carryover:((i=(b=t.data)==null?void 0:b.series)==null?void 0:i.carryover)??((h=t.series)==null?void 0:h.carryover)??[0],carryoverCreatedThisWeek:((x=(A=t.data)==null?void 0:A.series)==null?void 0:x.carryoverCreatedThisWeek)??((Y=t.series)==null?void 0:Y.carryoverCreatedThisWeek)??[0],carryoverCreatedOtherWeek:((j=(I=t.data)==null?void 0:I.series)==null?void 0:j.carryoverCreatedOtherWeek)??((B=t.series)==null?void 0:B.carryoverCreatedOtherWeek)??[0],carryoverCreatedPreviousWeek:((he=(ie=t.data)==null?void 0:ie.series)==null?void 0:he.carryoverCreatedPreviousWeek)??((be=t.series)==null?void 0:be.carryoverCreatedPreviousWeek)??[0],carryoverCreatedOlder:((ye=(se=t.data)==null?void 0:se.series)==null?void 0:ye.carryoverCreatedOlder)??((We=t.series)==null?void 0:We.carryoverCreatedOlder)??[0]},weeksData:((Ae=t.data)==null?void 0:Ae.weeksData)??t.weeksData??[],stagesByWeek:((oe=t.data)==null?void 0:oe.stagesByWeek)??t.stagesByWeek??[],stages:((ce=t.data)==null?void 0:ce.stages)??t.stages??[],responsible:((ue=t.data)==null?void 0:ue.responsible)??t.responsible??[],responsibleCreatedThisWeek:((_e=t.data)==null?void 0:_e.responsibleCreatedThisWeek)??t.responsibleCreatedThisWeek??[],responsibleCreatedOtherWeek:((Oe=t.data)==null?void 0:Oe.responsibleCreatedOtherWeek)??t.responsibleCreatedOtherWeek??[],newTicketsByStages:((Ue=t.data)==null?void 0:Ue.newTicketsByStages)??t.newTicketsByStages??null,carryoverTicketsByDuration:((Ie=t.data)==null?void 0:Ie.carryoverTicketsByDuration)??t.carryoverTicketsByDuration??null,newTicketsByMonth:((xe=t.data)==null?void 0:xe.newTicketsByMonth)??t.newTicketsByMonth??[],closedTicketsByMonth:((Le=t.data)==null?void 0:Le.closedTicketsByMonth)??t.closedTicketsByMonth??[],carryoverTicketsByMonth:((Ge=t.data)==null?void 0:Ge.carryoverTicketsByMonth)??t.carryoverTicketsByMonth??[]}}}async function Be(o={}){const{endpoint:t=vn,product:e="1C",weekStartUtc:a=null,weekEndUtc:s=null,periodMode:l="weeks",useCache:k=!0,forceRefresh:d=!1,includeTickets:m=!1,includeNewTicketsByStages:p=!1,includeCarryoverTickets:S=!0,includeCarryoverTicketsByDuration:L=!1}=o,ae={product:e,weekStartUtc:a,weekEndUtc:s,periodMode:l,useCache:k,forceRefresh:d,includeTickets:m,includeNewTicketsByStages:p,includeCarryoverTickets:S,includeCarryoverTicketsByDuration:L},re=tr(t),O=await fetch(re,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(ae)});if(!O.ok)throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ (${O.status})`);const N=await O.json();if((N==null?void 0:N.success)===!1)throw new Error(N.message||"–ë—ç–∫–µ–Ω–¥ –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É");const C=hn(N);if(N.cache_used===!0){const{CacheNotificationService:y}=await Me(async()=>{const{CacheNotificationService:_}=await import("./main-Cjj_t2Vs.js").then($=>$.ap);return{CacheNotificationService:_}},__vite__mapDeps([0,1]),import.meta.url),c=l==="months"?"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞/–∑–∞–∫—Ä—ã—Ç–∏–π 1–° (3 –º–µ—Å—è—Ü–∞)":"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞/–∑–∞–∫—Ä—ã—Ç–∏–π 1–° (4 –Ω–µ–¥–µ–ª–∏)";y.notifyCacheUsed(c)}return C}const yn={class:"ac-dashboard-months"},mn={key:"content"},pn={class:"dashboard-header"},gn={class:"header-content"},fn={class:"breadcrumbs-row"},bn=["aria-label","aria-disabled","data-fallback","disabled"],_n={class:"breadcrumbs","aria-label":"–ù–∞–≤–∏–≥–∞—Ü–∏—è"},wn={class:"dashboard-layout"},Cn={class:"filters-container"},Tn={class:"chart-container"},Wn={__name:"GraphAdmissionClosureMonthsDashboard",setup(o){const t=St(),e=J(!0),a=J(0),s=J("–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."),l=J(null),k=J(null),d=J({newTickets:0,closedTickets:0,carryoverTickets:0,newTicketsByMonth:[],closedTicketsByMonth:[],carryoverTicketsByMonth:[],previousPeriodData:{newTickets:null,closedTickets:null,carryoverTickets:null}}),m=J(!1),p=X(()=>typeof window>"u"?!1:window.history.length>1),S=X(()=>p.value?"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É":"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"),L={name:"dashboard-sector-1c"};function ae(U){var P;if((P=U==null?void 0:U.preventDefault)==null||P.call(U),!m.value){m.value=!0;try{if(p.value){t.back();return}console.warn("GraphAdmissionClosureMonthsDashboard: fallback navigation to dashboard-sector-1c"),t.push(L)}finally{m.value=!1}}}const re=J({stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}}),O=X(()=>{const U=re.value.customDateRange.startDate||re.value.customDateRange.endDate,P=re.value.employees.length===1&&re.value.employees.includes("all");return U||!P});async function N(U,P,K=500){const Z=a.value,H=10,Q=(U-Z)/H,f=K/H;for(let v=0;v<H;v++)await new Promise(R=>setTimeout(R,f)),a.value=Math.min(Z+Q*(v+1),U);a.value=U,s.value=P}async function C(){console.log("[DEBUG MonthsDashboard] loadData called"),console.log("[DEBUG MonthsDashboard] isLoading before:",e.value),e.value=!0,l.value=null,a.value=0,s.value="–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",console.log("[DEBUG MonthsDashboard] isLoading set to true");let U=null,P=null;try{console.log("[DEBUG MonthsDashboard] Starting API call"),await N(5,"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...",200);const K=Date.now(),Z=2e4;U=setInterval(()=>{const v=Date.now()-K,R=Math.min(5+v/Z*85,90);a.value=R,R<35?s.value="–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 1)...":R<65?s.value="–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 2)...":R<85?s.value="–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–∑–∞–ø—Ä–æ—Å 3)...":s.value="–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö..."},500),P=setTimeout(()=>{U&&(clearInterval(U),U=null)},Z+1e4);const H=await Be({product:"1C",periodMode:"months",includeTickets:!0});clearTimeout(P),U&&(clearInterval(U),U=null),a.value=90,s.value="–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞",await N(100,"–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤...",300),console.log("[DEBUG MonthsDashboard] API call successful, result:",H);const{meta:Q,data:f}=H;k.value=Q,d.value=f,console.log("[DEBUG MonthsDashboard] Data set, meta:",Q,"data keys:",Object.keys(f)),await new Promise(v=>setTimeout(v,200))}catch(K){U&&(clearInterval(U),U=null),P&&(clearTimeout(P),P=null),console.error("[DEBUG MonthsDashboard] API call failed:",K),l.value=K instanceof Error?K:new Error("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"),console.error("[GraphAdmissionClosureMonthsDashboard] loadData error:",K),a.value=100,s.value="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö"}finally{console.log("[DEBUG MonthsDashboard] Finally block: setting isLoading to false"),e.value=!1,console.log("[DEBUG MonthsDashboard] isLoading after:",e.value)}}function y(U){re.value.stages=U}function c(U){re.value.employees=U}function _(U){re.value.dateRange=U}function $(U){re.value.customDateRange=U}function M(){re.value={stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}},D()}function D(){C()}function V(U){if(!["weeks","months"].includes(U)){console.warn("[GraphAdmissionClosureMonthsDashboard] Invalid periodMode:",U);return}U==="weeks"&&window.dispatchEvent(new CustomEvent("period-mode-change",{detail:{mode:U}}))}return ot(()=>{console.log("[DEBUG MonthsDashboard] onMounted called"),console.log("[DEBUG MonthsDashboard] isLoading before loadData:",e.value),C()}),(U,P)=>{const K=Dt("router-link");return g(),w("div",yn,[de(Ce,{name:"fade",mode:"out-in"},{default:me(()=>[e.value?(g(),$e(kn,{key:"preloader",progress:a.value,"current-stage":s.value},null,8,["progress","current-stage"])):(g(),w("div",mn,[r("div",pn,[r("div",gn,[r("div",fn,[r("button",{class:"btn-back-link",type:"button",onClick:ae,"aria-label":S.value,"aria-disabled":!p.value,"data-fallback":!p.value,disabled:m.value,title:"–ù–∞–∑–∞–¥"}," ‚Üê ",8,bn),r("nav",_n,[de(K,{to:{name:"dashboard-sector-1c"},class:"breadcrumb-link"},{default:me(()=>[...P[0]||(P[0]=[Te(" –î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–° ",-1)])]),_:1}),P[2]||(P[2]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),de(K,{to:{name:"dashboard-graph-state"},class:"breadcrumb-link"},{default:me(()=>[...P[1]||(P[1]=[Te(" –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è ",-1)])]),_:1}),P[3]||(P[3]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),P[4]||(P[4]=r("span",{class:"breadcrumb-current"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π",-1))])]),P[5]||(P[5]=r("h1",{class:"dashboard-title"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),P[6]||(P[6]=r("p",{class:"dashboard-subtitle"}," –î–æ—Å—Ç—É–ø—ã –∏ —Ñ–∏–ª—å—Ç—Ä—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã ¬´–ì—Ä–∞—Ñ–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è¬ª, —Å–µ–ª–µ–∫—Ç–æ—Ä —ç—Ç–∞–ø–æ–≤ —Å–∫—Ä—ã—Ç. ",-1))])]),r("div",wn,[r("div",Cn,[de(Nt,{stages:re.value.stages,employees:re.value.employees,dateRange:re.value.dateRange,customDateRange:re.value.customDateRange,hasActiveFilters:O.value,hideStages:!0,weekPickerMode:!1,showPeriodMode:!0,"period-mode":"months","onUpdate:stages":y,"onUpdate:employees":c,"onUpdate:dateRange":_,"onUpdate:customDateRange":$,"onUpdate:periodMode":V,onReset:M,onApply:D},null,8,["stages","employees","dateRange","customDateRange","hasActiveFilters"])]),r("div",Tn,[l.value?(g(),$e(Et,{key:0,type:"error",title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",message:l.value.message},null,8,["message"])):(g(),w(ke,{key:1},[de(To,{data:d.value},null,8,["data"]),de(en,{data:d.value,meta:k.value},null,8,["data","meta"])],64))])])]))]),_:1})])}}},An=Se(Wn,[["__scopeId","data-v-fe3ca7ed"]]);class st{static async getSectorData(){try{const t=await this.getAllTickets();console.log("Total tickets loaded:",t.length);const e=this.extractUniqueEmployeeIds(t);console.log("Unique employee IDs:",e);const a=await this.getEmployeesByIds(e);return console.log("Loaded employees:",a.length),{stages:this.groupTicketsByStages(t,a),employees:a,zeroPointTickets:this.getZeroPointTickets(t)}}catch(t){throw console.error("Error getting sector data:",t),t}}static async getAllTickets(){const t=["DT140_12:UC_0VHWE2","DT140_12:PREPARATION","DT140_12:CLIENT"],e=[];for(const a of t){console.log(`Loading tickets for stage: ${a}`);const s=await this.getTicketsByStage(a);e.push(...s),console.log(`Loaded ${s.length} tickets for stage ${a}`)}return e}static async getTicketsByStage(t){const e=[];let a=0;const s=50;let l=!0;for(;l;)try{const d=await Re.call("crm.item.list",{entityTypeId:this.ENTITY_TYPE_ID,filter:{stageId:t},select:["*"],order:{id:"DESC"},start:a,useOriginalUfNames:"Y"});let m=[];d&&d.result&&(Array.isArray(d.result)?m=d.result:d.result.items&&Array.isArray(d.result.items)?m=d.result.items:d.result.data&&Array.isArray(d.result.data)&&(m=d.result.data)),m.length>0?(e.push(...m),a+=m.length,l=m.length===s):l=!1}catch(d){console.error(`Error loading tickets batch for stage ${t} (start: ${a}):`,d),l=!1}e.length>0&&(console.log("Sample ticket structure (full JSON):",JSON.stringify(e[0],null,2)),console.log("Sample ticket keys:",Object.keys(e[0])),console.log("Sample ticket assignedById variants:",{assignedById:e[0].assignedById,assignedByIdId:e[0].assignedByIdId,ASSIGNED_BY_ID:e[0].ASSIGNED_BY_ID}));const k=e.filter(d=>{const m=d.UF_CRM_7_TYPE_PRODUCT||d.uf_crm_7_type_product||d.ufCrm7TypeProduct||d.UF_CRM_7_TYPE_PRODUCT||d.uf_crm_7_type_product;return Array.isArray(m)?m.includes(this.SECTOR_TAG):typeof m=="object"&&m!==null?m.value===this.SECTOR_TAG||m===this.SECTOR_TAG:m===this.SECTOR_TAG});return console.log(`Filtered ${k.length} tickets from ${e.length} for stage ${t} (sector tag: ${this.SECTOR_TAG})`),k}static extractUniqueEmployeeIds(t){if(!Array.isArray(t))return[];const e=new Set;return t.forEach(a=>{const s=a.assignedById||a.assignedByIdId||a.ASSIGNED_BY_ID||a.assignedById||a.assignedById&&typeof a.assignedById=="object"&&(a.assignedById.id||a.assignedById.ID)||a.assignedById&&typeof a.assignedById=="object"&&a.assignedById.value;if(s){const l=parseInt(s);l&&!isNaN(l)&&l>0&&e.add(l)}}),t.length>0&&(console.log("Sample ticket for employee extraction:",t[0]),console.log("Sample ticket assignedById variants:",{assignedById:t[0].assignedById,assignedByIdId:t[0].assignedByIdId,ASSIGNED_BY_ID:t[0].ASSIGNED_BY_ID}),console.log("Extracted employee IDs:",Array.from(e))),Array.from(e)}static async getEmployeesByIds(t){if(!Array.isArray(t)||t.length===0)return[];try{const e=await Re.call("user.get",{filter:{ID:t}});let a=[];return e&&e.result&&(Array.isArray(e.result)?a=e.result:console.warn("Unexpected user.get result format:",e)),a.map(s=>({id:parseInt(s.ID||s.id||0),name:`${s.NAME||s.name||""} ${s.LAST_NAME||s.lastName||""}`.trim()||s.EMAIL||s.email||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π",position:s.WORK_POSITION||s.workPosition||"–°–æ—Ç—Ä—É–¥–Ω–∏–∫",email:s.EMAIL||s.email||"",tickets:[]}))}catch(e){return console.error("Error getting employees by IDs:",e),[]}}static groupTicketsByStages(t,e){Array.isArray(t)||(console.warn("Tickets is not an array:",t),t=[]),Array.isArray(e)||(console.warn("Employees is not an array:",e),e=[]);const a=[{id:"formed",name:"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ",color:"#007bff",employees:e.map(s=>({...s,tickets:[]}))},{id:"review",name:"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó",color:"#ffc107",employees:e.map(s=>({...s,tickets:[]}))},{id:"execution",name:"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ",color:"#28a745",employees:e.map(s=>({...s,tickets:[]}))}];return t.forEach(s=>{const l=this.mapStageId(s.stageId||s.STAGE_ID||""),k=a.find(d=>d.id===l);if(k){const d=s.assignedById||s.ASSIGNED_BY_ID||null,m=d?parseInt(d):null;if(m){let p=k.employees.find(S=>S.id===m);p||(p={id:m,name:`–°–æ—Ç—Ä—É–¥–Ω–∏–∫ #${m}`,position:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ",email:"",tickets:[]},k.employees.push(p)),p.tickets.push(this.mapTicket(s))}}}),a}static mapStageId(t){return{"DT140_12:UC_0VHWE2":"formed","DT140_12:PREPARATION":"review","DT140_12:CLIENT":"execution"}[t]||"formed"}static mapStageIdToBitrix(t){return{formed:"DT140_12:UC_0VHWE2",review:"DT140_12:PREPARATION",execution:"DT140_12:CLIENT"}[t]||"DT140_12:UC_0VHWE2"}static mapTicket(t){const e=parseInt(t.id||t.ID||0),a=t.title||t.TITLE||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è",s=t.stageId||t.STAGE_ID||"",l=t.assignedById||t.ASSIGNED_BY_ID||null,k=t.createdTime||t.CREATED_DATE||t.CREATED_TIME||"",d=t.updatedTime||t.MODIFY_DATE||t.UPDATED_TIME||"",m=t.UF_CRM_7_UF_PRIORITY||t.uf_crm_7_uf_priority||t.ufCrm7UfPriority||t.UF_CRM_7_UF_PRIORITY||t.uf_crm_7_uf_priority||t.priority||t.PRIORITY||null,p=wt(m),S=sr(p);return{id:e,title:a,priorityId:p.id,priorityLabel:p.label,priorityColors:S,priority:p.id,priorityBitrixValue:p.bitrixValue||null,status:this.mapStatus(s),assigneeId:l?parseInt(l):null,stageId:this.mapStageId(s),createdAt:k,modifiedAt:d,amount:t.opportunity||t.OPPORTUNITY||0,currency:t.currencyId||t.CURRENCY_ID||"RUB",description:t.comments||t.COMMENTS||""}}static mapPriority(t){return wt(t).id}static mapPriorityToBitrix(t){if(t&&typeof t=="object")return t.bitrixValue||null;const e=Ct(t);if(e&&e.bitrixValue)return e.bitrixValue;const a={3:"3",2:"2",1:"1",high:"3",medium:"2",low:"1"};return a[t]?a[t]:Ct(or).bitrixValue}static mapStatus(t){return"in_progress"}static getZeroPointTickets(t){const e={formed:[],review:[],execution:[]};return Array.isArray(t)?(t.filter(a=>!(a.assignedById||a.ASSIGNED_BY_ID)).forEach(a=>{const s=this.mapStageId(a.stageId||a.STAGE_ID||"");e[s]&&e[s].push(this.mapTicket(a))}),e):(console.warn("Tickets is not an array in getZeroPointTickets:",t),e)}static async assignTicket(t,e,a){try{const s=this.mapStageIdToBitrix(a);return(await Re.call("crm.item.update",{entityTypeId:this.ENTITY_TYPE_ID,id:t,fields:{assignedById:e,stageId:s}})).result===!0}catch(s){throw console.error("Error assigning ticket:",s),s}}static async createTicket(t){try{const e=await Re.call("crm.item.add",{entityTypeId:this.ENTITY_TYPE_ID,fields:{title:t.title,assignedById:t.employeeId,stageId:this.mapStageIdToBitrix(t.stageId)}});return e.result?parseInt(e.result):0}catch(e){throw console.error("Error creating ticket:",e),e}}static async getTicket(t){try{const e=await Re.call("crm.item.get",{entityTypeId:this.ENTITY_TYPE_ID,id:t});return this.mapTicket(e.result)}catch(e){throw console.error("Error getting ticket:",e),e}}static async addComment(t,e){try{return(await Re.call("crm.timeline.comment.add",{fields:{entityId:t,entityType:"DYNAMIC_"+this.ENTITY_TYPE_ID,comment:e}})).result!==void 0}catch(a){throw console.error("Error adding comment:",a),a}}}et(st,"ENTITY_TYPE_ID",140),et(st,"SECTOR_TAG","1C");const $n={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true"},Sn={class:"modal"},Dn={key:0,class:"modal__tabs"},En={key:"level-0-categories",class:"level-0"},Nn={class:"modal__header"},Bn={class:"modal__title"},On={key:0},Un={class:"modal__body"},In={class:"categories-list"},Mn=["onClick"],Rn={class:"category-item"},Pn={class:"category-item__icon"},xn={key:0},Ln={key:1},Gn={class:"category-item__content"},Fn={class:"category-item__label"},Hn={class:"category-item__count"},Vn={key:0,class:"category-item__arrow"},Kn={class:"modal__footer"},Yn={key:"level-1-categories",class:"level-1"},jn={class:"modal__header"},zn={class:"modal__body"},qn={key:"loading",class:"loading-names"},Zn={key:"empty",class:"modal__empty"},Xn={key:"list",class:"responsible-list"},Jn=["onClick"],Qn={class:"responsible-list__name"},el={class:"responsible-list__count"},tl={key:0,class:"responsible-list__arrow"},rl={class:"modal__footer"},al={key:"level-2-categories",class:"level-2"},sl={class:"modal__header"},ol={class:"modal__title"},nl={class:"modal__body"},ll={key:"loading",class:"loading-state"},il={key:"error",class:"error-state"},cl={class:"error-message"},dl={key:"empty",class:"empty-state"},ul={key:"tickets",class:"tickets-list-container"},kl={key:"level-0-employees",class:"level-0"},vl={class:"modal__header"},hl={class:"modal__title"},yl={key:0},ml={class:"modal__body"},pl={key:"loading",class:"loading-names"},gl={key:"empty",class:"modal__empty"},fl={key:"list",class:"responsible-list"},bl=["onClick"],_l={class:"responsible-list__name"},wl={class:"responsible-list__count"},Cl={key:0,class:"responsible-list__arrow"},Tl={class:"modal__footer"},Wl={key:"level-1-employees",class:"level-1"},Al={class:"modal__header"},$l={class:"modal__title"},Sl={class:"modal__body"},Dl={class:"categories-list"},El=["onClick"],Nl={class:"category-item"},Bl={class:"category-item__icon"},Ol={key:0},Ul={key:1},Il={class:"category-item__content"},Ml={class:"category-item__label"},Rl={class:"category-item__count"},Pl={key:0,class:"category-item__arrow"},xl={class:"modal__footer"},Ll={key:"level-2-employees",class:"level-2"},Gl={class:"modal__header"},Fl={class:"modal__title"},Hl={class:"modal__body"},Vl={key:"loading",class:"loading-state"},Kl={key:"error",class:"error-state"},Yl={class:"error-message"},jl={key:"empty",class:"empty-state"},zl={class:"empty-state-message"},ql={key:"tickets",class:"tickets-list-container"},Zl={__name:"ResponsibleModal",props:{isVisible:{type:Boolean,default:!1},responsible:{type:Array,default:()=>[]},closedTicketsCreatedThisWeek:{type:Number,default:0},closedTicketsCreatedOtherWeek:{type:Number,default:0},responsibleCreatedThisWeek:{type:Array,default:()=>[]},responsibleCreatedOtherWeek:{type:Array,default:()=>[]},weekNumber:{type:Number,default:null},weekStartUtc:{type:String,default:null},weekEndUtc:{type:String,default:null}},setup(o){const t=o,e=J(0),a=J("categories"),s=J(null),l=J(null),k=J(null),d=J([]),m=J(!1),p=J(null),S=J([]),L=J([]),ae=J(!1),re=X(()=>[{id:"created-this-week",label:"–¢–∏–∫–µ—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª—å—é –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª—å—é",count:t.closedTicketsCreatedThisWeek??0,responsible:t.responsibleCreatedThisWeek??[]},{id:"created-other-week",label:"–¢–∏–∫–µ—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª—å—é –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ",count:t.closedTicketsCreatedOtherWeek??0,responsible:t.responsibleCreatedOtherWeek??[]}]),O=X(()=>{const f=new Map;return(t.responsibleCreatedThisWeek||[]).forEach(v=>{const R=v.id??"unassigned";f.has(R)||f.set(R,{id:v.id,name:v.name,thisWeekCount:0,otherWeekCount:0,totalCount:0,thisWeekTickets:[],otherWeekTickets:[]});const z=f.get(R);z.thisWeekCount=v.count??0,z.thisWeekTickets=v.tickets||[],z.totalCount+=z.thisWeekCount}),(t.responsibleCreatedOtherWeek||[]).forEach(v=>{const R=v.id??"unassigned";f.has(R)||f.set(R,{id:v.id,name:v.name,thisWeekCount:0,otherWeekCount:0,totalCount:0,thisWeekTickets:[],otherWeekTickets:[]});const z=f.get(R);z.otherWeekCount=v.count??0,z.otherWeekTickets=v.tickets||[],z.totalCount+=z.otherWeekCount}),Array.from(f.values())}),N=X(()=>{if(!l.value)return[];const f=l.value.thisWeekTickets||[],v=l.value.otherWeekTickets||[];return console.log("[ResponsibleModal] Computing gradations for employee:",{id:l.value.id,name:l.value.name,thisWeekCount:l.value.thisWeekCount,otherWeekCount:l.value.otherWeekCount,thisWeekTickets:f.length,otherWeekTickets:v.length,employee:l.value}),[{id:"this-week",label:"–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ",count:l.value.thisWeekCount??0,tickets:f,employeeId:l.value.id},{id:"other-week",label:"–ù–∞ –¥—Ä—É–≥–æ–π –Ω–µ–¥–µ–ª–µ",count:l.value.otherWeekCount??0,tickets:v,employeeId:l.value.id}]}),C=X(()=>(L.value||[]).length>0);async function y(f){const v=f.filter(R=>R.id!==null&&R.id!==void 0).map(R=>R.id);if(v.length===0)return f;try{const R=await st.getEmployeesByIds(v),z=new Map;return R.forEach(te=>{z.set(te.id,te.name)}),f.map(te=>te.id&&z.has(te.id)?{...te,name:z.get(te.id)}:te)}catch(R){return console.error("[ResponsibleModal] Error enriching names:",R),f}}Ee([()=>a.value,()=>O.value],async([f,v])=>{if(!(f!=="employees"||e.value!==0)){if(!v||v.length===0){L.value=[];return}ae.value=!0;try{L.value=await y(v)}catch(R){console.error("[ResponsibleModal] Error loading employee names:",R),L.value=v}finally{ae.value=!1}}},{immediate:!0}),Ee(()=>t.responsible,async f=>{if(!(e.value!==0||s.value||a.value!=="categories")){if(!f||f.length===0){S.value=[];return}ae.value=!0;try{S.value=await y(f)}catch(v){console.error("[ResponsibleModal] Error loading employee names:",v),S.value=f}finally{ae.value=!1}}},{immediate:!1});const c=X(()=>(S.value||[]).length>0);function _(f){a.value!==f&&(a.value=f,e.value=0,s.value=null,l.value=null,k.value=null,d.value=[],p.value=null,S.value=[],L.value=[])}async function $(f){var v,R,z;if(!f||f.count===0){console.warn("[ResponsibleModal] handleCategoryClick: Invalid category or count is 0",{category:f,count:f==null?void 0:f.count});return}console.log("[ResponsibleModal] handleCategoryClick called:",{categoryId:f.id,categoryLabel:f.label,categoryCount:f.count,responsibleCount:((v=f.responsible)==null?void 0:v.length)||0,responsibleWithTickets:((R=f.responsible)==null?void 0:R.filter(te=>te.tickets&&te.tickets.length>0).length)||0,responsibleSample:(z=f.responsible)==null?void 0:z.slice(0,2).map(te=>{var u;return{id:te.id,name:te.name,count:te.count,hasTickets:!!te.tickets,ticketsCount:((u=te.tickets)==null?void 0:u.length)||0}})}),s.value=f,e.value=1,ae.value=!0;try{S.value=await y(f.responsible),console.log("[ResponsibleModal] After enrichResponsibleWithNames:",{enrichedCount:S.value.length,enrichedSample:S.value.slice(0,2).map(te=>{var u;return{id:te.id,name:te.name,count:te.count,hasTickets:!!te.tickets,ticketsCount:((u=te.tickets)==null?void 0:u.length)||0}})})}catch(te){console.error("[ResponsibleModal] Error loading employee names:",te),S.value=f.responsible}finally{ae.value=!1}}async function M(f,v=null){var R,z;!f||!f.id||f.totalCount===0||(v&&v.currentTarget&&(v.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{v.currentTarget&&(v.currentTarget.style.transform="")},150)),console.log("[ResponsibleModal] Employee selected from list:",{id:f.id,name:f.name,thisWeekCount:f.thisWeekCount,otherWeekCount:f.otherWeekCount,thisWeekTickets:((R=f.thisWeekTickets)==null?void 0:R.length)||0,otherWeekTickets:((z=f.otherWeekTickets)==null?void 0:z.length)||0,employee:f}),l.value={...f,thisWeekTickets:f.thisWeekTickets||[],otherWeekTickets:f.otherWeekTickets||[]},e.value=1)}async function D(f){var R;if(!f||f.count===0)return;k.value=f,e.value=2;const v=f.tickets||[];console.log("[ResponsibleModal] Gradation clicked:",{id:f.id,label:f.label,count:f.count,ticketsInGradation:v.length,selectedEmployee:(R=l.value)==null?void 0:R.id}),v.length>0?(console.log("[ResponsibleModal] Loading tickets from gradation:",v.length),await V(v)):(console.log("[ResponsibleModal] Tickets not in gradation, loading from API"),await U(f))}async function V(f){m.value=!0,p.value=null;try{try{const{prepareTicketsForDisplay:v}=await Me(async()=>{const{prepareTicketsForDisplay:R}=await import("./ticketListUtils-DMEuQ5ZR.js").then(z=>z.t);return{prepareTicketsForDisplay:R}},__vite__mapDeps([2,3,0,1,4,5]),import.meta.url);d.value=await v(f,null,null)}catch(v){console.error("[ResponsibleModal] Error preparing tickets:",v),d.value=f}d.value.length===0&&(p.value=null)}catch(v){p.value=v.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[ResponsibleModal] Error loading tickets:",v),d.value=[]}finally{m.value=!1}}async function U(f){m.value=!0,p.value=null;try{if(!t.weekStartUtc||!t.weekEndUtc||!l.value)throw new Error("–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏ –∏–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫");const v=await Be({product:"1C",weekStartUtc:t.weekStartUtc,weekEndUtc:t.weekEndUtc,includeTickets:!0}),R=f.id==="this-week"?v.data.responsibleCreatedThisWeek:v.data.responsibleCreatedOtherWeek,z=R==null?void 0:R.find(u=>u.id===l.value.id),te=(z==null?void 0:z.tickets)||[];try{const{prepareTicketsForDisplay:u}=await Me(async()=>{const{prepareTicketsForDisplay:n}=await import("./ticketListUtils-DMEuQ5ZR.js").then(E=>E.t);return{prepareTicketsForDisplay:n}},__vite__mapDeps([2,3,0,1,4,5]),import.meta.url);d.value=await u(te,null,null)}catch(u){console.error("[ResponsibleModal] Error preparing tickets:",u),d.value=te}d.value.length===0&&(p.value=null)}catch(v){p.value=v.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[ResponsibleModal] Error loading tickets from API:",v),d.value=[]}finally{m.value=!1}}async function P(f,v=null){!f||!f.id||f.count===0||(v&&v.currentTarget&&(v.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{v.currentTarget&&(v.currentTarget.style.transform="")},150)),l.value=f,e.value=2,await K(f.id))}async function K(f){var v,R,z,te,u,n,E,G,q,F,ee,le,b,i,h,A,x;m.value=!0,p.value=null;try{let Y=[];if(console.log("[ResponsibleModal] loadEmployeeTickets called:",{employeeId:f,selectedCategory:(v=s.value)==null?void 0:v.id,hasSelectedCategory:!!s.value,hasResponsible:!!((R=s.value)!=null&&R.responsible),responsibleCount:((te=(z=s.value)==null?void 0:z.responsible)==null?void 0:te.length)||0,categoryData:s.value?{id:s.value.id,label:s.value.label,count:s.value.count,responsibleSample:(u=s.value.responsible)==null?void 0:u.slice(0,2).map(I=>{var j;return{id:I.id,name:I.name,count:I.count,hasTickets:!!I.tickets,ticketsCount:((j=I.tickets)==null?void 0:j.length)||0}})}:null}),s.value&&s.value.responsible){const I=s.value.responsible.find(j=>j.id===f);console.log("[ResponsibleModal] Employee found in category:",{employee:I,hasTickets:!!(I!=null&&I.tickets),ticketsCount:((n=I==null?void 0:I.tickets)==null?void 0:n.length)||0,tickets:I!=null&&I.tickets?I.tickets.slice(0,2):null}),Y=(I==null?void 0:I.tickets)||[]}if(Y.length===0&&t.weekStartUtc&&t.weekEndUtc){console.log("[ResponsibleModal] Tickets not found in category, loading from API",{weekStartUtc:t.weekStartUtc,weekEndUtc:t.weekEndUtc,categoryId:(E=s.value)==null?void 0:E.id});const I=await Be({product:"1C",weekStartUtc:t.weekStartUtc,weekEndUtc:t.weekEndUtc,includeTickets:!0});console.log("[ResponsibleModal] API response:",{hasResponsibleCreatedThisWeek:!!I.data.responsibleCreatedThisWeek,hasResponsibleCreatedOtherWeek:!!I.data.responsibleCreatedOtherWeek,thisWeekCount:((G=I.data.responsibleCreatedThisWeek)==null?void 0:G.length)||0,otherWeekCount:((q=I.data.responsibleCreatedOtherWeek)==null?void 0:q.length)||0,thisWeekSample:(F=I.data.responsibleCreatedThisWeek)==null?void 0:F.slice(0,1).map(ie=>{var he;return{id:ie.id,name:ie.name,count:ie.count,hasTickets:!!ie.tickets,ticketsCount:((he=ie.tickets)==null?void 0:he.length)||0}}),otherWeekSample:(ee=I.data.responsibleCreatedOtherWeek)==null?void 0:ee.slice(0,1).map(ie=>{var he;return{id:ie.id,name:ie.name,count:ie.count,hasTickets:!!ie.tickets,ticketsCount:((he=ie.tickets)==null?void 0:he.length)||0}})});const j=((le=s.value)==null?void 0:le.id)==="created-this-week"?I.data.responsibleCreatedThisWeek:I.data.responsibleCreatedOtherWeek;console.log("[ResponsibleModal] Category data:",{categoryId:(b=s.value)==null?void 0:b.id,categoryDataCount:(j==null?void 0:j.length)||0,categoryDataSample:j==null?void 0:j.slice(0,2).map(ie=>{var he;return{id:ie.id,name:ie.name,count:ie.count,hasTickets:!!ie.tickets,ticketsCount:((he=ie.tickets)==null?void 0:he.length)||0}})});const B=j==null?void 0:j.find(ie=>ie.id===f);console.log("[ResponsibleModal] Employee found in API response:",{employee:B?{id:B.id,name:B.name,count:B.count,hasTickets:!!B.tickets,ticketsCount:((i=B.tickets)==null?void 0:i.length)||0,ticketsSample:(h=B.tickets)==null?void 0:h.slice(0,2)}:null}),Y=(B==null?void 0:B.tickets)||[]}console.log("[ResponsibleModal] Final employeeTickets before prepareTicketsForDisplay:",{ticketsCount:Y.length,ticketsSample:Y.slice(0,2).map(I=>({id:I.id,title:I.title||I.ufSubject||"No title",stageId:I.stageId}))});try{const{prepareTicketsForDisplay:I}=await Me(async()=>{const{prepareTicketsForDisplay:j}=await import("./ticketListUtils-DMEuQ5ZR.js").then(B=>B.t);return{prepareTicketsForDisplay:j}},__vite__mapDeps([2,3,0,1,4,5]),import.meta.url);d.value=await I(Y,null,null),console.log("[ResponsibleModal] Tickets after prepareTicketsForDisplay:",{ticketsCount:d.value.length,ticketsSample:d.value.slice(0,2).map(j=>({id:j.id,title:j.title||j.ufSubject||"No title",stageId:j.stageId}))})}catch(I){console.error("[ResponsibleModal] Error preparing tickets:",I),console.error("[ResponsibleModal] prepareError details:",{message:I.message,stack:I.stack,employeeTicketsCount:Y.length}),d.value=Y,console.log("[ResponsibleModal] Using fallback tickets (without enrichment):",d.value.length)}d.value.length===0?(console.warn("[ResponsibleModal] No tickets after loading and preparation",{employeeId:f,categoryId:(A=s.value)==null?void 0:A.id,employeeTicketsCount:Y.length,finalTicketsCount:d.value.length}),p.value=null):console.log("[ResponsibleModal] Successfully loaded tickets:",d.value.length)}catch(Y){p.value=Y.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[ResponsibleModal] Error loading tickets:",Y),console.error("[ResponsibleModal] Error details:",{message:Y.message,stack:Y.stack,employeeId:f,categoryId:(x=s.value)==null?void 0:x.id}),d.value=[]}finally{m.value=!1}}function Z(){e.value===2?(e.value=1,a.value==="categories"?l.value=null:k.value=null,d.value=[],p.value=null):e.value===1&&(e.value=0,a.value==="categories"?(s.value=null,S.value=[]):l.value=null)}function H(f){const v=nt(f.id);window.open(v,"_blank")}function Q(){a.value==="employees"&&k.value?V(k.value.tickets):a.value==="categories"&&l.value&&K(l.value.id)}return Ee(()=>t.isVisible,f=>{if(f){console.log("[TASK-070] ResponsibleModal opened for week",t.weekNumber),console.log("[TASK-070] ResponsibleModal props types:",{responsibleCreatedThisWeekType:typeof t.responsibleCreatedThisWeek,responsibleCreatedThisWeekIsArray:Array.isArray(t.responsibleCreatedThisWeek),responsibleCreatedThisWeekLength:Array.isArray(t.responsibleCreatedThisWeek)?t.responsibleCreatedThisWeek.length:"not array",responsibleCreatedOtherWeekType:typeof t.responsibleCreatedOtherWeek,responsibleCreatedOtherWeekIsArray:Array.isArray(t.responsibleCreatedOtherWeek),responsibleCreatedOtherWeekLength:Array.isArray(t.responsibleCreatedOtherWeek)?t.responsibleCreatedOtherWeek.length:"not array"}),console.log("[TASK-070] ResponsibleModal data:",{weekStartUtc:t.weekStartUtc,weekEndUtc:t.weekEndUtc,responsibleCreatedThisWeek:Array.isArray(t.responsibleCreatedThisWeek)?t.responsibleCreatedThisWeek.length:t.responsibleCreatedThisWeek?"not array":"null/undefined",responsibleCreatedOtherWeek:Array.isArray(t.responsibleCreatedOtherWeek)?t.responsibleCreatedOtherWeek.length:t.responsibleCreatedOtherWeek?"not array":"null/undefined",closedTicketsCreatedThisWeek:t.closedTicketsCreatedThisWeek,closedTicketsCreatedOtherWeek:t.closedTicketsCreatedOtherWeek}),console.log("[TASK-070] ResponsibleModal detailed data:",{responsibleCreatedThisWeek:t.responsibleCreatedThisWeek,responsibleCreatedOtherWeek:t.responsibleCreatedOtherWeek,responsibleCreatedThisWeekWithTickets:Array.isArray(t.responsibleCreatedThisWeek)?t.responsibleCreatedThisWeek.map(R=>{var z;return{id:R.id,name:R.name,count:R.count,hasTickets:!!R.tickets,ticketsCount:((z=R.tickets)==null?void 0:z.length)||0}}):"not array or null",responsibleCreatedOtherWeekWithTickets:Array.isArray(t.responsibleCreatedOtherWeek)?t.responsibleCreatedOtherWeek.map(R=>{var z;return{id:R.id,name:R.name,count:R.count,hasTickets:!!R.tickets,ticketsCount:((z=R.tickets)==null?void 0:z.length)||0}}):"not array or null"});const v=t.weekNumber;v&&console.log("[TASK-070] ResponsibleModal: Week number",v)}else e.value=0,a.value="categories",s.value=null,l.value=null,k.value=null,d.value=[],p.value=null,S.value=[],L.value=[]}),(f,v)=>o.isVisible?(g(),w("div",$n,[r("div",Sn,[e.value===0?(g(),w("div",Dn,[r("button",{class:pe(["modal__tab",{"modal__tab--active":a.value==="categories"}]),onClick:v[0]||(v[0]=R=>_("categories"))}," –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ",2),r("button",{class:pe(["modal__tab",{"modal__tab--active":a.value==="employees"}]),onClick:v[1]||(v[1]=R=>_("employees"))}," –ü–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º ",2)])):ne("",!0),de(Ce,{name:"level",mode:"out-in"},{default:me(()=>{var R,z,te,u;return[a.value==="categories"&&e.value===0?(g(),w("div",En,[r("header",Nn,[r("h3",Bn,[v[12]||(v[12]=Te(" –ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),o.weekNumber?(g(),w("span",On," ¬∑ –ù–µ–¥–µ–ª—è "+W(o.weekNumber),1)):ne("",!0)]),r("button",{class:"modal__close",onClick:v[2]||(v[2]=n=>f.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Un,[r("ul",In,[(g(!0),w(ke,null,ve(re.value,n=>(g(),w("li",{key:n.id,class:pe(["categories-list__item",{"categories-list__item--clickable":n.count>0}]),onClick:E=>$(n)},[r("div",Rn,[r("div",Pn,[n.id==="created-this-week"?(g(),w("span",xn,"‚úì")):(g(),w("span",Ln,"‚Üª"))]),r("div",Gn,[r("div",Fn,W(n.label),1),r("div",Hn,W(n.count)+" —Ç–∏–∫–µ—Ç–æ–≤",1)]),n.count>0?(g(),w("span",Vn,"‚Üí")):ne("",!0)])],10,Mn))),128))])]),r("footer",Kn,[r("button",{class:"btn",onClick:v[3]||(v[3]=n=>f.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value==="categories"&&e.value===1?(g(),w("div",Yn,[r("header",jn,[r("button",{class:"btn-back",onClick:Z,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),v[13]||(v[13]=r("h3",{class:"modal__title"},"–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),r("button",{class:"modal__close",onClick:v[4]||(v[4]=n=>f.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",zn,[de(Ce,{name:"loading",mode:"out-in"},{default:me(()=>[ae.value?(g(),w("div",qn,[...v[14]||(v[14]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–º—ë–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤...",-1)])])):c.value?(g(),w("ul",Xn,[(g(!0),w(ke,null,ve(S.value,n=>(g(),w("li",{key:n.id||n.name,class:pe(["responsible-list__item",{"responsible-list__item--clickable":n.id&&n.count>0}]),onClick:E=>P(n,E),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"},[r("span",Qn,W(n.name||"–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω"),1),r("span",el,W(n.count??0)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),n.id&&n.count>0?(g(),w("span",tl,"‚Üí")):ne("",!0)],10,Jn))),128))])):(g(),w("p",Zn,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º"))]),_:1})]),r("footer",rl,[r("button",{class:"btn",onClick:v[5]||(v[5]=n=>f.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value==="categories"&&e.value===2?(g(),w("div",al,[r("header",sl,[r("button",{class:"btn-back",onClick:Z,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",ol,"–¢–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: "+W(((R=l.value)==null?void 0:R.name)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:v[6]||(v[6]=n=>f.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",nl,[de(Ce,{name:"loading",mode:"out-in"},{default:me(()=>[m.value?(g(),w("div",ll,[...v[15]||(v[15]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):p.value?(g(),w("div",il,[v[16]||(v[16]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),v[17]||(v[17]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",cl,W(p.value),1),r("button",{class:"btn btn-retry",onClick:Q},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):d.value.length===0?(g(),w("div",dl,[...v[18]||(v[18]=[r("div",{class:"empty-state-icon"},"üìã",-1),r("p",{class:"empty-state-message"},"–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é",-1)])])):(g(),w("div",ul,[de(Je,{name:"ticket",tag:"div",class:"tickets-list"},{default:me(()=>[(g(!0),w(ke,null,ve(d.value,(n,E)=>(g(),$e(Qe,{key:n.id,ticket:n,draggable:!1,style:Ne({"--ticket-index":E}),onClick:H},null,8,["ticket","style"]))),128))]),_:1})]))]),_:1})])])):a.value==="employees"&&e.value===0?(g(),w("div",kl,[r("header",vl,[r("h3",hl,[v[19]||(v[19]=Te(" –ó–∞–∫—Ä—ã—Ç—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é",-1)),o.weekNumber?(g(),w("span",yl," ¬∑ –ù–µ–¥–µ–ª—è "+W(o.weekNumber),1)):ne("",!0)]),r("button",{class:"modal__close",onClick:v[7]||(v[7]=n=>f.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",ml,[de(Ce,{name:"loading",mode:"out-in"},{default:me(()=>[ae.value?(g(),w("div",pl,[...v[20]||(v[20]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–º—ë–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤...",-1)])])):C.value?(g(),w("ul",fl,[(g(!0),w(ke,null,ve(L.value,n=>(g(),w("li",{key:n.id||n.name,class:pe(["responsible-list__item",{"responsible-list__item--clickable":n.id&&n.totalCount>0}]),onClick:E=>M(n,E),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≥—Ä–∞–¥–∞—Ü–∏–∏ —Ç–∏–∫–µ—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"},[r("span",_l,W(n.name||"–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω"),1),r("span",wl,W(n.totalCount??0)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),n.id&&n.totalCount>0?(g(),w("span",Cl,"‚Üí")):ne("",!0)],10,bl))),128))])):(g(),w("p",gl,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º"))]),_:1})]),r("footer",Tl,[r("button",{class:"btn",onClick:v[8]||(v[8]=n=>f.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value==="employees"&&e.value===1?(g(),w("div",Wl,[r("header",Al,[r("button",{class:"btn-back",onClick:Z,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",$l,"–¢–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: "+W(((z=l.value)==null?void 0:z.name)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:v[9]||(v[9]=n=>f.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Sl,[r("ul",Dl,[(g(!0),w(ke,null,ve(N.value,n=>(g(),w("li",{key:n.id,class:pe(["categories-list__item",{"categories-list__item--clickable":n.count>0}]),onClick:E=>D(n)},[r("div",Nl,[r("div",Bl,[n.id==="this-week"?(g(),w("span",Ol,"‚úì")):(g(),w("span",Ul,"‚Üª"))]),r("div",Il,[r("div",Ml,W(n.label),1),r("div",Rl,W(n.count)+" —Ç–∏–∫–µ—Ç–æ–≤",1)]),n.count>0?(g(),w("span",Pl,"‚Üí")):ne("",!0)])],10,El))),128))])]),r("footer",xl,[r("button",{class:"btn",onClick:v[10]||(v[10]=n=>f.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value==="employees"&&e.value===2?(g(),w("div",Ll,[r("header",Gl,[r("button",{class:"btn-back",onClick:Z,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",Fl," –¢–∏–∫–µ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: "+W(((te=l.value)==null?void 0:te.name)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")+" ("+W(((u=k.value)==null?void 0:u.label)||"")+") ",1),r("button",{class:"modal__close",onClick:v[11]||(v[11]=n=>f.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Hl,[de(Ce,{name:"loading",mode:"out-in"},{default:me(()=>{var n;return[m.value?(g(),w("div",Vl,[...v[21]||(v[21]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):p.value?(g(),w("div",Kl,[v[22]||(v[22]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),v[23]||(v[23]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",Yl,W(p.value),1),r("button",{class:"btn btn-retry",onClick:Q},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):d.value.length===0?(g(),w("div",jl,[v[24]||(v[24]=r("div",{class:"empty-state-icon"},"üìã",-1)),r("p",zl,W(a.value==="employees"?`–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${((n=k.value)==null?void 0:n.label)||""}"`:"–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é"),1)])):(g(),w("div",ql,[de(Je,{name:"ticket",tag:"div",class:"tickets-list"},{default:me(()=>[(g(!0),w(ke,null,ve(d.value,(E,G)=>(g(),$e(Qe,{key:E.id,ticket:E,draggable:!1,style:Ne({"--ticket-index":G}),onClick:H},null,8,["ticket","style"]))),128))]),_:1})]))]}),_:1})])])):ne("",!0)]}),_:1})])])):ne("",!0)}},Xl=Se(Zl,[["__scopeId","data-v-16273efd"]]),Jl={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true"},Ql={class:"modal"},ei={key:"level-1",class:"level-1"},ti={class:"modal__header"},ri={class:"modal__title"},ai={key:0},si={class:"modal__body"},oi={key:"loading",class:"loading-names"},ni={key:"empty",class:"modal__empty"},li={key:"list",class:"stages-list"},ii=["onClick"],ci={class:"stages-list__name"},di={class:"stages-list__count"},ui={key:0,class:"stages-list__arrow"},ki={class:"modal__footer"},vi={key:"level-2",class:"level-2"},hi={class:"modal__header"},yi={class:"modal__title"},mi={class:"modal__body"},pi={key:"loading",class:"loading-state"},gi={key:"error",class:"error-state"},fi={class:"error-message"},bi={key:"empty",class:"empty-state"},_i={class:"empty-state-message"},wi={key:"tickets",class:"tickets-list-container"},Ci={__name:"StagesModal",props:{isVisible:{type:Boolean,default:!1},weekNumber:{type:Number,default:null},weekStartUtc:{type:String,default:null},weekEndUtc:{type:String,default:null},preloadedData:{type:Array,default:null}},emits:["close"],setup(o,{emit:t}){const e=o,a=J(1),s=J(null),l=J([]),k=J(!1),d=J(!1),m=J(null),p=J([]),S=X(()=>p.value.length>0&&p.value.some(y=>y.count>0));async function L(){var y;if(console.log("[TASK-070] StagesModal: loadStages called",{weekNumber:e.weekNumber,weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc}),!e.weekStartUtc||!e.weekEndUtc){console.warn("[TASK-070] StagesModal: Missing week boundaries, cannot load stages"),p.value=[];return}d.value=!0,m.value=null;try{console.log("[TASK-070] StagesModal: Fetching stages from API...");const c=await Be({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeNewTicketsByStages:!0});console.log("[TASK-070] StagesModal: API response received",{hasNewTicketsByStages:!!c.data.newTicketsByStages,stagesCount:((y=c.data.newTicketsByStages)==null?void 0:y.length)||0}),p.value=c.data.newTicketsByStages||[],p.value.length===0?console.warn("[TASK-070] StagesModal: API returned empty stages array for week",e.weekNumber):console.log("[TASK-070] StagesModal: Stages loaded successfully",p.value.length,"stages")}catch(c){m.value=c.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞–¥–∏–π",console.error("[TASK-070] StagesModal: Error loading stages:",c),p.value=[]}finally{d.value=!1}}async function ae(y,c=null){!y||y.count===0||(c&&c.currentTarget&&(c.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{c.currentTarget&&(c.currentTarget.style.transform="")},150)),s.value=y,a.value=2,await re(y.stageId))}async function re(y){var c;k.value=!0,m.value=null;try{const _=p.value.find(V=>V.stageId===y);if(_&&Array.isArray(_.tickets)&&_.tickets.length>0){console.log("[TASK-070] StagesModal: Using preloaded tickets for stage",y,"count:",_.tickets.length);const V=_.tickets;try{const{prepareTicketsForDisplay:U}=await Me(async()=>{const{prepareTicketsForDisplay:P}=await import("./ticketListUtils-DMEuQ5ZR.js").then(K=>K.t);return{prepareTicketsForDisplay:P}},__vite__mapDeps([2,3,0,1,4,5]),import.meta.url);l.value=await U(V,null,null)}catch(U){console.error("[TASK-070] StagesModal: Error preparing tickets:",U),l.value=V}k.value=!1;return}if(console.log("[TASK-070] StagesModal: Tickets not preloaded, loading from API for stage",y),!e.weekStartUtc||!e.weekEndUtc)throw new Error("–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏");const M=(c=(await Be({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeNewTicketsByStages:!0,includeTickets:!0})).data.newTicketsByStages)==null?void 0:c.find(V=>V.stageId===y),D=(M==null?void 0:M.tickets)||[];try{const{prepareTicketsForDisplay:V}=await Me(async()=>{const{prepareTicketsForDisplay:U}=await import("./ticketListUtils-DMEuQ5ZR.js").then(P=>P.t);return{prepareTicketsForDisplay:U}},__vite__mapDeps([2,3,0,1,4,5]),import.meta.url);l.value=await V(D,null,null)}catch(V){console.error("[StagesModal] Error preparing tickets:",V),l.value=D}l.value.length===0&&(m.value=null)}catch(_){m.value=_.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[StagesModal] Error loading tickets:",_),l.value=[]}finally{k.value=!1}}function O(){a.value=1,s.value=null,l.value=[],m.value=null}function N(y){const c=nt(y.id);window.open(c,"_blank")}function C(){s.value&&re(s.value.stageId)}return Ee(()=>e.isVisible,async y=>{y?(a.value=1,s.value=null,l.value=[],m.value=null,console.log("[TASK-070] StagesModal opened:",{weekNumber:e.weekNumber,weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,preloadedData:e.preloadedData?Array.isArray(e.preloadedData)?`Array(${e.preloadedData.length})`:typeof e.preloadedData:"null"}),e.preloadedData&&Array.isArray(e.preloadedData)&&e.preloadedData.length>0?(console.log("[TASK-070] StagesModal: Using preloaded data, stages count:",e.preloadedData.length),e.preloadedData.every(_=>_.stageId&&_.stageName&&typeof _.count=="number")?(p.value=e.preloadedData,d.value=!1,console.log("[TASK-070] StagesModal: Preloaded data set, stages:",p.value.length)):(console.warn("[TASK-070] StagesModal: Invalid preloaded data structure, falling back to API"),await L())):(console.log("[TASK-070] StagesModal: No preloaded data, loading from API",{weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc}),await L())):(a.value=1,s.value=null,l.value=[],m.value=null,p.value=[])},{immediate:!1}),Ee([()=>e.weekNumber,()=>e.preloadedData],async([y,c])=>{e.isVisible&&y&&(c&&Array.isArray(c)&&c.length>0?c.every($=>$.stageId&&$.stageName&&typeof $.count=="number")?(console.log("[TASK-070] StagesModal: Week changed, updating with preloaded data for week",y),p.value=c,d.value=!1):(console.log("[TASK-070] StagesModal: Week changed, invalid preloaded data, loading from API for week",y),await L()):(console.log("[TASK-070] StagesModal: Week changed, loading from API for week",y),await L()))}),(y,c)=>o.isVisible?(g(),w("div",Jl,[r("div",Ql,[de(Ce,{name:"level",mode:"out-in"},{default:me(()=>{var _;return[a.value===1?(g(),w("div",ei,[r("header",ti,[r("h3",ri,[c[3]||(c[3]=Te(" –ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),o.weekNumber?(g(),w("span",ai," ¬∑ –ù–µ–¥–µ–ª—è "+W(o.weekNumber),1)):ne("",!0)]),r("button",{class:"modal__close",onClick:c[0]||(c[0]=$=>y.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",si,[de(Ce,{name:"loading",mode:"out-in"},{default:me(()=>[d.value?(g(),w("div",oi,[...c[4]||(c[4]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞–¥–∏–π...",-1)])])):S.value?(g(),w("ul",li,[(g(!0),w(ke,null,ve(p.value,$=>(g(),w("li",{key:$.stageId,class:pe(["stages-list__item",{"stages-list__item--clickable":$.count>0}]),style:Ne({"--stage-color":$.color}),onClick:M=>ae($,M),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å—Ç–∞–¥–∏–∏"},[r("span",{class:"stages-list__color",style:Ne({backgroundColor:$.color})},null,4),r("span",ci,W($.stageName),1),r("span",di,W($.count)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),$.count>0?(g(),w("span",ui,"‚Üí")):ne("",!0)],14,ii))),128))])):(g(),w("p",ni," –ù–µ—Ç –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é "))]),_:1})]),r("footer",ki,[r("button",{class:"btn",onClick:c[1]||(c[1]=$=>y.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value===2?(g(),w("div",vi,[r("header",hi,[r("button",{class:"btn-back",onClick:O,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",yi," –¢–∏–∫–µ—Ç—ã —Å—Ç–∞–¥–∏–∏: "+W(((_=s.value)==null?void 0:_.stageName)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:c[2]||(c[2]=$=>y.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",mi,[de(Ce,{name:"loading",mode:"out-in"},{default:me(()=>{var $;return[k.value?(g(),w("div",pi,[...c[5]||(c[5]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):m.value?(g(),w("div",gi,[c[6]||(c[6]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),c[7]||(c[7]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",fi,W(m.value),1),r("button",{class:"btn btn-retry",onClick:C},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):l.value.length===0?(g(),w("div",bi,[c[8]||(c[8]=r("div",{class:"empty-state-icon"},"üìã",-1)),r("p",_i," –ù–∞ —Å—Ç–∞–¥–∏–∏ ¬´"+W(($=s.value)==null?void 0:$.stageName)+"¬ª –Ω–µ—Ç –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é ",1)])):(g(),w("div",wi,[de(Je,{name:"ticket",tag:"div",class:"tickets-list"},{default:me(()=>[(g(!0),w(ke,null,ve(l.value,(M,D)=>(g(),$e(Qe,{key:M.id,ticket:M,draggable:!1,style:Ne({"--ticket-index":D}),onClick:N},null,8,["ticket","style"]))),128))]),_:1})]))]}),_:1})])])):ne("",!0)]}),_:1})])])):ne("",!0)}},Ti=Se(Ci,[["__scopeId","data-v-00403024"]]),Wi={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true"},Ai={class:"modal"},$i={key:"level-1",class:"level-1"},Si={class:"modal__header"},Di={class:"modal__title"},Ei={key:0},Ni={class:"modal__body"},Bi={key:"loading",class:"loading-names"},Oi={key:"empty",class:"modal__empty"},Ui={key:"list",class:"duration-list"},Ii=["onClick"],Mi={class:"duration-list__name"},Ri={class:"duration-list__count"},Pi={key:0,class:"duration-list__arrow"},xi={class:"modal__footer"},Li={key:"level-2",class:"level-2"},Gi={class:"modal__header"},Fi={class:"modal__title"},Hi={class:"modal__body"},Vi={key:"loading",class:"loading-state"},Ki={key:"error",class:"error-state"},Yi={class:"error-message"},ji={key:"empty",class:"empty-state"},zi={class:"empty-state-message"},qi={key:"tickets",class:"tickets-list-container"},Zi={__name:"CarryoverDurationModal",props:{isVisible:{type:Boolean,default:!1},weekNumber:{type:Number,default:null},weekStartUtc:{type:String,default:null},weekEndUtc:{type:String,default:null},preloadedData:{type:Array,default:null}},emits:["close"],setup(o,{emit:t}){const e=o,a=J(1),s=J(null),l=J([]),k=J(!1),d=J(!1),m=J(null),p=J([]),S=X(()=>p.value.length>0&&p.value.some(y=>y.count>0));async function L(){if(!e.weekStartUtc||!e.weekEndUtc){p.value=[];return}d.value=!0,m.value=null;try{const y=await Be({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!0});p.value=y.data.carryoverTicketsByDuration||[]}catch(y){m.value=y.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π",console.error("[CarryoverDurationModal] Error loading categories:",y),p.value=[]}finally{d.value=!1}}async function ae(y,c=null){!y||y.count===0||(c&&c.currentTarget&&(c.currentTarget.style.transform="scale(0.98)",setTimeout(()=>{c.currentTarget&&(c.currentTarget.style.transform="")},150)),s.value=y,a.value=2,await re(y.durationCategory))}async function re(y){var c;k.value=!0,m.value=null;try{const _=p.value.find(V=>V.durationCategory===y);if(_&&Array.isArray(_.tickets)&&_.tickets.length>0){console.log("[TASK-070] CarryoverDurationModal: Using preloaded tickets for category",y,"count:",_.tickets.length);const V=_.tickets;try{const{prepareTicketsForDisplay:U}=await Me(async()=>{const{prepareTicketsForDisplay:P}=await import("./ticketListUtils-DMEuQ5ZR.js").then(K=>K.t);return{prepareTicketsForDisplay:P}},__vite__mapDeps([2,3,0,1,4,5]),import.meta.url);l.value=await U(V,null,null)}catch(U){console.error("[TASK-070] CarryoverDurationModal: Error preparing tickets:",U),l.value=V}k.value=!1;return}if(console.log("[TASK-070] CarryoverDurationModal: Tickets not preloaded, loading from API for category",y),!e.weekStartUtc||!e.weekEndUtc)throw new Error("–ù–µ —É–∫–∞–∑–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–¥–µ–ª–∏");const M=(c=(await Be({product:"1C",weekStartUtc:e.weekStartUtc,weekEndUtc:e.weekEndUtc,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!0,includeTickets:!0})).data.carryoverTicketsByDuration)==null?void 0:c.find(V=>V.durationCategory===y),D=(M==null?void 0:M.tickets)||[];try{const{prepareTicketsForDisplay:V}=await Me(async()=>{const{prepareTicketsForDisplay:U}=await import("./ticketListUtils-DMEuQ5ZR.js").then(P=>P.t);return{prepareTicketsForDisplay:U}},__vite__mapDeps([2,3,0,1,4,5]),import.meta.url);l.value=await V(D,null,null)}catch(V){console.error("[CarryoverDurationModal] Error preparing tickets:",V),l.value=D}l.value.length===0&&(m.value=null)}catch(_){m.value=_.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–∫–µ—Ç–æ–≤",console.error("[CarryoverDurationModal] Error loading tickets:",_),l.value=[]}finally{k.value=!1}}function O(){a.value=1,s.value=null,l.value=[],m.value=null}function N(y){const c=nt(y.id);window.open(c,"_blank")}function C(){s.value&&re(s.value.durationCategory)}return Ee(()=>e.isVisible,async y=>{y?(a.value=1,s.value=null,l.value=[],m.value=null,e.preloadedData&&Array.isArray(e.preloadedData)&&e.preloadedData.length>0?(console.log("[TASK-070] CarryoverDurationModal: Using preloaded data, categories count:",e.preloadedData.length),e.preloadedData.every(_=>_.durationCategory&&_.durationLabel&&typeof _.count=="number")?(p.value=e.preloadedData,d.value=!1):(console.warn("[TASK-070] CarryoverDurationModal: Invalid preloaded data structure, falling back to API"),await L())):(console.log("[TASK-070] CarryoverDurationModal: No preloaded data, loading from API"),await L())):(a.value=1,s.value=null,l.value=[],m.value=null,p.value=[])},{immediate:!1}),Ee([()=>e.weekNumber,()=>e.preloadedData],async([y,c])=>{e.isVisible&&y&&(c&&Array.isArray(c)&&c.length>0?c.every($=>$.durationCategory&&$.durationLabel&&typeof $.count=="number")?(console.log("[TASK-070] CarryoverDurationModal: Week changed, updating with preloaded data for week",y),p.value=c,d.value=!1):(console.log("[TASK-070] CarryoverDurationModal: Week changed, invalid preloaded data, loading from API for week",y),await L()):(console.log("[TASK-070] CarryoverDurationModal: Week changed, loading from API for week",y),await L()))}),(y,c)=>o.isVisible?(g(),w("div",Wi,[r("div",Ai,[de(Ce,{name:"level",mode:"out-in"},{default:me(()=>{var _;return[a.value===1?(g(),w("div",$i,[r("header",Si,[r("h3",Di,[c[3]||(c[3]=Te(" –ü–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —Ç–∏–∫–µ—Ç—ã –ø–æ —Å—Ä–æ–∫–∞–º",-1)),o.weekNumber?(g(),w("span",Ei," ¬∑ –ù–µ–¥–µ–ª—è "+W(o.weekNumber),1)):ne("",!0)]),r("button",{class:"modal__close",onClick:c[0]||(c[0]=$=>y.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Ni,[de(Ce,{name:"loading",mode:"out-in"},{default:me(()=>[d.value?(g(),w("div",Bi,[...c[4]||(c[4]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...",-1)])])):S.value?(g(),w("ul",Ui,[(g(!0),w(ke,null,ve(p.value,$=>(g(),w("li",{key:$.durationCategory,class:pe(["duration-list__item",{"duration-list__item--clickable":$.count>0}]),style:Ne({"--duration-color":$.color}),onClick:M=>ae($,M),title:"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"},[r("span",{class:"duration-list__color",style:Ne({backgroundColor:$.color})},null,4),r("span",Mi,W($.durationLabel),1),r("span",Ri,W($.count)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1),$.count>0?(g(),w("span",Pi,"‚Üí")):ne("",!0)],14,Ii))),128))])):(g(),w("p",Oi," –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é "))]),_:1})]),r("footer",xi,[r("button",{class:"btn",onClick:c[1]||(c[1]=$=>y.$emit("close"))},"–ó–∞–∫—Ä—ã—Ç—å")])])):a.value===2?(g(),w("div",Li,[r("header",Gi,[r("button",{class:"btn-back",onClick:O,"aria-label":"–ù–∞–∑–∞–¥"},"‚Üê –ù–∞–∑–∞–¥"),r("h3",Fi," –¢–∏–∫–µ—Ç—ã: "+W(((_=s.value)==null?void 0:_.durationLabel)||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),1),r("button",{class:"modal__close",onClick:c[2]||(c[2]=$=>y.$emit("close")),"aria-label":"–ó–∞–∫—Ä—ã—Ç—å"}," ‚úï ")]),r("section",Hi,[de(Ce,{name:"loading",mode:"out-in"},{default:me(()=>{var $;return[k.value?(g(),w("div",Vi,[...c[5]||(c[5]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤...",-1)])])):m.value?(g(),w("div",Ki,[c[6]||(c[6]=r("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),c[7]||(c[7]=r("p",{class:"error-title"},"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",-1)),r("p",Yi,W(m.value),1),r("button",{class:"btn btn-retry",onClick:C},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")])):l.value.length===0?(g(),w("div",ji,[c[8]||(c[8]=r("div",{class:"empty-state-icon"},"üìã",-1)),r("p",zi," –í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ¬´"+W(($=s.value)==null?void 0:$.durationLabel)+"¬ª –Ω–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —Ç–∏–∫–µ—Ç–æ–≤ ",1)])):(g(),w("div",qi,[de(Je,{name:"ticket",tag:"div",class:"tickets-list"},{default:me(()=>[(g(!0),w(ke,null,ve(l.value,(M,D)=>(g(),$e(Qe,{key:M.id,ticket:M,draggable:!1,style:Ne({"--ticket-index":D}),onClick:N},null,8,["ticket","style"]))),128))]),_:1})]))]}),_:1})])])):ne("",!0)]}),_:1})])])):ne("",!0)}},Xi=Se(Zi,[["__scopeId","data-v-0d406e97"]]),Ji={class:"ac-dashboard"},Qi={key:"preloader",class:"chart-preloader"},ec={class:"preloader-content"},tc={class:"preloader-message"},rc={key:"content"},ac={key:1,class:"weeks-dashboard"},sc={class:"dashboard-header"},oc={class:"header-content"},nc={class:"breadcrumbs-row"},lc=["aria-label","aria-disabled","data-fallback","disabled"],ic={class:"breadcrumbs","aria-label":"–ù–∞–≤–∏–≥–∞—Ü–∏—è"},cc={class:"dashboard-layout"},dc={class:"filters-container"},uc={class:"chart-container"},kc={__name:"GraphAdmissionClosureDashboard",setup(o){const t=St(),e=J(!1),a=J(null),s=J(null),l=J({newTickets:0,closedTickets:0,series:{new:[0],closed:[0]},stages:[],responsible:[]}),k=J(!1),d=J(!1),m=J(!1),p=J(!0),S=J(null),L=J({currentWeek:{newTicketsByStages:null,carryoverTicketsByDuration:null,responsibleCreatedThisWeek:null,responsibleCreatedOtherWeek:null},previousWeek:{newTicketsByStages:null,carryoverTicketsByDuration:null,responsibleCreatedThisWeek:null,responsibleCreatedOtherWeek:null}}),ae=X(()=>{var h;const i=((h=s.value)==null?void 0:h.weeks)||[];return i.length>=2?i[i.length-2]:null}),re=J(!1),O=X(()=>typeof window>"u"?!1:window.history.length>1),N=X(()=>O.value?"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É":"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"),C={name:"dashboard-sector-1c"};function y(i){var h;if((h=i==null?void 0:i.preventDefault)==null||h.call(i),!re.value){re.value=!0;try{if(O.value){t.back();return}console.warn("GraphAdmissionClosureDashboard: fallback navigation to dashboard-sector-1c"),t.push(C)}finally{re.value=!1}}}const c=J({stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}}),_=J("weeks"),$=X(()=>{const i=c.value.customDateRange.startDate||c.value.customDateRange.endDate,h=c.value.employees.length===1&&c.value.employees.includes("all");return i||!h});async function M(){var h,A,x,Y;if(console.log("[DEBUG] loadData called"),console.log("[DEBUG] periodMode:",_.value),console.log("[DEBUG] isLoading before:",e.value),_.value!=="weeks"){console.log("[DEBUG] loadData: periodMode is not weeks, returning and resetting isLoading"),e.value=!1;return}console.log("[DEBUG] Setting isLoading to true"),e.value=!0,a.value=null;const i=new Promise(I=>setTimeout(I,300));try{console.log("[DEBUG] Starting API call");const I=b(),j=I.weekStartUtc,B=I.weekEndUtc;console.log("[DEBUG] Week bounds:",{weekStartUtc:j,weekEndUtc:B});const[ie,he]=await Promise.all([i,Be({product:"1C",periodMode:"weeks",weekStartUtc:j,weekEndUtc:B,includeTickets:!0,includeNewTicketsByStages:!0,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!0})]);console.log("[DEBUG] API call successful, result:",he);const{meta:be,data:se,carryoverDebug:ye}=he;s.value=be;const We=Array.isArray(se.responsibleCreatedThisWeek)?se.responsibleCreatedThisWeek:se.responsibleCreatedThisWeek?Object.values(se.responsibleCreatedThisWeek):[],Ae=Array.isArray(se.responsibleCreatedOtherWeek)?se.responsibleCreatedOtherWeek:se.responsibleCreatedOtherWeek?Object.values(se.responsibleCreatedOtherWeek):[];if(l.value={...se,responsibleCreatedThisWeek:We,responsibleCreatedOtherWeek:Ae},console.log("[DEBUG] Data set, meta:",be,"data keys:",Object.keys(se)),console.log("[TASK-070] chartData.value.responsibleCreatedThisWeek after normalization:",{isArray:Array.isArray(We),length:We.length,sample:We.slice(0,2).map(oe=>{var ce;return{id:oe.id,name:oe.name,count:oe.count,hasTickets:!!oe.tickets,ticketsCount:((ce=oe.tickets)==null?void 0:ce.length)||0}})}),console.log("[TASK-070] chartData.value.responsibleCreatedOtherWeek after normalization:",{isArray:Array.isArray(Ae),length:Ae.length,sample:Ae.slice(0,2).map(oe=>{var ce;return{id:oe.id,name:oe.name,count:oe.count,hasTickets:!!oe.tickets,ticketsCount:((ce=oe.tickets)==null?void 0:ce.length)||0}})}),console.log("[TASK-070] responsibleCreatedThisWeek from API:",{count:((h=se.responsibleCreatedThisWeek)==null?void 0:h.length)||0,data:se.responsibleCreatedThisWeek,details:(A=se.responsibleCreatedThisWeek)==null?void 0:A.map(oe=>{var ce;return{id:oe.id,name:oe.name,count:oe.count,hasTickets:!!oe.tickets,ticketsCount:((ce=oe.tickets)==null?void 0:ce.length)||0}})}),console.log("[TASK-070] responsibleCreatedOtherWeek from API:",{count:((x=se.responsibleCreatedOtherWeek)==null?void 0:x.length)||0,data:se.responsibleCreatedOtherWeek,details:(Y=se.responsibleCreatedOtherWeek)==null?void 0:Y.map(oe=>{var ce;return{id:oe.id,name:oe.name,count:oe.count,hasTickets:!!oe.tickets,ticketsCount:((ce=oe.tickets)==null?void 0:ce.length)||0}})}),console.log("[TASK-070] closedTicketsCreatedThisWeek:",se.closedTicketsCreatedThisWeek),console.log("[TASK-070] closedTicketsCreatedOtherWeek:",se.closedTicketsCreatedOtherWeek),se.newTicketsByStages&&(L.value.currentWeek.newTicketsByStages=se.newTicketsByStages,console.log("[TASK-070] Preloaded newTicketsByStages for current week:",se.newTicketsByStages.length,"stages")),se.carryoverTicketsByDuration&&(L.value.currentWeek.carryoverTicketsByDuration=se.carryoverTicketsByDuration,console.log("[TASK-070] Preloaded carryoverTicketsByDuration for current week:",se.carryoverTicketsByDuration.length,"categories")),se.responsibleCreatedThisWeek){const oe=Array.isArray(se.responsibleCreatedThisWeek)?se.responsibleCreatedThisWeek:Object.values(se.responsibleCreatedThisWeek);L.value.currentWeek.responsibleCreatedThisWeek=oe,console.log("[TASK-070] Preloaded responsibleCreatedThisWeek for current week:",oe.length,"employees"),console.log("[TASK-070] responsibleCreatedThisWeek details:",oe.map(ce=>{var ue;return{id:ce.id,name:ce.name,count:ce.count,hasTickets:!!ce.tickets,ticketsCount:((ue=ce.tickets)==null?void 0:ue.length)||0}}))}if(se.responsibleCreatedOtherWeek){const oe=Array.isArray(se.responsibleCreatedOtherWeek)?se.responsibleCreatedOtherWeek:Object.values(se.responsibleCreatedOtherWeek);L.value.currentWeek.responsibleCreatedOtherWeek=oe,console.log("[TASK-070] Preloaded responsibleCreatedOtherWeek for current week:",oe.length,"employees"),console.log("[TASK-070] responsibleCreatedOtherWeek details:",oe.map(ce=>{var ue;return{id:ce.id,name:ce.name,count:ce.count,hasTickets:!!ce.tickets,ticketsCount:((ue=ce.tickets)==null?void 0:ue.length)||0}}))}if(ye&&(console.log("[CARRYOVER-DEBUG] ========================================"),console.log("[CARRYOVER-DEBUG] Total:",ye.total),console.log("[CARRYOVER-DEBUG] ThisWeek:",ye.thisWeek),console.log("[CARRYOVER-DEBUG] PreviousWeek:",ye.previousWeek),console.log("[CARRYOVER-DEBUG] Older:",ye.older),console.log("[CARRYOVER-DEBUG] Sum:",ye.sum,"(expected:",ye.total,")"),console.log("[CARRYOVER-DEBUG] Series:",ye.series),console.log("[CARRYOVER-DEBUG] CurrentWeekData:",ye.currentWeekData),console.log("[CARRYOVER-DEBUG] WeeksData:",ye.weeksData),console.log("[CARRYOVER-DEBUG] Full object:",ye),console.log("[CARRYOVER-DEBUG] ========================================")),ae.value){const oe=ae.value.weekStartUtc,ce=ae.value.weekEndUtc;console.log("[TASK-070] Starting preload for previous week:",{weekNumber:ae.value.weekNumber,weekStartUtc:oe,weekEndUtc:ce}),Be({product:"1C",periodMode:"weeks",weekStartUtc:oe,weekEndUtc:ce,includeTickets:!0,includeNewTicketsByStages:!0,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!0}).then(ue=>{if(console.log("[TASK-070] Preload successful for previous week"),ue.data.newTicketsByStages&&(L.value.previousWeek.newTicketsByStages=ue.data.newTicketsByStages,console.log("[TASK-070] Preloaded newTicketsByStages for previous week:",ue.data.newTicketsByStages.length,"stages")),ue.data.carryoverTicketsByDuration&&(L.value.previousWeek.carryoverTicketsByDuration=ue.data.carryoverTicketsByDuration,console.log("[TASK-070] Preloaded carryoverTicketsByDuration for previous week:",ue.data.carryoverTicketsByDuration.length,"categories")),ue.data.responsibleCreatedThisWeek){const _e=Array.isArray(ue.data.responsibleCreatedThisWeek)?ue.data.responsibleCreatedThisWeek:Object.values(ue.data.responsibleCreatedThisWeek);L.value.previousWeek.responsibleCreatedThisWeek=_e,console.log("[TASK-070] Preloaded responsibleCreatedThisWeek for previous week:",_e.length,"employees")}if(ue.data.responsibleCreatedOtherWeek){const _e=Array.isArray(ue.data.responsibleCreatedOtherWeek)?ue.data.responsibleCreatedOtherWeek:Object.values(ue.data.responsibleCreatedOtherWeek);L.value.previousWeek.responsibleCreatedOtherWeek=_e,console.log("[TASK-070] Preloaded responsibleCreatedOtherWeek for previous week:",_e.length,"employees")}}).catch(ue=>{console.warn("[TASK-070] Failed to preload previous week data (non-critical):",ue)})}}catch(I){console.error("[DEBUG] API call failed:",I),a.value=I instanceof Error?I:new Error("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"),console.error("[GraphAdmissionClosureDashboard] loadData error:",I)}finally{console.log("[DEBUG] Finally block: setting isLoading to false"),e.value=!1,console.log("[DEBUG] isLoading after:",e.value)}}function D(i){var B;if(!i||!s.value)return console.log("[TASK-070] getPreloadedStagesData: Missing weekMeta or chartMeta"),null;const h=((B=s.value)==null?void 0:B.weeks)||[],A=h.length>0?h[h.length-1].weekNumber:s.value.weekNumber,x=h.length>=2?h[h.length-2].weekNumber:null;console.log("[TASK-070] getPreloadedStagesData:",{requestedWeek:i.weekNumber,currentWeekNumber:A,previousWeekNumber:x,weeksInMeta:h.length});const Y=i.weekNumber===A,I=i.weekNumber===x;let j=null;if(Y)j=L.value.currentWeek.newTicketsByStages,console.log("[TASK-070] Requested week is current week, checking currentWeek data:",j?`Array(${j.length})`:"null");else if(I)j=L.value.previousWeek.newTicketsByStages,console.log("[TASK-070] Requested week is previous week, checking previousWeek data:",j?`Array(${j.length})`:"null");else return console.log("[TASK-070] Requested week",i.weekNumber,"is neither current nor previous, no preloaded data available"),null;return Array.isArray(j)&&j.length>0?(console.log("[TASK-070] Using preloaded stages data for week",i.weekNumber,":",j.length,"stages"),j):(console.log("[TASK-070] No preloaded stages data for week",i.weekNumber,", will use API fallback"),null)}function V(i){var I;if(!i||!s.value)return null;const h=((I=s.value)==null?void 0:I.weeks)||[],A=h.length>0?h[h.length-1].weekNumber:s.value.weekNumber,Y=i.weekNumber===A?L.value.currentWeek.carryoverTicketsByDuration:L.value.previousWeek.carryoverTicketsByDuration;return Array.isArray(Y)&&Y.length>0?(console.log("[TASK-070] Using preloaded carryover data for week",i.weekNumber,":",Y.length,"categories"),Y):(console.log("[TASK-070] No preloaded carryover data for week",i.weekNumber,", will use API fallback"),null)}function U(i){var Y;if(!i||!s.value)return null;const h=((Y=s.value)==null?void 0:Y.weeks)||[],A=h.length>0?h[h.length-1].weekNumber:s.value.weekNumber;return i.weekNumber===A&&l.value.responsible||null}function P(i){var j;if(!i){const B=l.value.responsibleCreatedThisWeek;return console.log("[TASK-070] getResponsibleCreatedThisWeek: weekMeta is null, using chartData:",{hasData:!!B,isArray:Array.isArray(B),dataLength:Array.isArray(B)?B.length:B?Object.keys(B).length:0}),B?Array.isArray(B)?B:Object.values(B):null}if(!s.value)return console.log("[TASK-070] getResponsibleCreatedThisWeek: chartMeta is null"),null;const h=((j=s.value)==null?void 0:j.weeks)||[],A=h.length>0?h[h.length-1].weekNumber:s.value.weekNumber,x=h.length>=2?h[h.length-2].weekNumber:null,Y=i.weekNumber===A,I=i.weekNumber===x;if(console.log("[TASK-070] getResponsibleCreatedThisWeek:",{requestedWeek:i.weekNumber,currentWeekNumber:A,previousWeekNumber:x,isCurrentWeek:Y,isPreviousWeek:I}),Y){const B=l.value.responsibleCreatedThisWeek;return console.log("[TASK-070] getResponsibleCreatedThisWeek: current week data:",{hasData:!!B,isArray:Array.isArray(B),dataLength:Array.isArray(B)?B.length:B?Object.keys(B).length:0}),B?Array.isArray(B)?B:Object.values(B):null}if(I){const B=L.value.previousWeek.responsibleCreatedThisWeek;return console.log("[TASK-070] getResponsibleCreatedThisWeek: previous week data:",{hasData:!!B,isArray:Array.isArray(B),dataLength:Array.isArray(B)?B.length:0,data:B}),B||null}return console.log("[TASK-070] getResponsibleCreatedThisWeek: week",i.weekNumber,"is neither current nor previous, no preloaded data"),null}function K(i){var j;if(!i){const B=l.value.responsibleCreatedOtherWeek;return console.log("[TASK-070] getResponsibleCreatedOtherWeek: weekMeta is null, using chartData:",{hasData:!!B,isArray:Array.isArray(B),dataLength:Array.isArray(B)?B.length:B?Object.keys(B).length:0}),B?Array.isArray(B)?B:Object.values(B):null}if(!s.value)return console.log("[TASK-070] getResponsibleCreatedOtherWeek: chartMeta is null"),null;const h=((j=s.value)==null?void 0:j.weeks)||[],A=h.length>0?h[h.length-1].weekNumber:s.value.weekNumber,x=h.length>=2?h[h.length-2].weekNumber:null,Y=i.weekNumber===A,I=i.weekNumber===x;if(console.log("[TASK-070] getResponsibleCreatedOtherWeek:",{requestedWeek:i.weekNumber,currentWeekNumber:A,previousWeekNumber:x,isCurrentWeek:Y,isPreviousWeek:I}),Y){const B=l.value.responsibleCreatedOtherWeek;return console.log("[TASK-070] getResponsibleCreatedOtherWeek: current week data:",{hasData:!!B,isArray:Array.isArray(B),dataLength:Array.isArray(B)?B.length:B?Object.keys(B).length:0}),B?Array.isArray(B)?B:Object.values(B):null}if(I){const B=L.value.previousWeek.responsibleCreatedOtherWeek;return console.log("[TASK-070] getResponsibleCreatedOtherWeek: previous week data:",{hasData:!!B,isArray:Array.isArray(B),dataLength:Array.isArray(B)?B.length:0,data:B}),B||null}return console.log("[TASK-070] getResponsibleCreatedOtherWeek: week",i.weekNumber,"is neither current nor previous, no preloaded data"),null}function Z(i){var j;if(!i||!s.value)return null;const h=((j=s.value)==null?void 0:j.weeks)||[],A=h.length>0?h[h.length-1].weekNumber:s.value.weekNumber,x=h.length>=2?h[h.length-2].weekNumber:null,Y=i.weekNumber===A,I=i.weekNumber===x;if(Y)return l.value.closedTicketsCreatedThisWeek??null;if(I&&l.value.weeksData){const B=l.value.weeksData.find(ie=>ie.weekNumber===x);return(B==null?void 0:B.closedTicketsCreatedThisWeek)??null}return null}function H(i){var j;if(!i||!s.value)return null;const h=((j=s.value)==null?void 0:j.weeks)||[],A=h.length>0?h[h.length-1].weekNumber:s.value.weekNumber,x=h.length>=2?h[h.length-2].weekNumber:null,Y=i.weekNumber===A,I=i.weekNumber===x;if(Y)return l.value.closedTicketsCreatedOtherWeek??null;if(I&&l.value.weeksData){const B=l.value.weeksData.find(ie=>ie.weekNumber===x);return(B==null?void 0:B.closedTicketsCreatedOtherWeek)??null}return null}function Q(i){c.value.stages=i}function f(i){c.value.employees=i}function v(i){c.value.dateRange=i}function R(i){c.value.customDateRange=i}function z(i){if(!["weeks","months"].includes(i)){console.warn("[GraphAdmissionClosureDashboard] Invalid periodMode:",i);return}i!==_.value&&(_.value=i,i==="weeks"?M():i==="months"&&(e.value=!1))}function te(i){const{mode:h}=i.detail;["weeks","months"].includes(h)&&z(h)}function u(){c.value={stages:{formed:!0,review:!0,execution:!0},employees:["all"],dateRange:"last-week",customDateRange:{startDate:null,endDate:null}},n()}function n(){_.value==="weeks"&&M()}function E(i){["weeks","months"].includes(i)&&(_.value=i)}function G(){console.log("[DEBUG] handleCloseModal called"),console.log("[DEBUG] showPeriodModeInfo before:",p.value),console.log("[DEBUG] isLoading before:",e.value),console.log("[DEBUG] periodMode:",_.value),p.value=!1,e.value=!0,console.log("[DEBUG] showPeriodModeInfo after:",p.value),console.log("[DEBUG] isLoading after:",e.value),_t(()=>{console.log("[DEBUG] handleCloseModal: calling handleStartLoading in nextTick"),q()})}function q(){console.log("[DEBUG] handleStartLoading called"),console.log("[DEBUG] periodMode before check:",_.value),console.log("[DEBUG] showPeriodModeInfo:",p.value),console.log("[DEBUG] isLoading:",e.value),(!_.value||!["weeks","months"].includes(_.value))&&(console.warn('[GraphAdmissionClosureDashboard] Period mode not set, using default "weeks"'),_.value="weeks"),console.log("[GraphAdmissionClosureDashboard] Starting loading, periodMode:",_.value),_t(()=>{console.log("[DEBUG] nextTick callback, periodMode:",_.value),console.log("[DEBUG] isLoading in nextTick:",e.value),_.value==="weeks"?(console.log("[GraphAdmissionClosureDashboard] Loading data for weeks mode"),M()):_.value==="months"&&(console.log("[GraphAdmissionClosureDashboard] Months mode - data will be loaded by GraphAdmissionClosureMonthsDashboard"),e.value=!1,console.log("[DEBUG] Reset parent isLoading to false for months mode"))})}function F(i=null){var h,A,x;i?S.value=i:S.value={weekNumber:((h=s.value)==null?void 0:h.weekNumber)||null,weekStartUtc:((A=s.value)==null?void 0:A.weekStartUtc)||null,weekEndUtc:((x=s.value)==null?void 0:x.weekEndUtc)||null},d.value=!0}function ee(i=null){var h,A,x;i?S.value=i:S.value={weekNumber:((h=s.value)==null?void 0:h.weekNumber)||null,weekStartUtc:((A=s.value)==null?void 0:A.weekStartUtc)||null,weekEndUtc:((x=s.value)==null?void 0:x.weekEndUtc)||null},k.value=!0}function le(i=null){var h,A,x;i?S.value=i:S.value={weekNumber:((h=s.value)==null?void 0:h.weekNumber)||null,weekStartUtc:((A=s.value)==null?void 0:A.weekStartUtc)||null,weekEndUtc:((x=s.value)==null?void 0:x.weekEndUtc)||null},m.value=!0}ot(()=>{try{const i="graph-admission-closure-period-mode-info-shown";localStorage.getItem(i)&&localStorage.removeItem(i);const h="graph-admission-closure-period-mode";localStorage.getItem(h)&&localStorage.removeItem(h)}catch(i){console.warn("[GraphAdmissionClosureDashboard] Failed to clean localStorage:",i)}window.addEventListener("period-mode-change",te)}),At(()=>{window.removeEventListener("period-mode-change",te)});function b(){const i=new Date,h=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())),A=h.getUTCDay(),x=h.getUTCDate()-A+(A===0?-6:1),Y=new Date(Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),x,0,0,0)),I=new Date(Y);return I.setUTCDate(I.getUTCDate()+6),I.setUTCHours(23,59,59,999),{weekStartUtc:Y.toISOString(),weekEndUtc:I.toISOString()}}return(i,h)=>{var x,Y,I,j,B,ie,he,be,se,ye,We,Ae,oe,ce,ue,_e,Oe,Ue;const A=Dt("router-link");return g(),w("div",Ji,[de(Ce,{name:"fade",mode:"out-in"},{default:me(()=>[e.value?(g(),w("div",Qi,[r("div",ec,[h[3]||(h[3]=r("div",{class:"preloader-spinner"},[r("div",{class:"spinner-ring"}),r("div",{class:"spinner-ring"}),r("div",{class:"spinner-ring"})],-1)),h[4]||(h[4]=r("h3",{class:"preloader-title"},"–ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞",-1)),r("p",tc," –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ "+W(_.value==="weeks"?"4 –Ω–µ–¥–µ–ª–∏":"3 –º–µ—Å—è—Ü–∞")+"... ",1),h[5]||(h[5]=r("div",{class:"preloader-dots"},[r("span",{class:"dot"}),r("span",{class:"dot"}),r("span",{class:"dot"})],-1))])])):!p.value&&!e.value?(g(),w("div",rc,[_.value==="months"?(g(),$e(An,{key:0})):(g(),w("div",ac,[r("div",sc,[r("div",oc,[r("div",nc,[r("button",{class:"btn-back-link",type:"button",onClick:y,"aria-label":N.value,"aria-disabled":!O.value,"data-fallback":!O.value,disabled:re.value,title:"–ù–∞–∑–∞–¥"}," ‚Üê ",8,lc),r("nav",ic,[de(A,{to:{name:"dashboard-sector-1c"},class:"breadcrumb-link"},{default:me(()=>[...h[6]||(h[6]=[Te(" –î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–° ",-1)])]),_:1}),h[8]||(h[8]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),de(A,{to:{name:"dashboard-graph-state"},class:"breadcrumb-link"},{default:me(()=>[...h[7]||(h[7]=[Te(" –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è ",-1)])]),_:1}),h[9]||(h[9]=r("span",{class:"breadcrumb-separator","aria-hidden":"true"},"/",-1)),h[10]||(h[10]=r("span",{class:"breadcrumb-current"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π",-1))])]),h[11]||(h[11]=r("h1",{class:"dashboard-title"},"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),h[12]||(h[12]=r("p",{class:"dashboard-subtitle"}," –î–æ—Å—Ç—É–ø—ã –∏ —Ñ–∏–ª—å—Ç—Ä—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã ¬´–ì—Ä–∞—Ñ–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è¬ª, —Å–µ–ª–µ–∫—Ç–æ—Ä —ç—Ç–∞–ø–æ–≤ —Å–∫—Ä—ã—Ç. ",-1))])]),r("div",cc,[r("div",dc,[de(Nt,{stages:c.value.stages,employees:c.value.employees,dateRange:c.value.dateRange,customDateRange:c.value.customDateRange,hasActiveFilters:$.value,hideStages:!0,weekPickerMode:!1,showPeriodMode:!0,"period-mode":_.value,"onUpdate:stages":Q,"onUpdate:employees":f,"onUpdate:dateRange":v,"onUpdate:customDateRange":R,"onUpdate:periodMode":z,onReset:u,onApply:n},null,8,["stages","employees","dateRange","customDateRange","hasActiveFilters","period-mode"])]),r("div",uc,[a.value?(g(),$e(Et,{key:0,type:"error",title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",message:a.value.message},null,8,["message"])):(g(),$e(Ms,{key:1,meta:s.value,data:l.value,onOpenResponsible:ee,onOpenStages:F,onOpenCarryover:le},null,8,["meta","data"]))])])]))])):ne("",!0)]),_:1}),de(Xl,{"is-visible":k.value,responsible:U(S.value)||l.value.responsible||[],"closed-tickets-created-this-week":Z(S.value)??l.value.closedTicketsCreatedThisWeek??0,"closed-tickets-created-other-week":H(S.value)??l.value.closedTicketsCreatedOtherWeek??0,"responsible-created-this-week":P(S.value)||l.value.responsibleCreatedThisWeek||[],"responsible-created-other-week":K(S.value)||l.value.responsibleCreatedOtherWeek||[],"week-number":((x=S.value)==null?void 0:x.weekNumber)||((Y=s.value)==null?void 0:Y.weekNumber)||null,"week-start-utc":((I=S.value)==null?void 0:I.weekStartUtc)||((j=s.value)==null?void 0:j.weekStartUtc)||null,"week-end-utc":((B=S.value)==null?void 0:B.weekEndUtc)||((ie=s.value)==null?void 0:ie.weekEndUtc)||null,onClose:h[0]||(h[0]=Ie=>{k.value=!1,S.value.value=null})},null,8,["is-visible","responsible","closed-tickets-created-this-week","closed-tickets-created-other-week","responsible-created-this-week","responsible-created-other-week","week-number","week-start-utc","week-end-utc"]),de(Ti,{"is-visible":d.value,"week-number":((he=S.value)==null?void 0:he.weekNumber)||((be=s.value)==null?void 0:be.weekNumber)||null,"week-start-utc":((se=S.value)==null?void 0:se.weekStartUtc)||((ye=s.value)==null?void 0:ye.weekStartUtc)||null,"week-end-utc":((We=S.value)==null?void 0:We.weekEndUtc)||((Ae=s.value)==null?void 0:Ae.weekEndUtc)||null,"preloaded-data":D(S.value),onClose:h[1]||(h[1]=Ie=>{d.value=!1,S.value.value=null})},null,8,["is-visible","week-number","week-start-utc","week-end-utc","preloaded-data"]),de(Xi,{"is-visible":m.value,"week-number":((oe=S.value)==null?void 0:oe.weekNumber)||((ce=s.value)==null?void 0:ce.weekNumber)||null,"week-start-utc":((ue=S.value)==null?void 0:ue.weekStartUtc)||((_e=s.value)==null?void 0:_e.weekStartUtc)||null,"week-end-utc":((Oe=S.value)==null?void 0:Oe.weekEndUtc)||((Ue=s.value)==null?void 0:Ue.weekEndUtc)||null,"preloaded-data":V(S.value),onClose:h[2]||(h[2]=Ie=>{m.value=!1,S.value.value=null})},null,8,["is-visible","week-number","week-start-utc","week-end-utc","preloaded-data"]),p.value?(g(),$e(ur,{key:0,"is-visible":p.value,"current-mode":_.value,onClose:G,onSelectMode:E},null,8,["is-visible","current-mode"])):ne("",!0)])}}},fc=Se(kc,[["__scopeId","data-v-62a7e660"]]);export{fc as default};
