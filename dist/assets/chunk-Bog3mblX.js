const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./main-Dg8pUIoQ.js","./chunk-J8T_k_VI.js","./chunk-VYgea3_f.js","./chunk-BXCuceMq.js","./chunk-BhH35ey2.js"])))=>i.map(i=>d[i]);
const g="modulepreload",b=function(r,e){return new URL(r,e).href},v={},P=function(e,t,l){let T=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),h=s?.nonce||s?.getAttribute("nonce");T=Promise.allSettled(t.map(a=>{if(a=b(a,l),a in v)return;v[a]=!0;const n=a.endsWith(".css"),u=n?'[rel="stylesheet"]':"";if(!!l)for(let o=i.length-1;o>=0;o--){const d=i[o];if(d.href===a&&(!n||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${u}`))return;const c=document.createElement("link");if(c.rel=n?"stylesheet":g,n||(c.as="script"),c.crossOrigin="",c.href=a,h&&c.setAttribute("nonce",h),document.head.appendChild(c),n)return new Promise((o,d)=>{c.addEventListener("load",o),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}function k(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return T.then(i=>{for(const s of i||[])s.status==="rejected"&&k(s.reason);return e().catch(k)})};function C(){const r=window.location.pathname;return r.endsWith("index.php")||r.endsWith("install.php")?r.substring(0,r.lastIndexOf("/")):r.endsWith("/")?r.substring(0,r.length-1):r.substring(0,r.lastIndexOf("/"))}function B(r){const e=C(),t=r.startsWith("/")?r.substring(1):r;return`${e}/${t}`}function M(r){const e=C(),t=r.startsWith("/")?r.substring(1):r;return`${e}/${t}`}const S="/api/graph-1c-admission-closure.php";function E(r){if(!r)return{meta:null,data:{currentWeek:{newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedOtherWeek:0,carryoverTicketsCreatedPreviousWeek:0,carryoverTicketsCreatedOlder:0},newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,series:{new:[0],closed:[0],closedCreatedThisWeek:[0],closedCreatedOtherWeek:[0],carryover:[0],carryoverCreatedThisWeek:[0],carryoverCreatedOtherWeek:[0],carryoverCreatedPreviousWeek:[0],carryoverCreatedOlder:[0]},weeksData:[],stagesByWeek:[],stages:[],responsible:[],responsibleCreatedThisWeek:[],responsibleCreatedOtherWeek:[]}};const e=r.data||r.result||r,t=e.meta||r.meta||null;return{meta:{...t,currentWeek:t?.currentWeek||(t?{weekNumber:t.weekNumber,weekStartUtc:t.weekStartUtc,weekEndUtc:t.weekEndUtc}:null),weeks:t?.weeks||[]},data:{currentWeek:e.data?.currentWeek||(e.data?{newTickets:e.data.newTickets??0,closedTickets:e.data.closedTickets??0,closedTicketsCreatedThisWeek:e.data.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:e.data.closedTicketsCreatedOtherWeek??0,carryoverTickets:e.data.carryoverTickets??0,carryoverTicketsCreatedThisWeek:e.data.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:e.data.carryoverTicketsCreatedOtherWeek??0,carryoverTicketsCreatedPreviousWeek:e.data.carryoverTicketsCreatedPreviousWeek??0,carryoverTicketsCreatedOlder:e.data.carryoverTicketsCreatedOlder??0}:{newTickets:0,closedTickets:0,closedTicketsCreatedThisWeek:0,closedTicketsCreatedOtherWeek:0,carryoverTickets:0,carryoverTicketsCreatedThisWeek:0,carryoverTicketsCreatedOtherWeek:0,carryoverTicketsCreatedPreviousWeek:0,carryoverTicketsCreatedOlder:0}),newTickets:e.data?.currentWeek?.newTickets??e.data?.newTickets??e.newTickets??0,closedTickets:e.data?.currentWeek?.closedTickets??e.data?.closedTickets??e.closedTickets??0,closedTicketsCreatedThisWeek:e.data?.currentWeek?.closedTicketsCreatedThisWeek??e.data?.closedTicketsCreatedThisWeek??e.closedTicketsCreatedThisWeek??0,closedTicketsCreatedOtherWeek:e.data?.currentWeek?.closedTicketsCreatedOtherWeek??e.data?.closedTicketsCreatedOtherWeek??e.closedTicketsCreatedOtherWeek??0,carryoverTickets:e.data?.currentWeek?.carryoverTickets??e.data?.carryoverTickets??e.carryoverTickets??0,carryoverTicketsCreatedThisWeek:e.data?.currentWeek?.carryoverTicketsCreatedThisWeek??e.data?.carryoverTicketsCreatedThisWeek??e.carryoverTicketsCreatedThisWeek??0,carryoverTicketsCreatedOtherWeek:e.data?.currentWeek?.carryoverTicketsCreatedOtherWeek??e.data?.carryoverTicketsCreatedOtherWeek??e.carryoverTicketsCreatedOtherWeek??0,carryoverTicketsCreatedPreviousWeek:e.data?.currentWeek?.carryoverTicketsCreatedPreviousWeek??e.data?.carryoverTicketsCreatedPreviousWeek??e.carryoverTicketsCreatedPreviousWeek??0,carryoverTicketsCreatedOlder:e.data?.currentWeek?.carryoverTicketsCreatedOlder??e.data?.carryoverTicketsCreatedOlder??e.carryoverTicketsCreatedOlder??0,series:{new:e.data?.series?.new??e.series?.new??[0],closed:e.data?.series?.closed??e.series?.closed??[0],closedCreatedThisWeek:e.data?.series?.closedCreatedThisWeek??e.series?.closedCreatedThisWeek??[0],closedCreatedOtherWeek:e.data?.series?.closedCreatedOtherWeek??e.series?.closedCreatedOtherWeek??[0],carryover:e.data?.series?.carryover??e.series?.carryover??[0],carryoverCreatedThisWeek:e.data?.series?.carryoverCreatedThisWeek??e.series?.carryoverCreatedThisWeek??[0],carryoverCreatedOtherWeek:e.data?.series?.carryoverCreatedOtherWeek??e.series?.carryoverCreatedOtherWeek??[0],carryoverCreatedPreviousWeek:e.data?.series?.carryoverCreatedPreviousWeek??e.series?.carryoverCreatedPreviousWeek??[0],carryoverCreatedOlder:e.data?.series?.carryoverCreatedOlder??e.series?.carryoverCreatedOlder??[0]},weeksData:e.data?.weeksData??e.weeksData??[],stagesByWeek:e.data?.stagesByWeek??e.stagesByWeek??[],stages:e.data?.stages??e.stages??[],responsible:e.data?.responsible??e.responsible??[],responsibleCreatedThisWeek:e.data?.responsibleCreatedThisWeek??e.responsibleCreatedThisWeek??[],responsibleCreatedOtherWeek:e.data?.responsibleCreatedOtherWeek??e.responsibleCreatedOtherWeek??[],newTicketsByStages:e.data?.newTicketsByStages??e.newTicketsByStages??null,carryoverTicketsByDuration:e.data?.carryoverTicketsByDuration??e.carryoverTicketsByDuration??null,newTicketsByMonth:e.data?.newTicketsByMonth??e.newTicketsByMonth??[],closedTicketsByMonth:e.data?.closedTicketsByMonth??e.closedTicketsByMonth??[],carryoverTicketsByMonth:e.data?.carryoverTicketsByMonth??e.carryoverTicketsByMonth??[]}}}async function W(r={}){const{endpoint:e=S,product:t="1C",weekStartUtc:l=null,weekEndUtc:T=null,periodMode:k="weeks",useCache:i=!0,forceRefresh:s=!1,includeTickets:h=!1,includeNewTicketsByStages:a=!1,includeCarryoverTickets:n=!0,includeCarryoverTicketsByDuration:u=!1}=r,y={product:t,weekStartUtc:l,weekEndUtc:T,periodMode:k,useCache:i,forceRefresh:s,includeTickets:h,includeNewTicketsByStages:a,includeCarryoverTickets:n,includeCarryoverTicketsByDuration:u},c=B(e),o=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(y)});if(!o.ok)throw new Error(`Ошибка запроса (${o.status})`);const d=await o.json();if(d?.success===!1)throw new Error(d.message||"Бэкенд вернул ошибку");const f=E(d);if(d.cache_used===!0){const{CacheNotificationService:O}=await P(async()=>{const{CacheNotificationService:p}=await import("./main-Dg8pUIoQ.js").then(m=>m.h);return{CacheNotificationService:p}},__vite__mapDeps([0,1,2,3,4]),import.meta.url),w=k==="months"?"График приёма/закрытий 1С (3 месяца)":"График приёма/закрытий 1С (4 недели)";O.notifyCacheUsed(w)}return f}const _={fetchAdmissionClosureStats:W},N=Object.freeze(Object.defineProperty({__proto__:null,default:_,fetchAdmissionClosureStats:W},Symbol.toStringTag,{value:"Module"}));export{P as _,M as a,C as b,N as c,W as f,B as g};
