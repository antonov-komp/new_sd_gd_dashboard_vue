import{a0 as l}from"./main-dnhRka5M.js";let s=null,o=null;const r={allow_direct_access:!1,message_on_deny:"Прямой доступ к приложению запрещён. Откройте приложение через интерфейс Bitrix24."};async function a(){return s||o||(o=(async()=>{try{const e=new AbortController,i=setTimeout(()=>e.abort(),5e3),c=await fetch(l("/api/direct-access-config.php"),{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:e.signal});if(clearTimeout(i),!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const t=await c.json();if(!t||typeof t!="object")throw new Error("Invalid config format");const n={allow_direct_access:t.allow_direct_access===!0,message_on_deny:t.message_on_deny||r.message_on_deny,is_ip_whitelisted:t.is_ip_whitelisted===!0,client_ip:t.client_ip||"unknown"};return n.is_ip_whitelisted&&console.log("Direct access allowed: IP is whitelisted",{ip:n.client_ip,allow_direct_access:n.allow_direct_access}),s=n,n}catch(e){console.error("Error loading direct access config:",e);const i={...r};return s=i,i}finally{o=null}})(),o)}async function d(){return(await a()).allow_direct_access===!0}async function f(){return(await a()).message_on_deny||r.message_on_deny}export{f as getDenyMessage,a as getDirectAccessConfig,d as isDirectAccessAllowed};
