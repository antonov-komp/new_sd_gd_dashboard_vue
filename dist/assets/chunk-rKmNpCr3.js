const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./direct-access-config-BoqPJuXv.js","./chunk-B5yqeUNo.js","./chunk-UTsEWqhV.js","./chunk-BTnG7_Rn.js","./chunk-IDUYkvJI.js","./chunk-Bwkg0lDb.js","./chunk-DVSMqPZp.js","./chunk-DLgBCjTL.js","./graph-state-components-q2unGHzB.css"])))=>i.map(i=>d[i]);
var we=Object.defineProperty;var Ie=(i,e,s)=>e in i?we(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var F=(i,e,s)=>Ie(i,typeof e!="symbol"?e+"":e,s);import{r as P,c as _,a as d,b as f,d as o,t as g,n as B,o as l,w as $,s as he,e as N,F as p,f as E,g as L,h as Ne,i as te,j as D,k as j,T as ie,l as Se,m as ke,v as Oe,p as Re,q as xe,u as pe,x as fe,y as Be,z as Pe,A as Le}from"./chunk-IDUYkvJI.js";import{u as Me,a as Ee,b as Ue,c as We,d as Fe}from"./chunk-BTnG7_Rn.js";import{i as He,a as Ae}from"./chunk-DLgBCjTL.js";import{B as ge}from"./chunk-UTsEWqhV.js";import{_ as oe}from"./chunk-B5yqeUNo.js";const O=(i,e)=>{const s=i.__vccOpts||i;for(const[t,r]of e)s[t]=r;return s};function Y(){try{if(window.self===window.top)return!1;if(typeof BX24<"u")return!0;try{const i=window.parent.location.origin;return i.includes("bitrix24")||i.includes("kompo.by")}catch{return!1}}catch(i){return console.warn("Error checking Bitrix24 context:",i),!1}}function Ve(){return typeof BX24<"u"}class q{static init(e){return new Promise((s,t)=>{if(!Y()){console.log("Not inside Bitrix24, skipping BX24.init()"),e&&e(),s();return}if(typeof BX24>"u"){t(new Error("Bitrix24 API not loaded. Make sure script is included: //api.bitrix24.com/api/v1/"));return}const r=setTimeout(()=>{t(new Error("BX24.init() timeout: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Bitrix24 API –ø—Ä–µ–≤—ã—Å–∏–ª–∞ 5 —Å–µ–∫—É–Ω–¥"))},5e3);try{BX24.init(()=>{clearTimeout(r),e&&e(),s()})}catch(c){clearTimeout(r),t(c)}})}static installFinish(){return new Promise((e,s)=>{if(typeof BX24>"u"){s(new Error("Bitrix24 API not loaded"));return}try{BX24.installFinish(),e()}catch(t){s(t)}})}static callMethod(e,s={}){return new Promise((t,r)=>{if(typeof BX24>"u"){r(new Error("Bitrix24 API not loaded"));return}const c=setTimeout(()=>{r(new Error(`BX24.callMethod(${e}) timeout: –∑–∞–ø—Ä–æ—Å –ø—Ä–µ–≤—ã—Å–∏–ª 10 —Å–µ–∫—É–Ω–¥`))},1e4);try{BX24.callMethod(e,s,n=>{if(clearTimeout(c),n.error()){const a=n.error();r(new Error(a.error_description||a.error||"Unknown error"))}else t(n.data())})}catch(n){clearTimeout(c),r(n)}})}static async getCurrentUser(){if(Y()&&Ve())try{const e=await Promise.race([this.callMethod("user.current",{}),new Promise((s,t)=>setTimeout(()=>t(new Error("Timeout")),5e3))]);return console.log("Got user from BX24.callMethod() (interface user):",e?.ID||"unknown"),e}catch(e){console.warn("BX24.callMethod() failed, using proxy API as fallback:",e);try{const s=await ge.getCurrentUser();return console.log("Got user from proxy API (token owner, fallback):",s),s}catch(s){throw console.error("Both BX24 API and proxy API failed:",s),e.message&&e.message.includes("timeout")?new Error("–¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. Bitrix24 API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç."):new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ü–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ò–¢ –æ—Ç–¥–µ–ª.")}}else return console.warn("Not inside Bitrix24, using proxy API (will return token owner, not interface user)"),await ge.getCurrentUser()}static getUser(){return new Promise((e,s)=>{if(typeof BX24>"u"){s(new Error("Bitrix24 API not loaded"));return}if(typeof BX24.getUser!="function"){s(new Error("BX24.getUser is not available"));return}BX24.getUser(t=>{e(t)})})}static getAuth(){return new Promise((e,s)=>{if(typeof BX24>"u"){s(new Error("Bitrix24 API not loaded"));return}BX24.getAuth(t=>{e(t)})})}}const R={USER_NOT_DETERMINED:"USER_NOT_DETERMINED",ACCESS_DENIED:"ACCESS_DENIED",API_ERROR:"API_ERROR"};class I{constructor(e,s=null,t=null,r=null){this.allowed=e,this.errorCode=s,this.errorMessage=t,this.user=r}}class je{static async checkAccess(){try{const e=Y();if(console.log("AccessControlService.checkAccess - isInsideBitrix24:",e),console.log("AccessControlService.checkAccess - window.self === window.top:",window.self===window.top),console.log("AccessControlService.checkAccess - typeof BX24:",typeof BX24),e)console.log("AccessControlService.checkAccess - Inside Bitrix24, skipping direct access check");else{console.log("AccessControlService.checkAccess - Not inside Bitrix24, checking direct access config...");const{isDirectAccessAllowed:c,getDenyMessage:n}=await oe(async()=>{const{isDirectAccessAllowed:h,getDenyMessage:u}=await import("./direct-access-config-BoqPJuXv.js");return{isDirectAccessAllowed:h,getDenyMessage:u}},__vite__mapDeps([0,1]),import.meta.url),a=await c();if(console.log("AccessControlService.checkAccess - allowDirectAccess:",a),!a){const h=await n();return console.warn("Direct access denied: Application opened directly in browser, but direct access is disabled in config"),console.warn("Deny message:",h),new I(!1,R.ACCESS_DENIED,h,null)}console.log("Direct access allowed: Using primary administrator token from settings.php")}if(e)try{await Promise.race([q.init(),new Promise((c,n)=>setTimeout(()=>n(new Error("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Bitrix24 API –ø—Ä–µ–≤—ã—Å–∏–ª–∞ 5 —Å–µ–∫—É–Ω–¥")),5e3))])}catch(c){console.warn("BX24.init() failed, will try proxy API:",c)}let s;try{s=await Promise.race([q.getCurrentUser(),new Promise((c,n)=>setTimeout(()=>n(new Error("–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–µ–≤—ã—Å–∏–ª–æ 10 —Å–µ–∫—É–Ω–¥")),1e4))])}catch(c){console.warn("Bitrix24BxApi.getCurrentUser() failed, trying proxy API:",c);const{Bitrix24ApiProvider:n}=await oe(async()=>{const{Bitrix24ApiProvider:a}=await import("./chunk-UTsEWqhV.js").then(h=>h.a);return{Bitrix24ApiProvider:a}},__vite__mapDeps([2,1,3,4,5,6,7,8]),import.meta.url);try{const a=await n.getInstance();s=await Promise.race([a.getCurrentUser(),new Promise((h,u)=>setTimeout(()=>u(new Error("–ü—Ä–æ–∫—Å–∏ API –ø—Ä–µ–≤—ã—Å–∏–ª–æ 5 —Å–µ–∫—É–Ω–¥")),5e3))]),console.log("Got user from proxy API:",s?.ID||"unknown")}catch(a){throw console.error("Both BX24 API and proxy API failed:",a),new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ü–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ò–¢ –æ—Ç–¥–µ–ª.")}}if(!s||!s.ID)return console.warn("AccessControlService.checkAccess - user not determined:",s),new I(!1,R.USER_NOT_DETERMINED,"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ü–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ò–¢ –æ—Ç–¥–µ–ª.");console.log("AccessControlService.checkAccess - user determined:",{id:s.ID,name:s.NAME,departments:s.UF_DEPARTMENT});const t=s.UF_DEPARTMENT||[];if(console.log("AccessControlService.checkAccess - departmentIds:",t),!Array.isArray(t)||t.length===0){if(console.log("AccessControlService.checkAccess - user has no departments"),!e){const{isDirectAccessAllowed:c}=await oe(async()=>{const{isDirectAccessAllowed:a}=await import("./direct-access-config-BoqPJuXv.js");return{isDirectAccessAllowed:a}},__vite__mapDeps([0,1]),import.meta.url);if(await c())return console.log("AccessControlService.checkAccess - Direct access allowed, granting access despite no departments"),new I(!0,null,null,s)}return console.warn("AccessControlService.checkAccess - Access denied: user has no departments"),new I(!1,R.ACCESS_DENIED,"–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –æ—Ç–¥–µ–ª—É.")}const r=t.some(c=>He(c));return console.log("AccessControlService.checkAccess - hasAccess:",r),r?(console.log("AccessControlService.checkAccess - Access granted"),new I(!0,null,null,s)):(console.warn("AccessControlService.checkAccess - Access denied: no allowed departments"),new I(!1,R.ACCESS_DENIED,"–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω"))}catch(e){return console.error("AccessControlService.checkAccess error:",e),e.message&&(e.message.includes("CORS")||e.message.includes("blocked")||e.message.includes("ERR_FAILED")||e.message.includes("unknown address space"))&&Y()?(console.error("CORS error inside Bitrix24: Cannot determine interface user."),new I(!1,R.API_ERROR,"–û—à–∏–±–∫–∞ CORS: –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ü–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ò–¢ –æ—Ç–¥–µ–ª.")):e.message&&e.message.includes("not loaded")?new I(!1,R.USER_NOT_DETERMINED,"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ü–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ò–¢ –æ—Ç–¥–µ–ª."):new I(!1,R.API_ERROR,"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ü–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ò–¢ –æ—Ç–¥–µ–ª.")}}static async getCurrentUser(){try{return Y()&&await q.init(),await q.getCurrentUser()}catch(e){return console.error("AccessControlService.getCurrentUser error:",e),null}}}const J={SECTOR_1C:366,SECTOR_HARDWARE:368,SECTOR_BITRIX24:369,SECTOR_PDM:367,KEEPER:1051},Ye=[J.SECTOR_1C,J.SECTOR_HARDWARE,J.SECTOR_BITRIX24,J.SECTOR_PDM];function ze(i){return Ye.includes(i)}const Xe=140,ne={FORMED:{name:"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ",bitrixId:"DT140_12:UC_0VHWE2"},REVIEW:{name:"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó",bitrixId:"DT140_12:PREPARATION"},EXECUTION:{name:"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ",bitrixId:"DT140_12:CLIENT"}},wo={"DT140_12:UC_0VHWE2":"formed","DT140_12:PREPARATION":"review","DT140_12:CLIENT":"execution"},Io={formed:"DT140_12:UC_0VHWE2",review:"DT140_12:PREPARATION",execution:"DT140_12:CLIENT"};function No(){return[ne.FORMED.bitrixId,ne.REVIEW.bitrixId,ne.EXECUTION.bitrixId]}const Ge="https://bitrix24.kompo.by",Ke="servisdeskitotdel";function qe(i){return`${Ge}/page/${Ke}/servisdesk/type/${Xe}/details/${i}/`}const b={TODAY:"today",YESTERDAY:"yesterday",THIS_WEEK:"this_week",LAST_WEEK:"last_week",MORE_THAN_TWO_WEEKS:"more_than_two_weeks",UP_TO_ONE_MONTH:"up_to_one_month",MORE_THAN_TWO_MONTHS:"more_than_two_months",MORE_THAN_HALF_YEAR:"more_than_half_year",MORE_THAN_YEAR:"more_than_year"},Je={[b.TODAY]:{label:"–°–ï–ì–û–î–ù–Ø",color:"#28a745",backgroundColor:"#d4edda",textColor:"#155724"},[b.YESTERDAY]:{label:"–í–ß–ï–†–ê",color:"#20c997",backgroundColor:"#d1f2eb",textColor:"#0c5460"},[b.THIS_WEEK]:{label:"–ù–ê –≠–¢–û–ô –ù–ï–î–ï–õ–ï",color:"#17a2b8",backgroundColor:"#d1ecf1",textColor:"#0c5460"},[b.LAST_WEEK]:{label:"–ù–ê –ü–†–û–®–õ–û–ô –ù–ï–î–ï–õ–ï",color:"#ffc107",backgroundColor:"#fff3cd",textColor:"#856404"},[b.MORE_THAN_TWO_WEEKS]:{label:"–ë–û–õ–ï–ï –î–í–£–• –ù–ï–î–ï–õ–¨",color:"#fd7e14",backgroundColor:"#ffe5d0",textColor:"#7d3f00"},[b.UP_TO_ONE_MONTH]:{label:"–î–û 1 –ú–ï–°–Ø–¶–ê",color:"#dc3545",backgroundColor:"#f8d7da",textColor:"#721c24"},[b.MORE_THAN_TWO_MONTHS]:{label:"–ë–û–õ–ï–ï 2 –ú–ï–°–Ø–¶–ï–í",color:"#6c757d",backgroundColor:"#e2e3e5",textColor:"#383d41"},[b.MORE_THAN_HALF_YEAR]:{label:"–ë–û–õ–ï–ï –ü–û–õ–£–ì–û–î–ê",color:"#6c757d",backgroundColor:"#d6d8db",textColor:"#212529"},[b.MORE_THAN_YEAR]:{label:"–ë–û–õ–ï–ï –ì–û–î–ê",color:"#343a40",backgroundColor:"#c6c8ca",textColor:"#000000"}};function ye(i){if(!i)return null;const e=String(i).trim();if(e.length===0)return null;try{const s=new Date(e);return isNaN(s.getTime())?(console.warn("Invalid date format:",i),null):s}catch(s){return console.error("Error parsing date:",i,s),null}}function re(i){if(!i)return"";let e;if(i instanceof Date?e=i:e=new Date(i),isNaN(e.getTime()))return"";const s=e.getDate(),t=e.getMonth()+1,r=e.getFullYear(),c=String(s).padStart(2,"0"),n=String(t).padStart(2,"0"),a=String(r);return`${c}.${n}.${a}`}function Ze(i,e=new Date){if(!i)return"";const s=i instanceof Date?i:new Date(i),t=e instanceof Date?e:new Date(e);if(isNaN(s.getTime())||isNaN(t.getTime()))return re(s);const r=new Date(s.getFullYear(),s.getMonth(),s.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate())-r,a=Math.floor(n/(1e3*60*60*24));return a===0?"–°–µ–≥–æ–¥–Ω—è":re(s)}function Qe(i,e=new Date){if(!i)return b.MORE_THAN_YEAR;const s=i instanceof Date?i:new Date(i),t=e instanceof Date?e:new Date(e);if(isNaN(s.getTime())||isNaN(t.getTime()))return b.MORE_THAN_YEAR;const r=new Date(s.getFullYear(),s.getMonth(),s.getDate()),c=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=c-r;if(n<0)return b.TODAY;const a=Math.floor(n/(1e3*60*60*24)),h=Math.floor(a/7),u=Math.floor(a/30),m=Math.floor(a/365);if(a===0)return b.TODAY;if(a===1)return b.YESTERDAY;const k=new Date(c),y=c.getDay(),v=y===0?6:y-1;if(k.setDate(c.getDate()-v),k.setHours(0,0,0,0),r>=k&&a<7)return b.THIS_WEEK;const S=new Date(k);return S.setDate(k.getDate()-7),r>=S&&r<k?b.LAST_WEEK:h>=2&&u<1?b.MORE_THAN_TWO_WEEKS:u>=1&&u<2?b.UP_TO_ONE_MONTH:u>=2&&u<6?b.MORE_THAN_TWO_MONTHS:u>=6&&m<1?b.MORE_THAN_HALF_YEAR:b.MORE_THAN_YEAR}const $e={name:"TicketCard",props:{ticket:{type:Object,required:!0},draggable:{type:Boolean,default:!0}},emits:["click","drag-start","drag-end"],setup(i,{emit:e}){const s=P(!1),t=_(()=>!1),r={color:"#ced4da",backgroundColor:"#f1f3f5",textColor:"#6c757d"},c={color:"#ced4da",backgroundColor:"#f8f9fa",textColor:"#6c757d"},n={color:"#dee2e6",backgroundColor:"#f8f9fa",textColor:"#6c757d"},a=_(()=>({label:i.ticket.priorityLabel||"–ù–µ —É–∫–∞–∑–∞–Ω–æ",colors:i.ticket.priorityColors||r})),h=_(()=>a.value.label||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"),u=_(()=>({color:a.value.colors.textColor||r.textColor,backgroundColor:a.value.colors.backgroundColor||r.backgroundColor,borderColor:a.value.colors.color||r.color})),m=_(()=>({borderLeftColor:a.value.colors.color||r.color})),k=_(()=>{const T=i.ticket.service||{};return{label:T.label||i.ticket.serviceLabel||"–ù–µ —É–∫–∞–∑–∞–Ω–æ",colors:T.colors||i.ticket.serviceColors||c}}),y=_(()=>k.value.label||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"),v=_(()=>({color:k.value.colors.textColor||c.textColor,backgroundColor:k.value.colors.backgroundColor||c.backgroundColor,borderColor:k.value.colors.color||c.color})),S=_(()=>{const T=i.ticket.actionStr||i.ticket.ufActionStr||null;if(!T)return null;const K=String(T).trim();return K.length>0?K:null}),w=_(()=>({color:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.color})),se=_(()=>{if(!i.ticket.createdAt)return"";const T=ye(i.ticket.createdAt);return T?Ze(T):""}),X=_(()=>{if(!i.ticket.createdAt)return null;const T=ye(i.ticket.createdAt);return Qe(T)}),G=_(()=>{const T=X.value;return T&&Je[T]||null}),M=_(()=>{const T=G.value;return T?{color:T.textColor,backgroundColor:T.backgroundColor,borderColor:T.color,border:`1px solid ${T.color}`}:{}});return{handleDragStart:T=>{t.value&&(T.dataTransfer.effectAllowed="move",T.dataTransfer.setData("application/json",JSON.stringify(i.ticket)),T.dataTransfer.setDragImage(T.target,0,0),s.value=!0,e("drag-start",i.ticket))},handleDragEnd:()=>{t.value&&(s.value=!1,e("drag-end"))},handleCardClick:T=>{if(s.value)return;const K=qe(i.ticket.id);window.open(K,"_blank"),e("click",i.ticket)},isDragEnabled:t,priorityChipStyle:u,displayPriorityLabel:h,priorityBorderStyle:m,displayServiceLabel:y,serviceChipStyle:v,actionStrValue:S,actionChipStyle:w,formattedCreatedDate:se,dateAccentCategory:X,dateAccentConfig:G,dateAccentStyle:M}}},et=["draggable"],tt={key:0,class:"ticket-department"},st={class:"ticket-header"},it={class:"ticket-id"},ot={class:"ticket-title"},nt={class:"ticket-meta"},rt={key:1,class:"ticket-action"},at={key:2,class:"ticket-description"},lt={class:"ticket-date-label"},ct={class:"ticket-date-value"};function dt(i,e,s,t,r,c){return l(),d("div",{class:"ticket-card",draggable:t.isDragEnabled,style:B(t.priorityBorderStyle),onClick:e[0]||(e[0]=(...n)=>t.handleCardClick&&t.handleCardClick(...n)),onDragstart:e[1]||(e[1]=(...n)=>t.handleDragStart&&t.handleDragStart(...n)),onDragend:e[2]||(e[2]=(...n)=>t.handleDragEnd&&t.handleDragEnd(...n))},[s.ticket.departmentHead?(l(),d("div",tt,g(s.ticket.departmentHead),1)):f("",!0),o("div",st,[e[3]||(e[3]=o("span",{class:"ticket-icon"},"üé´",-1)),o("span",it,"#"+g(s.ticket.id),1)]),o("div",ot,g(s.ticket.ufSubject||s.ticket.title||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"),1),o("div",nt,[o("span",{class:"ticket-priority",style:B(t.priorityChipStyle)},g(t.displayPriorityLabel),5),o("span",{class:"ticket-service",style:B(t.serviceChipStyle)},g(t.displayServiceLabel),5)]),t.actionStrValue?(l(),d("div",rt,[o("span",{class:"ticket-action-chip",style:B(t.actionChipStyle)},g(t.actionStrValue),5)])):f("",!0),s.ticket.description?(l(),d("div",at,g(s.ticket.description),1)):f("",!0),t.formattedCreatedDate?(l(),d("div",{key:3,class:"ticket-created-date",style:B(t.dateAccentStyle)},[o("span",lt,g(t.dateAccentConfig?.label||""),1),o("span",ct,g(t.formattedCreatedDate),1)],4)):f("",!0)],44,et)}const Ce=O($e,[["render",dt],["__scopeId","data-v-9cda001c"]]),gt={name:"ZeroPoint",components:{TicketCard:Ce},props:{tickets:{type:Array,required:!0,default:()=>[]},stageId:{type:String,required:!0}},emits:{"ticket-dragged":i=>typeof i=="object"&&i!==null,"ticket-assigned":i=>typeof i=="object"&&i!==null,"ticket-clicked":i=>typeof i=="object"&&i!==null},setup(i,{emit:e}){return{hasTickets:_(()=>Array.isArray(i.tickets)&&i.tickets.length>0),handleTicketDragStart:r=>{e("ticket-dragged",r)}}}},ut={class:"zero-point"},mt={key:0,class:"empty-state"};function ht(i,e,s,t,r,c){const n=N("TicketCard");return l(),d("div",ut,[e[3]||(e[3]=o("div",{class:"zero-point-header"},[o("h3",null,"–ù—É–ª–µ–≤–∞—è —Ç–æ—á–∫–∞")],-1)),$([s.tickets.length,s.tickets.map(a=>a.id).join(",")],()=>(l(),d("div",{class:"zero-point-tickets"},[(l(!0),d(p,null,E(s.tickets,a=>(l(),L(n,{key:a.id,ticket:a,draggable:!0,onDragStart:h=>t.handleTicketDragStart(a),onClick:h=>i.$emit("ticket-clicked",a)},null,8,["ticket","onDragStart","onClick"]))),128))])),e,0),e[1]||(he(-1,!0),(e[1]=t.hasTickets?f("",!0):(l(),d("div",mt,[...e[2]||(e[2]=[o("p",null,"–ù–µ—Ç –Ω–µ—Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –≤ —Å—Ç–∞–¥–∏–∏",-1)])]))).cacheIndex=1,he(1),e[1])])}const kt=O(gt,[["render",ht],["__scopeId","data-v-c5370e55"]]),ae="dashboard-sector-1c-logger-level",H={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4};class U{static getLevel(){if(typeof localStorage<"u"){const e=localStorage.getItem(ae);if(e&&H[e]!==void 0)return e}return"ERROR"}static setLevel(e){return H[e]!==void 0?(typeof localStorage<"u"&&localStorage.setItem(ae,e),!0):!1}static isEnabled(e,s=null){const t=s||this.getLevel();if(t==="NONE")return!1;const r=H[e]||0,c=H[t]||0;return r<=c}static getLevels(){return{...H}}static reset(){typeof localStorage<"u"&&localStorage.removeItem(ae)}}class x{static getLevelColor(e){return{ERROR:"#dc3545",WARN:"#ffc107",INFO:"#17a2b8",DEBUG:"#6c757d"}[e]||"#6c757d"}static formatMessage(e,s,t=""){const r=new Date().toISOString(),c=this.getLevelColor(e),n=`%c[${r}] %c[${e}] %c[${t||"Unknown"}] %c${s}`,a=["color: #6c757d; font-weight: normal",`color: ${c}; font-weight: bold`,"color: #007bff; font-weight: normal","color: #212529; font-weight: normal"];return{formatted:n,styles:a}}static log(e,s,t="",r=null){if(!U.isEnabled(e))return;const c=this.formatMessage(e,s,t),n=[c.formatted,...c.styles];switch(r!=null&&n.push(r),e){case"ERROR":console.error(...n);break;case"WARN":console.warn(...n);break;case"INFO":console.info(...n);break;case"DEBUG":console.log(...n);break;default:console.log(...n)}}static error(e,s="",t=null){this.log("ERROR",e,s,t)}static warn(e,s="",t=null){this.log("WARN",e,s,t)}static info(e,s="",t=null){this.log("INFO",e,s,t)}static debug(e,s="",t=null){this.log("DEBUG",e,s,t)}}const ft={name:"EmployeeColumn",components:{TicketCard:Ce},props:{employee:{type:Object,required:!0},stageId:{type:String,required:!0}},emits:["ticket-clicked","ticket-dropped"],setup(i,{emit:e}){Ee("EmployeeColumn");const t=Me(async(m,k,y)=>{e("ticket-dropped",m,k)}),r=_(()=>i.employee.isFromSector1C?Array.isArray(i.employee.tickets)?i.employee.tickets:[]:Array.isArray(i.employee.ticketsInsideSector)?i.employee.ticketsInsideSector:[]),c=_(()=>i.employee.isFromSector1C?[]:Array.isArray(i.employee.ticketsOutsideSector)?i.employee.ticketsOutsideSector:Array.isArray(i.employee.tickets)?i.employee.tickets:[]),n=_(()=>i.employee.isFromSector1C?Array.isArray(i.employee.tickets)?i.employee.tickets:[]:[]),a=_(()=>r.value.length+c.value.length),h=m=>{t.handleDrop(m,i.employee.id,i.stageId)},u=m=>{};return{isDropZoneActive:t.isDropZoneActive,handleDragOver:t.handleDragOver,handleDragLeave:t.handleDragLeave,handleDrop:h,ticketsInsideSector:r,ticketsOutsideSector:c,ticketsToDisplay:n,totalTicketsCount:a,handleTicketDragStart:u}}},yt={class:"employee-header"},_t={class:"employee-info"},Tt={class:"employee-details"},vt={class:"employee-name"},bt={key:0,class:"employee-position"},St={class:"tickets-count"},pt={class:"tickets-list"},Et={class:"section-header"},At={class:"section-count"},Ct={key:2,class:"empty-state"};function Dt(i,e,s,t,r,c){const n=N("TicketCard");return l(),d("div",{class:te(["employee-column",{"drop-zone-active":t.isDropZoneActive}]),onDragover:e[3]||(e[3]=Ne((...a)=>t.handleDragOver&&t.handleDragOver(...a),["prevent"])),onDragleave:e[4]||(e[4]=(...a)=>t.handleDragLeave&&t.handleDragLeave(...a)),onDrop:e[5]||(e[5]=(...a)=>t.handleDrop&&t.handleDrop(...a))},[o("div",yt,[o("div",_t,[e[6]||(e[6]=o("span",{class:"employee-icon"},"üë§",-1)),o("div",Tt,[o("div",vt,g(s.employee.name),1),s.employee.position?(l(),d("div",bt,g(s.employee.position),1)):f("",!0)])]),o("div",St," üìä –¢–∏–∫–µ—Ç–æ–≤: "+g(t.totalTicketsCount),1)]),o("div",pt,[s.employee.isFromSector1C?$([t.ticketsToDisplay.length,t.ticketsToDisplay.map(a=>a.id).join(",")],()=>(l(),d("div",{key:0},[D(ie,{name:"ticket",tag:"div"},{default:j(()=>[(l(!0),d(p,null,E(t.ticketsToDisplay,a=>(l(),L(n,{key:a.id,ticket:a,draggable:!0,onClick:h=>i.$emit("ticket-clicked",a),onDragStart:t.handleTicketDragStart},null,8,["ticket","onClick","onDragStart"]))),128))]),_:1})])),e,0):(l(),d(p,{key:1},[t.ticketsInsideSector.length>0?$([t.ticketsInsideSector.length,t.ticketsInsideSector.map(a=>a.id).join(",")],()=>(l(),d("div",{key:0,class:"tickets-section tickets-inside-sector"},[D(ie,{name:"ticket",tag:"div"},{default:j(()=>[(l(!0),d(p,null,E(t.ticketsInsideSector,a=>(l(),L(n,{key:a.id,ticket:a,draggable:!0,onClick:h=>i.$emit("ticket-clicked",a),onDragStart:t.handleTicketDragStart},null,8,["ticket","onClick","onDragStart"]))),128))]),_:1})])),e,1):f("",!0),t.ticketsOutsideSector.length>0?$([t.ticketsOutsideSector.length,t.ticketsOutsideSector.map(a=>a.id).join(",")],()=>(l(),d("div",{key:1,class:"tickets-section tickets-outside-sector"},[o("div",Et,[e[7]||(e[7]=o("span",{class:"section-badge"},"–í–Ω–µ —Å–µ–∫—Ç–æ—Ä–∞",-1)),o("span",At,g(t.ticketsOutsideSector.length),1)]),D(ie,{name:"ticket",tag:"div"},{default:j(()=>[(l(!0),d(p,null,E(t.ticketsOutsideSector,a=>(l(),L(n,{key:a.id,ticket:a,draggable:!0,class:"ticket-outside-sector",onClick:h=>i.$emit("ticket-clicked",a),onDragStart:t.handleTicketDragStart},null,8,["ticket","onClick","onDragStart"]))),128))]),_:1})])),e,2):f("",!0)],64)),t.totalTicketsCount===0?(l(),d("div",Ct,[...e[8]||(e[8]=[o("p",null,"–ù–µ—Ç —Ç–∏–∫–µ—Ç–æ–≤",-1)])])):f("",!0)])],34)}const wt=O(ft,[["render",Dt],["__scopeId","data-v-cdec5b5c"]]),It={name:"DashboardStage",components:{ZeroPoint:kt,EmployeeColumn:wt},props:{stage:{type:Object,required:!0},zeroPointTickets:{type:Array,default:()=>[]}},emits:["ticket-moved","ticket-assigned","ticket-clicked"],setup(i,{emit:e}){const s=Ee("DashboardStage"),t=P(!1),r=_(()=>{const y=Array.isArray(i.zeroPointTickets)?i.zeroPointTickets.length:0,v=Array.isArray(i.stage.employees)?i.stage.employees.reduce((S,w)=>Array.isArray(w.ticketsInsideSector)?S+w.ticketsInsideSector.length:w.isFromSector1C&&Array.isArray(w.tickets)?S+w.tickets.length:S,0):0;return y+v}),c=_(()=>Array.isArray(i.stage.employees)?i.stage.employees.reduce((y,v)=>Array.isArray(v.ticketsOutsideSector)?y+v.ticketsOutsideSector.length:!v.isFromSector1C&&Array.isArray(v.tickets)?y+v.tickets.length:y,0):0),n=_(()=>r.value+c.value),a=_(()=>{const y=i.stage?.name||"–°—Ç–∞–¥–∏—è",v=r.value,S=c.value;return S===0?`${y} (${v})`:`${y} (${v} / ${S})`});return{isDragging:t,ticketsCountInsideSector:r,ticketsCountOutsideSector:c,totalTicketsCount:n,stageNameWithCount:a,handleTicketDragged:y=>{t.value=!0},handleTicketAssigned:(y,v)=>{e("ticket-assigned",y,v)},handleTicketDropped:(y,v)=>{e("ticket-moved",y,v,i.stage.id),t.value=!1},handleTicketClicked:y=>{s.debug("Ticket clicked",y),e("ticket-clicked",y)}}}},Nt={class:"stage-header"},Ot={class:"stage-content"},Rt={class:"employees-container"};function xt(i,e,s,t,r,c){const n=N("ZeroPoint"),a=N("EmployeeColumn");return l(),d("div",{class:"dashboard-stage",style:B({borderLeftColor:s.stage.color})},[o("div",Nt,[o("h2",null,g(t.stageNameWithCount),1)]),o("div",Ot,[D(n,{tickets:s.zeroPointTickets,"stage-id":s.stage.id,onTicketDragged:t.handleTicketDragged,onTicketAssigned:t.handleTicketAssigned,onTicketClicked:t.handleTicketClicked},null,8,["tickets","stage-id","onTicketDragged","onTicketAssigned","onTicketClicked"]),o("div",Rt,[(l(!0),d(p,null,E(s.stage.employees,h=>(l(),L(a,{key:h.id,employee:h,"stage-id":s.stage.id,onTicketClicked:t.handleTicketClicked,onTicketDropped:t.handleTicketDropped},null,8,["employee","stage-id","onTicketClicked","onTicketDropped"]))),128))])])],4)}const Bt=O(It,[["render",xt],["__scopeId","data-v-c6fbde76"]]),le={cache_check:{title:"–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞",description:"–ü–æ–∏—Å–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö..."},cache_hit:{title:"–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã",description:"–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞..."},loading_tickets:{title:"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤",description:"–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Bitrix24..."},filtering:{title:"–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–∏–∫–µ—Ç–æ–≤",description:"–û—Ç–±–æ—Ä —Ç–∏–∫–µ—Ç–æ–≤ —Å–µ–∫—Ç–æ—Ä–∞ 1–°..."},extracting_employees:{title:"–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",description:"–ê–Ω–∞–ª–∏–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤..."},loading_employees:{title:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",description:"–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö..."},grouping:{title:"–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö",description:"–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ —ç—Ç–∞–ø–∞–º..."},caching:{title:"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à",description:"–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–≥—Ä—É–∑–æ–∫..."},complete:{title:"–ì–æ—Ç–æ–≤–æ!",description:"–î–∞—à–±–æ—Ä–¥ –∑–∞–≥—Ä—É–∂–µ–Ω"},error:{title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",description:"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"}},Pt={loading_tickets:{title:"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤",description:"–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Bitrix24..."},filtering:{title:"–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–∏–∫–µ—Ç–æ–≤",description:"–û—Ç–±–æ—Ä —Ç–∏–∫–µ—Ç–æ–≤ —Å–µ–∫—Ç–æ—Ä–∞ 1–°..."},extracting_employees:{title:"–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",description:"–ê–Ω–∞–ª–∏–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤..."},loading_employees:{title:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",description:"–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö..."},grouping:{title:"–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö",description:"–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ —ç—Ç–∞–ø–∞–º..."},caching:{title:"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à",description:"–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–≥—Ä—É–∑–æ–∫..."},cache_check:{title:"–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞",description:"–ü–æ–∏—Å–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö..."},cache_hit:{title:"–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã",description:"–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞..."},complete:{title:"–ì–æ—Ç–æ–≤–æ!",description:"–î–∞—à–±–æ—Ä–¥ –∑–∞–≥—Ä—É–∂–µ–Ω"},error:{title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",description:"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"}},Lt={name:"LoadingPreloader",props:{currentStep:{type:String,default:null},progress:{type:Number,default:0},stepDetails:{type:Object,default:()=>({})},error:{type:String,default:null}},emits:["retry"],setup(i,{emit:e}){const s=_(()=>{const{currentStep:u,stepDetails:m}=i;return m?.description?{title:u?le[u]?.title||u:"–ó–∞–≥—Ä—É–∑–∫–∞...",description:m.description}:u?le[u]?le[u]:Pt[u]||{title:"–ó–∞–≥—Ä—É–∑–∫–∞...",description:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ..."}:{title:"–ó–∞–≥—Ä—É–∑–∫–∞...",description:"–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è..."}}),t=_(()=>s.value.title),r=_(()=>s.value.description),c=_(()=>i.stepDetails),n=_(()=>{const u=i.progress;return u==null||isNaN(u)?0:Math.round(Math.max(0,Math.min(100,u)))});return{stepTitle:t,stepDescription:r,details:c,displayProgress:n,getStageDisplayName:u=>u?{"DT140_12:UC_0VHWE2":"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ","DT140_12:PREPARATION":"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó","DT140_12:CLIENT":"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ","–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ":"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ","–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó":"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó",–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ:"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ"}[u]||u:"",handleRetry:()=>{e("retry")}}}},Mt={class:"preloader-backdrop"},Ut={class:"preloader-container"},Wt={class:"preloader-content-scrollable"},Ft={key:0,class:"spinner-container"},Ht={class:"preloader-content"},Vt={class:"step-title"},jt={key:0,class:"step-description"},Yt={key:1,class:"progress-container"},zt={class:"progress-bar"},Xt={class:"progress-text"},Gt={key:2,class:"step-details"},Kt={key:0,class:"detail-description"},qt={key:1,class:"detail-item"},Jt={class:"detail-value"},Zt={key:0,class:"detail-total"},Qt={key:2,class:"detail-item"},$t={class:"detail-value"},es={key:0,class:"detail-total"},ts={key:3,class:"detail-item"},ss={class:"detail-value"},is={key:0,class:"detail-total"},os={key:4,class:"detail-item"},ns={class:"detail-value"},rs={key:5,class:"detail-warning"},as={key:0,class:"error-container"},ls={class:"error-content"},cs={class:"error-message"};function ds(i,e,s,t,r,c){return l(),d("div",{class:te(["loading-preloader",{"has-error":s.error}])},[o("div",Mt,[o("div",Ut,[o("div",Wt,[s.error?f("",!0):(l(),d("div",Ft,[...e[1]||(e[1]=[o("div",{class:"spinner"},null,-1)])])),o("div",Ht,[o("h3",Vt,g(t.stepTitle),1),t.stepDescription?(l(),d("p",jt,g(t.stepDescription),1)):f("",!0),s.error?f("",!0):(l(),d("div",Yt,[o("div",zt,[o("div",{class:"progress-fill",style:B({width:t.displayProgress+"%"})},null,4)]),o("span",Xt,g(t.displayProgress)+"%",1)])),s.error?f("",!0):(l(),d("div",Gt,[t.details.description?(l(),d("div",Kt,g(t.details.description),1)):f("",!0),t.details.count!==void 0?(l(),d("div",qt,[e[2]||(e[2]=o("span",{class:"detail-label"},"–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ç–∏–∫–µ—Ç–æ–≤:",-1)),o("span",Jt,g(t.details.count),1),t.details.total!==void 0?(l(),d("span",Zt," –∏–∑ "+g(t.details.total),1)):f("",!0)])):f("",!0),t.details.filteredTickets!==void 0?(l(),d("div",Qt,[e[3]||(e[3]=o("span",{class:"detail-label"},"–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ —Ç–∏–∫–µ—Ç–æ–≤:",-1)),o("span",$t,g(t.details.filteredTickets),1),t.details.totalTickets!==void 0?(l(),d("span",es," –∏–∑ "+g(t.details.totalTickets),1)):f("",!0)])):f("",!0),t.details.stage?(l(),d("div",ts,[e[4]||(e[4]=o("span",{class:"detail-label"},"–°—Ç–∞–¥–∏—è:",-1)),o("span",ss,g(t.getStageDisplayName(t.details.stage)),1),t.details.stageIndex&&t.details.totalStages?(l(),d("span",is," ("+g(t.details.stageIndex)+"/"+g(t.details.totalStages)+") ",1)):f("",!0)])):f("",!0),t.details.employeeCount!==void 0?(l(),d("div",os,[e[5]||(e[5]=o("span",{class:"detail-label"},"–°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:",-1)),o("span",ns,g(t.details.employeeCount),1)])):f("",!0),t.details.warning?(l(),d("div",rs,[o("span",null,"‚ö†Ô∏è "+g(t.details.warning),1)])):f("",!0)]))])])])]),s.error?(l(),d("div",as,[o("div",ls,[e[6]||(e[6]=o("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),o("p",cs,g(s.error),1),o("button",{onClick:e[0]||(e[0]=(...n)=>t.handleRetry&&t.handleRetry(...n)),class:"retry-button"}," –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É ")])])):f("",!0)],2)}const gs=O(Lt,[["render",ds],["__scopeId","data-v-d129ff19"]]),us={name:"LoggerControl",props:{showControl:{type:Boolean,default:!1}},setup(){const i=P(!1),e=P("ERROR"),s=P(!0),t=h=>({NONE:"–û—Ç–∫–ª—é—á–µ–Ω–æ",ERROR:"–¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏",WARN:"–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏",INFO:"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏",DEBUG:"–í—Å–µ –ª–æ–≥–∏ (–æ—Ç–ª–∞–¥–∫–∞)"})[h]||h;return Se(()=>{const h=U.getLevel();e.value=h,i.value=h!=="NONE"}),{enabled:i,level:e,isExpanded:s,getLevelDescription:t,handleToggle:()=>{i.value?(e.value==="NONE"&&(e.value="ERROR"),U.setLevel(e.value)):(U.setLevel("NONE"),e.value="NONE")},handleLevelChange:()=>{i.value&&U.setLevel(e.value)},resetToDefault:()=>{const h="ERROR";e.value=h,i.value=!0,U.setLevel(h)},toggleVisibility:()=>{s.value=!s.value}}}},ms={key:0,class:"logger-control"},hs={class:"logger-control-header"},ks=["aria-label"],fs={key:0,class:"logger-control-content"},ys={class:"logger-control-section"},_s={class:"logger-control-label"},Ts={key:0,class:"logger-control-section"},vs={class:"logger-control-label"},bs={key:1,class:"logger-control-info"},Ss={class:"logger-control-info-text"},ps={key:2,class:"logger-control-section"};function Es(i,e,s,t,r,c){return s.showControl?(l(),d("div",ms,[o("div",hs,[e[6]||(e[6]=o("h3",{class:"logger-control-title"},"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º",-1)),o("button",{class:"logger-control-toggle",onClick:e[0]||(e[0]=(...n)=>t.toggleVisibility&&t.toggleVisibility(...n)),"aria-label":t.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"},g(t.isExpanded?"‚ñº":"‚ñ∂"),9,ks)]),t.isExpanded?(l(),d("div",fs,[o("div",ys,[o("label",_s,[ke(o("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=n=>t.enabled=n),onChange:e[2]||(e[2]=(...n)=>t.handleToggle&&t.handleToggle(...n)),class:"logger-control-checkbox"},null,544),[[Oe,t.enabled]]),e[7]||(e[7]=o("span",{class:"logger-control-label-text"},"–í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ",-1))])]),t.enabled?(l(),d("div",Ts,[o("label",vs,[e[9]||(e[9]=o("span",{class:"logger-control-label-text"},"–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:",-1)),ke(o("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>t.level=n),onChange:e[4]||(e[4]=(...n)=>t.handleLevelChange&&t.handleLevelChange(...n)),class:"logger-control-select"},[...e[8]||(e[8]=[xe('<option value="NONE" data-v-ed57067c>–û—Ç–∫–ª—é—á–µ–Ω–æ</option><option value="ERROR" data-v-ed57067c>–¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏</option><option value="WARN" data-v-ed57067c>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏</option><option value="INFO" data-v-ed57067c>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏</option><option value="DEBUG" data-v-ed57067c>–í—Å–µ –ª–æ–≥–∏ (–æ—Ç–ª–∞–¥–∫–∞)</option>',5)])],544),[[Re,t.level]])])])):f("",!0),t.enabled?(l(),d("div",bs,[o("span",Ss,[e[10]||(e[10]=pe(" –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: ",-1)),o("strong",null,g(t.getLevelDescription(t.level)),1)])])):f("",!0),t.enabled?(l(),d("div",ps,[o("button",{onClick:e[5]||(e[5]=(...n)=>t.resetToDefault&&t.resetToDefault(...n)),class:"logger-control-reset-btn",title:"–°–±—Ä–æ—Å–∏—Ç—å –∫ –∑–Ω–∞—á–µ–Ω–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é"}," –°–±—Ä–æ—Å–∏—Ç—å –∫ —É–º–æ–ª—á–∞–Ω–∏—é ")])):f("",!0)])):f("",!0)])):f("",!0)}const As=O(us,[["render",Es],["__scopeId","data-v-ed57067c"]]),Cs={name:"BackButton",props:{variant:{type:String,default:"header",validator:i=>["header","floating"].includes(i)},text:{type:String,default:"–ù–ê–ó–ê–î"},to:{type:String,default:null},showIcon:{type:Boolean,default:!0},ariaLabel:{type:String,default:"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é"},title:{type:String,default:"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é"}},setup(i){const{goBack:e,goHome:s}=Ue();return{buttonClasses:_(()=>[i.variant==="header"?"back-button":"floating-back-button"]),handleClick:()=>{i.to?s({path:i.to}):e()}}}},Ds=["aria-label","title"],ws={key:0,class:"back-button-icon"},Is={key:1,class:"back-button-text"};function Ns(i,e,s,t,r,c){return l(),d("button",{class:te(t.buttonClasses),onClick:e[0]||(e[0]=(...n)=>t.handleClick&&t.handleClick(...n)),"aria-label":s.ariaLabel,title:s.title},[s.showIcon?(l(),d("span",ws,"‚Üê")):f("",!0),s.variant==="header"?(l(),d("span",Is,g(s.text),1)):f("",!0)],10,Ds)}const Os=O(Cs,[["render",Ns],["__scopeId","data-v-d605b6a0"]]);class Rs{constructor(){this.reset()}reset(){this.metrics={ticketsLoading:{stages:{},totalLoaded:0},filtering:{total:0,filtered:0,rejected:[],tagValueExamples:[]},employees:{uniqueIds:[],totalUnique:0,ticketsWithoutAssignedById:[],ticketsWithAssignedById1051:[]},grouping:{distributionByStages:{},ticketsNotInColumn:[],unknownStages:[]},zeroPoint:{byStage:{}}}}logTicketsLoading(e,s,t,r=null){this.metrics.ticketsLoading.stages[e]||(this.metrics.ticketsLoading.stages[e]={loaded:0,batches:[],total:0});const c=this.metrics.ticketsLoading.stages[e];c.loaded=t,c.batches.push({count:s,total:t,next:r}),c.total=t,this.metrics.ticketsLoading.totalLoaded=Object.values(this.metrics.ticketsLoading.stages).reduce((n,a)=>n+a.total,0)}logFiltering(e,s,t=[],r=[]){this.metrics.filtering.total=e,this.metrics.filtering.filtered=s,this.metrics.filtering.rejected=t.slice(0,50),this.metrics.filtering.tagValueExamples=r.slice(0,20)}logEmployees(e,s=[],t=[]){this.metrics.employees.uniqueIds=e,this.metrics.employees.totalUnique=e.length,this.metrics.employees.ticketsWithoutAssignedById=s.slice(0,50),this.metrics.employees.ticketsWithAssignedById1051=t.slice(0,50)}logGrouping(e,s=[],t=[]){e.forEach(r=>{const c={};let n=0;r.employees.forEach(a=>{const h=(a.ticketsInsideSector||[]).length+(a.ticketsOutsideSector||[]).length;c[a.id]=h,n+=h}),this.metrics.grouping.distributionByStages[r.id]={employees:c,total:n}}),this.metrics.grouping.ticketsNotInColumn=s.slice(0,50),this.metrics.grouping.unknownStages=t.slice(0,50)}logZeroPoint(e){Object.keys(e).forEach(s=>{this.metrics.zeroPoint.byStage[s]=Array.isArray(e[s])?e[s].length:0})}getMetrics(){return this.metrics}getProblematicTickets(){return{withoutAssignedById:this.metrics.employees.ticketsWithoutAssignedById,withAssignedById1051:this.metrics.employees.ticketsWithAssignedById1051,withoutSectorTag:this.metrics.filtering.rejected,notInColumn:this.metrics.grouping.ticketsNotInColumn,unknownStage:this.metrics.grouping.unknownStages}}exportToJSON(){return JSON.stringify({metrics:this.metrics,problematicTickets:this.getProblematicTickets(),timestamp:new Date().toISOString()},null,2)}}let ce=null;function W(){return ce||(ce=new Rs),ce}function ee(i=null,e=null){if(e&&!Ae(e))return!1;if(i&&i.query&&i.query.diagnostics==="true")return!0;if(typeof window<"u"&&window.location){const s=window.location.hash;if(s){const r=s.split("?");if(r.length>1){const c=r[1];if(new URLSearchParams(c).get("diagnostics")==="true")return!0}if(s.includes("diagnostics=true"))return!0}if(new URLSearchParams(window.location.search).get("diagnostics")==="true")return!0}return typeof localStorage<"u"?localStorage.getItem("dashboard-sector-1c-diagnostics")==="true":!1}class Z{static async call(e,s={}){return await ge.call(e,s)}}class A{static get(e){const s=this.cache.get(e);return s?Date.now()-s.timestamp>s.ttl?(this.cache.delete(e),null):s.data:null}static set(e,s,t=this.DEFAULT_TTL){this.cache.set(e,{data:s,timestamp:Date.now(),ttl:t})}static delete(e){this.cache.delete(e)}static clear(){this.cache.clear()}static invalidateByPrefix(e){const s=[];for(const t of this.cache.keys())t.startsWith(e)&&s.push(t);s.forEach(t=>this.cache.delete(t))}static cleanExpired(){const e=Date.now(),s=[];for(const[t,r]of this.cache.entries())e-r.timestamp>r.ttl&&s.push(t);s.forEach(t=>this.cache.delete(t))}static getStats(){const e=Date.now();let s=0,t=0;for(const r of this.cache.values())e-r.timestamp>r.ttl?s++:t++;return{total:this.cache.size,valid:t,expired:s}}static getTicketsCacheKey(e){return`tickets:stage:${e}`}static getAllTicketsCacheKey(){return"tickets:all"}static getEmployeesCacheKey(e){return`employees:ids:${[...e].sort((t,r)=>t-r).join(",")}`}static getSectorDataCacheKey(){return"sector:data"}static invalidateTicketsCache(){this.invalidateByPrefix("tickets:"),this.invalidateByPrefix("sector:")}static invalidateEmployeesCache(){this.invalidateByPrefix("employees:")}}F(A,"cache",new Map),F(A,"DEFAULT_TTL",5*60*1e3),F(A,"EMPLOYEES_TTL",30*60*1e3),F(A,"TICKETS_TTL",5*60*1e3);typeof window<"u"&&setInterval(()=>{A.cleanExpired()},5*60*1e3);function de(i,e,s={}){if(!i||typeof i!="string")throw new Error("Step must be a non-empty string");const t=typeof e=="number"&&!isNaN(e)?Math.max(0,Math.min(100,e)):0;let r=s.description;return r||(r=xs(i,s)),{step:i,progress:t,details:{...s,description:r}}}function xs(i,e){return i==="loading_tickets"&&e.stageName&&e.stageIndex!==void 0?`–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å—Ç–∞–¥–∏–∏ "${e.stageName}" (${e.stageIndex}/${e.totalStages||1})...`:i==="filtering"&&e.filteredTickets!==void 0&&e.totalTickets!==void 0?`–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–∏–∫–µ—Ç–æ–≤: ${e.filteredTickets} –∏–∑ ${e.totalTickets}...`:i==="grouping"&&e.employeeCount!==void 0?`–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ ${e.employeeCount} —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º...`:e.count!==void 0&&e.total!==void 0?`–û–±—Ä–∞–±–æ—Ç–∫–∞: ${e.count} –∏–∑ ${e.total}...`:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."}function _e(i){if(!i||typeof i!="object")throw new Error("Progress info must be an object");const e=i.step||null;if(!e)throw new Error("Step is required in progress info");const s=i.progress!==void 0&&i.progress!==null?i.progress:i.percent!==void 0&&i.percent!==null?i.percent:void 0,t=i.details||{};return i.stage&&(t.stage=i.stage),i.stageName&&(t.stageName=i.stageName),i.stageIndex!==void 0&&(t.stageIndex=i.stageIndex),i.totalStages!==void 0&&(t.totalStages=i.totalStages),i.count!==void 0&&(t.count=i.count),i.total!==void 0&&(t.total=i.total),i.warning&&(t.warning=i.warning),{step:e,progress:s!=null?Math.max(0,Math.min(100,s)):void 0,details:t}}function Bs(i,e,s){const t=typeof i=="number"&&!isNaN(i)?Math.max(0,Math.min(100,i)):0,r=typeof e=="number"&&!isNaN(e)?Math.max(0,Math.min(100,e)):0,c=typeof s=="number"&&!isNaN(s)?Math.max(0,Math.min(100,s)):0,n=t+r*c/100;return Math.max(0,Math.min(100,n))}const Q=140;class Ps{static async getAllTickets(e,s=null,t=!0){const r=[],c=e.length;try{for(let n=0;n<e.length;n++){const a=e[n],h=this.getStageName(a);if(s){const u=n/c*100;s(de("loading_tickets",u,{stage:a,stageName:h,stageIndex:n+1,totalStages:c}))}try{const u=await this.getTicketsByStage(a,t,s?m=>{const k=Bs(n/c*100,1/c*100,m.percent||0);s(de("loading_tickets",k,{stage:a,stageName:h,stageIndex:n+1,totalStages:c,count:m.count,total:m.total}))}:null);r.push(...u)}catch(u){x.error(`Error loading tickets for stage ${a}`,"TicketRepository",u);let m=`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞–¥–∏–∏ "${h}"`;throw u.message&&(u.message.includes("HTTP error")||u.message.includes("network")?m=`–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞–¥–∏–∏ "${h}". –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.`:u.message.includes("timeout")?m=`–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞–¥–∏–∏ "${h}". –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.`:u.message.includes("403")||u.message.includes("401")?m=`–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞–¥–∏–∏ "${h}". –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.`:m=`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞–¥–∏–∏ "${h}": ${u.message}`),new Error(m)}}}catch(n){throw x.error("Error in getAllTickets","TicketRepository",n),n}return r}static getStageName(e){return{"DT140_12:UC_0VHWE2":"–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ","DT140_12:PREPARATION":"–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –¢–ó","DT140_12:CLIENT":"–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ"}[e]||e}static async getTicketsByStage(e,s=!0,t=null){if(s){const m=A.getTicketsCacheKey(e),k=A.get(m);if(k!==null){try{const y=W();y&&ee()&&y.logTicketsLoading(e,k.length,k.length,null)}catch(y){x.warn("Diagnostics logging error (cache hit) in getTicketsByStage","TicketRepository",y)}return t&&t(_e({step:"loading_tickets",percent:100,count:k.length,total:k.length})),k}}const r=[];let c=0;const n=50;let a=!0,h=0,u=null;for(;a;)try{const m=await Z.call("crm.item.list",{entityTypeId:Q,filter:{stageId:e},select:["*"],order:{id:"DESC"},start:c,useOriginalUfNames:"Y"});let k=[];if(m&&m.result&&(Array.isArray(m.result)?k=m.result:m.result.items&&Array.isArray(m.result.items)?k=m.result.items:m.result.data&&Array.isArray(m.result.data)&&(k=m.result.data)),k.length>0){r.push(...k),c+=k.length;const y=m?.result?.next??m?.next,v=y!=null&&y!==""&&String(y)!=="0";a=k.length===n&&v,ee()&&x.debug(`[Pagination] Stage: ${e}, Batch: ${k.length}, Total: ${r.length}, Start: ${c}, NextValue: ${y}, HasNext: ${v}, HasMore: ${a}`,"TicketRepository");try{const S=W();S&&ee()&&(x.debug(`[Pagination Debug] Stage: ${e}, Batch: ${k.length}, Total: ${r.length}`,"TicketRepository",{resultStructure:{hasResult:!!m?.result,resultIsArray:Array.isArray(m?.result),hasItems:!!m?.result?.items,hasData:!!m?.result?.data,hasNext:!!y,nextValue:y,nextType:typeof y,resultKeys:m?.result?Object.keys(m.result):[]}}),S.logTicketsLoading(e,k.length,r.length,y||null))}catch(S){x.warn("Diagnostics logging error","TicketRepository",S)}if(a?h=c+n:h=r.length,t){const S=h>0?Math.min(100,r.length/h*100):0;t(_e({step:"loading_tickets",percent:S,count:r.length,total:h}))}u=null}else a=!1}catch(m){if(x.error(`Error loading tickets batch for stage ${e} (start: ${c})`,"TicketRepository",m),c===0)throw u=m,new Error(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –¥–ª—è —Å—Ç–∞–¥–∏–∏ ${e}: ${m.message||m}`);a=!1,t&&r.length>0&&t(de("loading_tickets",100,{count:r.length,total:r.length,warning:`–ó–∞–≥—Ä—É–∂–µ–Ω–æ —á–∞—Å—Ç–∏—á–Ω–æ: ${r.length} —Ç–∏–∫–µ—Ç–æ–≤. –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö.`}))}if(u&&r.length===0)throw u;if(s){const m=A.getTicketsCacheKey(e);A.set(m,r,A.TICKETS_TTL)}return r}static async getTicket(e){return(await Z.call("crm.item.get",{entityTypeId:Q,id:e})).result||null}static async updateTicket(e,s){const r=(await Z.call("crm.item.update",{entityTypeId:Q,id:e,fields:s})).result===!0;return r&&A.invalidateTicketsCache(),r}static async createTicket(e){const s=await Z.call("crm.item.add",{entityTypeId:Q,fields:e}),t=s.result?parseInt(s.result):0;return t>0&&A.invalidateTicketsCache(),t}static async assignTicket(e,s,t){return await this.updateTicket(e,{assignedById:s,stageId:t})}}const Ls={name:"DiagnosticsPanel",props:{isEnabled:{type:Boolean,default:!1},isUserAdmin:{type:Boolean,default:!1}},setup(i){const e=P(!0),s=W(),t=_(()=>!i.isEnabled||!i.isUserAdmin?{ticketsLoading:{stages:{},totalLoaded:0},filtering:{total:0,filtered:0,rejected:[],tagValueExamples:[]},employees:{uniqueIds:[],totalUnique:0,ticketsWithoutAssignedById:[],ticketsWithAssignedById1051:[]},grouping:{distributionByStages:{},ticketsNotInColumn:[],unknownStages:[]},zeroPoint:{byStage:{}}}:s?s.getMetrics():(console.warn("[DiagnosticsPanel] Diagnostics service not available"),{ticketsLoading:{stages:{},totalLoaded:0},filtering:{total:0,filtered:0,rejected:[],tagValueExamples:[]},employees:{uniqueIds:[],totalUnique:0,ticketsWithoutAssignedById:[],ticketsWithAssignedById1051:[]},grouping:{distributionByStages:{},ticketsNotInColumn:[],unknownStages:[]},zeroPoint:{byStage:{}}})),r=_(()=>!i.isEnabled||!i.isUserAdmin||!s?{withoutAssignedById:[],withAssignedById1051:[],withoutSectorTag:[],notInColumn:[],unknownStage:[]}:s.getProblematicTickets()),c=_(()=>{const u=r.value;return u.withoutAssignedById.length===0&&u.withAssignedById1051.length===0&&u.withoutSectorTag.length===0&&u.notInColumn.length===0&&u.unknownStage.length===0});return{isExpanded:e,metrics:t,problematicTickets:r,hasNoProblems:c,toggleExpanded:()=>{e.value=!e.value},downloadJSON:()=>{if(!s)return;const u=s.exportToJSON(),m=new Blob([u],{type:"application/json"}),k=URL.createObjectURL(m),y=document.createElement("a");y.href=k,y.download=`dashboard-diagnostics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(k)},getStageName:u=>Ps.getStageName(u)||u}}},Ms={key:0,class:"diagnostics-panel"},Us={class:"diagnostics-header"},Ws={class:"header-actions"},Fs=["title"],Hs={key:0,class:"diagnostics-content"},Vs={class:"diagnostics-section"},js={class:"metrics-grid"},Ys={class:"metric-card"},zs={class:"metric-value"},Xs={class:"metric-label"},Gs={class:"metric-value"},Ks={class:"metric-detail"},qs={class:"diagnostics-section"},Js={class:"metrics-grid"},Zs={class:"metric-card"},Qs={class:"metric-value"},$s={class:"metric-card",style:{"border-left-color":"#28a745"}},ei={class:"metric-value"},ti={class:"metric-card",style:{"border-left-color":"#dc3545"}},si={class:"metric-value"},ii={key:0,class:"metric-detail"},oi={key:0,class:"warning-box"},ni={key:1,class:"examples-box"},ri={class:"example-type"},ai={key:0,class:"normalized"},li={class:"diagnostics-section"},ci={class:"metrics-grid"},di={class:"metric-card"},gi={class:"metric-value"},ui={class:"metric-card"},mi={class:"metric-value"},hi={class:"metric-card"},ki={class:"metric-value"},fi={class:"diagnostics-section"},yi={class:"metrics-grid"},_i={class:"metric-card"},Ti={class:"metric-value"},vi={class:"metric-card",style:{"border-left-color":"#28a745"}},bi={class:"metric-value"},Si={class:"metric-card",style:{"border-left-color":"#ffc107"}},pi={class:"metric-value"},Ei={key:0,class:"employees-list"},Ai={class:"diagnostics-section"},Ci={class:"metrics-grid"},Di={class:"metric-label"},wi={class:"metric-value"},Ii={class:"diagnostics-section problematic-tickets"},Ni={key:0,class:"problem-group"},Oi={class:"tickets-list"},Ri={class:"ticket-id"},xi={class:"ticket-title"},Bi={class:"ticket-stage"},Pi={key:0,class:"more-items"},Li={key:1,class:"problem-group"},Mi={class:"tickets-list"},Ui={class:"ticket-id"},Wi={class:"ticket-title"},Fi={class:"ticket-stage"},Hi={key:0,class:"more-items"},Vi={key:2,class:"problem-group"},ji={class:"tickets-list"},Yi={class:"ticket-id"},zi={class:"ticket-title"},Xi={class:"ticket-stage"},Gi={key:0,class:"more-items"},Ki={key:3,class:"problem-group"},qi={class:"tickets-list"},Ji={class:"ticket-id"},Zi={class:"ticket-title"},Qi={class:"ticket-stage"},$i={key:0,class:"more-items"},eo={key:4,class:"problem-group"},to={class:"tickets-list"},so={class:"ticket-id"},io={class:"ticket-title"},oo={class:"ticket-stage"},no={key:0,class:"more-items"},ro={key:5,class:"no-problems"};function ao(i,e,s,t,r,c){return s.isEnabled&&s.isUserAdmin?(l(),d("div",Ms,[o("div",Us,[e[2]||(e[2]=o("h2",null,"üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞",-1)),o("div",Ws,[o("button",{onClick:e[0]||(e[0]=(...n)=>t.downloadJSON&&t.downloadJSON(...n)),class:"btn-download",title:"–°–∫–∞—á–∞—Ç—å JSON"}," üì• –°–∫–∞—á–∞—Ç—å JSON "),o("button",{onClick:e[1]||(e[1]=(...n)=>t.toggleExpanded&&t.toggleExpanded(...n)),class:"btn-toggle",title:t.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"},g(t.isExpanded?"‚ñº":"‚ñ∂"),9,Fs)])]),t.isExpanded?(l(),d("div",Hs,[o("section",Vs,[e[4]||(e[4]=o("h3",null,"üìä –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤",-1)),o("div",js,[o("div",Ys,[e[3]||(e[3]=o("div",{class:"metric-label"},"–í—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ",-1)),o("div",zs,g(t.metrics.ticketsLoading.totalLoaded),1)]),(l(!0),d(p,null,E(t.metrics.ticketsLoading.stages,(n,a)=>(l(),d("div",{key:a,class:"metric-card"},[o("div",Xs,g(t.getStageName(a)),1),o("div",Gs,g(n.total),1),o("div",Ks,"–ë–∞—Ç—á–µ–π: "+g(n.batches.length),1)]))),128))])]),o("section",qs,[e[10]||(e[10]=o("h3",null,"üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ç–æ—Ä—É 1–°",-1)),o("div",Js,[o("div",Zs,[e[5]||(e[5]=o("div",{class:"metric-label"},"–í—Å–µ–≥–æ —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–æ",-1)),o("div",Qs,g(t.metrics.filtering.total),1)]),o("div",$s,[e[6]||(e[6]=o("div",{class:"metric-label"},"–ü—Ä–æ—à–ª–æ —Ñ–∏–ª—å—Ç—Ä (—Ç–µ–≥ 1–°)",-1)),o("div",ei,g(t.metrics.filtering.filtered),1)]),o("div",ti,[e[7]||(e[7]=o("div",{class:"metric-label"},"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ (–Ω–µ—Ç —Ç–µ–≥–∞ 1–°)",-1)),o("div",si,g(t.metrics.filtering.rejected.length),1),t.metrics.filtering.total>0?(l(),d("div",ii,g(Math.round(t.metrics.filtering.rejected.length/t.metrics.filtering.total*100))+"% –æ—Ç –≤—Å–µ—Ö ",1)):f("",!0)])]),t.metrics.filtering.rejected.length>0?(l(),d("div",oi,[e[8]||(e[8]=o("strong",null,"‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:",-1)),pe(" "+g(t.metrics.filtering.rejected.length)+" —Ç–∏–∫–µ—Ç–æ–≤ –Ω–µ –∏–º–µ—é—Ç —Ç–µ–≥–∞ —Å–µ–∫—Ç–æ—Ä–∞ 1–° (UF_CRM_7_TYPE_PRODUCT = '1C') –∏ –ø–æ—ç—Ç–æ–º—É –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –¥–∞—à–±–æ—Ä–¥–µ. –≠—Ç–∏ —Ç–∏–∫–µ—Ç—ã –µ—Å—Ç—å –≤ Bitrix24, –Ω–æ –Ω–µ –ø–æ–ø–∞–ª–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. ",1)])):f("",!0),t.metrics.filtering.tagValueExamples.length>0?(l(),d("div",ni,[e[9]||(e[9]=o("h4",null,"–ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π UF_CRM_7_TYPE_PRODUCT:",-1)),o("ul",null,[(l(!0),d(p,null,E(t.metrics.filtering.tagValueExamples.slice(0,10),(n,a)=>(l(),d("li",{key:a},[o("code",null,g(JSON.stringify(n.value)),1),o("span",ri,"("+g(n.type)+g(n.isArray?", –º–∞—Å—Å–∏–≤":"")+")",1),n.normalized&&n.normalized.length?(l(),d("span",ai," ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–æ: "+g(n.normalized.join(", ")),1)):f("",!0)]))),128))])])):f("",!0)]),o("section",li,[e[14]||(e[14]=o("h3",null,"üë• –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏",-1)),o("div",ci,[o("div",di,[e[11]||(e[11]=o("div",{class:"metric-label"},"–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID",-1)),o("div",gi,g(t.metrics.employees.totalUnique),1)]),o("div",ui,[e[12]||(e[12]=o("div",{class:"metric-label"},"–ë–µ–∑ assignedById",-1)),o("div",mi,g(t.metrics.employees.ticketsWithoutAssignedById.length),1)]),o("div",hi,[e[13]||(e[13]=o("div",{class:"metric-label"},"–° assignedById=1051",-1)),o("div",ki,g(t.metrics.employees.ticketsWithAssignedById1051.length),1)])])]),o("section",fi,[e[18]||(e[18]=o("h3",null,"üì¶ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–∞–¥–∏—è–º",-1)),(l(!0),d(p,null,E(t.metrics.grouping.distributionByStages,(n,a)=>(l(),d("div",{key:a,class:"stage-distribution"},[o("h4",null,g(t.getStageName(a)),1),o("div",yi,[o("div",_i,[e[15]||(e[15]=o("div",{class:"metric-label"},"–í—Å–µ–≥–æ —Ç–∏–∫–µ—Ç–æ–≤ –≤ —Å—Ç–∞–¥–∏–∏",-1)),o("div",Ti,g(n.total||0),1)]),o("div",vi,[e[16]||(e[16]=o("div",{class:"metric-label"},"–í–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),o("div",bi,g(n.insideSector||0),1)]),o("div",Si,[e[17]||(e[17]=o("div",{class:"metric-label"},"–í–Ω–µ —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),o("div",pi,g(n.outsideSector||0),1)])]),Object.keys(n.employees||{}).length>0?(l(),d("div",Ei,[(l(!0),d(p,null,E(n.employees,(h,u)=>(l(),d("div",{key:u,class:"employee-item"}," –°–æ—Ç—Ä—É–¥–Ω–∏–∫ #"+g(u)+": "+g(h)+" —Ç–∏–∫–µ—Ç–æ–≤ ",1))),128))])):f("",!0)]))),128))]),o("section",Ai,[e[19]||(e[19]=o("h3",null,"üéØ –ù—É–ª–µ–≤–∞—è —Ç–æ—á–∫–∞",-1)),o("div",Ci,[(l(!0),d(p,null,E(t.metrics.zeroPoint.byStage,(n,a)=>(l(),d("div",{key:a,class:"metric-card"},[o("div",Di,g(t.getStageName(a)),1),o("div",wi,g(n),1)]))),128))])]),o("section",Ii,[e[20]||(e[20]=o("h3",null,"‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã",-1)),t.problematicTickets.withoutAssignedById.length>0?(l(),d("div",Ni,[o("h4",null,"–ë–µ–∑ assignedById ("+g(t.problematicTickets.withoutAssignedById.length)+")",1),o("div",Oi,[(l(!0),d(p,null,E(t.problematicTickets.withoutAssignedById.slice(0,10),n=>(l(),d("div",{key:n.id,class:"ticket-item"},[o("span",Ri,"#"+g(n.id),1),o("span",xi,g(n.title),1),o("span",Bi,g(t.getStageName(n.stageId)),1)]))),128)),t.problematicTickets.withoutAssignedById.length>10?(l(),d("div",Pi," ... –∏ –µ—â—ë "+g(t.problematicTickets.withoutAssignedById.length-10),1)):f("",!0)])])):f("",!0),t.problematicTickets.withAssignedById1051.length>0?(l(),d("div",Li,[o("h4",null,"–° assignedById=1051 ("+g(t.problematicTickets.withAssignedById1051.length)+")",1),o("div",Mi,[(l(!0),d(p,null,E(t.problematicTickets.withAssignedById1051.slice(0,10),n=>(l(),d("div",{key:n.id,class:"ticket-item"},[o("span",Ui,"#"+g(n.id),1),o("span",Wi,g(n.title),1),o("span",Fi,g(t.getStageName(n.stageId)),1)]))),128)),t.problematicTickets.withAssignedById1051.length>10?(l(),d("div",Hi," ... –∏ –µ—â—ë "+g(t.problematicTickets.withAssignedById1051.length-10),1)):f("",!0)])])):f("",!0),t.problematicTickets.withoutSectorTag.length>0?(l(),d("div",Vi,[o("h4",null,"–ë–µ–∑/–Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–µ–≥ —Å–µ–∫—Ç–æ—Ä–∞ ("+g(t.problematicTickets.withoutSectorTag.length)+")",1),o("div",ji,[(l(!0),d(p,null,E(t.problematicTickets.withoutSectorTag.slice(0,10),n=>(l(),d("div",{key:n.id||n.ID,class:"ticket-item"},[o("span",Yi,"#"+g(n.id||n.ID),1),o("span",zi,g(n.title||n.TITLE||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"),1),o("span",Xi,g(t.getStageName(n.stageId||n.STAGE_ID)),1)]))),128)),t.problematicTickets.withoutSectorTag.length>10?(l(),d("div",Gi," ... –∏ –µ—â—ë "+g(t.problematicTickets.withoutSectorTag.length-10),1)):f("",!0)])])):f("",!0),t.problematicTickets.notInColumn.length>0?(l(),d("div",Ki,[o("h4",null,"–ù–µ –ø–æ–ø–∞–ª–∏ –≤ –∫–æ–ª–æ–Ω–∫—É ("+g(t.problematicTickets.notInColumn.length)+")",1),o("div",qi,[(l(!0),d(p,null,E(t.problematicTickets.notInColumn.slice(0,10),n=>(l(),d("div",{key:n.id,class:"ticket-item"},[o("span",Ji,"#"+g(n.id),1),o("span",Zi,g(n.title),1),o("span",Qi,g(t.getStageName(n.stageId)),1)]))),128)),t.problematicTickets.notInColumn.length>10?(l(),d("div",$i," ... –∏ –µ—â—ë "+g(t.problematicTickets.notInColumn.length-10),1)):f("",!0)])])):f("",!0),t.problematicTickets.unknownStage.length>0?(l(),d("div",eo,[o("h4",null,"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç–∞–¥–∏—è ("+g(t.problematicTickets.unknownStage.length)+")",1),o("div",to,[(l(!0),d(p,null,E(t.problematicTickets.unknownStage.slice(0,10),n=>(l(),d("div",{key:n.id,class:"ticket-item"},[o("span",so,"#"+g(n.id),1),o("span",io,g(n.title),1),o("span",oo,"–°—Ç–∞–¥–∏—è: "+g(n.stageId),1)]))),128)),t.problematicTickets.unknownStage.length>10?(l(),d("div",no," ... –∏ –µ—â—ë "+g(t.problematicTickets.unknownStage.length-10),1)):f("",!0)])])):f("",!0),t.hasNoProblems?(l(),d("div",ro," ‚úÖ –ü—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ ")):f("",!0)])])):f("",!0)])):f("",!0)}const lo=O(Ls,[["render",ao],["__scopeId","data-v-74a5e138"]]),V=new Map;function co(){V.clear()}function go(i){if(!i)return[];if(Array.isArray(i))return i.filter(s=>typeof s=="number"||!isNaN(parseInt(s))).map(s=>typeof s=="number"?s:parseInt(s));if(typeof i=="number")return[i];const e=parseInt(i);return isNaN(e)?[]:[e]}function Oo(i,e=!0){const s=i.id||i.ID;if(!i||!s)return null;if(e&&V.has(s))return V.get(s);const t=i.UF_DEPARTMENT||i.departmentId,r=go(t);for(const c of r)if(ze(c)){const a=c;return e&&V.set(s,a),a}return e&&V.set(s,null),null}const z={fadeOutDuration:400,fadeInDuration:400,delayBetween:150,readyDisplayTime:800,fadeOutEasing:"ease-out",fadeInEasing:"ease-in",fadeOutTransform:"scale(0.95)",fadeInTransform:"translateY(10px)"},Te={fadeInDuration:400,fadeInEasing:"ease-in"};function De(i,e,s="opacity, transform"){return`${s} ${i}ms ${e}`}function uo(){return De(z.fadeOutDuration,z.fadeOutEasing)}function mo(){return De(Te.fadeInDuration,Te.fadeInEasing)}const ue={name:"DashboardSector1C",components:{DashboardStage:Bt,LoadingPreloader:gs,LoggerControl:As,BackButton:Os,DiagnosticsPanel:lo},setup(){const i=Be(),e=Pe(),s=We(),t=Fe(s),r=P(null),c=_(()=>r.value?Ae(r.value):!1),n=_(()=>ee(e,r.value)),a=()=>{i.push({name:"dashboard-sector-1c",query:{...e.query,diagnostics:"true"}}),typeof localStorage<"u"&&localStorage.setItem("dashboard-sector-1c-diagnostics","true");const C=W();C&&C.reset(),t.loadSectorData(!1)},h=()=>{A.invalidateTicketsCache(),A.invalidateEmployeesCache(),co();const C=W();C&&C.reset(),t.loadSectorData(!1)};Se(async()=>{try{r.value=await je.getCurrentUser()}catch(C){console.error("Error getting current user:",C),r.value=null}if(n.value){const C=W();C&&C.reset()}t.loadSectorData()});const u=uo(),m=mo(),k=`${z.delayBetween}ms`,y=z.fadeOutTransform,v=z.fadeInTransform,S=()=>{t.loadSectorData(!1)},w=()=>{i.push({name:"dashboard-graph-state"})},se=()=>{i.push({name:"dashboard-graph-admission-closure"})},X=()=>{i.push({name:"dashboard-tickets-time-tracking"})},G=()=>{i.push("/")},M=t.loadingProgress,me=_(()=>typeof localStorage<"u"?localStorage.getItem("dashboard-sector-1c-show-logger-control")==="true":!1);return{isLoading:s.isLoading,error:s.error,stages:s.stages,zeroPointTickets:s.zeroPointTickets,employees:s.employees,draggedTicket:s.draggedTicket,currentStep:M.currentStep,progress:M.progress,stepDetails:M.stepDetails,loadingProgress:M,loadSectorData:t.loadSectorData,handleTicketDragStart:t.handleTicketDragStart,handleTicketDrop:t.handleTicketDrop,assignTicketToEmployee:t.assignTicketToEmployee,moveTicketToStage:t.moveTicketToStage,createTicket:t.createTicket,getEmployeeTickets:s.getEmployeeTickets,showLoggerControl:me,handleRetry:S,isTransitioning:t.isTransitioning,preloaderFadeOutTransition:u,dashboardFadeInTransition:m,transitionDelay:k,preloaderFadeOutTransform:y,dashboardFadeInTransform:v,navigateToGraphState:w,navigateToAdmissionClosure:se,navigateToTimeTracking:X,handleGoHome:G,isDiagnosticsEnabled:n,enableDiagnostics:a,clearCache:h,isUserAdmin:c}}},ve=()=>{Le(i=>({e25fa6d4:i.preloaderFadeOutTransition,v2de4400b:i.preloaderFadeOutTransform,v66f66a76:i.dashboardFadeInTransition,e224f3ee:i.transitionDelay,v171b9ffc:i.dashboardFadeInTransform}))},be=ue.setup;ue.setup=be?(i,e)=>(ve(),be(i,e)):ve;const ho={class:"dashboard-header"},ko={class:"breadcrumbs-row"},fo={class:"header-actions"},yo={key:0,class:"dashboard-content"},_o={class:"stages-container"};function To(i,e,s,t,r,c){const n=N("BackButton"),a=N("LoadingPreloader"),h=N("DashboardStage"),u=N("LoggerControl"),m=N("DiagnosticsPanel");return l(),d("div",{class:te(["dashboard-sector-1c",{"is-dragging":t.draggedTicket}])},[o("div",ho,[o("div",ko,[o("button",{class:"btn-home-link",type:"button",onClick:e[0]||(e[0]=(...k)=>t.handleGoHome&&t.handleGoHome(...k)),title:"–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É","aria-label":"–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"}," –ì–ª–∞–≤–Ω–∞—è "),e[6]||(e[6]=o("span",{class:"breadcrumb-separator"},"/",-1)),e[7]||(e[7]=o("span",{class:"breadcrumb-current"},"–î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1))]),D(n,{variant:"header"}),e[13]||(e[13]=o("h1",null,"–î–∞—à–±–æ—Ä–¥ - –°–µ–∫—Ç–æ—Ä 1–°",-1)),o("div",fo,[t.isDiagnosticsEnabled&&t.isUserAdmin?(l(),d("button",{key:0,onClick:e[1]||(e[1]=(...k)=>t.clearCache&&t.clearCache(...k)),class:"btn-clear-cache",title:"–°–±—Ä–æ—Å–∏—Ç—å –∫–µ—à —Å–µ–∫—Ç–æ—Ä–∞ –∏ —Ç–∏–∫–µ—Ç–æ–≤"},[...e[8]||(e[8]=[o("span",{class:"icon"},"‚ôªÔ∏è",-1),o("span",null,"–°–±—Ä–æ—Å–∏—Ç—å –∫–µ—à",-1)])])):f("",!0),!t.isDiagnosticsEnabled&&t.isUserAdmin?(l(),d("button",{key:1,onClick:e[2]||(e[2]=(...k)=>t.enableDiagnostics&&t.enableDiagnostics(...k)),class:"btn-enable-diagnostics",title:"–í–∫–ª—é—á–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º"},[...e[9]||(e[9]=[o("span",{class:"icon"},"üîç",-1),o("span",null,"–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞",-1)])])):f("",!0),o("button",{onClick:e[3]||(e[3]=(...k)=>t.navigateToGraphState&&t.navigateToGraphState(...k)),class:"btn-navigate-graph-state",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ –≥—Ä–∞—Ñ–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ç–æ—Ä–∞"},[...e[10]||(e[10]=[o("span",{class:"icon"},"üìä",-1),o("span",null,"–ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è",-1)])]),o("button",{onClick:e[4]||(e[4]=(...k)=>t.navigateToAdmissionClosure&&t.navigateToAdmissionClosure(...k)),class:"btn-navigate-admission-closure",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ –≥—Ä–∞—Ñ–∏–∫—É –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π —Å–µ–∫—Ç–æ—Ä–∞"},[...e[11]||(e[11]=[o("span",{class:"icon"},"üìà",-1),o("span",null,"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–π",-1)])]),o("button",{onClick:e[5]||(e[5]=(...k)=>t.navigateToTimeTracking&&t.navigateToTimeTracking(...k)),class:"btn-navigate-time-tracking",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç–∞–º –Ω–∞ —Ç–∏–∫–µ—Ç—ã —Å–µ–∫—Ç–æ—Ä–∞"},[...e[12]||(e[12]=[o("span",{class:"icon"},"‚è±",-1),o("span",null,"–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã",-1)])])])]),D(fe,{name:"preloader-fade"},{default:j(()=>[t.isLoading||t.error||t.currentStep?(l(),L(a,{key:0,"current-step":t.currentStep,progress:t.progress,"step-details":t.stepDetails,error:t.error||null,onRetry:t.handleRetry},null,8,["current-step","progress","step-details","error","onRetry"])):f("",!0)]),_:1}),D(fe,{name:"dashboard-fade"},{default:j(()=>[!t.isLoading&&!t.error&&!t.currentStep?(l(),d("div",yo,[o("div",_o,[(l(!0),d(p,null,E(t.stages,k=>(l(),L(h,{key:k.id,stage:k,"zero-point-tickets":t.zeroPointTickets[k.id]||[],onTicketMoved:t.handleTicketDrop,onTicketAssigned:t.assignTicketToEmployee},null,8,["stage","zero-point-tickets","onTicketMoved","onTicketAssigned"]))),128))])])):f("",!0)]),_:1}),D(n,{variant:"floating"}),D(u,{"show-control":t.showLoggerControl},null,8,["show-control"]),D(m,{"is-enabled":t.isDiagnosticsEnabled,"is-user-admin":t.isUserAdmin},null,8,["is-enabled","is-user-admin"])],2)}const vo=O(ue,[["render",To],["__scopeId","data-v-11e84363"]]),Ro=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"}));export{je as A,q as B,A as C,b as D,Xe as E,x as L,z as P,Io as S,Ce as T,O as _,wo as a,J as b,Je as c,Qe as d,qe as e,Z as f,No as g,Oo as h,W as i,ee as j,Ps as k,de as l,Bs as m,_e as n,co as o,ne as p,Y as q,R as r,Ro as s};
