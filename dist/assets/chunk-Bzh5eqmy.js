const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./access-config-async-gqR6Vfk8.js","./main-C5BMsXpp.js","./chunk-BxL3V5Fo.js","./chunk-DIHem5mh.js","./chunk-DSZ5QGvq.js","./chunk-Cm-sZV4A.js","./chunk-DN4eM7RG.js"])))=>i.map(i=>d[i]);
var l=Object.defineProperty;var h=(s,t,e)=>t in s?l(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var a=(s,t,e)=>h(s,typeof t!="symbol"?t+"":t,e);import{_ as c,g as u}from"./chunk-DIHem5mh.js";class o{static async loadAdmissionClosureService(){if(!this.cache.has("admissionClosure")){const t=await c(()=>import("./chunk-DIHem5mh.js").then(e=>e.c),[],import.meta.url);this.cache.set("admissionClosure",t)}return this.cache.get("admissionClosure")}static async loadBitrix24Api(){if(!this.cache.has("bitrix24Api")){const t=await c(()=>Promise.resolve().then(()=>p),void 0,import.meta.url);this.cache.set("bitrix24Api",t)}return this.cache.get("bitrix24Api")}static async loadAccessConfigAsync(){if(!this.cache.has("accessConfigAsync")){const t=await c(()=>import("./access-config-async-gqR6Vfk8.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url);this.cache.set("accessConfigAsync",t)}return this.cache.get("accessConfigAsync")}static async loadTicketListUtils(){if(!this.cache.has("ticketListUtils")){const t=await c(()=>import("./chunk-Cm-sZV4A.js").then(e=>e.t),__vite__mapDeps([5,6,4]),import.meta.url);this.cache.set("ticketListUtils",t)}return this.cache.get("ticketListUtils")}static clearCache(t=null){t?this.cache.delete(t):this.cache.clear()}static getCacheStats(){return{size:this.cache.size,services:Array.from(this.cache.keys()),memoryUsage:JSON.stringify(this.cache).length}}}a(o,"cache",new Map);const g=Object.freeze(Object.defineProperty({__proto__:null,LazyServiceLoader:o},Symbol.toStringTag,{value:"Module"}));class d{static getApiUrl(){return u("/api/bitrix24.php")}static async call(t,e={}){try{const i=await fetch(this.getApiUrl(),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({method:t,params:e})});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const r=await i.json();if(r.error)throw new Error(r.error_description||r.error);return r}catch(i){throw console.error("Bitrix24 API error:",i),i}}static async getProfile(){return this.call("profile",{})}static async getCurrentUser(){const t=await this.call("user.current",{});return t&&t.result?t.result:t}static async getLeads(t={},e=["ID","NAME","EMAIL","PHONE"],i={ID:"DESC"}){return(await this.call("crm.lead.list",{filter:t,select:e,order:i})).result||[]}}const p=Object.freeze(Object.defineProperty({__proto__:null,Bitrix24ApiService:d},Symbol.toStringTag,{value:"Module"}));class n{static async getInstance(){if(this.instance)return this.instance;if(this.loading)return new Promise((t,e)=>{const i=()=>{this.instance?t(this.instance):setTimeout(i,10)};i()});try{this.loading=!0;const{Bitrix24ApiService:t}=await o.loadBitrix24Api();this.instance=new t}catch(t){throw console.error("Failed to load Bitrix24ApiService:",t),t}finally{this.loading=!1}return this.instance}static clearInstance(){this.instance=null,this.loading=!1}static hasInstance(){return this.instance!==null}}a(n,"instance",null),a(n,"loading",!1);const m=Object.freeze(Object.defineProperty({__proto__:null,Bitrix24ApiProvider:n},Symbol.toStringTag,{value:"Module"}));export{o as L,m as b,g as l};
