const i={SECTOR_1C:366,SECTOR_HARDWARE:368,SECTOR_BITRIX24:369,SECTOR_PDM:367,KEEPER:1051},o=[i.SECTOR_1C,i.SECTOR_HARDWARE,i.SECTOR_BITRIX24,i.SECTOR_PDM];function n(a){return o.includes(a)}class c{static getApiUrl(){const r=window.location.pathname;return r.substring(0,r.lastIndexOf("/"))+"/api/bitrix24.php"}static async call(r,s={}){try{const t=await fetch(this.getApiUrl(),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({method:r,params:s})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();if(e.error)throw new Error(e.error_description||e.error);return e}catch(t){throw console.error("Bitrix24 API error:",t),t}}static async getProfile(){return this.call("profile",{})}static async getLeads(r={},s=["ID","NAME","EMAIL","PHONE"],t={ID:"DESC"}){return(await this.call("crm.lead.list",{filter:r,select:s,order:t})).result||[]}}export{c as B,i as S,n as i};
