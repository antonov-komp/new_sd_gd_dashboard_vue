const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WebhookLogsDashboard.vue-Dq8fUmxS.js","./chunk-IDUYkvJI.js","./chunk-zzKzT0er.js","./chunk-CCQQUMtL.js","./chunk-DLgBCjTL.js","./chunk-C7JhVT7I.js","./chunk-CEPkt3e7.js","./dashboard-components-cU3ZvHcC.css","./chunk-BLNkvvQZ.js","./chunk-CYuVzfAf.js","./graph-state-components-B0vkDZmY.css","./WebhookLogsDashboard-C6oMXeLs.css","./WebhookLogDetails.vue-BlpPgy4H.js","./WebhookLogDetails-Baj1T0UR.css"])))=>i.map(i=>d[i]);
var nt=Object.defineProperty;var at=(o,t,n)=>t in o?nt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var ue=(o,t,n)=>at(o,typeof t!="symbol"?t+"":t,n);import{g as ae,_ as Ne}from"./chunk-CEPkt3e7.js";import{r as S,c as k,M as Z,a as c,d as s,j as R,b as x,t as u,k as se,x as oe,o as l,h as ie,i as U,m as H,U as ye,v as Oe,F as j,f as z,n as ve,O as le,R as De,u as J,l as te,p as de,e as O,N as xe,g as G,T as rt,S as it,a0 as Re,y as Le,q as lt}from"./chunk-IDUYkvJI.js";import{b as pe,i as dt}from"./chunk-DLgBCjTL.js";import{_ as P,B as Ie,A as Ae}from"./chunk-CCQQUMtL.js";import{g as ct,n as We,h as fe,i as ce,j as ut,e as je,k as gt,l as ht}from"./chunk-zzKzT0er.js";import{h as ft}from"./chunk-CYuVzfAf.js";import{B as vt}from"./chunk-C7JhVT7I.js";import{C as Ce}from"./chunk-BLNkvvQZ.js";const{get:mt,set:yt,getCacheKey:pt,invalidate:Ue}=ct({ttl:2*60*1e3,maxSize:50});class Fe{static getBaseUrl(){return ae("/api/webhook-logs.php")}static get BASE_URL(){return this.getBaseUrl()}static async getLogs(t={},n=1,e=50,i=!1){if(n<1)throw new Error("Page must be greater than 0");if(e<1||e>1e3)throw new Error("Limit must be between 1 and 1000");const d={category:t.category||null,event:t.event||null,date:t.date||null,hour:t.hour!==void 0?t.hour:null,dateFrom:t.dateFrom||null,dateTo:t.dateTo||null,ip:t.ip||null,status:t.status||null},a=this.getBaseUrl(),r=pt(a,{filters:d,page:n,limit:e});if(!i){const _=mt(r);if(_)return console.log("[WebhookLogsApiService] Cache hit:",r.substring(0,50)+"..."),_}console.log("[WebhookLogsApiService] Cache miss:",r.substring(0,50)+"...");const h=new URLSearchParams({page:n.toString(),limit:e.toString()});d.category&&h.append("category",d.category),d.event&&h.append("event",d.event),d.date&&h.append("date",d.date),d.hour!==null&&h.append("hour",d.hour.toString()),d.dateFrom&&h.append("dateFrom",d.dateFrom),d.dateTo&&h.append("dateTo",d.dateTo),d.ip&&h.append("ip",d.ip),d.status&&h.append("status",d.status);try{const _=this.getBaseUrl(),p=await fetch(`${_}?${h.toString()}`);if(!p.ok){const C=await p.text();let y;try{y=JSON.parse(C)}catch{y={error:C}}throw new Error(y.error_description||y.error||`HTTP error! status: ${p.status}`)}const g=await p.json();if(console.log("[WebhookLogsApiService] API response:",{success:g.success,logsCount:g.logs?.length||0,pagination:g.pagination,hasError:!!g.error}),g.error)throw new Error(g.error_description||g.error);if(!g.success)throw console.warn("[WebhookLogsApiService] API returned success=false:",g),new Error("API request failed");if(!Array.isArray(g.logs))throw console.error("[WebhookLogsApiService] Invalid logs format:",g.logs),new Error("Invalid logs format: expected array");const L=We(g.logs);(!g.pagination||typeof g.pagination!="object")&&(console.warn("[WebhookLogsApiService] Invalid pagination format:",g.pagination),g.pagination={page:n,limit:e,total:L.length,pages:Math.ceil(L.length/e)});const T={success:!0,logs:L,pagination:{page:g.pagination.page||n,limit:g.pagination.limit||e,total:g.pagination.total||L.length,pages:g.pagination.pages||Math.ceil((g.pagination.total||L.length)/e)}};return yt(r,T),T}catch(_){throw console.error("[WebhookLogsApiService] Error:",_),_}}static invalidateCacheOnFilterChange(t={},n={}){const e=Ue(/^\/api\/webhook-logs\.php/);console.log(`[WebhookLogsApiService] Invalidated ${e} entries on filter change`)}static clearCache(){const t=Ue(/^\/api\/webhook-logs\.php/);console.log(`[WebhookLogsApiService] Cleared ${t} entries`)}static async getLogDetails(t,n=null){const e={};return n&&(e.date=n),(await this.getLogs(e,1,1e3)).logs.find(a=>`${a.timestamp}_${a.event}`===t)||null}static async getErrors(t={},n=1,e=50){return this.getLogs({...t,category:"errors"},n,e)}static async getStats(t={}){const n=await this.getLogs(t,1,1e3),e={total:n.pagination.total||n.logs.length,tasks:0,smartProcesses:0,errors:0,byEvent:{},byDate:{}};return n.logs.forEach(i=>{i.category==="tasks"?e.tasks++:i.category==="smart-processes"?e.smartProcesses++:i.category==="errors"&&e.errors++,e.byEvent[i.event]||(e.byEvent[i.event]=0),e.byEvent[i.event]++;const d=i.timestamp.split("T")[0];e.byDate[d]||(e.byDate[d]=0),e.byDate[d]++}),e}}function _t(o,t,n={}){if(!t||!t.trim())return o;const{caseSensitive:e=!1,searchInEvent:i=!0,searchInPayload:d=!0,searchInDetails:a=!0,searchInIp:r=!0,searchInTimestamp:h=!1}=n,_=e?t.trim():t.trim().toLowerCase();return o.filter(p=>{if(i&&p.event&&(e?p.event:p.event.toLowerCase()).includes(_))return!0;if(d&&p.payload)try{const g=JSON.stringify(p.payload);if((e?g:g.toLowerCase()).includes(_))return!0}catch(g){console.warn("Error searching in payload:",g)}if(a&&p.details)try{const g=JSON.stringify(p.details);if((e?g:g.toLowerCase()).includes(_))return!0}catch(g){console.warn("Error searching in details:",g)}return!!(r&&p.ip&&(e?p.ip:p.ip.toLowerCase()).includes(_)||h&&p.timestamp&&(e?p.timestamp:p.timestamp.toLowerCase()).includes(_))})}function Se(o){if(!o||typeof o!="object"||o.category!==void 0&&o.category!==null&&!["tasks","smart-processes","errors"].includes(o.category)||o.date!==void 0&&o.date!==null&&!/^\d{4}-\d{2}-\d{2}$/.test(o.date))return!1;if(o.hour!==void 0&&o.hour!==null){const t=parseInt(o.hour,10);if(isNaN(t)||t<0||t>23)return!1}return!(o.ip!==void 0&&o.ip!==null&&(typeof o.ip!="string"||o.ip.length===0))}function bt(o){if(!o||typeof o!="object")return!1;const t=parseInt(o.page,10),n=parseInt(o.limit,10),e=parseInt(o.total,10),i=parseInt(o.pages,10);return!(isNaN(t)||t<1||isNaN(n)||n<1||n>1e3||isNaN(e)||e<0||isNaN(i)||i<0)}function Pe(o){if(o==null)return"";const t=String(o),n=t.replace(/"/g,'""');return t.includes(",")||t.includes(`
`)||t.includes('"')?`"${n}"`:n}function Ct(o){return o==null?"":typeof o=="object"?JSON.stringify(o):String(o)}function kt(o,t="webhook-logs.csv",n={}){return new Promise((e,i)=>{try{if(!Array.isArray(o)||o.length===0)throw new Error("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞");const{columns:d=null,onProgress:a=null}=n,r=d||Object.keys(o[0]),_=[r.map(C=>Pe(C)).join(",")],p=o.length,g=1e3;for(let C=0;C<p;C+=g){const y=o.slice(C,C+g);if(y.forEach(E=>{const w=r.map(I=>{const K=E[I];return Pe(Ct(K))});_.push(w.join(","))}),a){const E=Math.min(100,Math.round((C+y.length)/p*100));a(E)}}const L="\uFEFF"+_.join(`
`),T=new Blob([L],{type:"text/csv;charset=utf-8;"});ze(T,t),a&&a(100),e()}catch(d){i(d)}})}function wt(o,t="webhook-logs.json",n={}){return new Promise((e,i)=>{try{if(!Array.isArray(o)||o.length===0)throw new Error("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞");const{pretty:d=!0,onProgress:a=null}=n,r=d?JSON.stringify(o,null,2):JSON.stringify(o);a&&a(50);const h=new Blob([r],{type:"application/json;charset=utf-8;"});ze(h,t),a&&a(100),e()}catch(d){i(d)}})}function ze(o,t){const n=URL.createObjectURL(o),e=document.createElement("a");e.href=n,e.download=t,e.style.display="none",document.body.appendChild(e),e.click(),setTimeout(()=>{document.body.removeChild(e),URL.revokeObjectURL(n)},100)}function St(o,t={},n=0){const e=new Date().toISOString().split("T")[0],i=new Date().toTimeString().split(" ")[0].replace(/:/g,"-");let d=`webhook-logs_${e}_${i}`;const a=[];return t.category&&a.push(`cat-${t.category}`),t.event&&a.push(`evt-${t.event.substring(0,10)}`),t.dateFrom&&a.push(`from-${t.dateFrom}`),t.dateTo&&a.push(`to-${t.dateTo}`),a.length>0&&(d+=`_${a.join("-")}`),n>0&&(d+=`_${n}records`),`${d}.${o}`}function xt(o){const t=[];if(!Array.isArray(o))return t.push("–î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∞—Å—Å–∏–≤–æ–º"),{valid:!1,errors:t,estimatedSize:0};if(o.length===0)return t.push("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞"),{valid:!1,errors:t,estimatedSize:0};const n=JSON.stringify(o).length,e=50*1024*1024;return n>e&&t.push(`–ë–æ–ª—å—à–æ–π –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö (${Math.round(n/1024/1024)} MB). –≠–∫—Å–ø–æ—Ä—Ç –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è.`),{valid:t.length===0,errors:t,estimatedSize:n}}function Te(o,t="short"){if(!o)return"‚Äî";try{const n=new Date(o);if(isNaN(n.getTime()))return"Invalid date";switch(t){case"short":return n.toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});case"long":return n.toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});case"relative":return Lt(n);default:return n.toLocaleString("ru-RU")}}catch{return"Invalid date"}}function Lt(o){const n=new Date-o,e=Math.floor(n/1e3),i=Math.floor(e/60),d=Math.floor(i/60),a=Math.floor(d/24);return e<60?"—Ç–æ–ª—å–∫–æ —á—Ç–æ":i<60?`${i} ${ke(i,"–º–∏–Ω—É—Ç—É","–º–∏–Ω—É—Ç—ã","–º–∏–Ω—É—Ç")} –Ω–∞–∑–∞–¥`:d<24?`${d} ${ke(d,"—á–∞—Å","—á–∞—Å–∞","—á–∞—Å–æ–≤")} –Ω–∞–∑–∞–¥`:a<7?`${a} ${ke(a,"–¥–µ–Ω—å","–¥–Ω—è","–¥–Ω–µ–π")} –Ω–∞–∑–∞–¥`:Te(o.toISOString(),"short")}function ke(o,t,n,e){const i=o%10,d=o%100;return i===1&&d!==11?t:i>=2&&i<=4&&(d<10||d>=20)?n:e}function he(o){return o?o.replace(/^ON/,"").split(/(?=[A-Z])/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"‚Äî"}function ne(o){return{tasks:"–ó–∞–¥–∞—á–∏","smart-processes":"–°–º–∞—Ä—Ç-–ø—Ä–æ—Ü–µ—Å—Å—ã",errors:"–û—à–∏–±–∫–∏"}[o]||o}function Me(o){if(!o||typeof o!="object")return"‚Äî";const t=[];if(o.task_id&&t.push(`–ó–∞–¥–∞—á–∞ #${o.task_id}`),o.entity_id&&t.push(`–°—É—â–Ω–æ—Å—Ç—å #${o.entity_id}`),o.task_title&&t.push(`"${o.task_title}"`),o.title&&t.push(`"${o.title}"`),o.comment_text){const n=o.comment_text.length>50?o.comment_text.substring(0,50)+"...":o.comment_text;t.push(`–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${n}`)}return t.length>0?t.join(" ‚Ä¢ "):"‚Äî"}const Tt={name:"WebhookLogsExport",props:{logs:{type:Array,default:()=>[]},selectedLogs:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},totalCount:{type:Number,default:0}},emits:["export-start","export-complete","export-error"],setup(o,{emit:t}){const n=S(!1),e=S("csv"),i=S("all"),d=S(!0),a=S(!1),r=S(0),h=S([]),_=S(null),p=k(()=>o.selectedLogs.length),g=k(()=>o.logs.length>0||o.totalCount>0),L=k(()=>o.filters.category||o.filters.event||o.filters.dateFrom||o.filters.dateTo),T=k(()=>i.value==="selected"?p.value:o.logs.length||o.totalCount),C=k(()=>i.value==="selected"?p.value>0:g.value),y=()=>{r.value=0,h.value=[],_.value=null,p.value>0?i.value="selected":i.value="all",n.value=!0,w()},E=()=>{a.value||(n.value=!1)},w=()=>{const F=I(),M=xt(F);h.value=M.errors,_.value=M.estimatedSize},I=()=>(i.value==="selected"?o.selectedLogs:o.logs).map(v=>fe(v)).filter(v=>ce(v)?!0:(console.warn("[WebhookLogsExport] Skipping invalid log:",v),!1)),K=async()=>{try{a.value=!0,r.value=0;let F=I();if(F.length===0)throw new Error("–ù–µ—Ç –≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞");const M=F.map(b=>({timestamp:b.timestamp,event:b.event,category:b.category,ip:b.ip||null,details:b.details||null,payload:b.payload||null,formatted:{timestamp:Te(b.timestamp),event:he(b.event),category:ne(b.category),details:Me(b.details)}}));t("export-start",{format:e.value,scope:i.value,count:M.length});const v=St(e.value,o.filters,M.length),m=b=>{r.value=b};e.value==="csv"?await kt(M,v,{onProgress:m}):await wt(M,v,{pretty:d.value,onProgress:m}),t("export-complete",{format:e.value,filename:v,count:M.length}),setTimeout(()=>{a.value=!1,n.value=!1,r.value=0},500)}catch(F){console.error("[WebhookLogsExport] Export error:",F),t("export-error",F),a.value=!1,r.value=0,alert(`–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: ${F.message}`)}},X=F=>F<1024?`${F} B`:F<1024*1024?`${(F/1024).toFixed(2)} KB`:`${(F/1024/1024).toFixed(2)} MB`;return Z([i,()=>o.logs,()=>o.selectedLogs],()=>{n.value&&w()}),{showExportModal:n,exportFormat:e,exportScope:i,jsonPretty:d,exporting:a,exportProgress:r,exportWarnings:h,estimatedSize:_,selectedCount:p,hasAllLogs:g,hasFilters:L,exportCount:T,canExport:C,openExportModal:y,closeExportModal:E,handleExport:K,formatSize:X}}},Mt={class:"webhook-logs-export"},Et=["disabled","title"],Dt={key:0,class:"selected-badge"},It={class:"export-modal-header"},At={class:"export-modal-body"},Ut={class:"export-section"},Ft={class:"radio-group"},Pt={class:"export-section"},Nt={class:"radio-group"},Ot=["disabled"],Rt={class:"radio-label"},Wt={key:0},jt={key:1},zt=["disabled"],Bt={class:"radio-label"},Vt={key:0,class:"export-section"},Ht={class:"checkbox-option"},qt={class:"export-info"},$t={class:"info-item"},Jt={class:"info-value"},Yt={key:0,class:"info-item"},Kt={class:"info-value"},Xt={key:1,class:"export-warnings"},Qt={key:0,class:"export-progress"},Gt={class:"progress-bar"},Zt={class:"progress-text"},es={class:"export-modal-footer"},ts=["disabled"],ss={key:0},os={key:1},ns=["disabled"];function as(o,t,n,e,i,d){return l(),c("div",Mt,[s("button",{onClick:t[0]||(t[0]=(...a)=>e.openExportModal&&e.openExportModal(...a)),class:"btn-export",disabled:!e.canExport,title:e.canExport?"–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö":"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞"},[t[11]||(t[11]=s("span",{class:"btn-icon"},"üì•",-1)),t[12]||(t[12]=s("span",{class:"btn-text"},"–≠–∫—Å–ø–æ—Ä—Ç",-1)),e.selectedCount>0?(l(),c("span",Dt,u(e.selectedCount),1)):x("",!0)],8,Et),R(oe,{name:"modal"},{default:se(()=>[e.showExportModal?(l(),c("div",{key:0,class:"export-modal-overlay",onClick:t[10]||(t[10]=(...a)=>e.closeExportModal&&e.closeExportModal(...a))},[s("div",{class:"export-modal",onClick:t[9]||(t[9]=ie(()=>{},["stop"]))},[s("div",It,[t[13]||(t[13]=s("h3",null,"–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö",-1)),s("button",{onClick:t[1]||(t[1]=(...a)=>e.closeExportModal&&e.closeExportModal(...a)),class:"btn-close"},"‚úï")]),s("div",At,[s("div",Ut,[t[16]||(t[16]=s("h4",null,"–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞",-1)),s("div",Ft,[s("label",{class:U(["radio-option",{active:e.exportFormat==="csv"}])},[H(s("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=a=>e.exportFormat=a),value:"csv",class:"radio-input"},null,512),[[ye,e.exportFormat]]),t[14]||(t[14]=s("span",{class:"radio-label"},[s("strong",null,"CSV"),s("small",null,"–î–ª—è Excel, LibreOffice")],-1))],2),s("label",{class:U(["radio-option",{active:e.exportFormat==="json"}])},[H(s("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=a=>e.exportFormat=a),value:"json",class:"radio-input"},null,512),[[ye,e.exportFormat]]),t[15]||(t[15]=s("span",{class:"radio-label"},[s("strong",null,"JSON"),s("small",null,"–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, API")],-1))],2)])]),s("div",Pt,[t[19]||(t[19]=s("h4",null,"–ß—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å",-1)),s("div",Nt,[s("label",{class:U(["radio-option",{active:e.exportScope==="all",disabled:!e.hasAllLogs}])},[H(s("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=a=>e.exportScope=a),value:"all",disabled:!e.hasAllLogs,class:"radio-input"},null,8,Ot),[[ye,e.exportScope]]),s("span",Rt,[t[17]||(t[17]=s("strong",null,"–í—Å–µ –∑–∞–ø–∏—Å–∏",-1)),e.hasFilters?(l(),c("small",Wt,"–° –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ ("+u(e.exportCount)+" –∑–∞–ø–∏—Å–µ–π)",1)):(l(),c("small",jt,"–í—Å–µ–≥–æ: "+u(e.exportCount)+" –∑–∞–ø–∏—Å–µ–π",1))])],2),s("label",{class:U(["radio-option",{active:e.exportScope==="selected",disabled:e.selectedCount===0}])},[H(s("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=a=>e.exportScope=a),value:"selected",disabled:e.selectedCount===0,class:"radio-input"},null,8,zt),[[ye,e.exportScope]]),s("span",Bt,[t[18]||(t[18]=s("strong",null,"–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏",-1)),s("small",null,u(e.selectedCount)+" –∑–∞–ø–∏—Å–µ–π –≤—ã–±—Ä–∞–Ω–æ",1)])],2)])]),e.exportFormat==="json"?(l(),c("div",Vt,[t[21]||(t[21]=s("h4",null,"–û–ø—Ü–∏–∏ JSON",-1)),s("label",Ht,[H(s("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=a=>e.jsonPretty=a),class:"checkbox-input"},null,512),[[Oe,e.jsonPretty]]),t[20]||(t[20]=s("span",{class:"checkbox-label"},"–ö—Ä–∞—Å–∏–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å –æ—Ç—Å—Ç—É–ø–∞–º–∏)",-1))])])):x("",!0),s("div",qt,[s("div",$t,[t[22]||(t[22]=s("span",{class:"info-label"},"–ó–∞–ø–∏—Å–µ–π –∫ —ç–∫—Å–ø–æ—Ä—Ç—É:",-1)),s("span",Jt,u(e.exportCount),1)]),e.estimatedSize?(l(),c("div",Yt,[t[23]||(t[23]=s("span",{class:"info-label"},"–ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞–∑–º–µ—Ä:",-1)),s("span",Kt,u(e.formatSize(e.estimatedSize)),1)])):x("",!0)]),e.exportWarnings.length>0?(l(),c("div",Xt,[(l(!0),c(j,null,z(e.exportWarnings,(a,r)=>(l(),c("div",{key:r,class:"warning-item"}," ‚ö†Ô∏è "+u(a),1))),128))])):x("",!0)]),e.exporting?(l(),c("div",Qt,[s("div",Gt,[s("div",{class:"progress-fill",style:ve({width:`${e.exportProgress}%`})},null,4)]),s("div",Zt," –≠–∫—Å–ø–æ—Ä—Ç: "+u(e.exportProgress)+"% ",1)])):x("",!0),s("div",es,[s("button",{onClick:t[7]||(t[7]=(...a)=>e.handleExport&&e.handleExport(...a)),disabled:e.exporting||!e.canExport,class:"btn-primary"},[e.exporting?(l(),c("span",ss,"–≠–∫—Å–ø–æ—Ä—Ç...")):(l(),c("span",os,"–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"))],8,ts),s("button",{onClick:t[8]||(t[8]=(...a)=>e.closeExportModal&&e.closeExportModal(...a)),disabled:e.exporting,class:"btn-secondary"}," –û—Ç–º–µ–Ω–∞ ",8,ns)])])])):x("",!0)]),_:1})])}const rs=P(Tt,[["render",as],["__scopeId","data-v-7ae66f8c"]]),is={name:"WebhookLogSearch",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","search"],setup(o,{emit:t}){const n=S(o.modelValue||""),e=S(!1),i=S(null),d=ft(T=>{e.value=!1,t("search",T)},400),a=()=>{e.value=!0,t("update:modelValue",n.value),d(n.value)},r=()=>{e.value=!1,t("search",n.value)},h=()=>{n.value="",e.value=!1,i.value=null,t("update:modelValue",""),t("search","")};return Z(()=>o.modelValue,T=>{T!==n.value&&(n.value=T)}),{searchQuery:n,isSearching:e,searchResultsCount:i,handleSearchInput:a,handleSearch:r,clearSearch:h,setResultsCount:T=>{i.value=T},getResultsText:T=>{const C=T%10,y=T%100;return y>=11&&y<=19?"–∑–∞–ø–∏—Å–µ–π":C===1?"–∑–∞–ø–∏—Å—å":C>=2&&C<=4?"–∑–∞–ø–∏—Å–∏":"–∑–∞–ø–∏—Å–µ–π"},performSearch:(T,C)=>{if(!T||!C||!Array.isArray(C))return[];const y=T.toLowerCase().trim();return y.length===0?C:C.map(w=>fe(w)).filter(w=>ce(w)).filter(w=>{if(w.event&&w.event.toLowerCase().includes(y)||w.category&&w.category.toLowerCase().includes(y)||w.ip&&w.ip.toLowerCase().includes(y)||w.details&&typeof w.details=="object"&&(w.details.task_id&&String(w.details.task_id).includes(y)||w.details.task_title&&w.details.task_title.toLowerCase().includes(y)||w.details.entity_id&&String(w.details.entity_id).includes(y)||w.details.title&&w.details.title.toLowerCase().includes(y)||w.details.comment_text&&w.details.comment_text.toLowerCase().includes(y)))return!0;if(w.payload&&typeof w.payload=="object")try{if(JSON.stringify(w.payload).toLowerCase().includes(y))return!0}catch{}return!1})},formatSearchResult:T=>{const C=[];if(T.event&&C.push(he(T.event)),T.category&&C.push(ne(T.category)),T.details){const y=Me(T.details);y!=="‚Äî"&&C.push(y)}return C.join(" ‚Ä¢ ")}}}},ls={class:"webhook-search"},ds={class:"search-wrapper"},cs={key:0,class:"search-indicator"},us={key:1,class:"search-results"};function gs(o,t,n,e,i,d){return l(),c("div",ls,[s("div",ds,[t[5]||(t[5]=s("span",{class:"search-icon"},"üîç",-1)),H(s("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchQuery=a),type:"text",placeholder:"–ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É –ª–æ–≥–æ–≤ (—Å–æ–±—ã—Ç–∏–µ, payload, IP, –¥–µ—Ç–∞–ª–∏)...",class:"search-input",onInput:t[1]||(t[1]=(...a)=>e.handleSearchInput&&e.handleSearchInput(...a)),onKeyup:[t[2]||(t[2]=De((...a)=>e.handleSearch&&e.handleSearch(...a),["enter"])),t[3]||(t[3]=De((...a)=>e.clearSearch&&e.clearSearch(...a),["esc"]))]},null,544),[[le,e.searchQuery]]),e.searchQuery?(l(),c("button",{key:0,onClick:t[4]||(t[4]=(...a)=>e.clearSearch&&e.clearSearch(...a)),class:"clear-button",title:"–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫ (Esc)","aria-label":"–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫"}," ‚úï ")):x("",!0)]),e.isSearching?(l(),c("div",cs,[...t[6]||(t[6]=[s("span",{class:"spinner"},null,-1),J(" –ü–æ–∏—Å–∫... ",-1)])])):x("",!0),e.searchQuery&&e.searchResultsCount!==null?(l(),c("div",us," –ù–∞–π–¥–µ–Ω–æ: "+u(e.searchResultsCount)+" "+u(e.getResultsText(e.searchResultsCount)),1)):x("",!0)])}const hs=P(is,[["render",gs],["__scopeId","data-v-db228863"]]),fs={name:"WebhookLogFilters",props:{filters:{type:Object,required:!0}},emits:["update:filters","reset"],setup(o,{emit:t}){const n=S(null),e=ut("webhook-filters",{category:null,event:null,dateFrom:null,dateTo:null,hour:null,ip:null,status:null}),i=v=>(n.value=null,Se(v)?(t("update:filters",v),!0):(n.value="–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏",console.error("[WebhookLogFilters] Validation error:",n.value),!1)),d=new Date().toISOString().split("T")[0],a=S({category:e.value.category||o.filters.category||null,event:e.value.event||o.filters.event||null,dateFrom:e.value.dateFrom||o.filters.dateFrom||o.filters.date||d,dateTo:e.value.dateTo||o.filters.dateTo||null,hour:e.value.hour!==void 0?e.value.hour:o.filters.hour!==void 0?o.filters.hour:null,ip:e.value.ip||o.filters.ip||null,status:e.value.status||o.filters.status||null}),r=S(null),h=[{id:"today",label:"–°–µ–≥–æ–¥–Ω—è",getDates:()=>({from:d,to:d})},{id:"yesterday",label:"–í—á–µ—Ä–∞",getDates:()=>{const v=new Date;v.setDate(v.getDate()-1);const m=v.toISOString().split("T")[0];return{from:m,to:m}}},{id:"last7days",label:"–ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π",getDates:()=>{const v=new Date;return v.setDate(v.getDate()-7),{from:v.toISOString().split("T")[0],to:d}}},{id:"last30days",label:"–ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π",getDates:()=>{const v=new Date;return v.setDate(v.getDate()-30),{from:v.toISOString().split("T")[0],to:d}}}],_=v=>{const m=h.find(b=>b.id===v);if(m){const b=m.getDates();a.value.dateFrom=b.from,a.value.dateTo=b.to,r.value=v,F()}};Z(()=>o.filters,v=>{a.value={category:v.category||null,event:v.event||null,dateFrom:v.dateFrom||v.date||d,dateTo:v.dateTo||null,hour:v.hour!==void 0?v.hour:null,ip:v.ip||null,status:v.status||null}},{deep:!0}),Z(a,v=>{e.value={...v},t("update:filters",{...v})},{deep:!0});const p=k(()=>{const v={};return a.value.category&&(v.category=a.value.category),a.value.event&&(v.event=a.value.event),a.value.hour!==null&&(v.hour=a.value.hour),a.value.ip&&(v.ip=a.value.ip),a.value.status&&(v.status=a.value.status),a.value.dateFrom&&a.value.dateFrom!==d&&(v.dateFrom=a.value.dateFrom),a.value.dateTo&&(v.dateTo=a.value.dateTo),v}),g=k(()=>Object.keys(p.value).length>0),L=v=>({category:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",event:"–°–æ–±—ã—Ç–∏–µ",hour:"–ß–∞—Å",ip:"IP –∞–¥—Ä–µ—Å",status:"–°—Ç–∞—Ç—É—Å",dateFrom:"–î–∞—Ç–∞ –æ—Ç",dateTo:"–î–∞—Ç–∞ –¥–æ"})[v]||v,T=(v,m)=>v==="category"?ne(m)||m:v==="hour"?`${String(m).padStart(2,"0")}:00`:v==="event"?he(m)||m:v==="status"&&{success:"–£—Å–ø–µ—à–Ω–æ",error:"–û—à–∏–±–∫–∞",warning:"–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"}[m]||m,C=k(()=>[{value:null,label:"–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"},{value:"tasks",label:ne("tasks")},{value:"smart-processes",label:ne("smart-processes")},{value:"errors",label:ne("errors")}]),y=k(()=>[{value:null,label:"–í—Å–µ —Å–æ–±—ã—Ç–∏—è"},...["ONTASKADD","ONTASKUPDATE","ONTASKDELETE","ONTASKCOMMENTADD","ONTASKCOMMENTUPDATE","ONTASKCOMMENTDELETE","ONCRMDYNAMICITEMADD","ONCRMDYNAMICITEMUPDATE","ONCRMDYNAMICITEMDELETE"].map(m=>({value:m,label:he(m)}))]),E=v=>{v==="hour"?a.value[v]=null:v==="dateFrom"?a.value[v]=d:a.value[v]=null,r.value=null},w=v=>{const m={...a.value,category:v||null};i(m)&&(a.value.category=v)},I=v=>{const m={...a.value,event:v||null};i(m)&&(a.value.event=v)},K=(v,m)=>{if(v&&!/^\d{4}-\d{2}-\d{2}$/.test(v)){console.error("[WebhookLogFilters] Invalid date format:",v),n.value="–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã";return}const b={...a.value,[m]:v||null};i(b)&&(a.value[m]=v)},X=v=>{if(v!=null){const b=parseInt(v,10);if(isNaN(b)||b<0||b>23){console.error("[WebhookLogFilters] Invalid hour:",v),n.value="–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —á–∞—Å (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 0 –¥–æ 23)";return}}const m={...a.value,hour:v!=null?parseInt(v,10):null};i(m)&&(a.value.hour=v!=null?parseInt(v,10):null)},F=()=>{i({...a.value})},M=()=>{a.value={category:null,event:null,dateFrom:d,dateTo:null,hour:null,ip:null,status:null},r.value=null,e.clear(),t("reset")};return te(()=>{e.value&&Object.keys(e.value).length>0&&t("update:filters",{...e.value})}),{localFilters:a,activeFilters:p,hasActiveFilters:g,getFilterLabel:L,getFilterValue:T,clearFilter:E,handleFilterChange:F,handleCategoryChange:w,handleEventChange:I,handleDateChange:K,handleHourChange:X,handleReset:M,quickFilters:h,activeQuickFilter:r,applyQuickFilter:_,categoryOptions:C,eventOptions:y,validationError:n}}},vs={class:"webhook-log-filters"},ms={key:0,class:"active-filters-indicator"},ys=["onClick"],ps={key:1,class:"validation-error"},_s={class:"quick-filters"},bs=["onClick"],Cs={class:"filters-row"},ks={class:"filter-group"},ws=["value"],Ss={class:"filter-group"},xs=["value"],Ls={class:"filter-group"},Ts={class:"filter-group"},Ms={class:"filter-group"},Es={class:"filter-group"},Ds={class:"filter-group"};function Is(o,t,n,e,i,d){return l(),c("div",vs,[e.hasActiveFilters?(l(),c("div",ms,[t[14]||(t[14]=s("span",{class:"indicator-text"},"–ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:",-1)),(l(!0),c(j,null,z(e.activeFilters,(a,r)=>(l(),c("span",{key:r,class:"filter-badge"},[J(u(e.getFilterLabel(r))+": "+u(e.getFilterValue(r,a))+" ",1),s("button",{onClick:h=>e.clearFilter(r),class:"filter-badge-remove",title:"–£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä"}," √ó ",8,ys)]))),128)),s("button",{onClick:t[0]||(t[0]=(...a)=>e.handleReset&&e.handleReset(...a)),class:"btn-clear-all"}," –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ ")])):x("",!0),e.validationError?(l(),c("div",ps," ‚ö†Ô∏è "+u(e.validationError),1)):x("",!0),s("div",_s,[t[15]||(t[15]=s("span",{class:"quick-filters-label"},"–ë—ã—Å—Ç—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:",-1)),(l(!0),c(j,null,z(e.quickFilters,a=>(l(),c("button",{key:a.id,onClick:r=>e.applyQuickFilter(a.id),class:U(["quick-filter-btn",{active:e.activeQuickFilter===a.id}])},u(a.label),11,bs))),128))]),s("div",Cs,[s("div",ks,[t[16]||(t[16]=s("label",{for:"category-filter"},"–ö–∞—Ç–µ–≥–æ—Ä–∏—è:",-1)),H(s("select",{id:"category-filter","onUpdate:modelValue":t[1]||(t[1]=a=>e.localFilters.category=a),onChange:t[2]||(t[2]=a=>e.handleCategoryChange(e.localFilters.category)),class:"filter-select"},[(l(!0),c(j,null,z(e.categoryOptions,a=>(l(),c("option",{key:a.value,value:a.value},u(a.label),9,ws))),128))],544),[[de,e.localFilters.category]])]),s("div",Ss,[t[17]||(t[17]=s("label",{for:"event-filter"},"–¢–∏–ø —Å–æ–±—ã—Ç–∏—è:",-1)),H(s("select",{id:"event-filter","onUpdate:modelValue":t[3]||(t[3]=a=>e.localFilters.event=a),onChange:t[4]||(t[4]=a=>e.handleEventChange(e.localFilters.event)),class:"filter-select"},[(l(!0),c(j,null,z(e.eventOptions,a=>(l(),c("option",{key:a.value,value:a.value},u(a.label),9,xs))),128))],544),[[de,e.localFilters.event]])]),s("div",Ls,[t[18]||(t[18]=s("label",{for:"date-from-filter"},"–î–∞—Ç–∞ –æ—Ç:",-1)),H(s("input",{id:"date-from-filter","onUpdate:modelValue":t[5]||(t[5]=a=>e.localFilters.dateFrom=a),type:"date",onChange:t[6]||(t[6]=a=>e.handleDateChange(e.localFilters.dateFrom,"dateFrom")),class:"filter-input"},null,544),[[le,e.localFilters.dateFrom]])]),s("div",Ts,[t[19]||(t[19]=s("label",{for:"date-to-filter"},"–î–∞—Ç–∞ –¥–æ:",-1)),H(s("input",{id:"date-to-filter","onUpdate:modelValue":t[7]||(t[7]=a=>e.localFilters.dateTo=a),type:"date",onChange:t[8]||(t[8]=a=>e.handleDateChange(e.localFilters.dateTo,"dateTo")),class:"filter-input"},null,544),[[le,e.localFilters.dateTo]])]),s("div",Ms,[t[20]||(t[20]=s("label",{for:"ip-filter"},"IP –∞–¥—Ä–µ—Å:",-1)),H(s("input",{id:"ip-filter","onUpdate:modelValue":t[9]||(t[9]=a=>e.localFilters.ip=a),type:"text",placeholder:"192.168.1.1",onInput:t[10]||(t[10]=(...a)=>e.handleFilterChange&&e.handleFilterChange(...a)),class:"filter-input"},null,544),[[le,e.localFilters.ip]])]),s("div",Es,[t[22]||(t[22]=s("label",{for:"status-filter"},"–°—Ç–∞—Ç—É—Å:",-1)),H(s("select",{id:"status-filter","onUpdate:modelValue":t[11]||(t[11]=a=>e.localFilters.status=a),onChange:t[12]||(t[12]=(...a)=>e.handleFilterChange&&e.handleFilterChange(...a)),class:"filter-select"},[...t[21]||(t[21]=[s("option",{value:null},"–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã",-1),s("option",{value:"success"},"–£—Å–ø–µ—à–Ω–æ",-1),s("option",{value:"error"},"–û—à–∏–±–∫–∞",-1),s("option",{value:"warning"},"–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ",-1)])],544),[[de,e.localFilters.status]])]),s("div",Ds,[s("button",{onClick:t[13]||(t[13]=(...a)=>e.handleReset&&e.handleReset(...a)),class:"btn-reset"}," –°–±—Ä–æ—Å–∏—Ç—å ")])])])}const As=P(fs,[["render",Is],["__scopeId","data-v-2a150a46"]]),Us={name:"WebhookLogList",props:{logs:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null},pagination:{type:Object,default:null},selectedLogs:{type:Array,default:()=>[]}},emits:["select-log","page-change","update:selectedLogs"],setup(o,{emit:t}){const n=k(()=>!o.logs||!Array.isArray(o.logs)?(console.warn("[WebhookLogList] Invalid logs prop:",o.logs),[]):o.logs.map(m=>fe(m)).filter(m=>ce(m)?!0:(console.warn("[WebhookLogList] Invalid log entry:",m),!1))),e=S("timestamp"),i=S("desc"),d=m=>{e.value===m?i.value=i.value==="asc"?"desc":"asc":(e.value=m,i.value="desc")},a=k(()=>!n.value||n.value.length===0?[]:[...n.value].sort((b,N)=>{let V,B;switch(e.value){case"timestamp":V=new Date(b.timestamp||0).getTime(),B=new Date(N.timestamp||0).getTime();break;case"event":V=(b.event||"").toLowerCase(),B=(N.event||"").toLowerCase();break;case"category":V=(b.category||"").toLowerCase(),B=(N.category||"").toLowerCase();break;case"ip":V=(b.ip||"").toLowerCase(),B=(N.ip||"").toLowerCase();break;default:return 0}return V<B?i.value==="asc"?-1:1:V>B?i.value==="asc"?1:-1:0})),r=m=>e.value!==m?"‚ÜïÔ∏è":i.value==="asc"?"‚Üë":"‚Üì",h=m=>m.category==="errors"?"status-error":"status-success",_=m=>m.category==="errors"?"‚ùå":"‚úÖ",p=m=>m.category==="errors"?"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏":"–£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ",g=m=>`${m.timestamp}_${m.event}_${m.ip||"unknown"}`,L=m=>m?Te(m,"short"):"‚Äî",T=m=>m?he(m):"‚Äî",C=m=>m?ne(m):"‚Äî",y=m=>!m||typeof m!="object"?"‚Äî":Me(m),E=m=>`category-${m}`,w=m=>m?.startsWith("ONTASK")?"event-task":m?.startsWith("ONCRMDYNAMIC")?"event-smart-process":"event-other",I=m=>{t("select-log",m)},K=m=>{m>=1&&m<=o.pagination.pages&&t("page-change",m)},X=m=>o.selectedLogs.some(b=>g(b)===g(m)),F=(m,b)=>{b.stopPropagation();const N=[...o.selectedLogs],V=g(m),B=N.findIndex(Q=>g(Q)===V);b.target.checked?B===-1&&N.push(m):B!==-1&&N.splice(B,1),t("update:selectedLogs",N)},M=m=>{m.target.checked?t("update:selectedLogs",[...o.logs]):t("update:selectedLogs",[])},v=k(()=>n.value.length>0&&n.value.every(m=>X(m)));return Z(()=>o.logs,m=>{if(m&&Array.isArray(m)){const b=m.filter(N=>!ce(N)).length;b>0&&console.warn(`[WebhookLogList] Received ${b} invalid log entries out of ${m.length}`)}},{immediate:!0}),{validatedLogs:n,sortBy:e,sortOrder:i,sortedLogs:a,handleSort:d,getSortIcon:r,getStatusClass:h,getStatusIcon:_,getStatusTitle:p,getLogId:g,formatTimestamp:L,formatEvent:T,formatCategoryLabel:C,formatDetailsPreview:y,getCategoryClass:E,getEventClass:w,handleLogClick:I,handlePageChange:K,isSelected:X,handleSelectLog:F,handleSelectAll:M,allSelected:v}}},Fs={class:"webhook-log-list"},Ps={key:0,class:"logs-table-container"},Ns={class:"logs-table"},Os={class:"checkbox-header"},Rs=["checked"],Ws={class:"sort-icon"},js={class:"sort-icon"},zs={class:"sort-icon"},Bs={class:"sort-icon"},Vs=["onClick"],Hs=["checked","onChange"],qs=["title"],$s={class:"details-preview"},Js=["onClick"],Ys={key:0,class:"pagination"},Ks=["disabled"],Xs={class:"pagination-info"},Qs=["disabled"];function Gs(o,t,n,e,i,d){return l(),c("div",Fs,[n.logs.length>0?(l(),c("div",Ps,[s("table",Ns,[s("thead",null,[s("tr",null,[s("th",Os,[s("input",{type:"checkbox",checked:e.allSelected,onChange:t[0]||(t[0]=(...a)=>e.handleSelectAll&&e.handleSelectAll(...a)),onClick:t[1]||(t[1]=ie(()=>{},["stop"])),class:"checkbox-input",title:"–í—ã–±—Ä–∞—Ç—å –≤—Å–µ"},null,40,Rs)]),s("th",{onClick:t[2]||(t[2]=a=>e.handleSort("timestamp")),class:U(["sortable",{"sort-asc":e.sortBy==="timestamp"&&e.sortOrder==="asc","sort-desc":e.sortBy==="timestamp"&&e.sortOrder==="desc"}])},[t[9]||(t[9]=J(" –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è ",-1)),s("span",Ws,u(e.getSortIcon("timestamp")),1)],2),s("th",{onClick:t[3]||(t[3]=a=>e.handleSort("event")),class:U(["sortable",{"sort-asc":e.sortBy==="event"&&e.sortOrder==="asc","sort-desc":e.sortBy==="event"&&e.sortOrder==="desc"}])},[t[10]||(t[10]=J(" –¢–∏–ø —Å–æ–±—ã—Ç–∏—è ",-1)),s("span",js,u(e.getSortIcon("event")),1)],2),s("th",{onClick:t[4]||(t[4]=a=>e.handleSort("category")),class:U(["sortable",{"sort-asc":e.sortBy==="category"&&e.sortOrder==="asc","sort-desc":e.sortBy==="category"&&e.sortOrder==="desc"}])},[t[11]||(t[11]=J(" –ö–∞—Ç–µ–≥–æ—Ä–∏—è ",-1)),s("span",zs,u(e.getSortIcon("category")),1)],2),s("th",{onClick:t[5]||(t[5]=a=>e.handleSort("ip")),class:U(["sortable",{"sort-asc":e.sortBy==="ip"&&e.sortOrder==="asc","sort-desc":e.sortBy==="ip"&&e.sortOrder==="desc"}])},[t[12]||(t[12]=J(" IP ",-1)),s("span",Bs,u(e.getSortIcon("ip")),1)],2),t[13]||(t[13]=s("th",null,"–î–µ—Ç–∞–ª–∏",-1)),t[14]||(t[14]=s("th",null,"–î–µ–π—Å—Ç–≤–∏—è",-1))])]),s("tbody",null,[(l(!0),c(j,null,z(e.sortedLogs,a=>(l(),c("tr",{key:e.getLogId(a),onClick:r=>e.handleLogClick(a),class:U(["log-row",{"row-selected":e.isSelected(a)}])},[s("td",{onClick:t[6]||(t[6]=ie(()=>{},["stop"]))},[s("input",{type:"checkbox",checked:e.isSelected(a),onChange:r=>e.handleSelectLog(a,r),class:"checkbox-input"},null,40,Hs)]),s("td",null,u(e.formatTimestamp(a.timestamp)),1),s("td",null,[s("span",{class:U(["status-indicator",e.getStatusClass(a)]),title:e.getStatusTitle(a)},u(e.getStatusIcon(a)),11,qs),s("span",{class:U(["event-badge",e.getEventClass(a.event)])},u(e.formatEvent(a.event)),3)]),s("td",null,[s("span",{class:U(["category-badge",e.getCategoryClass(a.category)])},u(e.formatCategoryLabel(a.category)),3)]),s("td",null,u(a.ip||"N/A"),1),s("td",null,[s("div",$s,u(e.formatDetailsPreview(a.details)),1)]),s("td",null,[s("button",{onClick:ie(r=>e.handleLogClick(a),["stop"]),class:"btn-view"}," –ü—Ä–æ—Å–º–æ—Ç—Ä ",8,Js)])],10,Vs))),128))])]),n.pagination&&n.pagination.pages>1?(l(),c("div",Ys,[s("button",{onClick:t[7]||(t[7]=a=>e.handlePageChange(n.pagination.page-1)),disabled:n.pagination.page<=1,class:"btn-pagination"}," –ù–∞–∑–∞–¥ ",8,Ks),s("span",Xs," –°—Ç—Ä–∞–Ω–∏—Ü–∞ "+u(n.pagination.page)+" –∏–∑ "+u(n.pagination.pages)+" (–≤—Å–µ–≥–æ: "+u(n.pagination.total)+") ",1),s("button",{onClick:t[8]||(t[8]=a=>e.handlePageChange(n.pagination.page+1)),disabled:n.pagination.page>=n.pagination.pages,class:"btn-pagination"}," –í–ø–µ—Ä—ë–¥ ",8,Qs)])):x("",!0)])):x("",!0)])}const Zs=P(Us,[["render",Gs],["__scopeId","data-v-fddd3018"]]),eo={name:"LoadingSkeleton",props:{width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"20px"},variant:{type:String,default:"rect",validator:o=>["rect","circle","text","table-row"].includes(o)},animated:{type:Boolean,default:!0},borderRadius:{type:String,default:null}},setup(o){return{skeletonStyle:k(()=>{const n={width:typeof o.width=="number"?`${o.width}px`:o.width,height:typeof o.height=="number"?`${o.height}px`:o.height};return o.borderRadius&&(n.borderRadius=o.borderRadius),n})}}},to={key:0,class:"skeleton-shimmer"};function so(o,t,n,e,i,d){return l(),c("div",{class:U(["skeleton",[`skeleton-${n.variant}`,{"skeleton-animated":n.animated}]]),style:ve(e.skeletonStyle)},[n.animated?(l(),c("div",to)):x("",!0)],6)}const oo=P(eo,[["render",so],["__scopeId","data-v-014f86e6"]]),no={name:"SkeletonLogList",components:{LoadingSkeleton:oo},props:{rows:{type:Number,default:5}},setup(){return{getColumnWidth:t=>["40px","15%","20%","15%","15%","20%","15%"][t-1]||"100%"}}},ao={class:"skeleton-log-list"},ro={class:"skeleton-table-header"};function io(o,t,n,e,i,d){const a=O("LoadingSkeleton");return l(),c("div",ao,[s("div",ro,[(l(),c(j,null,z(7,r=>R(a,{key:r,width:"120px",height:"16px",variant:"text"})),64))]),(l(!0),c(j,null,z(n.rows,r=>(l(),c("div",{key:r,class:"skeleton-table-row"},[(l(),c(j,null,z(7,h=>R(a,{key:h,width:"100%",height:"20px",variant:"text",style:ve({width:e.getColumnWidth(h)})},null,8,["style"])),64))]))),128))])}const lo=P(no,[["render",io],["__scopeId","data-v-475c4e73"]]),co={name:"EmptyState",props:{icon:{type:String,default:"üì≠"},title:{type:String,required:!0},description:{type:String,required:!0},actionLabel:{type:String,default:null},actions:{type:Array,default:null},hints:{type:Array,default:()=>[]},variant:{type:String,default:"default",validator:o=>["default","error","warning","info"].includes(o)}},emits:["action","action-click"]},uo={class:"empty-icon"},go={class:"empty-title"},ho={class:"empty-description"},fo={key:0,class:"empty-hints"},vo={key:1,class:"empty-actions"},mo=["onClick"];function yo(o,t,n,e,i,d){return l(),c("div",{class:U(["empty-state",`empty-state-${n.variant}`])},[s("div",uo,u(n.icon),1),s("h3",go,u(n.title),1),s("p",ho,u(n.description),1),n.hints&&n.hints.length>0?(l(),c("div",fo,[(l(!0),c(j,null,z(n.hints,(a,r)=>(l(),c("div",{key:r,class:"hint-item"}," üí° "+u(a),1))),128))])):x("",!0),n.actionLabel||n.actions?(l(),c("div",vo,[n.actionLabel?(l(),c("button",{key:0,onClick:t[0]||(t[0]=a=>o.$emit("action")),class:"btn-primary"},u(n.actionLabel),1)):x("",!0),(l(!0),c(j,null,z(n.actions,(a,r)=>(l(),c("button",{key:r,onClick:h=>o.$emit("action-click",a.id),class:U(["btn",`btn-${a.variant||"secondary"}`])},u(a.label),11,mo))),128))])):x("",!0)],2)}const po=P(co,[["render",yo],["__scopeId","data-v-081c13b9"]]),_o={name:"ErrorDisplay",props:{title:{type:String,default:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞"},message:{type:String,required:!0},details:{type:String,default:null},severity:{type:String,default:"error",validator:o=>["error","warning","critical"].includes(o)},retryable:{type:Boolean,default:!1}},emits:["retry"],setup(){return{showDetails:S(!1)}}},bo={class:"error-icon"},Co={class:"error-content"},ko={class:"error-title"},wo={class:"error-message"},So={key:0,class:"error-details"},xo={class:"error-actions"};function Lo(o,t,n,e,i,d){return l(),c("div",{class:U(["error-display",`error-${n.severity}`])},[s("div",bo,u(n.severity==="critical"?"üö®":"‚ö†Ô∏è"),1),s("div",Co,[s("h4",ko,u(n.title),1),s("p",wo,u(n.message),1),n.details&&e.showDetails?(l(),c("div",So,[s("pre",null,u(n.details),1)])):x("",!0),s("div",xo,[n.retryable?(l(),c("button",{key:0,onClick:t[0]||(t[0]=a=>o.$emit("retry")),class:"btn-retry"}," üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å ")):x("",!0),n.details?(l(),c("button",{key:1,onClick:t[1]||(t[1]=a=>e.showDetails=!e.showDetails),class:"btn-details"},u(e.showDetails?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å")+" –¥–µ—Ç–∞–ª–∏ ",1)):x("",!0)])])],2)}const To=P(_o,[["render",Lo],["__scopeId","data-v-3f2f4c14"]]),Mo={name:"Notification",props:{notification:{type:Object,required:!0}},emits:["close"],setup(o,{emit:t}){const n=S(100),e=k(()=>o.notification.duration>0);let i=null;const d={success:"‚úÖ",error:"‚ùå",warning:"‚ö†Ô∏è",info:"‚ÑπÔ∏è"},a=k(()=>d[o.notification.type]||"‚ÑπÔ∏è"),r=()=>{t("close")},h=()=>{o.notification.onClick&&o.notification.onClick()};return te(()=>{if(e.value&&o.notification.duration>0){const _=Date.now(),p=o.notification.duration;i=setInterval(()=>{const g=Date.now()-_;n.value=Math.max(0,100-g/p*100),n.value<=0&&(clearInterval(i),r())},50)}}),xe(()=>{i&&clearInterval(i)}),{icon:a,progress:n,showProgress:e,close:r,handleClick:h}}},Eo={class:"notification-content"},Do={class:"notification-icon"},Io={class:"notification-message"},Ao={key:0,class:"notification-progress"};function Uo(o,t,n,e,i,d){return l(),c("div",{class:U(["notification",`notification-${n.notification.type}`]),onClick:t[1]||(t[1]=(...a)=>e.handleClick&&e.handleClick(...a))},[s("div",Eo,[s("span",Do,u(e.icon),1),s("span",Io,u(n.notification.message),1)]),s("button",{onClick:t[0]||(t[0]=ie((...a)=>e.close&&e.close(...a),["stop"])),class:"notification-close"},"‚úï"),e.showProgress?(l(),c("div",Ao,[s("div",{class:"progress-bar",style:ve({width:`${e.progress}%`})},null,4)])):x("",!0)],2)}const Fo=P(Mo,[["render",Uo],["__scopeId","data-v-1b602bdf"]]),Po={name:"NotificationContainer",components:{Notification:Fo},setup(){const{notifications:o,removeNotification:t}=je();return{notifications:o,removeNotification:t}}},No={class:"notification-container"};function Oo(o,t,n,e,i,d){const a=O("Notification");return l(),G(it,{to:"body"},[s("div",No,[R(rt,{name:"notification",tag:"div"},{default:se(()=>[(l(!0),c(j,null,z(e.notifications,r=>(l(),G(a,{key:r.id,notification:r,onClose:h=>e.removeNotification(r.id)},null,8,["notification","onClose"]))),128))]),_:1})])])}const Ro=P(Po,[["render",Oo],["__scopeId","data-v-dd8772c8"]]),Wo={name:"RealtimeControls",props:{enabled:{type:Boolean,default:!1},connectionState:{type:String,default:"disconnected"},error:{type:String,default:null}},emits:["toggle"],setup(o,{emit:t}){const n=S(o.enabled);Z(()=>o.enabled,g=>{n.value=g});const e=k(()=>o.connectionState==="connecting"),i=k(()=>!!o.error),d=k(()=>({"status-connected":o.connectionState==="connected","status-connecting":o.connectionState==="connecting","status-disconnected":o.connectionState==="disconnected","status-error":o.connectionState==="error"})),a=k(()=>{switch(o.connectionState){case"connected":return"–ü–æ–¥–∫–ª—é—á–µ–Ω–æ";case"connecting":return"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...";case"disconnected":return"–û—Ç–∫–ª—é—á–µ–Ω–æ";case"error":return"–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è";default:return"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ"}}),r=k(()=>a.value),h=k(()=>({"status-connected":o.connectionState==="connected","status-connecting":o.connectionState==="connecting","status-disconnected":o.connectionState==="disconnected","status-error":o.connectionState==="error"})),_=k(()=>o.error?typeof o.error=="string"?o.error:o.error.message?o.error.message:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞":null);return{localEnabled:n,isConnecting:e,hasError:i,statusClass:d,statusText:a,connectionStatusText:r,connectionStatusClass:h,displayError:_,handleToggle:()=>{t("toggle",n.value)}}}},jo={class:"realtime-controls"},zo={class:"control-toggle"},Bo=["disabled"],Vo={class:"status-text"},Ho={key:0,class:"error-message"};function qo(o,t,n,e,i,d){return l(),c("div",jo,[s("label",zo,[H(s("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>e.localEnabled=a),onChange:t[1]||(t[1]=(...a)=>e.handleToggle&&e.handleToggle(...a)),disabled:e.isConnecting},null,40,Bo),[[Oe,e.localEnabled]]),t[2]||(t[2]=s("span",{class:"toggle-label"},"–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ",-1))]),s("div",{class:U(["status-indicator",e.statusClass])},[t[3]||(t[3]=s("span",{class:"status-dot"},null,-1)),s("span",Vo,u(e.statusText),1)],2),e.hasError&&e.displayError?(l(),c("div",Ho," ‚ö†Ô∏è "+u(e.displayError),1)):x("",!0)])}const $o=P(Wo,[["render",qo],["__scopeId","data-v-af36f073"]]),Jo={name:"NewLogsIndicator",props:{count:{type:Number,default:0},newLogs:{type:Array,default:()=>[]}},emits:["apply","dismiss"],setup(o,{emit:t}){const n=(a,r,h,_)=>{const p=a%10,g=a%100;return g>=11&&g<=19?_:p===1?r:p>=2&&p<=4?h:_},e=k(()=>!o.newLogs||!Array.isArray(o.newLogs)||o.newLogs.length===0?[]:o.newLogs.map(r=>fe(r)).filter(r=>ce(r)).slice(0,5).map(r=>({...r,formatted:{event:he(r.event),category:ne(r.category)}})));return{pluralize:n,newLogsPreview:e,handleApply:()=>{if(!o.newLogs||o.newLogs.length===0)return;const a=o.newLogs.map(r=>fe(r)).filter(r=>ce(r));if(a.length===0){console.warn("[NewLogsIndicator] No valid logs to apply");return}t("apply",a)},handleDismiss:()=>{t("dismiss")}}}},Yo={key:0,class:"new-logs-indicator"},Ko={class:"indicator-content"},Xo={class:"indicator-text"},Qo={class:"indicator-actions"};function Go(o,t,n,e,i,d){return l(),G(oe,{name:"slide-down"},{default:se(()=>[n.count>0?(l(),c("div",Yo,[s("div",Ko,[t[2]||(t[2]=s("span",{class:"indicator-icon"},"üîî",-1)),s("span",Xo,u(n.count)+" "+u(e.pluralize(n.count,"–Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ","–Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏—è","–Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π")),1),s("div",Qo,[s("button",{onClick:t[0]||(t[0]=(...a)=>e.handleApply&&e.handleApply(...a)),class:"btn-apply"}," –ü—Ä–∏–º–µ–Ω–∏—Ç—å "),s("button",{onClick:t[1]||(t[1]=(...a)=>e.handleDismiss&&e.handleDismiss(...a)),class:"btn-dismiss"}," ‚úï ")])])])):x("",!0)]),_:1})}const Zo=P(Jo,[["render",Go],["__scopeId","data-v-19791dbc"]]),en=Re(()=>Ne(()=>import("./WebhookLogsDashboard.vue-Dq8fUmxS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),tn=Re(()=>Ne(()=>import("./WebhookLogDetails.vue-BlpPgy4H.js"),__vite__mapDeps([12,2,1,3,4,5,6,7,8,9,10,13]),import.meta.url)),sn={name:"WebhookLogsPage",components:{WebhookLogsDashboard:en,WebhookLogsExport:rs,WebhookLogSearch:hs,WebhookLogFilters:As,WebhookLogList:Zs,WebhookLogDetails:tn,SkeletonLogList:lo,EmptyState:po,ErrorDisplay:To,NotificationContainer:Ro,RealtimeControls:$o,NewLogsIndicator:Zo},setup(){const o=Le(),{success:t,error:n}=je(),e=S(!1),i=S(!1),d=S(null),a=S(null),r=S([]),h=(f,D=2)=>{if(f==null)return String(f);if(typeof f=="string")return f;const W=(A,Y=0)=>{if(Y>10)return"[Max Depth]";if(A==null||typeof A!="object")return A;if(Array.isArray(A))return A.map(q=>W(q,Y+1));const ee={};try{for(const q in A)if(Object.prototype.hasOwnProperty.call(A,q))try{const me=A[q];if(typeof me=="function"||me===void 0)continue;ee[q]=W(me,Y+1)}catch{ee[q]="[Error reading property]"}}catch{return"[Error reading object]"}return ee};try{const A=W(f),Y=new WeakSet;return JSON.stringify(A,(ee,q)=>{if(typeof q=="object"&&q!==null){if(Y.has(q))return"[Circular]";Y.add(q)}return q},D)}catch(A){return console.error("[WebhookLogsPage] Error in safeStringify:",A),`[Error: ${A.message}]`}},_=S(null),p=S([]),g=S(""),L=S(null),T=S(null),C=S(!1),{connectionState:y,newLogsCount:E,error:w,connect:I,disconnect:K,applyNewLogs:X,clearNewLogs:F}=gt(ae("/api/webhook-realtime.php"),{autoConnect:!1,enableSound:!0,validateLogs:!0,onNewLogs:f=>{console.log("[WebhookLogsPage] New logs received:",f.length),f.length>0&&(r.value.unshift(...f),b.value.total+=f.length,t(`–ü–æ–ª—É—á–µ–Ω–æ ${f.length} –Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π`))}}),{filters:M,updateFilters:v,clearFilters:m}=ht(),b=S({page:1,limit:50,total:0,pages:0}),N=k(()=>{let f=[...r.value];return g.value&&g.value.trim()&&(f=_t(f,g.value,{caseSensitive:!1,searchInEvent:!0,searchInPayload:!0,searchInDetails:!0,searchInIp:!0})),M.value.category&&(f=f.filter(D=>D.category===M.value.category)),M.value.event&&(f=f.filter(D=>D.event===M.value.event)),M.value.ip&&(f=f.filter(D=>D.ip&&D.ip.includes(M.value.ip))),M.value.status&&(f=f.filter(D=>M.value.status==="error"?D.category==="errors":M.value.status==="success"?D.category!=="errors":!0)),M.value.dateFrom&&(f=f.filter(D=>D.timestamp?new Date(D.timestamp).toISOString().split("T")[0]>=M.value.dateFrom:!1)),M.value.dateTo&&(f=f.filter(D=>D.timestamp?new Date(D.timestamp).toISOString().split("T")[0]<=M.value.dateTo:!1)),M.value.hour!==null&&(f=f.filter(D=>D.timestamp?new Date(D.timestamp).getHours()===M.value.hour:!1)),f});Z(N,f=>{L.value&&g.value&&L.value.setResultsCount(f.length)});const V=async()=>{try{await Ie.init();const f=await Ie.getCurrentUser();if(console.log("[WebhookLogsPage] User data:",f),!f||!f.ID){console.warn("[WebhookLogsPage] User not determined"),a.value=h({error:"User not determined",userId:f?.ID||null,userName:f?`${f.NAME||""} ${f.LAST_NAME||""}`.trim():null}),e.value=!1;return}const D=f?.UF_DEPARTMENT||[];if(console.log("[WebhookLogsPage] User departments:",D),console.log("[WebhookLogsPage] Allowed departments:",pe.allowedDepartmentIds),D.length>0){const W=D.some(A=>dt(A));console.log("[WebhookLogsPage] Has access:",W),e.value=W,W||(a.value=h({userId:f.ID,userName:`${f.NAME||""} ${f.LAST_NAME||""}`.trim(),userDepartments:D,allowedDepartments:pe.allowedDepartmentIds,message:"User departments do not match allowed departments"}))}else console.warn("[WebhookLogsPage] User has no departments"),a.value=h({userId:f.ID,userName:`${f.NAME||""} ${f.LAST_NAME||""}`.trim(),userDepartments:[],allowedDepartments:pe.allowedDepartmentIds,message:"User has no departments assigned"}),e.value=!1}catch(f){console.error("[WebhookLogsPage] Error checking access:",f),a.value=h({error:f.message,stack:f.stack}),e.value=!1}},B=k(()=>pe.allowedDepartmentIds.join(", ")),Q=async(f=!1)=>{if(e.value&&!(re&&!f)){re=!0,i.value=!0,d.value=null;try{const D=new Date().toISOString().split("T")[0],W={category:M.value.category||null,event:M.value.event||null,date:M.value.dateFrom||D,hour:M.value.hour!==null&&M.value.hour!==void 0?M.value.hour:null,ip:M.value.ip||null,status:M.value.status||null,dateFrom:M.value.dateFrom||D,dateTo:M.value.dateTo||null};if(!Se(W))throw new Error("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏");console.log("[WebhookLogsPage] Loading logs with filters:",W);const A=await Fe.getLogs(W,b.value.page,b.value.limit,f);if(console.log("[WebhookLogsPage] API result:",A),console.log("[WebhookLogsPage] Logs count:",A?.logs?.length||0),console.log("[WebhookLogsPage] Pagination:",A?.pagination),!A.success)throw new Error(A.error||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤");bt(A.pagination)?b.value=A.pagination:(console.warn("[WebhookLogsPage] Invalid pagination format, using defaults"),b.value={page:b.value.page,limit:b.value.limit,total:A.logs.length,pages:Math.ceil(A.logs.length/b.value.limit)});const Y=We(A.logs),ee=Y.filter(q=>ce(q));ee.length!==Y.length&&console.warn("[WebhookLogsPage] Filtered out invalid logs:",Y.length-ee.length),r.value=ee,f&&t("–õ–æ–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã")}catch(D){Ve(D)}finally{i.value=!1,re=!1}}},Ve=f=>{console.error("[WebhookLogsPage] API Error:",f),f.status===403?(d.value="–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω",n("–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–æ–≥–∞–º –≤–µ–±—Ö—É–∫–æ–≤")):f.status===404?(d.value="–õ–æ–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",n("–õ–æ–≥–∏ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")):f.status>=500?(d.value="–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞",n("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")):(d.value=f.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞",n(d.value)),f.status>=500&&(r.value=[])},He=f=>{g.value=f,v({search:f||null})};let re=!1;const qe=f=>{if(!Se(f)){n("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏");return}const D={category:M.value.category,event:M.value.event,dateFrom:M.value.dateFrom,dateTo:M.value.dateTo,hour:M.value.hour,ip:M.value.ip,status:M.value.status},W={category:f?.category||null,event:f?.event||null,dateFrom:f?.dateFrom||null,dateTo:f?.dateTo||null,hour:f?.hour!==void 0?f.hour:null,ip:f?.ip||null,status:f?.status||null},A=Object.keys(W).some(Y=>{const ee=D[Y],q=W[Y];return ee!==q});if(!(!A&&!re)){if(v(W),b.value.page=1,A)try{Fe.invalidateCacheOnFilterChange(D,W)}catch(Y){console.error("[WebhookLogsPage] Error invalidating cache:",Y)}re||(re=!0,Q(!0).finally(()=>{re=!1}))}},Ee=()=>{m(),g.value="",b.value.page=1,Q()},$e=f=>{_.value=f},Je=()=>{_.value=null},Ye=f=>{b.value.page=f,Q()},Ke=()=>{try{o.push("/")}catch(f){console.error("Navigation error:",f),window.location.hash="#/"}},Xe=f=>{p.value=f},Qe=f=>{console.log("–≠–∫—Å–ø–æ—Ä—Ç –Ω–∞—á–∞—Ç:",f)},Ge=f=>{console.log("–≠–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à—ë–Ω:",f),t(`–≠–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à—ë–Ω: ${f.count} –∑–∞–ø–∏—Å–µ–π –≤ —Ñ–∞–π–ª–µ ${f.filename}`)},Ze=f=>{console.error("–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞:",f),n(`–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: ${f.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"}`)},et=()=>{g.value="",Ee()},tt=f=>{if(console.log("[WebhookLogsPage] Toggle auto-update:",f),C.value=f,f){let D=null;if(r.value.length>0){const W=r.value[0];W.timestamp&&(D=W.timestamp,console.log("[WebhookLogsPage] Using lastTimestamp:",D))}I({lastTimestamp:D})}else K()},st=()=>{X(r.value),t("–ù–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã")},ot=()=>{F()};return te(async()=>{await V(),e.value&&(M.value.search&&(g.value=M.value.search),await Q())}),{hasAccess:e,loading:i,error:d,logs:r,filteredLogs:N,selectedLog:_,selectedLogs:p,filters:M,searchQuery:g,searchComponent:L,pagination:b,previousPeriodStats:T,handleFiltersUpdate:qe,handleFiltersReset:Ee,handleSearch:He,handleLogSelect:$e,handleLogClose:Je,handlePageChange:Ye,handleSelectedLogsUpdate:Xe,handleExportStart:Qe,handleExportComplete:Ge,handleExportError:Ze,handleClearSearch:et,autoUpdateEnabled:C,connectionState:y,newLogsCount:E,realtimeError:w,handleToggleAutoUpdate:tt,handleApplyNewLogs:st,handleDismissNewLogs:ot,allowedDepartmentsText:B,accessDebugInfo:a,goBack:Ke}}},on={class:"webhook-logs-page"},nn={class:"page-header"},an={class:"page-header-top"},rn={key:0,class:"access-denied"},ln={class:"access-denied-content"},dn={class:"access-hint"},cn={key:0,class:"access-debug"},un={key:1,class:"page-content"},gn={class:"actions-bar"};function hn(o,t,n,e,i,d){const a=O("WebhookLogsDashboard"),r=O("WebhookLogsExport"),h=O("WebhookLogSearch"),_=O("RealtimeControls"),p=O("NewLogsIndicator"),g=O("WebhookLogFilters"),L=O("SkeletonLogList"),T=O("WebhookLogList"),C=O("EmptyState"),y=O("ErrorDisplay"),E=O("WebhookLogDetails"),w=O("NotificationContainer");return l(),c("div",on,[s("div",nn,[s("div",an,[s("button",{onClick:t[0]||(t[0]=(...I)=>e.goBack&&e.goBack(...I)),class:"back-button",title:"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É","aria-label":"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"},[...t[3]||(t[3]=[s("span",{class:"back-icon","aria-hidden":"true"},"‚Üê",-1),s("span",{class:"back-text"},"–ù–∞–∑–∞–¥",-1)])])]),t[4]||(t[4]=s("h1",null,"–õ–æ–≥–∏ –≤–µ–±—Ö—É–∫–æ–≤ Bitrix24",-1))]),e.hasAccess?(l(),c("div",un,[R(a,{logs:e.logs,pagination:e.pagination,"previous-period-stats":e.previousPeriodStats},null,8,["logs","pagination","previous-period-stats"]),s("div",gn,[R(r,{logs:e.filteredLogs,"selected-logs":e.selectedLogs,filters:e.filters,"total-count":e.filteredLogs.length,onExportStart:e.handleExportStart,onExportComplete:e.handleExportComplete,onExportError:e.handleExportError},null,8,["logs","selected-logs","filters","total-count","onExportStart","onExportComplete","onExportError"]),R(h,{modelValue:e.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=I=>e.searchQuery=I),onSearch:e.handleSearch,ref:"searchComponent"},null,8,["modelValue","onSearch"])]),R(_,{enabled:e.autoUpdateEnabled,"connection-state":e.connectionState,error:e.realtimeError,onToggle:e.handleToggleAutoUpdate},null,8,["enabled","connection-state","error","onToggle"]),R(p,{count:e.newLogsCount,onApply:e.handleApplyNewLogs,onDismiss:e.handleDismissNewLogs},null,8,["count","onApply","onDismiss"]),R(g,{filters:e.filters,"onUpdate:filters":e.handleFiltersUpdate,onReset:e.handleFiltersReset},null,8,["filters","onUpdate:filters","onReset"]),R(oe,{name:"fade"},{default:se(()=>[e.loading&&e.logs.length===0?(l(),G(L,{key:0,rows:5})):x("",!0)]),_:1}),R(oe,{name:"fade"},{default:se(()=>[!e.loading&&e.filteredLogs.length>0?(l(),G(T,{key:0,logs:e.filteredLogs,loading:!1,error:null,pagination:e.pagination,"selected-logs":e.selectedLogs,onSelectLog:e.handleLogSelect,onPageChange:e.handlePageChange,"onUpdate:selectedLogs":e.handleSelectedLogsUpdate},null,8,["logs","pagination","selected-logs","onSelectLog","onPageChange","onUpdate:selectedLogs"])):x("",!0)]),_:1}),R(oe,{name:"fade"},{default:se(()=>[!e.loading&&e.filteredLogs.length===0&&!e.error&&e.logs.length===0?(l(),G(C,{key:0,icon:"üì≠",title:"–õ–æ–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",description:"–õ–æ–≥–∏ –≤–µ–±—Ö—É–∫–æ–≤ –ø–æ–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. –û–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –æ—Ç Bitrix24.",hints:["–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è","–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥","–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã"],"action-label":"–û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã",onAction:e.handleFiltersReset},null,8,["onAction"])):x("",!0)]),_:1}),R(oe,{name:"fade"},{default:se(()=>[!e.loading&&e.filteredLogs.length===0&&!e.error&&e.logs.length>0?(l(),G(C,{key:0,icon:"üîç",title:"–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ",description:"–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã.",hints:["–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞","–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã","–û—á–∏—Å—Ç–∏—Ç–µ –ø–æ–∏—Å–∫ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞"],"action-label":"–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫",onAction:e.handleClearSearch},null,8,["onAction"])):x("",!0)]),_:1}),R(oe,{name:"fade"},{default:se(()=>[e.error?(l(),G(y,{key:0,title:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤",message:e.error,retryable:!0,onRetry:o.loadLogs},null,8,["message","onRetry"])):x("",!0)]),_:1}),e.selectedLog?(l(),c("div",{key:0,class:"modal-overlay",onClick:t[2]||(t[2]=(...I)=>e.handleLogClose&&e.handleLogClose(...I))})):x("",!0),R(oe,{name:"modal"},{default:se(()=>[e.selectedLog?(l(),G(E,{key:0,log:e.selectedLog,onClose:e.handleLogClose},null,8,["log","onClose"])):x("",!0)]),_:1})])):(l(),c("div",rn,[s("div",ln,[t[7]||(t[7]=s("h2",null,"–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω",-1)),t[8]||(t[8]=s("p",null,"–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É –ª–æ–≥–æ–≤ –≤–µ–±—Ö—É–∫–æ–≤.",-1)),s("p",dn,[t[5]||(t[5]=J(" –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–∑ –æ—Ç–¥–µ–ª–æ–≤: ",-1)),s("strong",null,u(e.allowedDepartmentsText),1)]),t[9]||(t[9]=s("p",{class:"access-hint"}," –ï—Å–ª–∏ –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ, —á—Ç–æ —É –≤–∞—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∏—Å—Ç–µ–º—ã. ",-1)),e.accessDebugInfo?(l(),c("details",cn,[t[6]||(t[6]=s("summary",null,"–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",-1)),s("pre",null,u(e.accessDebugInfo),1)])):x("",!0)])])),R(w)])}const bl=P(sn,[["render",hn],["__scopeId","data-v-628bf174"]]);class _e{static async getActivity(t={}){const{userId:n=null,dateFrom:e=null,dateTo:i=null,type:d=null,limit:a=1e3}=t,r=new URLSearchParams;n&&r.append("user_id",n),e&&r.append("date_from",e),i&&r.append("date_to",i),d&&r.append("type",d),a&&r.append("limit",a);try{const h=ae("/api/user-activity-get.php"),_=await fetch(`${h}?${r.toString()}`);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);const p=await _.json();if(p.success)return p.data||[];throw new Error(p.error||"Failed to get activity")}catch(h){throw console.error("[UserActivityService] Error getting activity:",h),h}}static async getActivityStats(t={}){const n=await this.getActivity(t),e={total_entries:n.length,total_app_entries:0,total_page_visits:0,unique_users:new Set,pages_visited:{},activity_by_date:{},activity_by_hour:{}};return n.forEach(i=>{if(i.type==="app_entry")e.total_app_entries++,e.unique_users.add(i.user_id);else if(i.type==="page_visit"){e.total_page_visits++;const d=i.route_title||i.route_path||i.route_name||"unknown";e.pages_visited[d]=(e.pages_visited[d]||0)+1}if(i.timestamp){const d=new Date(i.timestamp).toISOString().split("T")[0];e.activity_by_date[d]=(e.activity_by_date[d]||0)+1;const a=new Date(i.timestamp).getHours();e.activity_by_hour[a]=(e.activity_by_hour[a]||0)+1}}),e.unique_users_count=e.unique_users.size,e.unique_users=Array.from(e.unique_users),e}static async getUserActivity(t,n={}){return await this.getActivity({...n,userId:t})}}const be="hidden_users_list";function ge(){try{const o=localStorage.getItem(be);if(!o)return[];const t=JSON.parse(o);return Array.isArray(t)?t.map(n=>Number(n)):[]}catch(o){return console.error("[HiddenUsersManager] Error reading hidden users:",o),[]}}function fn(o){const t=ge(),n=Number(o);if(!t.includes(n)){t.push(n);try{localStorage.setItem(be,JSON.stringify(t))}catch(e){console.error("[HiddenUsersManager] Error saving hidden users:",e)}}}function vn(o){const t=ge(),n=Number(o),e=t.filter(i=>i!==n);if(e.length!==t.length)try{localStorage.setItem(be,JSON.stringify(e))}catch(i){console.error("[HiddenUsersManager] Error saving hidden users:",i)}}function mn(){try{localStorage.removeItem(be)}catch(o){console.error("[HiddenUsersManager] Error clearing hidden users:",o)}}function yn(o){const t=new Map;return o.forEach(n=>{if(n.user_id){const e=Number(n.user_id);t.has(e)||t.set(e,{id:e,name:n.user_name||`User #${e}`,count:0}),t.get(e).count++}}),Array.from(t.values()).sort((n,e)=>e.count-n.count)}function Be(o){const t=ge();return t.length===0?o:o.filter(n=>n.user_id?!t.includes(Number(n.user_id)):!0)}const pn={name:"UserActivityCard",props:{entry:{type:Object,required:!0}},computed:{cardClass(){return{"activity-entry":this.entry.type==="app_entry","activity-visit":this.entry.type==="page_visit"}}},methods:{formatTime(o){return o?new Date(o).toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"}}},_n={class:"activity-icon"},bn={key:0},Cn={key:1},kn={class:"activity-content"},wn={class:"activity-header"},Sn={class:"user-name"},xn={class:"activity-time"},Ln={class:"activity-details"},Tn={key:0,class:"activity-type"},Mn={key:1,class:"activity-type"},En={key:0,class:"activity-from"};function Dn(o,t,n,e,i,d){return l(),c("div",{class:U(["user-activity-card",d.cardClass])},[s("div",_n,[n.entry.type==="app_entry"?(l(),c("span",bn,"üö™")):n.entry.type==="page_visit"?(l(),c("span",Cn,"üìÑ")):x("",!0)]),s("div",kn,[s("div",wn,[s("span",Sn,u(n.entry.user_name||`User #${n.entry.user_id}`),1),s("span",xn,u(d.formatTime(n.entry.timestamp)),1)]),s("div",Ln,[n.entry.type==="app_entry"?(l(),c("span",Tn," –û—Ç–∫—Ä—ã–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ")):n.entry.type==="page_visit"?(l(),c("span",Mn," –û—Ç–∫—Ä—ã–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É: "+u(n.entry.route_title||n.entry.route_path||n.entry.route_name||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞"),1)):x("",!0)]),n.entry.type==="page_visit"&&n.entry.from_path?(l(),c("div",En," –°: "+u(n.entry.from_name||n.entry.from_path),1)):x("",!0)])],2)}const In=P(pn,[["render",Dn],["__scopeId","data-v-fe61b287"]]),An={name:"UserActivityList",components:{UserActivityCard:In},props:{userId:{type:Number,default:null},dateFrom:{type:String,default:null},dateTo:{type:String,default:null},type:{type:String,default:null}},emits:["view-details"],setup(o,{emit:t}){const n=S([]),e=S(!1),i=S(null),d=k(()=>Be(n.value)),a=async()=>{e.value=!0,i.value=null;try{const p={userId:o.userId,dateFrom:o.dateFrom,dateTo:o.dateTo,type:o.type};n.value=await _e.getActivity(p)}catch(p){i.value=p.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",console.error("[UserActivityList] Error:",p)}finally{e.value=!1}},r=p=>{t("view-details",p)},h=p=>`${p.timestamp}-${p.user_id}-${p.type}-${p.route_path||""}`,_=()=>{a()};return te(()=>{a(),window.addEventListener("hidden-users-changed",_)}),xe(()=>{window.removeEventListener("hidden-users-changed",_)}),Z(()=>[o.userId,o.dateFrom,o.dateTo,o.type],()=>{a()},{deep:!0}),{activity:d,loading:e,error:i,handleViewDetails:r,getEntryKey:h}}},Un={class:"user-activity-list"},Fn={key:0,class:"loading"},Pn={key:1,class:"error"},Nn={key:2,class:"empty"},On={key:3,class:"activity-items"};function Rn(o,t,n,e,i,d){const a=O("UserActivityCard");return l(),c("div",Un,[e.loading?(l(),c("div",Fn," –ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏... ")):e.error?(l(),c("div",Pn,u(e.error),1)):e.activity.length===0?(l(),c("div",Nn," –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ")):(l(),c("div",On,[(l(!0),c(j,null,z(e.activity,r=>(l(),G(a,{key:e.getEntryKey(r),entry:r,onClick:h=>e.handleViewDetails(r)},null,8,["entry","onClick"]))),128))]))])}const Wn=P(An,[["render",Rn],["__scopeId","data-v-a10310fc"]]),jn={name:"UserActivityFilters",props:{filters:{type:Object,default:()=>({})},users:{type:Array,default:()=>[]}},emits:["update-filters"],setup(o,{emit:t}){const n=S({userId:o.filters.userId||null,type:o.filters.type||null,dateFrom:o.filters.dateFrom||null,dateTo:o.filters.dateTo||null}),e=()=>{t("update-filters",{...n.value})},i=()=>{n.value={userId:null,type:null,dateFrom:null,dateTo:null},e()},d=a=>{const r=a.NAME||"",h=a.LAST_NAME||"";return`${r} ${h}`.trim()||a.EMAIL||`User #${a.ID}`};return Z(()=>o.filters,a=>{n.value={...a}},{deep:!0}),{localFilters:n,updateFilters:e,resetFilters:i,getUserName:d}}},zn={class:"user-activity-filters"},Bn={class:"filter-group"},Vn=["value"],Hn={class:"filter-group"},qn={class:"filter-group"},$n={class:"filter-group"};function Jn(o,t,n,e,i,d){return l(),c("div",zn,[s("div",Bn,[t[10]||(t[10]=s("label",null,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:",-1)),H(s("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.localFilters.userId=a),onChange:t[1]||(t[1]=(...a)=>e.updateFilters&&e.updateFilters(...a))},[t[9]||(t[9]=s("option",{value:null},"–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",-1)),(l(!0),c(j,null,z(n.users,a=>(l(),c("option",{key:a.ID,value:a.ID},u(e.getUserName(a)),9,Vn))),128))],544),[[de,e.localFilters.userId]])]),s("div",Hn,[t[12]||(t[12]=s("label",null,"–¢–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:",-1)),H(s("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.localFilters.type=a),onChange:t[3]||(t[3]=(...a)=>e.updateFilters&&e.updateFilters(...a))},[...t[11]||(t[11]=[s("option",{value:null},"–í—Å–µ —Ç–∏–ø—ã",-1),s("option",{value:"app_entry"},"–û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",-1),s("option",{value:"page_visit"},"–ü–µ—Ä–µ—Ö–æ–¥—ã –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º",-1)])],544),[[de,e.localFilters.type]])]),s("div",qn,[t[13]||(t[13]=s("label",null,"–î–∞—Ç–∞ –æ—Ç:",-1)),H(s("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=a=>e.localFilters.dateFrom=a),onChange:t[5]||(t[5]=(...a)=>e.updateFilters&&e.updateFilters(...a))},null,544),[[le,e.localFilters.dateFrom]])]),s("div",$n,[t[14]||(t[14]=s("label",null,"–î–∞—Ç–∞ –¥–æ:",-1)),H(s("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=a=>e.localFilters.dateTo=a),onChange:t[7]||(t[7]=(...a)=>e.updateFilters&&e.updateFilters(...a))},null,544),[[le,e.localFilters.dateTo]])]),s("button",{onClick:t[8]||(t[8]=(...a)=>e.resetFilters&&e.resetFilters(...a)),class:"btn-reset"},"–°–±—Ä–æ—Å–∏—Ç—å")])}const Yn=P(jn,[["render",Jn],["__scopeId","data-v-f4c5efa9"]]),Kn={name:"UserActivityStats",props:{filters:{type:Object,default:()=>({})}},setup(o){const t=S({total_entries:0,unique_users_count:0,total_app_entries:0,total_page_visits:0,pages_visited:{}}),n=S(!1),e=S(null),i=k(()=>t.value),d=async()=>{n.value=!0,e.value=null;try{const h=await _e.getActivity({...o.filters,limit:1e4}),_=Be(h);t.value=await _e.getActivityStats({...o.filters});const p={total_entries:_.length,unique_users_count:new Set(_.map(g=>g.user_id)).size,total_app_entries:_.filter(g=>g.type==="app_entry").length,total_page_visits:_.filter(g=>g.type==="page_visit").length,pages_visited:{}};_.filter(g=>g.type==="page_visit"&&g.route_path).forEach(g=>{const L=g.route_title||g.route_path||g.route_name||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞";p.pages_visited[L]=(p.pages_visited[L]||0)+1}),t.value=p}catch(h){e.value=h.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏",console.error("[UserActivityStats] Error loading stats:",h)}finally{n.value=!1}},a=k(()=>{const h=i.value.pages_visited||{};return Object.entries(h).sort((_,p)=>p[1]-_[1]).slice(0,10).reduce((_,[p,g])=>(_[p]=g,_),{})}),r=()=>{d()};return te(()=>{d(),window.addEventListener("hidden-users-changed",r)}),xe(()=>{window.removeEventListener("hidden-users-changed",r)}),Z(()=>o.filters,()=>{d()},{deep:!0}),{stats:i,loading:n,error:e,sortedPages:a}}},Xn={class:"user-activity-stats"},Qn={key:0,class:"loading"},Gn={key:1,class:"error"},Zn={key:2},ea={class:"stats-grid"},ta={class:"stat-card"},sa={class:"stat-value"},oa={class:"stat-card"},na={class:"stat-value"},aa={class:"stat-card"},ra={class:"stat-value"},ia={class:"stat-card"},la={class:"stat-value"},da={key:0,class:"pages-stats"};function ca(o,t,n,e,i,d){return l(),c("div",Xn,[e.loading?(l(),c("div",Qn," –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏... ")):e.error?(l(),c("div",Gn,u(e.error),1)):(l(),c("div",Zn,[s("div",ea,[s("div",ta,[s("div",sa,u(e.stats.total_entries),1),t[0]||(t[0]=s("div",{class:"stat-label"},"–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π",-1))]),s("div",oa,[s("div",na,u(e.stats.unique_users_count),1),t[1]||(t[1]=s("div",{class:"stat-label"},"–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",-1))]),s("div",aa,[s("div",ra,u(e.stats.total_app_entries),1),t[2]||(t[2]=s("div",{class:"stat-label"},"–û—Ç–∫—Ä—ã—Ç–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",-1))]),s("div",ia,[s("div",la,u(e.stats.total_page_visits),1),t[3]||(t[3]=s("div",{class:"stat-label"},"–ü–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º",-1))])]),Object.keys(e.stats.pages_visited).length>0?(l(),c("div",da,[t[5]||(t[5]=s("h3",null,"–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:",-1)),s("ul",null,[(l(!0),c(j,null,z(e.sortedPages,(a,r)=>(l(),c("li",{key:r},[J(u(r)+": ",1),s("strong",null,u(a),1),t[4]||(t[4]=J(" –ø–æ—Å–µ—â–µ–Ω–∏–π ",-1))]))),128))])])):x("",!0)]))])}const ua=P(Kn,[["render",ca],["__scopeId","data-v-d896786e"]]),ga={name:"HiddenUsersManager",props:{filters:{type:Object,default:()=>({})}},emits:["hidden-users-changed"],setup(o,{emit:t}){const n=S(!1),e=S(null),i=S([]),d=S([]),a=k(()=>yn(i.value)),r=k(()=>{const g=ge();return a.value.filter(L=>g.includes(L.id))}),h=async()=>{n.value=!0,e.value=null;try{const g={...o.filters,limit:1e3};i.value=await _e.getActivity(g);const L=ge();d.value=L.filter(T=>a.value.some(C=>C.id===T))}catch(g){e.value=g.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",console.error("[HiddenUsersManager] Error loading activity:",g)}finally{n.value=!1}},_=()=>{const g=ge(),L=d.value.map(T=>Number(T));L.forEach(T=>{g.includes(T)||fn(T)}),g.forEach(T=>{L.includes(T)||vn(T)}),t("hidden-users-changed"),window.dispatchEvent(new CustomEvent("hidden-users-changed"))},p=()=>{mn(),d.value=[],t("hidden-users-changed"),window.dispatchEvent(new CustomEvent("hidden-users-changed"))};return te(()=>{h()}),Z(()=>o.filters,()=>{h()},{deep:!0}),Z(()=>r.value,g=>{d.value=g.map(L=>L.id)},{deep:!0}),{loading:n,error:e,availableUsers:a,hiddenUsers:r,selectedUsers:d,applySelection:_,showAll:p}}},ha={class:"hidden-users-manager"},fa={class:"manager-controls"},va={class:"dropdown-wrapper"},ma=["disabled"],ya=["value"],pa={key:0,class:"empty-hint"},_a={class:"actions"},ba=["disabled"],Ca=["disabled"],ka={key:0,class:"loading"},wa={key:1,class:"error"};function Sa(o,t,n,e,i,d){return l(),c("div",ha,[s("div",fa,[s("div",va,[t[3]||(t[3]=s("label",{class:"dropdown-label"}," üëÅÔ∏è –°–∫—Ä—ã—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ",-1)),H(s("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedUsers=a),multiple:"",class:"users-dropdown",disabled:e.loading||e.availableUsers.length===0,size:"5"},[(l(!0),c(j,null,z(e.availableUsers,a=>(l(),c("option",{key:a.id,value:a.id},u(a.name)+" ("+u(a.count)+" "+u(a.count===1?"–∑–∞–ø–∏—Å—å":"–∑–∞–ø–∏—Å–µ–π")+") ",9,ya))),128))],8,ma),[[de,e.selectedUsers]]),e.availableUsers.length===0&&!e.loading?(l(),c("div",pa," –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∑–∞–ø–∏—Å—è—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ ")):x("",!0)]),s("div",_a,[s("button",{onClick:t[1]||(t[1]=(...a)=>e.applySelection&&e.applySelection(...a)),class:"apply-btn",disabled:e.loading,title:"–ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è"}," –ü—Ä–∏–º–µ–Ω–∏—Ç—å ",8,ba),e.hiddenUsers.length>0?(l(),c("button",{key:0,onClick:t[2]||(t[2]=(...a)=>e.showAll&&e.showAll(...a)),class:"show-all-btn",disabled:e.loading,title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"}," –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ("+u(e.hiddenUsers.length)+") ",9,Ca)):x("",!0)])]),e.loading?(l(),c("div",ka," –ó–∞–≥—Ä—É–∑–∫–∞... ")):x("",!0),e.error?(l(),c("div",wa,u(e.error),1)):x("",!0)])}const xa=P(ga,[["render",Sa],["__scopeId","data-v-4fdc2eaa"]]),La={name:"UsersManagementPage",components:{UserActivityList:Wn,UserActivityFilters:Yn,UserActivityStats:ua,HiddenUsersManager:xa},setup(){const o=Le(),t=S([]),n=S({userId:null,type:null,dateFrom:null,dateTo:null}),e=async()=>{try{const h=await vt.call("user.get",{});h&&h.result&&(t.value=h.result)}catch(h){console.error("[UsersManagementPage] Error loading users:",h)}},i=h=>{n.value={...h}},d=h=>{console.log("View activity details:",h)},a=()=>{window.dispatchEvent(new CustomEvent("hidden-users-changed"))},r=()=>{o.push("/")};return te(async()=>{try{if(!(await Ae.checkAccess()).allowed){o.push("/");return}if(!await Ae.getCurrentUser()){o.push("/");return}await e()}catch(h){console.error("[UsersManagementPage] Error:",h),o.push("/")}}),{users:t,activityFilters:n,handleFiltersUpdate:i,handleViewActivityDetails:d,handleHiddenUsersChanged:a,goBack:r}}},Ta={class:"users-management-page"},Ma={class:"page-header"},Ea={class:"page-header-top"},Da={class:"page-content"},Ia={class:"activity-section"};function Aa(o,t,n,e,i,d){const a=O("UserActivityFilters"),r=O("HiddenUsersManager"),h=O("UserActivityStats"),_=O("UserActivityList");return l(),c("div",Ta,[s("div",Ma,[s("div",Ea,[s("button",{onClick:t[0]||(t[0]=(...p)=>e.goBack&&e.goBack(...p)),class:"back-button",title:"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É","aria-label":"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"},[...t[1]||(t[1]=[s("span",{class:"back-icon","aria-hidden":"true"},"‚Üê",-1),s("span",{class:"back-text"},"–ù–∞–∑–∞–¥",-1)])])]),t[2]||(t[2]=s("h1",null,"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏",-1))]),s("div",Da,[s("div",Ia,[t[3]||(t[3]=s("h2",null,"üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",-1)),R(a,{filters:e.activityFilters,users:e.users,onUpdateFilters:e.handleFiltersUpdate},null,8,["filters","users","onUpdateFilters"]),R(r,{filters:e.activityFilters,onHiddenUsersChanged:e.handleHiddenUsersChanged},null,8,["filters","onHiddenUsersChanged"]),R(h,{filters:e.activityFilters},null,8,["filters"]),R(_,{userId:e.activityFilters.userId,dateFrom:e.activityFilters.dateFrom,dateTo:e.activityFilters.dateTo,type:e.activityFilters.type,onViewDetails:e.handleViewActivityDetails},null,8,["userId","dateFrom","dateTo","type","onViewDetails"])])])])}const Cl=P(La,[["render",Aa],["__scopeId","data-v-b1c991d2"]]);class ${static async getCacheStatus(){try{const t=ae("/api/admin/cache-status.php"),n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok){const i=await n.text();throw new Error(`HTTP error! status: ${n.status}, message: ${i}`)}const e=await n.json();if(e.success){const i=e.modules||[];return i.length===0?{primaryModules:[],secondaryModules:[],metadata:{totalModules:0,primaryCount:0,secondaryCount:0}}:this.categorizeAndSortModules(i)}else throw new Error(e.error||"Failed to get cache status")}catch(t){throw console.error("[CacheManagementService] Error getting cache status:",t),t}}static async clearCache(t){try{const n=ae("/api/admin/cache-clear.php"),e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({module_id:t,confirm:!0})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const i=await e.json();if(i.success)return!0;throw new Error(i.error||"Failed to clear cache")}catch(n){throw console.error("[CacheManagementService] Error clearing cache:",n),n}}static async getCacheStats(){try{const t=ae("/api/admin/cache-stats.php"),n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const e=await n.json();if(e.success)return e.stats||{};throw new Error(e.error||"Failed to get cache stats")}catch(t){throw console.error("[CacheManagementService] Error getting cache stats:",t),t}}static formatCacheSize(t){if(t===0)return"0 B";const n=1024,e=["B","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(n));return Math.round(t/Math.pow(n,i)*100)/100+" "+e[i]}static categorizeAndSortModules(t,n={}){const e=this.generateCacheKey(t),i=this.getCachedResult(e);if(i&&!n.forceRefresh)return i;const d=performance.now(),a=this.performCategorization(t),r=performance.now();return a.metadata={processingTime:r-d,totalModules:t.length,primaryCount:a.primaryModules.length,secondaryCount:a.secondaryModules.length,cached:!1},this.setCachedResult(e,a),a}static performCategorization(t){const n=[],e=[];return t.forEach(i=>{this.validateModule(i),this.PRIMARY_MODULE_IDS.includes(i.id)?n.push({...i,category:"primary",priority:this.PRIMARY_MODULE_PRIORITIES[i.id]||999}):e.push({...i,category:"secondary",groupType:this.getModuleType(i.id)})}),{primaryModules:this.sortPrimaryModules(n),secondaryModules:this.sortSecondaryModules(e)}}static sortPrimaryModules(t){return t.sort((n,e)=>{const i=this.PRIMARY_MODULE_PRIORITIES[n.id]||999,d=this.PRIMARY_MODULE_PRIORITIES[e.id]||999;return i-d})}static sortSecondaryModules(t){return t.sort((n,e)=>{const i=this.getModuleType(n.id),d=this.getModuleType(e.id);return i!==d?this.compareModuleTypes(i,d):n.name.localeCompare(e.name)})}static compareModuleTypes(t,n){const e=["users","activity","webhooks","other"],i=e.indexOf(t),d=e.indexOf(n);return(i===-1?999:i)-(d===-1?999:d)}static getModuleType(t){for(const[n,e]of Object.entries(this.SECONDARY_MODULE_TYPES))if(t.startsWith(e.prefix))return n;return t.includes("time-tracking")?"time-tracking":t.includes("graph")?"graphs":t.includes("dashboard")?"dashboards":"other"}static getModuleTypeConfig(t){return this.SECONDARY_MODULE_TYPES[t]||{title:"üîß –ü—Ä–æ—á–∏–µ –º–æ–¥—É–ª–∏",description:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã"}}static validateModule(t){if(!t||typeof t!="object")throw new Error("Module must be an object");if(!t.id||typeof t.id!="string")throw new Error("Module must have a valid id");if(!t.name||typeof t.name!="string")throw new Error("Module must have a valid name");return!0}static generateCacheKey(t){const n=t.map(e=>e.id).sort().join(",");return btoa(n).substring(0,16)}static getCachedResult(t){const n=this.categorizationCache.get(t);return n?Date.now()-n.timestamp>this.CACHE_TTL?(this.categorizationCache.delete(t),null):{...n.data,metadata:{...n.data.metadata,cached:!0}}:null}static setCachedResult(t,n){if(this.categorizationCache.set(t,{data:{...n,metadata:{...n.metadata,cached:!1}},timestamp:Date.now()}),this.categorizationCache.size>10){const e=this.categorizationCache.keys().next().value;this.categorizationCache.delete(e)}}static clearCategorizationCache(){this.categorizationCache.clear()}static getCategorizationStats(){return{cacheSize:this.categorizationCache.size,cacheEntries:Array.from(this.categorizationCache.entries()).map(([t,n])=>({key:t,age:Date.now()-n.timestamp,modulesCount:n.data.primaryModules.length+n.data.secondaryModules.length}))}}static formatTTL(t){return t<60?`${t} —Å–µ–∫`:t<3600?`${Math.floor(t/60)} –º–∏–Ω`:`${Math.floor(t/3600)} —á`}}ue($,"PRIMARY_MODULE_IDS",["dashboard-sector-1c","graph-state","graph-admission-closure-weeks","graph-admission-closure-months","time-tracking-default","time-tracking-detailed","time-tracking-summary"]),ue($,"PRIMARY_MODULE_PRIORITIES",{"dashboard-sector-1c":1,"graph-state":2,"graph-admission-closure-weeks":3,"graph-admission-closure-months":4,"time-tracking-default":5,"time-tracking-detailed":6,"time-tracking-summary":7}),ue($,"SECONDARY_MODULE_TYPES",{users:{prefix:"users-management",title:"üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏",description:"–ú–æ–¥—É–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –æ—Ç–¥–µ–ª–∞–º–∏"},activity:{prefix:"user-activity",title:"üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",description:"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"},webhooks:{prefix:"webhook-logs",title:"üîó –õ–æ–≥–∏ –≤–µ–±—Ö—É–∫–æ–≤",description:"–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–µ–±—Ö—É–∫–æ–≤"}}),ue($,"categorizationCache",new Map),ue($,"CACHE_TTL",3e4);function Ua(o){return{1:{text:"–û—á–µ–Ω—å —á–∞—Å—Ç–æ",description:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞"},2:{text:"–ß–∞—Å—Ç–æ",description:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –¥–µ–Ω—å"},3:{text:"–†–µ–≥—É–ª—è—Ä–Ω–æ",description:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"},4:{text:"–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏",description:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é"},5:{text:"–ü–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏",description:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞"},6:{text:"–†–µ–¥–∫–æ",description:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞"},7:{text:"–û—á–µ–Ω—å —Ä–µ–¥–∫–æ",description:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤"}}[o]||{text:"–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ",description:"–ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞"}}function Fa(o){const t=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate())),n=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-n);const e=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-e)/864e5+1)/7)}class we{static async createCache(t,n=null,e={}){try{const i=ae("/api/admin/cache-create.php"),d=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({module_id:t,mode:n,params:e})});if(!d.ok){const r=await d.json().catch(()=>({}));throw new Error(r.error||`HTTP error! status: ${d.status}`)}const a=await d.json();if(a.success)return a;throw new Error(a.error||"Failed to create cache")}catch(i){throw console.error("[CacheCreationService] Error creating cache:",i),i}}static async getCreationStatus(t){try{const n=ae(`/api/admin/cache-create-status.php?task_id=${t}`),e=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const i=await e.json();if(i.success)return i;throw new Error(i.error||"Failed to get creation status")}catch(n){throw console.error("[CacheCreationService] Error getting creation status:",n),n}}static getDefaultParams(t){if(t.includes("graph-admission-closure"))if((t.includes("weeks")?"weeks":"months")==="weeks"){const e=new Date,i=e.getUTCFullYear(),d=Fa(e),a=new Date(i,0,1+(d-1)*7),r=a.getUTCDay(),h=a.getUTCDate()-r+(r===0?-6:1);a.setUTCDate(h),a.setUTCHours(0,0,0,0);const _=new Date(a);return _.setUTCDate(a.getUTCDate()+6),_.setUTCHours(23,59,59,999),{product:"1C",periodMode:"weeks",weekStartUtc:a.toISOString(),weekEndUtc:_.toISOString(),includeTickets:!0,includeNewTicketsByStages:!0,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!0,useCache:!0,forceRefresh:!0}}else return{product:"1C",periodMode:"months",includeTickets:!0,includeNewTicketsByStages:!1,includeCarryoverTickets:!0,includeCarryoverTicketsByDuration:!1};if(t.includes("dashboard-sector-1c"))return{forceRefresh:!0,ttl:600};if(t.includes("graph-state"))return{type:"current",forceRefresh:!0,ttl:3600};if(t.includes("time-tracking")){const n=t.includes("detailed")?"detailed":t.includes("summary")?"summary":"default";return{product:"1C",includeTaskDetails:n==="detailed",summary:n==="summary"}}return{}}}const Pa={name:"CacheCreateProgress",props:{progress:{type:Number,required:!0,validator:o=>o>=0&&o<=100},message:{type:String,default:"–°–æ–∑–¥–∞–Ω–∏–µ –∫–µ—à–∞..."}}},Na={class:"cache-create-progress"},Oa={class:"progress-bar"},Ra={class:"progress-text"};function Wa(o,t,n,e,i,d){return l(),c("div",Na,[s("div",Oa,[s("div",{class:"progress-fill",style:ve({width:n.progress+"%"})},null,4)]),s("div",Ra,u(n.progress)+"% - "+u(n.message),1)])}const ja=P(Pa,[["render",Wa],["__scopeId","data-v-7071de3b"]]),za={name:"CacheCreateModal",components:{CacheCreateProgress:ja},props:{module:{type:Object,required:!0}},emits:["close","create"],setup(o,{emit:t}){const n=S(!1),e=S(0),i=S(""),d=S(null),a=S(""),r=k(()=>o.module.id.includes("graph-admission-closure")||o.module.id.includes("time-tracking")),h=k(()=>o.module.id.includes("graph-admission-closure")?["months","weeks"]:o.module.id.includes("time-tracking")?["default","detailed","summary"]:[]),_=()=>{t("close")},p=L=>{L.target===L.currentTarget&&_()},g=async()=>{n.value=!0,e.value=0,i.value="–ù–∞—á–∞–ª–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–µ—à–∞...";try{let L={};if(a.value.trim())try{L=JSON.parse(a.value)}catch{throw new Error("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç JSON –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤")}else L=we.getDefaultParams(o.module.id);Ce.notifyCacheCreationStarted(o.module.name),e.value=25,i.value="–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Bitrix24...";const T=await we.createCache(o.module.id,d.value,L);e.value=75,i.value="–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–µ—à–∞...",await new Promise(C=>setTimeout(C,500)),e.value=100,i.value="–ö–µ—à —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!",Ce.notifyCacheCreationSuccess(o.module.name),setTimeout(()=>{t("create",T),_()},1e3)}catch(L){console.error("[CacheCreateModal] Error creating cache:",L),Ce.notifyCacheCreationError(o.module.name,L.message),n.value=!1}};return te(()=>{h.value.length>0&&(d.value=h.value[0]);const L=we.getDefaultParams(o.module.id);a.value=JSON.stringify(L,null,2)}),{creating:n,progress:e,progressMessage:i,selectedMode:d,paramsJson:a,supportsModes:r,availableModes:h,close:_,handleOverlayClick:p,handleCreate:g}}},Ba={class:"modal-header"},Va={class:"modal-body"},Ha={key:1,class:"create-form"},qa={key:0,class:"form-group"},$a=["value"],Ja={class:"form-group"},Ya={class:"modal-footer"},Ka=["disabled"],Xa=["disabled"],Qa={key:0},Ga={key:1};function Za(o,t,n,e,i,d){const a=O("CacheCreateProgress");return l(),c("div",{class:"modal-overlay",onClick:t[6]||(t[6]=(...r)=>e.handleOverlayClick&&e.handleOverlayClick(...r))},[s("div",{class:"modal-content",onClick:t[5]||(t[5]=ie(()=>{},["stop"]))},[s("div",Ba,[s("h2",null,"–°–æ–∑–¥–∞–Ω–∏–µ –∫–µ—à–∞: "+u(n.module.name),1),s("button",{onClick:t[0]||(t[0]=(...r)=>e.close&&e.close(...r)),class:"btn-close"},"√ó")]),s("div",Va,[e.creating?(l(),G(a,{key:0,progress:e.progress,message:e.progressMessage},null,8,["progress","message"])):(l(),c("div",Ha,[e.supportsModes?(l(),c("div",qa,[t[7]||(t[7]=s("label",null,"–†–µ–∂–∏–º –∫–µ—à–∞:",-1)),H(s("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>e.selectedMode=r),class:"form-control"},[(l(!0),c(j,null,z(e.availableModes,r=>(l(),c("option",{key:r,value:r},u(r),9,$a))),128))],512),[[de,e.selectedMode]])])):x("",!0),s("div",Ja,[t[8]||(t[8]=s("label",null,"–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (JSON):",-1)),H(s("textarea",{"onUpdate:modelValue":t[2]||(t[2]=r=>e.paramsJson=r),placeholder:'{"product": "1C", ...}',rows:"5",class:"form-control"},null,512),[[le,e.paramsJson]]),t[9]||(t[9]=s("small",{class:"form-text"},"–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é",-1))])]))]),s("div",Ya,[s("button",{onClick:t[3]||(t[3]=(...r)=>e.close&&e.close(...r)),class:"btn-cancel",disabled:e.creating},"–û—Ç–º–µ–Ω–∞",8,Ka),s("button",{onClick:t[4]||(t[4]=(...r)=>e.handleCreate&&e.handleCreate(...r)),disabled:e.creating,class:"btn-create"},[e.creating?(l(),c("span",Qa,"–°–æ–∑–¥–∞–Ω–∏–µ...")):(l(),c("span",Ga,"–°–æ–∑–¥–∞—Ç—å –∫–µ—à"))],8,Xa)])])])}const er=P(za,[["render",Za],["__scopeId","data-v-da24811e"]]),tr={name:"CacheCreateButton",components:{CacheCreateModal:er},props:{module:{type:Object,required:!0}},emits:["created"],setup(o,{emit:t}){const n=S(!1),e=S(!1);return{showModal:n,creating:e,openModal:()=>{n.value=!0},closeModal:()=>{n.value=!1},handleCreate:async r=>{e.value=!0;try{t("created",r)}finally{e.value=!1}}}}},sr={class:"cache-create-button"},or=["disabled"],nr={key:0},ar={key:1};function rr(o,t,n,e,i,d){const a=O("CacheCreateModal");return l(),c("div",sr,[s("button",{onClick:t[0]||(t[0]=(...r)=>e.openModal&&e.openModal(...r)),disabled:e.creating,class:U(["btn-create",{"btn-disabled":e.creating}])},[e.creating?(l(),c("span",nr,"–°–æ–∑–¥–∞–Ω–∏–µ...")):(l(),c("span",ar,"‚ûï –°–æ–∑–¥–∞—Ç—å –∫–µ—à"))],10,or),e.showModal?(l(),G(a,{key:0,module:n.module,onClose:e.closeModal,onCreate:e.handleCreate},null,8,["module","onClose","onCreate"])):x("",!0)])}const ir=P(tr,[["render",rr],["__scopeId","data-v-177605d5"]]),lr={name:"CacheModuleCard",components:{CacheCreateButton:ir},props:{module:{type:Object,required:!0,validator:o=>o&&typeof o.id=="string"&&typeof o.name=="string"},isPrimary:{type:Boolean,default:!1},priority:{type:Number,default:999},groupType:{type:String,default:null}},emits:["clear","refresh","details"],setup(o,{emit:t}){const n=S(!1),e=S(!1),i=S(!1),d=k(()=>o.priority<=3),a=k(()=>(o.module.file_count||0)===0),r=k(()=>{if(!o.module.expires_at)return!1;const V=(new Date(o.module.expires_at*1e3)-new Date)/(1e3*60*60);return V>0&&V<=24}),h=k(()=>o.module.status==="empty"||o.module.status==="expired"),_=k(()=>$.formatCacheSize(o.module.total_size||0)),p=k(()=>$.formatTTL(o.module.ttl||0)),g=k(()=>{if(!o.module.cache_dir)return"";const b=o.module.cache_dir.split("/");return b.length>2?"..."+b.slice(-2).join("/"):o.module.cache_dir}),L=k(()=>`priority-${o.priority}`),T=k(()=>`status-${o.module.status||"empty"}`),C=k(()=>`status-value-${o.module.status||"empty"}`),y=k(()=>o.module.status_text||(a.value?"–ü—É—Å—Ç":"–ê–∫—Ç–∏–≤–µ–Ω")),E=k(()=>o.groupType?$.getModuleTypeConfig(o.groupType).title||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞":""),w=k(()=>{const b={users:"üë•",activity:"üìä",webhooks:"üîó",other:"üîß"};return b[o.groupType]||b.other}),I=k(()=>{const b=o.priority||999;return Ua(b).text}),K=k(()=>{if(!o.module.created_at)return"‚Äî";const b=new Date(o.module.created_at*1e3),N=new Date,V=N-b;if(V<6e4)return"–¢–æ–ª—å–∫–æ —á—Ç–æ";if(V<36e5){const Q=Math.floor(V/6e4);return`${Q} ${Q===1?"–º–∏–Ω—É—Ç—É":Q<5?"–º–∏–Ω—É—Ç—ã":"–º–∏–Ω—É—Ç"} –Ω–∞–∑–∞–¥`}if(b.toDateString()===N.toDateString())return`–°–µ–≥–æ–¥–Ω—è –≤ ${b.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`;const B=new Date(N);return B.setDate(B.getDate()-1),b.toDateString()===B.toDateString()?`–í—á–µ—Ä–∞ –≤ ${b.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:b.toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),X=k(()=>{if(!o.module.expires_at)return"‚Äî";const b=new Date(o.module.expires_at*1e3),V=b-new Date;if(V<0)return`–ü—Ä–æ—Å—Ä–æ—á–µ–Ω (${b.toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})`;const B=Math.floor(V/6e4),Q=Math.floor(B/60);return Q>0?`${Q} —á ${B%60} –º–∏–Ω`:B>0?`${B} –º–∏–Ω`:"–ú–µ–Ω–µ–µ –º–∏–Ω—É—Ç—ã"});return{clearing:n,creating:e,showDetailModal:i,isHighPriority:d,isEmpty:a,isExpiringSoon:r,canCreateCache:h,formattedSize:_,formattedTTL:p,shortCacheDir:g,priorityClass:L,statusClass:T,statusValueClass:C,statusText:y,groupTitle:E,groupIcon:w,usageFrequency:I,formattedCreatedAt:K,formattedExpiresAt:X,handleClear:async()=>{if(n.value||a.value)return;const b=o.isPrimary?`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–æ–¥—É–ª—è "${o.module.name}"? –≠—Ç–æ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.`:`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –º–æ–¥—É–ª—è "${o.module.name}"?`;if(confirm(b)){n.value=!0;try{await $.clearCache(o.module.id),t("clear",o.module.id),typeof BX<"u"&&BX.UI&&BX.UI.Notification&&BX.UI.Notification.Center.notify({content:`–ö–µ—à –º–æ–¥—É–ª—è "${o.module.name}" —É—Å–ø–µ—à–Ω–æ –æ—á–∏—â–µ–Ω`,autoHideDelay:3e3})}catch(N){console.error("[CacheModuleCard] Error clearing cache:",N),typeof BX<"u"&&BX.UI&&BX.UI.Notification?BX.UI.Notification.Center.notify({content:`–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞: ${N.message}`,autoHideDelay:5e3}):alert(`–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞: ${N.message}`)}finally{n.value=!1}}},handleCacheCreated:()=>{t("refresh")},showDetails:()=>{i.value=!0,t("details",o.module)},closeDetails:()=>{i.value=!1}}}},dr={class:"module-indicator"},cr={class:"card-header"},ur={class:"title-section"},gr={class:"module-name"},hr={key:0,class:"primary-indicator"},fr={key:0,class:"module-type"},vr={key:1,class:"module-type"},mr={class:"status-section"},yr={class:"card-body"},pr={class:"cache-info"},_r={class:"info-row"},br={key:0,class:"info-row"},Cr={class:"info-value"},kr={key:1,class:"info-row"},wr={class:"info-value"},Sr={class:"info-row"},xr={class:"info-value"},Lr={class:"info-row"},Tr={class:"info-value"},Mr={class:"info-row"},Er={class:"info-value"},Dr={key:2,class:"info-row"},Ir=["title"],Ar={key:3,class:"info-row usage-hint"},Ur={class:"info-value"},Fr={class:"card-footer"},Pr=["disabled"],Nr={key:0},Or={key:1},Rr={key:2},Wr={class:"modal-content"};function jr(o,t,n,e,i,d){const a=O("CacheCreateButton");return l(),c("div",{class:U(["cache-module-card",{"primary-module":n.isPrimary,"secondary-module":!n.isPrimary,"high-priority":e.isHighPriority,"expiring-soon":e.isExpiringSoon,"empty-cache":e.isEmpty}])},[s("div",dr,[n.isPrimary?(l(),c("span",{key:0,class:U(["priority-badge",e.priorityClass])},u(n.priority),3)):x("",!0),n.groupType?(l(),c("span",{key:1,class:U(["group-indicator",n.groupType])},u(e.groupIcon),3)):x("",!0)]),s("div",cr,[s("div",ur,[s("h3",gr,[n.isPrimary?(l(),c("span",hr,"‚≠ê")):x("",!0),J(" "+u(n.module.name),1)]),n.isPrimary?(l(),c("span",fr,"–û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å")):n.groupType?(l(),c("span",vr,u(e.groupTitle),1)):x("",!0)]),s("div",mr,[s("span",{class:U(["module-status",e.statusClass])},u(e.statusText),3)])]),s("div",yr,[s("div",pr,[s("div",_r,[t[4]||(t[4]=s("span",{class:"info-label"},"–°—Ç–∞—Ç—É—Å:",-1)),s("span",{class:U(["info-value",e.statusValueClass])},u(e.statusText),3)]),n.module.created_at?(l(),c("div",br,[t[5]||(t[5]=s("span",{class:"info-label"},"–°–æ–∑–¥–∞–Ω:",-1)),s("span",Cr,u(e.formattedCreatedAt),1)])):x("",!0),n.module.expires_at?(l(),c("div",kr,[t[6]||(t[6]=s("span",{class:"info-label"},"–ò—Å—Ç–µ–∫–∞–µ—Ç:",-1)),s("span",wr,u(e.formattedExpiresAt),1)])):x("",!0),s("div",Sr,[t[7]||(t[7]=s("span",{class:"info-label"},"–§–∞–π–ª–æ–≤:",-1)),s("span",xr,u(n.module.file_count||0),1)]),s("div",Lr,[t[8]||(t[8]=s("span",{class:"info-label"},"–†–∞–∑–º–µ—Ä:",-1)),s("span",Tr,u(e.formattedSize),1)]),s("div",Mr,[t[9]||(t[9]=s("span",{class:"info-label"},"TTL:",-1)),s("span",Er,u(e.formattedTTL),1)]),n.module.cache_dir?(l(),c("div",Dr,[t[10]||(t[10]=s("span",{class:"info-label"},"–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:",-1)),s("span",{class:"info-value cache-dir",title:n.module.cache_dir},u(e.shortCacheDir),9,Ir)])):x("",!0),n.isPrimary?(l(),c("div",Ar,[t[11]||(t[11]=s("span",{class:"info-label"},"–ß–∞—Å—Ç–æ—Ç–∞:",-1)),s("span",Ur,u(e.usageFrequency),1)])):x("",!0)])]),s("div",Fr,[R(a,{module:n.module,onCreated:e.handleCacheCreated},null,8,["module","onCreated"]),s("button",{onClick:t[0]||(t[0]=(...r)=>e.handleClear&&e.handleClear(...r)),disabled:e.clearing||e.isEmpty,class:U(["btn-clear",{"btn-disabled":e.clearing||e.isEmpty,"btn-primary-action":n.isPrimary}])},[e.clearing?(l(),c("span",Nr,"üßπ –û—á–∏—Å—Ç–∫–∞...")):e.isEmpty?(l(),c("span",Or,"üìÅ –ö–µ—à –ø—É—Å—Ç")):(l(),c("span",Rr,"üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à"))],10,Pr),n.isPrimary&&!e.isEmpty?(l(),c("button",{key:0,onClick:t[1]||(t[1]=(...r)=>e.showDetails&&e.showDetails(...r)),class:"btn-details",title:"–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–µ—à–∞"}," üìä ")):x("",!0)]),e.showDetailModal?(l(),c("div",{key:0,class:"detail-modal",onClick:t[3]||(t[3]=ie((...r)=>e.closeDetails&&e.closeDetails(...r),["self"]))},[s("div",Wr,[s("h4",null,"–î–µ—Ç–∞–ª–∏ –∫–µ—à–∞: "+u(n.module.name),1),s("pre",null,u(JSON.stringify(n.module,null,2)),1),s("button",{onClick:t[2]||(t[2]=(...r)=>e.closeDetails&&e.closeDetails(...r)),class:"btn-close"},"–ó–∞–∫—Ä—ã—Ç—å")])])):x("",!0)],2)}const zr=P(lr,[["render",jr],["__scopeId","data-v-f715c453"]]),Br={name:"CacheStats",props:{modules:{type:Array,required:!1,default:()=>[]}},setup(o){console.log("[CacheStats] setup called with modules:",o.modules);const t=k(()=>o.modules||[]),n=k(()=>{console.log("[CacheStats] Computing primaryModules, total modules:",t.value?.length||0);const C=t.value.filter(y=>$.PRIMARY_MODULE_IDS.includes(y.id));return console.log("[CacheStats] Primary modules count:",C.length),C}),e=k(()=>{console.log("[CacheStats] Computing secondaryModules, total modules:",t.value?.length||0);const C=t.value.filter(y=>!$.PRIMARY_MODULE_IDS.includes(y.id));return console.log("[CacheStats] Secondary modules count:",C.length),C}),i=k(()=>n.value?.length||0),d=k(()=>e.value?.length||0),a=k(()=>t.value?.length||0),r=k(()=>t.value.reduce((C,y)=>C+(y.file_count||0),0)),h=k(()=>(o.modules||[]).reduce((C,y)=>C+(y.total_size||0),0)),_=k(()=>$.formatCacheSize(h.value)),p=k(()=>{const C=o.modules||[];if(C.length===0)return"0 –º–∏–Ω";const y=C.reduce((w,I)=>w+(I.ttl||0),0),E=Math.round(y/C.length);return $.formatTTL(E)}),g=k(()=>(t.value||[]).filter(C=>C.status==="active").length),L=k(()=>{if((d.value||0)===0)return[];const C={};(e.value||[]).forEach(E=>{const w=$.getModuleType(E.id);if(!C[w]){const I=$.getModuleTypeConfig(w);C[w]={type:w,title:I.title||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞",icon:T(w),count:0}}C[w].count++});const y=d.value||0;return Object.values(C).map(E=>({...E,percentage:y>0?Math.round(E.count/y*100):0})).sort((E,w)=>w.count-E.count)}),T=C=>{const y={users:"üë•",activity:"üìä",webhooks:"üîó",other:"üîß"};return y[C]||y.other};return{modules:t,primaryModulesCount:i,secondaryModulesCount:d,totalModules:a,totalFiles:r,totalSizeFormatted:_,avgTTL:p,activeModules:g,groupStats:L}}},Vr={key:0,class:"cache-stats"},Hr={class:"stats-overview"},qr={class:"overview-grid"},$r={class:"overview-card primary"},Jr={class:"overview-content"},Yr={class:"overview-value"},Kr={class:"overview-card secondary"},Xr={class:"overview-content"},Qr={class:"overview-value"},Gr={class:"overview-card total"},Zr={class:"overview-content"},ei={class:"overview-value"},ti={class:"detailed-stats"},si={class:"stats-grid"},oi={class:"stat-card"},ni={class:"stat-content"},ai={class:"stat-value"},ri={class:"stat-card"},ii={class:"stat-content"},li={class:"stat-value"},di={class:"stat-card"},ci={class:"stat-content"},ui={class:"stat-value"},gi={class:"stat-card"},hi={class:"stat-content"},fi={class:"stat-value"},vi={key:0,class:"group-distribution"},mi={class:"distribution-grid"},yi={class:"group-icon"},pi={class:"group-info"},_i={class:"group-name"},bi={class:"group-count"},Ci={class:"group-percentage"},ki={key:1,class:"cache-stats-loading"};function wi(o,t,n,e,i,d){return(e.modules||[]).length>0?(l(),c("div",Vr,[t[18]||(t[18]=s("h2",{class:"stats-title"},"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º",-1)),s("div",Hr,[s("div",qr,[s("div",$r,[t[2]||(t[2]=s("div",{class:"overview-icon"},"üèÜ",-1)),s("div",Jr,[s("div",Yr,u(e.primaryModulesCount),1),t[0]||(t[0]=s("div",{class:"overview-label"},"–û—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π",-1)),t[1]||(t[1]=s("div",{class:"overview-desc"},"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ",-1))])]),s("div",Kr,[t[5]||(t[5]=s("div",{class:"overview-icon"},"üîß",-1)),s("div",Xr,[s("div",Qr,u(e.secondaryModulesCount),1),t[3]||(t[3]=s("div",{class:"overview-label"},"–ü–æ–±–æ—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π",-1)),t[4]||(t[4]=s("div",{class:"overview-desc"},"–°–ª—É–∂–µ–±–Ω—ã–µ",-1))])]),s("div",Gr,[t[8]||(t[8]=s("div",{class:"overview-icon"},"üì¶",-1)),s("div",Zr,[s("div",ei,u(e.totalModules),1),t[6]||(t[6]=s("div",{class:"overview-label"},"–í—Å–µ–≥–æ –º–æ–¥—É–ª–µ–π",-1)),t[7]||(t[7]=s("div",{class:"overview-desc"},"–ê–∫—Ç–∏–≤–Ω—ã—Ö",-1))])])])]),s("div",ti,[s("div",si,[s("div",oi,[t[10]||(t[10]=s("div",{class:"stat-icon"},"üìÑ",-1)),s("div",ni,[s("div",ai,u(e.totalFiles),1),t[9]||(t[9]=s("div",{class:"stat-label"},"–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤",-1))])]),s("div",ri,[t[12]||(t[12]=s("div",{class:"stat-icon"},"üíæ",-1)),s("div",ii,[s("div",li,u(e.totalSizeFormatted),1),t[11]||(t[11]=s("div",{class:"stat-label"},"–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä",-1))])]),s("div",di,[t[14]||(t[14]=s("div",{class:"stat-icon"},"‚è±Ô∏è",-1)),s("div",ci,[s("div",ui,u(e.avgTTL),1),t[13]||(t[13]=s("div",{class:"stat-label"},"–°—Ä–µ–¥–Ω–∏–π TTL",-1))])]),s("div",gi,[t[16]||(t[16]=s("div",{class:"stat-icon"},"‚ö°",-1)),s("div",hi,[s("div",fi,u(e.activeModules),1),t[15]||(t[15]=s("div",{class:"stat-label"},"–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–µ—à–µ–π",-1))])])])]),e.secondaryModulesCount>0?(l(),c("div",vi,[t[17]||(t[17]=s("h3",{class:"distribution-title"},"–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–æ—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π",-1)),s("div",mi,[(l(!0),c(j,null,z(e.groupStats,a=>(l(),c("div",{key:a.type,class:"distribution-item"},[s("div",yi,u(a.icon),1),s("div",pi,[s("div",_i,u(a.title),1),s("div",bi,u(a.count)+" –º–æ–¥—É–ª–µ–π",1)]),s("div",Ci,u(a.percentage)+"%",1)]))),128))])])):x("",!0)])):(l(),c("div",ki,[...t[19]||(t[19]=[s("p",null,"üìä –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...",-1)])]))}const Si=P(Br,[["render",wi],["__scopeId","data-v-9fa190bb"]]),xi={name:"CacheManagement",components:{CacheModuleCard:zr,CacheStats:Si},setup(){const o=S([]),t=S([]),n=S(!0),e=S(null),i=k(()=>(o.value?.length||0)+(t.value?.length||0)),d=k(()=>{const y=a.value?.length||0,E=(r.value?.length||0)>0?1:0;return y+E}),a=k(()=>{const y=(o.value||[]).filter(E=>!E.id.includes("time-tracking"));return console.log("[CacheManagement] individualPrimaryModules:",y.length,y.map(E=>E.id)),y}),r=k(()=>{const y=(o.value||[]).filter(E=>E.id.includes("time-tracking")).sort((E,w)=>{const I=["time-tracking-default","time-tracking-detailed","time-tracking-summary"];return I.indexOf(E.id)-I.indexOf(w.id)});return console.log("[CacheManagement] timeTrackingModules:",y.length,y.map(E=>E.id)),y}),h=k(()=>{const y={};return(t.value||[]).forEach(w=>{const I=$.getModuleType(w.id);y[I]||(y[I]={type:I,title:p(I),modules:[]}),y[I].modules.push(w)}),Object.values(y).sort((w,I)=>{const K=["users","activity","webhooks","other"],X=K.indexOf(w.type),F=K.indexOf(I.type);return(X===-1?999:X)-(F===-1?999:F)})}),_=async()=>{n.value=!0,e.value=null;try{const y=[{id:"dashboard-sector-1c",name:"–î–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–°",status:"active",file_count:5,total_size:1024e3,ttl:600},{id:"graph-state",name:"–ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è",status:"active",file_count:3,total_size:512e3,ttl:3600},{id:"graph-admission-closure-weeks",name:"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞/–∑–∞–∫—Ä—ã—Ç–∏–π 1–° (4 –Ω–µ–¥–µ–ª–∏)",status:"active",file_count:8,total_size:2048e3,ttl:300},{id:"graph-admission-closure-months",name:"–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—ë–º–∞/–∑–∞–∫—Ä—ã—Ç–∏–π 1–° (3 –º–µ—Å—è—Ü–∞)",status:"active",file_count:12,total_size:3072e3,ttl:300},{id:"time-tracking-default",name:"–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã (—Ä–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)",status:"active",file_count:4,total_size:768e3,ttl:300},{id:"time-tracking-detailed",name:"–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã (–¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º)",status:"active",file_count:6,total_size:1536e3,ttl:120},{id:"time-tracking-summary",name:"–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã (—Å–≤–æ–¥–Ω—ã–π —Ä–µ–∂–∏–º)",status:"active",file_count:2,total_size:384e3,ttl:600},{id:"users-management-departments",name:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–æ—Ç–¥–µ–ª—ã)",status:"active",file_count:2,total_size:256e3,ttl:3600},{id:"webhook-logs-api",name:"–õ–æ–≥–∏ –≤–µ–±—Ö—É–∫–æ–≤ (API –∑–∞–ø—Ä–æ—Å—ã)",status:"active",file_count:15,total_size:512e4,ttl:300}],E=$.categorizeAndSortModules(y);o.value=E.primaryModules||[],t.value=E.secondaryModules||[],console.log("[CacheManagement] Primary modules:",o.value.length,o.value.map(w=>({id:w.id,name:w.name}))),console.log("[CacheManagement] Secondary modules:",t.value.length,t.value.map(w=>({id:w.id,name:w.name})))}catch(y){console.error("[CacheManagement] Error loading modules:",y),e.value=y.message}finally{n.value=!1}},p=y=>{const E={users:"üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏",activity:"üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",webhooks:"üîó –õ–æ–≥–∏ –≤–µ–±—Ö—É–∫–æ–≤",other:"üîß –ü—Ä–æ—á–∏–µ –º–æ–¥—É–ª–∏"};return E[y]||E.other},g=async y=>{console.log(`[CacheManagement] Clearing module: ${y}`),await _()},L=async y=>{console.log(`[CacheManagement] Creating cache for: ${y.name} (${y.id})`),alert(`–°–æ–∑–¥–∞–Ω–∏–µ –∫–µ—à–∞ –¥–ª—è –º–æ–¥—É–ª—è: ${y.name}
ID: ${y.id}
–≠—Ç–æ mock —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.`)},T=async y=>{console.log(`[CacheManagement] Clearing cache for: ${y.name} (${y.id})`),alert(`–û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –¥–ª—è –º–æ–¥—É–ª—è: ${y.name}
ID: ${y.id}
–≠—Ç–æ mock —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.`)},C=()=>{_()};return te(()=>{_()}),{primaryModules:o,secondaryModules:t,loading:n,error:e,totalModules:i,groupedSecondaryModules:h,individualPrimaryModules:a,timeTrackingModules:r,logicalPrimaryCount:d,handleModuleClear:g,handleCreateMock:L,handleClearMock:T,refreshModules:C}}},Li={class:"cache-management"},Ti={key:0,class:"header-section"},Mi={class:"stats-bar"},Ei={class:"stat-item"},Di={class:"stat-item"},Ii={class:"stat-item"},Ai={class:"section-header"},Ui={class:"section-meta"},Fi={class:"module-count"},Pi={key:0,class:"modules-container"},Ni={style:{background:"#f0f8ff",padding:"10px",margin:"10px 0",border:"1px solid #007bff","border-radius":"4px"}},Oi={key:0,class:"modules-grid"},Ri=["onClick"],Wi=["onClick"],ji={key:1,class:"time-tracking-group"},zi={class:"modules-grid"},Bi=["onClick"],Vi=["onClick"],Hi={key:1,class:"empty-state"},qi={key:2,class:"section-divider"},$i={key:3,class:"cache-section secondary-modules"},Ji={class:"section-header"},Yi={class:"section-meta"},Ki={class:"module-count"},Xi={class:"grouped-modules"},Qi={class:"group-title"},Gi={class:"modules-grid"},Zi={key:4,class:"error-message"},el={key:5,class:"loading-overlay"};function tl(o,t,n,e,i,d){const a=O("CacheModuleCard");return l(),c("div",Li,[!e.loading&&!e.error?(l(),c("div",Ti,[t[5]||(t[5]=s("h1",null,"üóëÔ∏è –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º",-1)),t[6]||(t[6]=s("p",{class:"description"}," –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º —Å–∏—Å—Ç–µ–º—ã —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è ",-1)),s("div",Mi,[s("span",Ei,[s("strong",null,u(e.totalModules),1),t[2]||(t[2]=J(" –≤—Å–µ–≥–æ –º–æ–¥—É–ª–µ–π ",-1))]),s("span",Di,[s("strong",null,u(e.logicalPrimaryCount),1),t[3]||(t[3]=J(" –æ—Å–Ω–æ–≤–Ω—ã—Ö ",-1))]),s("span",Ii,[s("strong",null,u((e.secondaryModules||[]).length),1),t[4]||(t[4]=J(" –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö ",-1))])])])):x("",!0),!e.loading&&!e.error?(l(),c("div",{key:1,class:U(["cache-section primary-modules",{empty:(e.primaryModules||[]).length===0}])},[s("div",Ai,[t[8]||(t[8]=s("h2",null,"üèÜ –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –∫–µ—à–∞",-1)),s("div",Ui,[s("span",Fi,u(e.logicalPrimaryCount),1),t[7]||(t[7]=s("span",{class:"section-badge primary"},"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç",-1))])]),t[16]||(t[16]=s("p",{class:"section-description"}," 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã: –¥–∞—à–±–æ—Ä–¥ —Å–µ–∫—Ç–æ—Ä–∞ 1–°, –≥—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–∏–µ–º–∞-–∑–∞–∫—Ä—ã—Ç–∏—è –∏ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç–∏–∫–µ—Ç—ã —Å–µ–∫—Ç–æ—Ä–∞ 1–°. ",-1)),(e.primaryModules||[]).length>0?(l(),c("div",Pi,[s("div",Ni,[s("strong",null,"DEBUG: Primary modules loaded: "+u(e.primaryModules.length),1),t[9]||(t[9]=s("br",null,null,-1)),s("strong",null,"Individual modules: "+u(e.individualPrimaryModules.length),1),t[10]||(t[10]=s("br",null,null,-1)),s("strong",null,"Time tracking modules: "+u(e.timeTrackingModules.length),1),t[11]||(t[11]=s("br",null,null,-1)),t[12]||(t[12]=s("strong",null,"IDs:",-1)),J(" "+u(e.primaryModules.map(r=>r.id).join(", ")),1)]),e.individualPrimaryModules.length>0?(l(),c("div",Oi,[s("h4",null,"–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ ("+u(e.individualPrimaryModules.length)+")",1),(l(!0),c(j,null,z(e.individualPrimaryModules,r=>(l(),c("div",{key:r.id,style:{border:"2px solid #007bff",margin:"5px",padding:"10px"}},[s("strong",null,u(r.name),1),J(" ("+u(r.id)+") - Priority: "+u(r.priority)+" ",1),s("button",{onClick:h=>e.handleCreateMock(r),style:{background:"#28a745",color:"white",border:"none",padding:"8px 16px","border-radius":"4px",cursor:"pointer"}}," ‚ûï –°–æ–∑–¥–∞—Ç—å –∫–µ—à ("+u(r.name)+") ",9,Ri),s("button",{onClick:h=>e.handleClearMock(r),style:{background:"#dc3545",color:"white",border:"none",padding:"8px 16px","border-radius":"4px",cursor:"pointer","margin-left":"10px"}}," üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à ("+u(r.name)+") ",9,Wi)]))),128))])):x("",!0),(e.timeTrackingModules||[]).length>0?(l(),c("div",ji,[t[13]||(t[13]=s("h3",{class:"group-title"},"‚è±Ô∏è –¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç–∏–∫–µ—Ç—ã —Å–µ–∫—Ç–æ—Ä–∞ 1–°",-1)),t[14]||(t[14]=s("p",{class:"group-description"},"–ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",-1)),s("div",zi,[s("h4",null,"–ú–æ–¥—É–ª–∏ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç ("+u(e.timeTrackingModules.length)+")",1),(l(!0),c(j,null,z(e.timeTrackingModules,r=>(l(),c("div",{key:r.id,style:{border:"2px solid #28a745",margin:"5px",padding:"10px"}},[s("strong",null,u(r.name),1),J(" ("+u(r.id)+") - Priority: "+u(r.priority)+" ",1),s("button",{onClick:h=>e.handleCreateMock(r),style:{background:"#28a745",color:"white",border:"none",padding:"8px 16px","border-radius":"4px",cursor:"pointer"}}," ‚ûï –°–æ–∑–¥–∞—Ç—å –∫–µ—à ("+u(r.name)+") ",9,Bi),s("button",{onClick:h=>e.handleClearMock(r),style:{background:"#dc3545",color:"white",border:"none",padding:"8px 16px","border-radius":"4px",cursor:"pointer","margin-left":"10px"}}," üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à ("+u(r.name)+") ",9,Vi)]))),128))])])):x("",!0)])):(l(),c("div",Hi,[t[15]||(t[15]=s("p",null,"‚ö†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –∫–µ—à–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)),s("button",{onClick:t[0]||(t[0]=(...r)=>e.refreshModules&&e.refreshModules(...r)),class:"refresh-btn"},"–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫")]))],2)):x("",!0),!e.loading&&!e.error&&(e.secondaryModules||[]).length>0?(l(),c("div",qi,[...t[17]||(t[17]=[lt('<div class="divider-line" data-v-94ddd654></div><div class="divider-content" data-v-94ddd654><span class="divider-icon" data-v-94ddd654>üîß</span><span class="divider-text" data-v-94ddd654>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏</span><span class="divider-subtitle" data-v-94ddd654>–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã</span></div><div class="divider-line" data-v-94ddd654></div>',3)])])):x("",!0),!e.loading&&!e.error&&(e.secondaryModules||[]).length>0?(l(),c("div",$i,[s("div",Ji,[t[19]||(t[19]=s("h2",null,"üîß –ü–æ–±–æ—á–Ω—ã–µ –º–æ–¥—É–ª–∏ –∫–µ—à–∞",-1)),s("div",Yi,[s("span",Ki,u((e.secondaryModules||[]).length),1),t[18]||(t[18]=s("span",{class:"section-badge secondary"},"–°–ª—É–∂–µ–±–Ω—ã–µ",-1))])]),t[20]||(t[20]=s("p",{class:"section-description"}," –ú–æ–¥—É–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã. ",-1)),s("div",Xi,[(l(!0),c(j,null,z(e.groupedSecondaryModules,r=>(l(),c("div",{key:r.type,class:"module-group"},[s("h3",Qi,u(r.title),1),s("div",Gi,[(l(!0),c(j,null,z(r.modules,h=>(l(),G(a,{key:h.id,module:h,"is-primary":!1,"group-type":r.type,onClear:e.handleModuleClear,onRefresh:e.refreshModules},null,8,["module","group-type","onClear","onRefresh"]))),128))])]))),128))])])):x("",!0),e.error?(l(),c("div",Zi,[t[21]||(t[21]=s("h3",null,"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π –∫–µ—à–∞",-1)),s("p",null,u(e.error),1),s("button",{onClick:t[1]||(t[1]=(...r)=>o.loadModules&&o.loadModules(...r)),class:"retry-btn"},"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É")])):x("",!0),e.loading?(l(),c("div",el,[...t[22]||(t[22]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π –∫–µ—à–∞...",-1)])])):x("",!0)])}const sl=P(xi,[["render",tl],["__scopeId","data-v-94ddd654"]]),ol={name:"CacheManagementPage",components:{CacheManagement:sl},beforeCreate(){console.log("[CacheManagementPage] beforeCreate() called")},created(){console.log("[CacheManagementPage] created() called")},beforeMount(){console.log("[CacheManagementPage] beforeMount() called")},setup(){console.log("[CacheManagementPage] setup() called with new hierarchical UI");const o=Le(),t=S(!1),n=S(null),e=()=>{o.push({name:"index"})};return te(()=>{console.log("[CacheManagementPage] onMounted() called - hierarchical cache management ready")}),{loading:t,error:n,goBack:e}}},nl={class:"cache-management-page"},al={class:"page-header"},rl={class:"page-header-top"},il={key:0,class:"loading"},ll={key:1,class:"error"},dl={key:2,class:"cache-content"};function cl(o,t,n,e,i,d){const a=O("CacheManagement");return l(),c("div",nl,[s("div",al,[s("div",rl,[s("button",{onClick:t[0]||(t[0]=(...r)=>e.goBack&&e.goBack(...r)),class:"back-button",title:"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É","aria-label":"–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"},[...t[1]||(t[1]=[s("span",{class:"back-icon","aria-hidden":"true"},"‚Üê",-1),s("span",{class:"back-text"},"–ù–∞–∑–∞–¥",-1)])])]),t[2]||(t[2]=s("h1",null,"üóëÔ∏è –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º",-1))]),e.loading?(l(),c("div",il," –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–µ—à–∞... ")):e.error?(l(),c("div",ll,u(e.error),1)):(l(),c("div",dl,[R(a)]))])}const kl=P(ol,[["render",cl],["__scopeId","data-v-a20ded38"]]);export{kl as C,Cl as U,bl as W,ne as a,Te as b,he as f};
