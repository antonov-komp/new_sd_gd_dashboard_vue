# Устранение проблем с Bitrix24 REST приложением

**Дата создания:** 2025-12-05 (UTC+3, Брест)

## Проблема: 404 ошибка при открытии приложения

### Причины и решения:

#### 1. Проверка URL в настройках Bitrix24

В настройках приложения в Bitrix24 должны быть указаны правильные URL:

**URL установки (Install URL):**
```
https://ваш-домен.com/back/install.php
```

**URL приложения (Application URL):**
```
https://ваш-домен.com/back/index.php
```

**Важно:**
- URL должны быть доступны из интернета (не localhost)
- Должен использоваться HTTPS (или HTTP, если Bitrix24 это разрешает)
- Путь должен быть точным (с учетом подпапок)

#### 2. Проверка установки приложения

Приложение должно быть установлено через `install.php`. После установки должен появиться файл `settings.json`.

**Проверка:**
```bash
ls -la settings.json
```

Если файла нет - установите приложение:
1. Откройте URL установки в браузере
2. Или установите приложение через интерфейс Bitrix24

#### 3. Проверка доступности файлов

**Проверка через curl:**
```bash
curl -I https://ваш-домен.com/back/index.php
```

Должен вернуться HTTP 200, а не 404.

#### 4. Проверка прав доступа

Файлы должны быть доступны веб-серверу:
```bash
chmod 644 *.php
chmod 755 .
```

#### 5. Проверка логов

Проверьте логи приложения:
```bash
ls -la logs/
tail -f logs/2025-12-05/*/latest.log
```

#### 6. Проверка настроек приложения в Bitrix24

В настройках приложения в Bitrix24 проверьте:

1. **Application ID** - должен совпадать с `C_REST_CLIENT_ID` в `settings.php`
2. **Application Secret** - должен совпадать с `C_REST_CLIENT_SECRET` в `settings.php`
3. **Install URL** - должен указывать на `install.php`
4. **Application URL** - должен указывать на `index.php`
5. **Redirect URI** - должен быть указан (обычно тот же, что и Application URL)

### Диагностика через checkserver.php

Откройте в браузере:
```
https://ваш-домен.com/back/checkserver.php
```

Должны быть проверены:
- Наличие библиотеки cURL
- Права на создание файлов
- Права на создание логов

### Типичные ошибки:

1. **404 Not Found**
   - Неправильный URL в настройках Bitrix24
   - Файлы не доступны по указанному пути
   - Проблемы с веб-сервером

2. **"no_install_app"**
   - Приложение не установлено
   - Нет файла `settings.json`
   - Решение: установите через `install.php`

3. **"expired_token"**
   - Токен доступа истек
   - Решение: переустановите приложение

4. **"invalid_token"**
   - Неверный токен
   - Решение: переустановите приложение

### Проверка через тестовый запрос

```bash
curl https://ваш-домен.com/back/index.php
```

Должен вернуть HTML страницу, а не 404.

